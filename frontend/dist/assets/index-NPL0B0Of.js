var lb=n=>{throw TypeError(n)};var Yf=(n,e,t)=>e.has(n)||lb("Cannot "+t);var Et=(n,e,t)=>(Yf(n,e,"read from private field"),t?t.call(n):e.get(n)),zn=(n,e,t)=>e.has(n)?lb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Ps=(n,e,t,s)=>(Yf(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),Fn=(n,e,t)=>(Yf(n,e,"access private method"),t);var ob=(n,e,t,s)=>({set _(r){Ps(n,e,r,t)},get _(){return Et(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function GS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wf={exports:{}},so={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function qS(){if(cb)return so;cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:c,ref:r!==void 0?r:null,props:l}}return so.Fragment=e,so.jsx=t,so.jsxs=t,so}var db;function YS(){return db||(db=1,Wf.exports=qS()),Wf.exports}var a=YS(),Xf={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function WS(){if(ub)return We;ub=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=x&&D[x]||D["@@iterator"],typeof D=="function"?D:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function A(D,M,F){this.props=D,this.context=M,this.refs=w,this.updater=F||v}A.prototype.isReactComponent={},A.prototype.setState=function(D,M){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,M,"setState")},A.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function j(){}j.prototype=A.prototype;function C(D,M,F){this.props=D,this.context=M,this.refs=w,this.updater=F||v}var S=C.prototype=new j;S.constructor=C,N(S,A.prototype),S.isPureReactComponent=!0;var T=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function H(D,M,F,J,me,ce){return F=ce.ref,{$$typeof:n,type:D,key:M,ref:F!==void 0?F:null,props:ce}}function V(D,M){return H(D.type,M,void 0,void 0,void 0,D.props)}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function K(D){var M={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(F){return M[F]})}var z=/\/+/g;function G(D,M){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):M.toString(36)}function Y(){}function de(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(Y,Y):(D.status="pending",D.then(function(M){D.status==="pending"&&(D.status="fulfilled",D.value=M)},function(M){D.status==="pending"&&(D.status="rejected",D.reason=M)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function be(D,M,F,J,me){var ce=typeof D;(ce==="undefined"||ce==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(ce){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case n:case e:ye=!0;break;case p:return ye=D._init,be(ye(D._payload),M,F,J,me)}}if(ye)return me=me(D),ye=J===""?"."+G(D,0):J,T(me)?(F="",ye!=null&&(F=ye.replace(z,"$&/")+"/"),be(me,M,F,"",function(te){return te})):me!=null&&(L(me)&&(me=V(me,F+(me.key==null||D&&D.key===me.key?"":(""+me.key).replace(z,"$&/")+"/")+ye)),M.push(me)),1;ye=0;var Se=J===""?".":J+":";if(T(D))for(var ke=0;ke<D.length;ke++)J=D[ke],ce=Se+G(J,ke),ye+=be(J,M,F,ce,me);else if(ke=y(D),typeof ke=="function")for(D=ke.call(D),ke=0;!(J=D.next()).done;)J=J.value,ce=Se+G(J,ke++),ye+=be(J,M,F,ce,me);else if(ce==="object"){if(typeof D.then=="function")return be(de(D),M,F,J,me);throw M=String(D),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return ye}function I(D,M,F){if(D==null)return D;var J=[],me=0;return be(D,J,"","",function(ce){return M.call(F,ce,me++)}),J}function Z(D){if(D._status===-1){var M=D._result;M=M(),M.then(function(F){(D._status===0||D._status===-1)&&(D._status=1,D._result=F)},function(F){(D._status===0||D._status===-1)&&(D._status=2,D._result=F)}),D._status===-1&&(D._status=0,D._result=M)}if(D._status===1)return D._result.default;throw D._result}var X=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function P(){}return We.Children={map:I,forEach:function(D,M,F){I(D,function(){M.apply(this,arguments)},F)},count:function(D){var M=0;return I(D,function(){M++}),M},toArray:function(D){return I(D,function(M){return M})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},We.Component=A,We.Fragment=t,We.Profiler=r,We.PureComponent=C,We.StrictMode=s,We.Suspense=h,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,We.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},We.cache=function(D){return function(){return D.apply(null,arguments)}},We.cloneElement=function(D,M,F){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var J=N({},D.props),me=D.key,ce=void 0;if(M!=null)for(ye in M.ref!==void 0&&(ce=void 0),M.key!==void 0&&(me=""+M.key),M)!O.call(M,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&M.ref===void 0||(J[ye]=M[ye]);var ye=arguments.length-2;if(ye===1)J.children=F;else if(1<ye){for(var Se=Array(ye),ke=0;ke<ye;ke++)Se[ke]=arguments[ke+2];J.children=Se}return H(D.type,me,void 0,void 0,ce,J)},We.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},We.createElement=function(D,M,F){var J,me={},ce=null;if(M!=null)for(J in M.key!==void 0&&(ce=""+M.key),M)O.call(M,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(me[J]=M[J]);var ye=arguments.length-2;if(ye===1)me.children=F;else if(1<ye){for(var Se=Array(ye),ke=0;ke<ye;ke++)Se[ke]=arguments[ke+2];me.children=Se}if(D&&D.defaultProps)for(J in ye=D.defaultProps,ye)me[J]===void 0&&(me[J]=ye[J]);return H(D,ce,void 0,void 0,null,me)},We.createRef=function(){return{current:null}},We.forwardRef=function(D){return{$$typeof:u,render:D}},We.isValidElement=L,We.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:Z}},We.memo=function(D,M){return{$$typeof:m,type:D,compare:M===void 0?null:M}},We.startTransition=function(D){var M=R.T,F={};R.T=F;try{var J=D(),me=R.S;me!==null&&me(F,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(P,X)}catch(ce){X(ce)}finally{R.T=M}},We.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},We.use=function(D){return R.H.use(D)},We.useActionState=function(D,M,F){return R.H.useActionState(D,M,F)},We.useCallback=function(D,M){return R.H.useCallback(D,M)},We.useContext=function(D){return R.H.useContext(D)},We.useDebugValue=function(){},We.useDeferredValue=function(D,M){return R.H.useDeferredValue(D,M)},We.useEffect=function(D,M,F){var J=R.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(D,M)},We.useId=function(){return R.H.useId()},We.useImperativeHandle=function(D,M,F){return R.H.useImperativeHandle(D,M,F)},We.useInsertionEffect=function(D,M){return R.H.useInsertionEffect(D,M)},We.useLayoutEffect=function(D,M){return R.H.useLayoutEffect(D,M)},We.useMemo=function(D,M){return R.H.useMemo(D,M)},We.useOptimistic=function(D,M){return R.H.useOptimistic(D,M)},We.useReducer=function(D,M,F){return R.H.useReducer(D,M,F)},We.useRef=function(D){return R.H.useRef(D)},We.useState=function(D){return R.H.useState(D)},We.useSyncExternalStore=function(D,M,F){return R.H.useSyncExternalStore(D,M,F)},We.useTransition=function(){return R.H.useTransition()},We.version="19.1.1",We}var hb;function wp(){return hb||(hb=1,Xf.exports=WS()),Xf.exports}var _=wp();const Ao=GS(_);var Qf={exports:{}},no={},Zf={exports:{}},Kf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function XS(){return fb||(fb=1,(function(n){function e(I,Z){var X=I.length;I.push(Z);e:for(;0<X;){var P=X-1>>>1,D=I[P];if(0<r(D,Z))I[P]=Z,I[X]=D,X=P;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var Z=I[0],X=I.pop();if(X!==Z){I[0]=X;e:for(var P=0,D=I.length,M=D>>>1;P<M;){var F=2*(P+1)-1,J=I[F],me=F+1,ce=I[me];if(0>r(J,X))me<D&&0>r(ce,J)?(I[P]=ce,I[me]=X,P=me):(I[P]=J,I[F]=X,P=F);else if(me<D&&0>r(ce,X))I[P]=ce,I[me]=X,P=me;else break e}}return Z}function r(I,Z){var X=I.sortIndex-Z.sortIndex;return X!==0?X:I.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],m=[],p=1,x=null,y=3,v=!1,N=!1,w=!1,A=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function T(I){for(var Z=t(m);Z!==null;){if(Z.callback===null)s(m);else if(Z.startTime<=I)s(m),Z.sortIndex=Z.expirationTime,e(h,Z);else break;Z=t(m)}}function R(I){if(w=!1,T(I),!N)if(t(h)!==null)N=!0,O||(O=!0,G());else{var Z=t(m);Z!==null&&be(R,Z.startTime-I)}}var O=!1,H=-1,V=5,L=-1;function K(){return A?!0:!(n.unstable_now()-L<V)}function z(){if(A=!1,O){var I=n.unstable_now();L=I;var Z=!0;try{e:{N=!1,w&&(w=!1,C(H),H=-1),v=!0;var X=y;try{t:{for(T(I),x=t(h);x!==null&&!(x.expirationTime>I&&K());){var P=x.callback;if(typeof P=="function"){x.callback=null,y=x.priorityLevel;var D=P(x.expirationTime<=I);if(I=n.unstable_now(),typeof D=="function"){x.callback=D,T(I),Z=!0;break t}x===t(h)&&s(h),T(I)}else s(h);x=t(h)}if(x!==null)Z=!0;else{var M=t(m);M!==null&&be(R,M.startTime-I),Z=!1}}break e}finally{x=null,y=X,v=!1}Z=void 0}}finally{Z?G():O=!1}}}var G;if(typeof S=="function")G=function(){S(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,de=Y.port2;Y.port1.onmessage=z,G=function(){de.postMessage(null)}}else G=function(){j(z,0)};function be(I,Z){H=j(function(){I(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(I){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var X=y;y=Z;try{return I()}finally{y=X}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var X=y;y=I;try{return Z()}finally{y=X}},n.unstable_scheduleCallback=function(I,Z,X){var P=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?P+X:P):X=P,I){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=X+D,I={id:p++,callback:Z,priorityLevel:I,startTime:X,expirationTime:D,sortIndex:-1},X>P?(I.sortIndex=X,e(m,I),t(h)===null&&I===t(m)&&(w?(C(H),H=-1):w=!0,be(R,X-P))):(I.sortIndex=D,e(h,I),N||v||(N=!0,O||(O=!0,G()))),I},n.unstable_shouldYield=K,n.unstable_wrapCallback=function(I){var Z=y;return function(){var X=y;y=Z;try{return I.apply(this,arguments)}finally{y=X}}}})(Kf)),Kf}var mb;function QS(){return mb||(mb=1,Zf.exports=XS()),Zf.exports}var Jf={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function ZS(){if(pb)return bs;pb=1;var n=wp();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,m,p){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:h,containerInfo:m,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,bs.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(h,m,null,p)},bs.flushSync=function(h){var m=c.T,p=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=m,s.p=p,s.d.f()}},bs.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(h,m))},bs.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},bs.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,x=u(p,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,v=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?s.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:y,fetchPriority:v}):p==="script"&&s.d.X(h,{crossOrigin:x,integrity:y,fetchPriority:v,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},bs.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=u(m.as,m.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(h)},bs.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,x=u(p,m.crossOrigin);s.d.L(h,p,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},bs.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=u(m.as,m.crossOrigin);s.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(h)},bs.requestFormReset=function(h){s.d.r(h)},bs.unstable_batchedUpdates=function(h,m){return h(m)},bs.useFormState=function(h,m,p){return c.H.useFormState(h,m,p)},bs.useFormStatus=function(){return c.H.useHostTransitionStatus()},bs.version="19.1.1",bs}var gb;function yw(){if(gb)return Jf.exports;gb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jf.exports=ZS(),Jf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xb;function KS(){if(xb)return no;xb=1;var n=QS(),e=wp(),t=yw();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,d=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(d=o.return),i=o.return;while(i)}return o.tag===3?d:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(l(i)!==i)throw Error(s(188))}function h(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var d=i,f=o;;){var g=d.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===d)return u(g),i;if(b===f)return u(g),o;b=b.sibling}throw Error(s(188))}if(d.return!==f.return)d=g,f=b;else{for(var E=!1,k=g.child;k;){if(k===d){E=!0,d=g,f=b;break}if(k===f){E=!0,f=g,d=b;break}k=k.sibling}if(!E){for(k=b.child;k;){if(k===d){E=!0,d=b,f=g;break}if(k===f){E=!0,f=b,d=g;break}k=k.sibling}if(!E)throw Error(s(189))}}if(d.alternate!==f)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=z&&i[z]||i["@@iterator"],typeof i=="function"?i:null)}var Y=Symbol.for("react.client.reference");function de(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Y?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case A:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case O:return"SuspenseList";case L:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case S:return(i.displayName||"Context")+".Provider";case C:return(i._context.displayName||"Context")+".Consumer";case T:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case H:return o=i.displayName||null,o!==null?o:de(i.type)||"Memo";case V:o=i._payload,i=i._init;try{return de(i(o))}catch{}}return null}var be=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},P=[],D=-1;function M(i){return{current:i}}function F(i){0>D||(i.current=P[D],P[D]=null,D--)}function J(i,o){D++,P[D]=i.current,i.current=o}var me=M(null),ce=M(null),ye=M(null),Se=M(null);function ke(i,o){switch(J(ye,o),J(ce,i),J(me,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Oy(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Oy(o),i=Py(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}F(me),J(me,i)}function te(){F(me),F(ce),F(ye)}function Ue(i){i.memoizedState!==null&&J(Se,i);var o=me.current,d=Py(o,i.type);o!==d&&(J(ce,i),J(me,d))}function Ge(i){ce.current===i&&(F(me),F(ce)),Se.current===i&&(F(Se),Zl._currentValue=X)}var ft=Object.prototype.hasOwnProperty,ve=n.unstable_scheduleCallback,W=n.unstable_cancelCallback,he=n.unstable_shouldYield,ge=n.unstable_requestPaint,Ee=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,$=n.unstable_ImmediatePriority,Ne=n.unstable_UserBlockingPriority,De=n.unstable_NormalPriority,qe=n.unstable_LowPriority,xt=n.unstable_IdlePriority,Bt=n.log,re=n.unstable_setDisableYieldValue,Ae=null,je=null;function Fe(i){if(typeof Bt=="function"&&re(i),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Ae,i)}catch{}}var lt=Math.clz32?Math.clz32:Rt,Ht=Math.log,Mn=Math.LN2;function Rt(i){return i>>>=0,i===0?32:31-(Ht(i)/Mn|0)|0}var an=256,Vs=4194304;function As(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function xn(i,o,d){var f=i.pendingLanes;if(f===0)return 0;var g=0,b=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var k=f&134217727;return k!==0?(f=k&~b,f!==0?g=As(f):(E&=k,E!==0?g=As(E):d||(d=k&~i,d!==0&&(g=As(d))))):(k=f&~b,k!==0?g=As(k):E!==0?g=As(E):d||(d=f&~i,d!==0&&(g=As(d)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,d=o&-o,b>=d||b===32&&(d&4194048)!==0)?o:g}function Gs(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Na(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function li(){var i=an;return an<<=1,(an&4194048)===0&&(an=256),i}function qs(){var i=Vs;return Vs<<=1,(Vs&62914560)===0&&(Vs=4194304),i}function Aa(i){for(var o=[],d=0;31>d;d++)o.push(i);return o}function js(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function er(i,o,d,f,g,b){var E=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var k=i.entanglements,B=i.expirationTimes,se=i.hiddenUpdates;for(d=E&~d;0<d;){var ue=31-lt(d),pe=1<<ue;k[ue]=0,B[ue]=-1;var ne=se[ue];if(ne!==null)for(se[ue]=null,ue=0;ue<ne.length;ue++){var ae=ne[ue];ae!==null&&(ae.lane&=-536870913)}d&=~pe}f!==0&&Hu(i,f,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(E&~o))}function Hu(i,o,d){i.pendingLanes|=o,i.suspendedLanes&=~o;var f=31-lt(o);i.entangledLanes|=o,i.entanglements[f]=i.entanglements[f]|1073741824|d&4194090}function oi(i,o){var d=i.entangledLanes|=o;for(i=i.entanglements;d;){var f=31-lt(d),g=1<<f;g&o|i[f]&o&&(i[f]|=o),d&=~g}}function U(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function we(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function _e(){var i=Z.p;return i!==0?i:(i=window.event,i===void 0?32:tb(i.type))}function Ie(i,o){var d=Z.p;try{return Z.p=i,o()}finally{Z.p=d}}var dt=Math.random().toString(36).slice(2),it="__reactFiber$"+dt,Ze="__reactProps$"+dt,ts="__reactContainer$"+dt,Zt="__reactEvents$"+dt,Ss="__reactListeners$"+dt,Ys="__reactHandles$"+dt,Rs="__reactResources$"+dt,yn="__reactMarker$"+dt;function xs(i){delete i[it],delete i[Ze],delete i[Zt],delete i[Ss],delete i[Ys]}function bn(i){var o=i[it];if(o)return o;for(var d=i.parentNode;d;){if(o=d[ts]||d[it]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(i=zy(i);i!==null;){if(d=i[it])return d;i=zy(i)}return o}i=d,d=i.parentNode}return null}function Ln(i){if(i=i[it]||i[ts]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function ja(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function tr(i){var o=i[Rs];return o||(o=i[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ss(i){i[yn]=!0}var jg=new Set,Sg={};function ci(i,o){sr(i,o),sr(i+"Capture",o)}function sr(i,o){for(Sg[i]=o,i=0;i<o.length;i++)jg.add(o[i])}var IA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Eg={},_g={};function BA(i){return ft.call(_g,i)?!0:ft.call(Eg,i)?!1:IA.test(i)?_g[i]=!0:(Eg[i]=!0,!1)}function Ko(i,o,d){if(BA(o))if(d===null)i.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+d)}}function Jo(i,o,d){if(d===null)i.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+d)}}function Zn(i,o,d,f){if(f===null)i.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(o,d,""+f)}}var zu,Cg;function nr(i){if(zu===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);zu=o&&o[1]||"",Cg=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zu+i+Cg}var Fu=!1;function Uu(i,o){if(!i||Fu)return"";Fu=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var ne=ae}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(ae){ne=ae}i.call(pe.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],k=b[1];if(E&&k){var B=E.split(`
`),se=k.split(`
`);for(g=f=0;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;for(;g<se.length&&!se[g].includes("DetermineComponentFrameRoot");)g++;if(f===B.length||g===se.length)for(f=B.length-1,g=se.length-1;1<=f&&0<=g&&B[f]!==se[g];)g--;for(;1<=f&&0<=g;f--,g--)if(B[f]!==se[g]){if(f!==1||g!==1)do if(f--,g--,0>g||B[f]!==se[g]){var ue=`
`+B[f].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=f&&0<=g);break}}}finally{Fu=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?nr(d):""}function HA(i){switch(i.tag){case 26:case 27:case 5:return nr(i.type);case 16:return nr("Lazy");case 13:return nr("Suspense");case 19:return nr("SuspenseList");case 0:case 15:return Uu(i.type,!1);case 11:return Uu(i.type.render,!1);case 1:return Uu(i.type,!0);case 31:return nr("Activity");default:return""}}function Tg(i){try{var o="";do o+=HA(i),i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Dg(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function zA(i){var o=Dg(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){f=""+E,b.call(this,E)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ec(i){i._valueTracker||(i._valueTracker=zA(i))}function Rg(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var d=o.getValue(),f="";return i&&(f=Dg(i)?i.checked?"true":"false":i.value),i=f,i!==d?(o.setValue(i),!0):!1}function tc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var FA=/[\n"\\]/g;function ln(i){return i.replace(FA,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function $u(i,o,d,f,g,b,E,k){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),o!=null?E==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+rn(o)):i.value!==""+rn(o)&&(i.value=""+rn(o)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),o!=null?Vu(i,E,rn(o)):d!=null?Vu(i,E,rn(d)):f!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?i.name=""+rn(k):i.removeAttribute("name")}function kg(i,o,d,f,g,b,E,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),o!=null||d!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;d=d!=null?""+rn(d):"",o=o!=null?""+rn(o):d,k||o===i.value||(i.value=o),i.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=k?i.checked:!!f,i.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function Vu(i,o,d){o==="number"&&tc(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function ar(i,o,d,f){if(i=i.options,o){o={};for(var g=0;g<d.length;g++)o["$"+d[g]]=!0;for(d=0;d<i.length;d++)g=o.hasOwnProperty("$"+i[d].value),i[d].selected!==g&&(i[d].selected=g),g&&f&&(i[d].defaultSelected=!0)}else{for(d=""+rn(d),o=null,g=0;g<i.length;g++){if(i[g].value===d){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Mg(i,o,d){if(o!=null&&(o=""+rn(o),o!==i.value&&(i.value=o),d==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=d!=null?""+rn(d):""}function Lg(i,o,d,f){if(o==null){if(f!=null){if(d!=null)throw Error(s(92));if(be(f)){if(1<f.length)throw Error(s(93));f=f[0]}d=f}d==null&&(d=""),o=d}d=rn(o),i.defaultValue=d,f=i.textContent,f===d&&f!==""&&f!==null&&(i.value=f)}function ir(i,o){if(o){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=o;return}}i.textContent=o}var UA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Og(i,o,d){var f=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?f?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":f?i.setProperty(o,d):typeof d!="number"||d===0||UA.has(o)?o==="float"?i.cssFloat=d:i[o]=(""+d).trim():i[o]=d+"px"}function Pg(i,o,d){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,d!=null){for(var f in d)!d.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&d[g]!==f&&Og(i,g,f)}else for(var b in o)o.hasOwnProperty(b)&&Og(i,b,o[b])}function Gu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $A=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sc(i){return VA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var qu=null;function Yu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var rr=null,lr=null;function Ig(i){var o=Ln(i);if(o&&(i=o.stateNode)){var d=i[Ze]||null;e:switch(i=o.stateNode,o.type){case"input":if($u(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+ln(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var f=d[o];if(f!==i&&f.form===i.form){var g=f[Ze]||null;if(!g)throw Error(s(90));$u(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<d.length;o++)f=d[o],f.form===i.form&&Rg(f)}break e;case"textarea":Mg(i,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&ar(i,!!d.multiple,o,!1)}}}var Wu=!1;function Bg(i,o,d){if(Wu)return i(o,d);Wu=!0;try{var f=i(o);return f}finally{if(Wu=!1,(rr!==null||lr!==null)&&(Fc(),rr&&(o=rr,i=lr,lr=rr=null,Ig(o),i)))for(o=0;o<i.length;o++)Ig(i[o])}}function dl(i,o){var d=i.stateNode;if(d===null)return null;var f=d[Ze]||null;if(f===null)return null;d=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(s(231,o,typeof d));return d}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xu=!1;if(Kn)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Xu=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Xu=!1}var Sa=null,Qu=null,nc=null;function Hg(){if(nc)return nc;var i,o=Qu,d=o.length,f,g="value"in Sa?Sa.value:Sa.textContent,b=g.length;for(i=0;i<d&&o[i]===g[i];i++);var E=d-i;for(f=1;f<=E&&o[d-f]===g[b-f];f++);return nc=g.slice(i,1<f?1-f:void 0)}function ac(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ic(){return!0}function zg(){return!1}function ks(i){function o(d,f,g,b,E){this._reactName=d,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var k in i)i.hasOwnProperty(k)&&(d=i[k],this[k]=d?d(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ic:zg,this.isPropagationStopped=zg,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),o}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=ks(di),hl=p({},di,{view:0,detail:0}),GA=ks(hl),Zu,Ku,fl,lc=p({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fl&&(fl&&i.type==="mousemove"?(Zu=i.screenX-fl.screenX,Ku=i.screenY-fl.screenY):Ku=Zu=0,fl=i),Zu)},movementY:function(i){return"movementY"in i?i.movementY:Ku}}),Fg=ks(lc),qA=p({},lc,{dataTransfer:0}),YA=ks(qA),WA=p({},hl,{relatedTarget:0}),Ju=ks(WA),XA=p({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),QA=ks(XA),ZA=p({},di,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),KA=ks(ZA),JA=p({},di,{data:0}),Ug=ks(JA),ej={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nj(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=sj[i])?!!o[i]:!1}function eh(){return nj}var aj=p({},hl,{key:function(i){if(i.key){var o=ej[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ac(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tj[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eh,charCode:function(i){return i.type==="keypress"?ac(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ac(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ij=ks(aj),rj=p({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$g=ks(rj),lj=p({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eh}),oj=ks(lj),cj=p({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),dj=ks(cj),uj=p({},lc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),hj=ks(uj),fj=p({},di,{newState:0,oldState:0}),mj=ks(fj),pj=[9,13,27,32],th=Kn&&"CompositionEvent"in window,ml=null;Kn&&"documentMode"in document&&(ml=document.documentMode);var gj=Kn&&"TextEvent"in window&&!ml,Vg=Kn&&(!th||ml&&8<ml&&11>=ml),Gg=" ",qg=!1;function Yg(i,o){switch(i){case"keyup":return pj.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wg(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var or=!1;function xj(i,o){switch(i){case"compositionend":return Wg(o);case"keypress":return o.which!==32?null:(qg=!0,Gg);case"textInput":return i=o.data,i===Gg&&qg?null:i;default:return null}}function yj(i,o){if(or)return i==="compositionend"||!th&&Yg(i,o)?(i=Hg(),nc=Qu=Sa=null,or=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vg&&o.locale!=="ko"?null:o.data;default:return null}}var bj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xg(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!bj[i.type]:o==="textarea"}function Qg(i,o,d,f){rr?lr?lr.push(f):lr=[f]:rr=f,o=Yc(o,"onChange"),0<o.length&&(d=new rc("onChange","change",null,d,f),i.push({event:d,listeners:o}))}var pl=null,gl=null;function vj(i){Dy(i,0)}function oc(i){var o=ja(i);if(Rg(o))return i}function Zg(i,o){if(i==="change")return o}var Kg=!1;if(Kn){var sh;if(Kn){var nh="oninput"in document;if(!nh){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),nh=typeof Jg.oninput=="function"}sh=nh}else sh=!1;Kg=sh&&(!document.documentMode||9<document.documentMode)}function ex(){pl&&(pl.detachEvent("onpropertychange",tx),gl=pl=null)}function tx(i){if(i.propertyName==="value"&&oc(gl)){var o=[];Qg(o,gl,i,Yu(i)),Bg(vj,o)}}function wj(i,o,d){i==="focusin"?(ex(),pl=o,gl=d,pl.attachEvent("onpropertychange",tx)):i==="focusout"&&ex()}function Nj(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return oc(gl)}function Aj(i,o){if(i==="click")return oc(o)}function jj(i,o){if(i==="input"||i==="change")return oc(o)}function Sj(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ws=typeof Object.is=="function"?Object.is:Sj;function xl(i,o){if(Ws(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var d=Object.keys(i),f=Object.keys(o);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!ft.call(o,g)||!Ws(i[g],o[g]))return!1}return!0}function sx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function nx(i,o){var d=sx(i);i=0;for(var f;d;){if(d.nodeType===3){if(f=i+d.textContent.length,i<=o&&f>=o)return{node:d,offset:o-i};i=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=sx(d)}}function ax(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ax(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ix(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=tc(i.document);o instanceof i.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)i=o.contentWindow;else break;o=tc(i.document)}return o}function ah(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Ej=Kn&&"documentMode"in document&&11>=document.documentMode,cr=null,ih=null,yl=null,rh=!1;function rx(i,o,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;rh||cr==null||cr!==tc(f)||(f=cr,"selectionStart"in f&&ah(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),yl&&xl(yl,f)||(yl=f,f=Yc(ih,"onSelect"),0<f.length&&(o=new rc("onSelect","select",null,o,d),i.push({event:o,listeners:f}),o.target=cr)))}function ui(i,o){var d={};return d[i.toLowerCase()]=o.toLowerCase(),d["Webkit"+i]="webkit"+o,d["Moz"+i]="moz"+o,d}var dr={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionrun:ui("Transition","TransitionRun"),transitionstart:ui("Transition","TransitionStart"),transitioncancel:ui("Transition","TransitionCancel"),transitionend:ui("Transition","TransitionEnd")},lh={},lx={};Kn&&(lx=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function hi(i){if(lh[i])return lh[i];if(!dr[i])return i;var o=dr[i],d;for(d in o)if(o.hasOwnProperty(d)&&d in lx)return lh[i]=o[d];return i}var ox=hi("animationend"),cx=hi("animationiteration"),dx=hi("animationstart"),_j=hi("transitionrun"),Cj=hi("transitionstart"),Tj=hi("transitioncancel"),ux=hi("transitionend"),hx=new Map,oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oh.push("scrollEnd");function vn(i,o){hx.set(i,o),ci(o,[i])}var fx=new WeakMap;function on(i,o){if(typeof i=="object"&&i!==null){var d=fx.get(i);return d!==void 0?d:(o={value:i,source:o,stack:Tg(o)},fx.set(i,o),o)}return{value:i,source:o,stack:Tg(o)}}var cn=[],ur=0,ch=0;function cc(){for(var i=ur,o=ch=ur=0;o<i;){var d=cn[o];cn[o++]=null;var f=cn[o];cn[o++]=null;var g=cn[o];cn[o++]=null;var b=cn[o];if(cn[o++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}b!==0&&mx(d,g,b)}}function dc(i,o,d,f){cn[ur++]=i,cn[ur++]=o,cn[ur++]=d,cn[ur++]=f,ch|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function dh(i,o,d,f){return dc(i,o,d,f),uc(i)}function hr(i,o){return dc(i,null,null,o),uc(i)}function mx(i,o,d){i.lanes|=d;var f=i.alternate;f!==null&&(f.lanes|=d);for(var g=!1,b=i.return;b!==null;)b.childLanes|=d,f=b.alternate,f!==null&&(f.childLanes|=d),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&o!==null&&(g=31-lt(d),i=b.hiddenUpdates,f=i[g],f===null?i[g]=[o]:f.push(o),o.lane=d|536870912),b):null}function uc(i){if(50<$l)throw $l=0,xf=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var fr={};function Dj(i,o,d,f){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(i,o,d,f){return new Dj(i,o,d,f)}function uh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Jn(i,o){var d=i.alternate;return d===null?(d=Xs(i.tag,o,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=o,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,o=i.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function px(i,o){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,o=d.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function hc(i,o,d,f,g,b){var E=0;if(f=i,typeof i=="function")uh(i)&&(E=1);else if(typeof i=="string")E=kS(i,d,me.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case L:return i=Xs(31,d,o,g),i.elementType=L,i.lanes=b,i;case N:return fi(d.children,g,b,o);case w:E=8,g|=24;break;case A:return i=Xs(12,d,o,g|2),i.elementType=A,i.lanes=b,i;case R:return i=Xs(13,d,o,g),i.elementType=R,i.lanes=b,i;case O:return i=Xs(19,d,o,g),i.elementType=O,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case S:E=10;break e;case C:E=9;break e;case T:E=11;break e;case H:E=14;break e;case V:E=16,f=null;break e}E=29,d=Error(s(130,i===null?"null":typeof i,"")),f=null}return o=Xs(E,d,o,g),o.elementType=i,o.type=f,o.lanes=b,o}function fi(i,o,d,f){return i=Xs(7,i,f,o),i.lanes=d,i}function hh(i,o,d){return i=Xs(6,i,null,o),i.lanes=d,i}function fh(i,o,d){return o=Xs(4,i.children!==null?i.children:[],i.key,o),o.lanes=d,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var mr=[],pr=0,fc=null,mc=0,dn=[],un=0,mi=null,ea=1,ta="";function pi(i,o){mr[pr++]=mc,mr[pr++]=fc,fc=i,mc=o}function gx(i,o,d){dn[un++]=ea,dn[un++]=ta,dn[un++]=mi,mi=i;var f=ea;i=ta;var g=32-lt(f)-1;f&=~(1<<g),d+=1;var b=32-lt(o)+g;if(30<b){var E=g-g%5;b=(f&(1<<E)-1).toString(32),f>>=E,g-=E,ea=1<<32-lt(o)+g|d<<g|f,ta=b+i}else ea=1<<b|d<<g|f,ta=i}function mh(i){i.return!==null&&(pi(i,1),gx(i,1,0))}function ph(i){for(;i===fc;)fc=mr[--pr],mr[pr]=null,mc=mr[--pr],mr[pr]=null;for(;i===mi;)mi=dn[--un],dn[un]=null,ta=dn[--un],dn[un]=null,ea=dn[--un],dn[un]=null}var Es=null,Ot=null,ut=!1,gi=null,On=!1,gh=Error(s(519));function xi(i){var o=Error(s(418,""));throw wl(on(o,i)),gh}function xx(i){var o=i.stateNode,d=i.type,f=i.memoizedProps;switch(o[it]=i,o[Ze]=f,d){case"dialog":tt("cancel",o),tt("close",o);break;case"iframe":case"object":case"embed":tt("load",o);break;case"video":case"audio":for(d=0;d<Gl.length;d++)tt(Gl[d],o);break;case"source":tt("error",o);break;case"img":case"image":case"link":tt("error",o),tt("load",o);break;case"details":tt("toggle",o);break;case"input":tt("invalid",o),kg(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ec(o);break;case"select":tt("invalid",o);break;case"textarea":tt("invalid",o),Lg(o,f.value,f.defaultValue,f.children),ec(o)}d=f.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||f.suppressHydrationWarning===!0||Ly(o.textContent,d)?(f.popover!=null&&(tt("beforetoggle",o),tt("toggle",o)),f.onScroll!=null&&tt("scroll",o),f.onScrollEnd!=null&&tt("scrollend",o),f.onClick!=null&&(o.onclick=Wc),o=!0):o=!1,o||xi(i)}function yx(i){for(Es=i.return;Es;)switch(Es.tag){case 5:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Es=Es.return}}function bl(i){if(i!==Es)return!1;if(!ut)return yx(i),ut=!0,!1;var o=i.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||Mf(i.type,i.memoizedProps)),d=!d),d&&Ot&&xi(i),yx(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(d=i.data,d==="/$"){if(o===0){Ot=Nn(i.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++;i=i.nextSibling}Ot=null}}else o===27?(o=Ot,Fa(i.type)?(i=If,If=null,Ot=i):Ot=o):Ot=Es?Nn(i.stateNode.nextSibling):null;return!0}function vl(){Ot=Es=null,ut=!1}function bx(){var i=gi;return i!==null&&(Os===null?Os=i:Os.push.apply(Os,i),gi=null),i}function wl(i){gi===null?gi=[i]:gi.push(i)}var xh=M(null),yi=null,sa=null;function Ea(i,o,d){J(xh,o._currentValue),o._currentValue=d}function na(i){i._currentValue=xh.current,F(xh)}function yh(i,o,d){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===d)break;i=i.return}}function bh(i,o,d,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=g;for(var B=0;B<o.length;B++)if(k.context===o[B]){b.lanes|=d,k=b.alternate,k!==null&&(k.lanes|=d),yh(b.return,d,i),f||(E=null);break e}b=k.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(s(341));E.lanes|=d,b=E.alternate,b!==null&&(b.lanes|=d),yh(E,d,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Nl(i,o,d,f){i=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var k=g.type;Ws(g.pendingProps.value,E.value)||(i!==null?i.push(k):i=[k])}}else if(g===Se.current){if(E=g.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Zl):i=[Zl])}g=g.return}i!==null&&bh(o,i,d,f),o.flags|=262144}function pc(i){for(i=i.firstContext;i!==null;){if(!Ws(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function bi(i){yi=i,sa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ys(i){return vx(yi,i)}function gc(i,o){return yi===null&&bi(i),vx(i,o)}function vx(i,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},sa===null){if(i===null)throw Error(s(308));sa=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else sa=sa.next=o;return d}var Rj=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(d,f){i.push(f)}};this.abort=function(){o.aborted=!0,i.forEach(function(d){return d()})}},kj=n.unstable_scheduleCallback,Mj=n.unstable_NormalPriority,Kt={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vh(){return{controller:new Rj,data:new Map,refCount:0}}function Al(i){i.refCount--,i.refCount===0&&kj(Mj,function(){i.controller.abort()})}var jl=null,wh=0,gr=0,xr=null;function Lj(i,o){if(jl===null){var d=jl=[];wh=0,gr=jf(),xr={status:"pending",value:void 0,then:function(f){d.push(f)}}}return wh++,o.then(wx,wx),o}function wx(){if(--wh===0&&jl!==null){xr!==null&&(xr.status="fulfilled");var i=jl;jl=null,gr=0,xr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Oj(i,o){var d=[],f={status:"pending",value:null,reason:null,then:function(g){d.push(g)}};return i.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<d.length;g++)(0,d[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<d.length;g++)(0,d[g])(void 0)}),f}var Nx=I.S;I.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Lj(i,o),Nx!==null&&Nx(i,o)};var vi=M(null);function Nh(){var i=vi.current;return i!==null?i:jt.pooledCache}function xc(i,o){o===null?J(vi,vi.current):J(vi,o.pool)}function Ax(){var i=Nh();return i===null?null:{parent:Kt._currentValue,pool:i}}var Sl=Error(s(460)),jx=Error(s(474)),yc=Error(s(542)),Ah={then:function(){}};function Sx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function bc(){}function Ex(i,o,d){switch(d=i[d],d===void 0?i.push(o):d!==o&&(o.then(bc,bc),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Cx(i),i;default:if(typeof o.status=="string")o.then(bc,bc);else{if(i=jt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Cx(i),i}throw El=o,Sl}}var El=null;function _x(){if(El===null)throw Error(s(459));var i=El;return El=null,i}function Cx(i){if(i===Sl||i===yc)throw Error(s(483))}var _a=!1;function jh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sh(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ca(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ta(i,o,d){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(mt&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=uc(i),mx(i,null,d),o}return dc(i,f,o,d),uc(i)}function _l(i,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var f=o.lanes;f&=i.pendingLanes,d|=f,o.lanes=d,oi(i,d)}}function Eh(i,o){var d=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var E={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,d=d.next}while(d!==null);b===null?g=b=o:b=b.next=o}else g=b=o;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=o:i.next=o,d.lastBaseUpdate=o}var _h=!1;function Cl(){if(_h){var i=xr;if(i!==null)throw i}}function Tl(i,o,d,f){_h=!1;var g=i.updateQueue;_a=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var B=k,se=B.next;B.next=null,E===null?b=se:E.next=se,E=B;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,k=ue.lastBaseUpdate,k!==E&&(k===null?ue.firstBaseUpdate=se:k.next=se,ue.lastBaseUpdate=B))}if(b!==null){var pe=g.baseState;E=0,ue=se=B=null,k=b;do{var ne=k.lane&-536870913,ae=ne!==k.lane;if(ae?(rt&ne)===ne:(f&ne)===ne){ne!==0&&ne===gr&&(_h=!0),ue!==null&&(ue=ue.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ze=i,Pe=k;ne=o;var vt=d;switch(Pe.tag){case 1:if(ze=Pe.payload,typeof ze=="function"){pe=ze.call(vt,pe,ne);break e}pe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Pe.payload,ne=typeof ze=="function"?ze.call(vt,pe,ne):ze,ne==null)break e;pe=p({},pe,ne);break e;case 2:_a=!0}}ne=k.callback,ne!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ue===null?(se=ue=ae,B=pe):ue=ue.next=ae,E|=ne;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ae=k,k=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);ue===null&&(B=pe),g.baseState=B,g.firstBaseUpdate=se,g.lastBaseUpdate=ue,b===null&&(g.shared.lanes=0),Ia|=E,i.lanes=E,i.memoizedState=pe}}function Tx(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Dx(i,o){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)Tx(d[i],o)}var yr=M(null),vc=M(0);function Rx(i,o){i=da,J(vc,i),J(yr,o),da=i|o.baseLanes}function Ch(){J(vc,da),J(yr,yr.current)}function Th(){da=vc.current,F(yr),F(vc)}var Da=0,Ke=null,yt=null,Gt=null,wc=!1,br=!1,wi=!1,Nc=0,Dl=0,vr=null,Pj=0;function zt(){throw Error(s(321))}function Dh(i,o){if(o===null)return!1;for(var d=0;d<o.length&&d<i.length;d++)if(!Ws(i[d],o[d]))return!1;return!0}function Rh(i,o,d,f,g,b){return Da=b,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=i===null||i.memoizedState===null?m0:p0,wi=!1,b=d(f,g),wi=!1,br&&(b=Mx(o,d,f,g)),kx(i),b}function kx(i){I.H=Cc;var o=yt!==null&&yt.next!==null;if(Da=0,Gt=yt=Ke=null,wc=!1,Dl=0,vr=null,o)throw Error(s(300));i===null||ns||(i=i.dependencies,i!==null&&pc(i)&&(ns=!0))}function Mx(i,o,d,f){Ke=i;var g=0;do{if(br&&(vr=null),Dl=0,br=!1,25<=g)throw Error(s(301));if(g+=1,Gt=yt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}I.H=$j,b=o(d,f)}while(br);return b}function Ij(){var i=I.H,o=i.useState()[0];return o=typeof o.then=="function"?Rl(o):o,i=i.useState()[0],(yt!==null?yt.memoizedState:null)!==i&&(Ke.flags|=1024),o}function kh(){var i=Nc!==0;return Nc=0,i}function Mh(i,o,d){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~d}function Lh(i){if(wc){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}wc=!1}Da=0,Gt=yt=Ke=null,br=!1,Dl=Nc=0,vr=null}function Ms(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ke.memoizedState=Gt=i:Gt=Gt.next=i,Gt}function qt(){if(yt===null){var i=Ke.alternate;i=i!==null?i.memoizedState:null}else i=yt.next;var o=Gt===null?Ke.memoizedState:Gt.next;if(o!==null)Gt=o,yt=i;else{if(i===null)throw Ke.alternate===null?Error(s(467)):Error(s(310));yt=i,i={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Gt===null?Ke.memoizedState=Gt=i:Gt=Gt.next=i}return Gt}function Oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(i){var o=Dl;return Dl+=1,vr===null&&(vr=[]),i=Ex(vr,i,o),o=Ke,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?m0:p0),i}function Ac(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Rl(i);if(i.$$typeof===S)return ys(i)}throw Error(s(438,String(i)))}function Ph(i){var o=null,d=Ke.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var f=Ke.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=Oh(),Ke.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(i),f=0;f<i;f++)d[f]=K;return o.index++,d}function aa(i,o){return typeof o=="function"?o(i):o}function jc(i){var o=qt();return Ih(o,yt,i)}function Ih(i,o,d){var f=i.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=d;var g=i.baseQueue,b=f.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}o.baseQueue=g=b,f.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{o=g.next;var k=E=null,B=null,se=o,ue=!1;do{var pe=se.lane&-536870913;if(pe!==se.lane?(rt&pe)===pe:(Da&pe)===pe){var ne=se.revertLane;if(ne===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),pe===gr&&(ue=!0);else if((Da&ne)===ne){se=se.next,ne===gr&&(ue=!0);continue}else pe={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},B===null?(k=B=pe,E=b):B=B.next=pe,Ke.lanes|=ne,Ia|=ne;pe=se.action,wi&&d(b,pe),b=se.hasEagerState?se.eagerState:d(b,pe)}else ne={lane:pe,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},B===null?(k=B=ne,E=b):B=B.next=ne,Ke.lanes|=pe,Ia|=pe;se=se.next}while(se!==null&&se!==o);if(B===null?E=b:B.next=k,!Ws(b,i.memoizedState)&&(ns=!0,ue&&(d=xr,d!==null)))throw d;i.memoizedState=b,i.baseState=E,i.baseQueue=B,f.lastRenderedState=b}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Bh(i){var o=qt(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=i;var f=d.dispatch,g=d.pending,b=o.memoizedState;if(g!==null){d.pending=null;var E=g=g.next;do b=i(b,E.action),E=E.next;while(E!==g);Ws(b,o.memoizedState)||(ns=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),d.lastRenderedState=b}return[b,f]}function Lx(i,o,d){var f=Ke,g=qt(),b=ut;if(b){if(d===void 0)throw Error(s(407));d=d()}else d=o();var E=!Ws((yt||g).memoizedState,d);E&&(g.memoizedState=d,ns=!0),g=g.queue;var k=Ix.bind(null,f,g,i);if(kl(2048,8,k,[i]),g.getSnapshot!==o||E||Gt!==null&&Gt.memoizedState.tag&1){if(f.flags|=2048,wr(9,Sc(),Px.bind(null,f,g,d,o),null),jt===null)throw Error(s(349));b||(Da&124)!==0||Ox(f,o,d)}return d}function Ox(i,o,d){i.flags|=16384,i={getSnapshot:o,value:d},o=Ke.updateQueue,o===null?(o=Oh(),Ke.updateQueue=o,o.stores=[i]):(d=o.stores,d===null?o.stores=[i]:d.push(i))}function Px(i,o,d,f){o.value=d,o.getSnapshot=f,Bx(o)&&Hx(i)}function Ix(i,o,d){return d(function(){Bx(o)&&Hx(i)})}function Bx(i){var o=i.getSnapshot;i=i.value;try{var d=o();return!Ws(i,d)}catch{return!0}}function Hx(i){var o=hr(i,2);o!==null&&en(o,i,2)}function Hh(i){var o=Ms();if(typeof i=="function"){var d=i;if(i=d(),wi){Fe(!0);try{d()}finally{Fe(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:i},o}function zx(i,o,d,f){return i.baseState=d,Ih(i,yt,typeof f=="function"?f:aa)}function Bj(i,o,d,f,g){if(_c(i))throw Error(s(485));if(i=o.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};I.T!==null?d(!0):b.isTransition=!1,f(b),d=o.pending,d===null?(b.next=o.pending=b,Fx(o,b)):(b.next=d.next,o.pending=d.next=b)}}function Fx(i,o){var d=o.action,f=o.payload,g=i.state;if(o.isTransition){var b=I.T,E={};I.T=E;try{var k=d(g,f),B=I.S;B!==null&&B(E,k),Ux(i,o,k)}catch(se){zh(i,o,se)}finally{I.T=b}}else try{b=d(g,f),Ux(i,o,b)}catch(se){zh(i,o,se)}}function Ux(i,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(f){$x(i,o,f)},function(f){return zh(i,o,f)}):$x(i,o,d)}function $x(i,o,d){o.status="fulfilled",o.value=d,Vx(o),i.state=d,o=i.pending,o!==null&&(d=o.next,d===o?i.pending=null:(d=d.next,o.next=d,Fx(i,d)))}function zh(i,o,d){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=d,Vx(o),o=o.next;while(o!==f)}i.action=null}function Vx(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Gx(i,o){return o}function qx(i,o){if(ut){var d=jt.formState;if(d!==null){e:{var f=Ke;if(ut){if(Ot){t:{for(var g=Ot,b=On;g.nodeType!==8;){if(!b){g=null;break t}if(g=Nn(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Ot=Nn(g.nextSibling),f=g.data==="F!";break e}}xi(f)}f=!1}f&&(o=d[0])}}return d=Ms(),d.memoizedState=d.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gx,lastRenderedState:o},d.queue=f,d=u0.bind(null,Ke,f),f.dispatch=d,f=Hh(!1),b=Gh.bind(null,Ke,!1,f.queue),f=Ms(),g={state:o,dispatch:null,action:i,pending:null},f.queue=g,d=Bj.bind(null,Ke,g,b,d),g.dispatch=d,f.memoizedState=i,[o,d,!1]}function Yx(i){var o=qt();return Wx(o,yt,i)}function Wx(i,o,d){if(o=Ih(i,o,Gx)[0],i=jc(aa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Rl(o)}catch(E){throw E===Sl?yc:E}else f=o;o=qt();var g=o.queue,b=g.dispatch;return d!==o.memoizedState&&(Ke.flags|=2048,wr(9,Sc(),Hj.bind(null,g,d),null)),[f,b,i]}function Hj(i,o){i.action=o}function Xx(i){var o=qt(),d=yt;if(d!==null)return Wx(o,d,i);qt(),o=o.memoizedState,d=qt();var f=d.queue.dispatch;return d.memoizedState=i,[o,f,!1]}function wr(i,o,d,f){return i={tag:i,create:d,deps:f,inst:o,next:null},o=Ke.updateQueue,o===null&&(o=Oh(),Ke.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=i.next=i:(f=d.next,d.next=i,i.next=f,o.lastEffect=i),i}function Sc(){return{destroy:void 0,resource:void 0}}function Qx(){return qt().memoizedState}function Ec(i,o,d,f){var g=Ms();f=f===void 0?null:f,Ke.flags|=i,g.memoizedState=wr(1|o,Sc(),d,f)}function kl(i,o,d,f){var g=qt();f=f===void 0?null:f;var b=g.memoizedState.inst;yt!==null&&f!==null&&Dh(f,yt.memoizedState.deps)?g.memoizedState=wr(o,b,d,f):(Ke.flags|=i,g.memoizedState=wr(1|o,b,d,f))}function Zx(i,o){Ec(8390656,8,i,o)}function Kx(i,o){kl(2048,8,i,o)}function Jx(i,o){return kl(4,2,i,o)}function e0(i,o){return kl(4,4,i,o)}function t0(i,o){if(typeof o=="function"){i=i();var d=o(i);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function s0(i,o,d){d=d!=null?d.concat([i]):null,kl(4,4,t0.bind(null,o,i),d)}function Fh(){}function n0(i,o){var d=qt();o=o===void 0?null:o;var f=d.memoizedState;return o!==null&&Dh(o,f[1])?f[0]:(d.memoizedState=[i,o],i)}function a0(i,o){var d=qt();o=o===void 0?null:o;var f=d.memoizedState;if(o!==null&&Dh(o,f[1]))return f[0];if(f=i(),wi){Fe(!0);try{i()}finally{Fe(!1)}}return d.memoizedState=[f,o],f}function Uh(i,o,d){return d===void 0||(Da&1073741824)!==0?i.memoizedState=o:(i.memoizedState=d,i=ly(),Ke.lanes|=i,Ia|=i,d)}function i0(i,o,d,f){return Ws(d,o)?d:yr.current!==null?(i=Uh(i,d,f),Ws(i,o)||(ns=!0),i):(Da&42)===0?(ns=!0,i.memoizedState=d):(i=ly(),Ke.lanes|=i,Ia|=i,o)}function r0(i,o,d,f,g){var b=Z.p;Z.p=b!==0&&8>b?b:8;var E=I.T,k={};I.T=k,Gh(i,!1,o,d);try{var B=g(),se=I.S;if(se!==null&&se(k,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ue=Oj(B,f);Ml(i,o,ue,Js(i))}else Ml(i,o,f,Js(i))}catch(pe){Ml(i,o,{then:function(){},status:"rejected",reason:pe},Js())}finally{Z.p=b,I.T=E}}function zj(){}function $h(i,o,d,f){if(i.tag!==5)throw Error(s(476));var g=l0(i).queue;r0(i,g,o,X,d===null?zj:function(){return o0(i),d(f)})}function l0(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:X},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:d},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function o0(i){var o=l0(i).next.queue;Ml(i,o,{},Js())}function Vh(){return ys(Zl)}function c0(){return qt().memoizedState}function d0(){return qt().memoizedState}function Fj(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var d=Js();i=Ca(d);var f=Ta(o,i,d);f!==null&&(en(f,o,d),_l(f,o,d)),o={cache:vh()},i.payload=o;return}o=o.return}}function Uj(i,o,d){var f=Js();d={lane:f,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},_c(i)?h0(o,d):(d=dh(i,o,d,f),d!==null&&(en(d,i,f),f0(d,o,f)))}function u0(i,o,d){var f=Js();Ml(i,o,d,f)}function Ml(i,o,d,f){var g={lane:f,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(_c(i))h0(o,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,k=b(E,d);if(g.hasEagerState=!0,g.eagerState=k,Ws(k,E))return dc(i,o,g,0),jt===null&&cc(),!1}catch{}finally{}if(d=dh(i,o,g,f),d!==null)return en(d,i,f),f0(d,o,f),!0}return!1}function Gh(i,o,d,f){if(f={lane:2,revertLane:jf(),action:f,hasEagerState:!1,eagerState:null,next:null},_c(i)){if(o)throw Error(s(479))}else o=dh(i,d,f,2),o!==null&&en(o,i,2)}function _c(i){var o=i.alternate;return i===Ke||o!==null&&o===Ke}function h0(i,o){br=wc=!0;var d=i.pending;d===null?o.next=o:(o.next=d.next,d.next=o),i.pending=o}function f0(i,o,d){if((d&4194048)!==0){var f=o.lanes;f&=i.pendingLanes,d|=f,o.lanes=d,oi(i,d)}}var Cc={readContext:ys,use:Ac,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},m0={readContext:ys,use:Ac,useCallback:function(i,o){return Ms().memoizedState=[i,o===void 0?null:o],i},useContext:ys,useEffect:Zx,useImperativeHandle:function(i,o,d){d=d!=null?d.concat([i]):null,Ec(4194308,4,t0.bind(null,o,i),d)},useLayoutEffect:function(i,o){return Ec(4194308,4,i,o)},useInsertionEffect:function(i,o){Ec(4,2,i,o)},useMemo:function(i,o){var d=Ms();o=o===void 0?null:o;var f=i();if(wi){Fe(!0);try{i()}finally{Fe(!1)}}return d.memoizedState=[f,o],f},useReducer:function(i,o,d){var f=Ms();if(d!==void 0){var g=d(o);if(wi){Fe(!0);try{d(o)}finally{Fe(!1)}}}else g=o;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=Uj.bind(null,Ke,i),[f.memoizedState,i]},useRef:function(i){var o=Ms();return i={current:i},o.memoizedState=i},useState:function(i){i=Hh(i);var o=i.queue,d=u0.bind(null,Ke,o);return o.dispatch=d,[i.memoizedState,d]},useDebugValue:Fh,useDeferredValue:function(i,o){var d=Ms();return Uh(d,i,o)},useTransition:function(){var i=Hh(!1);return i=r0.bind(null,Ke,i.queue,!0,!1),Ms().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,d){var f=Ke,g=Ms();if(ut){if(d===void 0)throw Error(s(407));d=d()}else{if(d=o(),jt===null)throw Error(s(349));(rt&124)!==0||Ox(f,o,d)}g.memoizedState=d;var b={value:d,getSnapshot:o};return g.queue=b,Zx(Ix.bind(null,f,b,i),[i]),f.flags|=2048,wr(9,Sc(),Px.bind(null,f,b,d,o),null),d},useId:function(){var i=Ms(),o=jt.identifierPrefix;if(ut){var d=ta,f=ea;d=(f&~(1<<32-lt(f)-1)).toString(32)+d,o=""+o+"R"+d,d=Nc++,0<d&&(o+="H"+d.toString(32)),o+=""}else d=Pj++,o=""+o+"r"+d.toString(32)+"";return i.memoizedState=o},useHostTransitionStatus:Vh,useFormState:qx,useActionState:qx,useOptimistic:function(i){var o=Ms();o.memoizedState=o.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=Gh.bind(null,Ke,!0,d),d.dispatch=o,[i,o]},useMemoCache:Ph,useCacheRefresh:function(){return Ms().memoizedState=Fj.bind(null,Ke)}},p0={readContext:ys,use:Ac,useCallback:n0,useContext:ys,useEffect:Kx,useImperativeHandle:s0,useInsertionEffect:Jx,useLayoutEffect:e0,useMemo:a0,useReducer:jc,useRef:Qx,useState:function(){return jc(aa)},useDebugValue:Fh,useDeferredValue:function(i,o){var d=qt();return i0(d,yt.memoizedState,i,o)},useTransition:function(){var i=jc(aa)[0],o=qt().memoizedState;return[typeof i=="boolean"?i:Rl(i),o]},useSyncExternalStore:Lx,useId:c0,useHostTransitionStatus:Vh,useFormState:Yx,useActionState:Yx,useOptimistic:function(i,o){var d=qt();return zx(d,yt,i,o)},useMemoCache:Ph,useCacheRefresh:d0},$j={readContext:ys,use:Ac,useCallback:n0,useContext:ys,useEffect:Kx,useImperativeHandle:s0,useInsertionEffect:Jx,useLayoutEffect:e0,useMemo:a0,useReducer:Bh,useRef:Qx,useState:function(){return Bh(aa)},useDebugValue:Fh,useDeferredValue:function(i,o){var d=qt();return yt===null?Uh(d,i,o):i0(d,yt.memoizedState,i,o)},useTransition:function(){var i=Bh(aa)[0],o=qt().memoizedState;return[typeof i=="boolean"?i:Rl(i),o]},useSyncExternalStore:Lx,useId:c0,useHostTransitionStatus:Vh,useFormState:Xx,useActionState:Xx,useOptimistic:function(i,o){var d=qt();return yt!==null?zx(d,yt,i,o):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:Ph,useCacheRefresh:d0},Nr=null,Ll=0;function Tc(i){var o=Ll;return Ll+=1,Nr===null&&(Nr=[]),Ex(Nr,i,o)}function Ol(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Dc(i,o){throw o.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function g0(i){var o=i._init;return o(i._payload)}function x0(i){function o(Q,q){if(i){var ee=Q.deletions;ee===null?(Q.deletions=[q],Q.flags|=16):ee.push(q)}}function d(Q,q){if(!i)return null;for(;q!==null;)o(Q,q),q=q.sibling;return null}function f(Q){for(var q=new Map;Q!==null;)Q.key!==null?q.set(Q.key,Q):q.set(Q.index,Q),Q=Q.sibling;return q}function g(Q,q){return Q=Jn(Q,q),Q.index=0,Q.sibling=null,Q}function b(Q,q,ee){return Q.index=ee,i?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<q?(Q.flags|=67108866,q):ee):(Q.flags|=67108866,q)):(Q.flags|=1048576,q)}function E(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function k(Q,q,ee,fe){return q===null||q.tag!==6?(q=hh(ee,Q.mode,fe),q.return=Q,q):(q=g(q,ee),q.return=Q,q)}function B(Q,q,ee,fe){var Te=ee.type;return Te===N?ue(Q,q,ee.props.children,fe,ee.key):q!==null&&(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===V&&g0(Te)===q.type)?(q=g(q,ee.props),Ol(q,ee),q.return=Q,q):(q=hc(ee.type,ee.key,ee.props,null,Q.mode,fe),Ol(q,ee),q.return=Q,q)}function se(Q,q,ee,fe){return q===null||q.tag!==4||q.stateNode.containerInfo!==ee.containerInfo||q.stateNode.implementation!==ee.implementation?(q=fh(ee,Q.mode,fe),q.return=Q,q):(q=g(q,ee.children||[]),q.return=Q,q)}function ue(Q,q,ee,fe,Te){return q===null||q.tag!==7?(q=fi(ee,Q.mode,fe,Te),q.return=Q,q):(q=g(q,ee),q.return=Q,q)}function pe(Q,q,ee){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=hh(""+q,Q.mode,ee),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return ee=hc(q.type,q.key,q.props,null,Q.mode,ee),Ol(ee,q),ee.return=Q,ee;case v:return q=fh(q,Q.mode,ee),q.return=Q,q;case V:var fe=q._init;return q=fe(q._payload),pe(Q,q,ee)}if(be(q)||G(q))return q=fi(q,Q.mode,ee,null),q.return=Q,q;if(typeof q.then=="function")return pe(Q,Tc(q),ee);if(q.$$typeof===S)return pe(Q,gc(Q,q),ee);Dc(Q,q)}return null}function ne(Q,q,ee,fe){var Te=q!==null?q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Te!==null?null:k(Q,q,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ee.key===Te?B(Q,q,ee,fe):null;case v:return ee.key===Te?se(Q,q,ee,fe):null;case V:return Te=ee._init,ee=Te(ee._payload),ne(Q,q,ee,fe)}if(be(ee)||G(ee))return Te!==null?null:ue(Q,q,ee,fe,null);if(typeof ee.then=="function")return ne(Q,q,Tc(ee),fe);if(ee.$$typeof===S)return ne(Q,q,gc(Q,ee),fe);Dc(Q,ee)}return null}function ae(Q,q,ee,fe,Te){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(ee)||null,k(q,Q,""+fe,Te);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case y:return Q=Q.get(fe.key===null?ee:fe.key)||null,B(q,Q,fe,Te);case v:return Q=Q.get(fe.key===null?ee:fe.key)||null,se(q,Q,fe,Te);case V:var Je=fe._init;return fe=Je(fe._payload),ae(Q,q,ee,fe,Te)}if(be(fe)||G(fe))return Q=Q.get(ee)||null,ue(q,Q,fe,Te,null);if(typeof fe.then=="function")return ae(Q,q,ee,Tc(fe),Te);if(fe.$$typeof===S)return ae(Q,q,ee,gc(q,fe),Te);Dc(q,fe)}return null}function ze(Q,q,ee,fe){for(var Te=null,Je=null,Re=q,Be=q=0,is=null;Re!==null&&Be<ee.length;Be++){Re.index>Be?(is=Re,Re=null):is=Re.sibling;var ot=ne(Q,Re,ee[Be],fe);if(ot===null){Re===null&&(Re=is);break}i&&Re&&ot.alternate===null&&o(Q,Re),q=b(ot,q,Be),Je===null?Te=ot:Je.sibling=ot,Je=ot,Re=is}if(Be===ee.length)return d(Q,Re),ut&&pi(Q,Be),Te;if(Re===null){for(;Be<ee.length;Be++)Re=pe(Q,ee[Be],fe),Re!==null&&(q=b(Re,q,Be),Je===null?Te=Re:Je.sibling=Re,Je=Re);return ut&&pi(Q,Be),Te}for(Re=f(Re);Be<ee.length;Be++)is=ae(Re,Q,Be,ee[Be],fe),is!==null&&(i&&is.alternate!==null&&Re.delete(is.key===null?Be:is.key),q=b(is,q,Be),Je===null?Te=is:Je.sibling=is,Je=is);return i&&Re.forEach(function(qa){return o(Q,qa)}),ut&&pi(Q,Be),Te}function Pe(Q,q,ee,fe){if(ee==null)throw Error(s(151));for(var Te=null,Je=null,Re=q,Be=q=0,is=null,ot=ee.next();Re!==null&&!ot.done;Be++,ot=ee.next()){Re.index>Be?(is=Re,Re=null):is=Re.sibling;var qa=ne(Q,Re,ot.value,fe);if(qa===null){Re===null&&(Re=is);break}i&&Re&&qa.alternate===null&&o(Q,Re),q=b(qa,q,Be),Je===null?Te=qa:Je.sibling=qa,Je=qa,Re=is}if(ot.done)return d(Q,Re),ut&&pi(Q,Be),Te;if(Re===null){for(;!ot.done;Be++,ot=ee.next())ot=pe(Q,ot.value,fe),ot!==null&&(q=b(ot,q,Be),Je===null?Te=ot:Je.sibling=ot,Je=ot);return ut&&pi(Q,Be),Te}for(Re=f(Re);!ot.done;Be++,ot=ee.next())ot=ae(Re,Q,Be,ot.value,fe),ot!==null&&(i&&ot.alternate!==null&&Re.delete(ot.key===null?Be:ot.key),q=b(ot,q,Be),Je===null?Te=ot:Je.sibling=ot,Je=ot);return i&&Re.forEach(function(VS){return o(Q,VS)}),ut&&pi(Q,Be),Te}function vt(Q,q,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===N&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:e:{for(var Te=ee.key;q!==null;){if(q.key===Te){if(Te=ee.type,Te===N){if(q.tag===7){d(Q,q.sibling),fe=g(q,ee.props.children),fe.return=Q,Q=fe;break e}}else if(q.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===V&&g0(Te)===q.type){d(Q,q.sibling),fe=g(q,ee.props),Ol(fe,ee),fe.return=Q,Q=fe;break e}d(Q,q);break}else o(Q,q);q=q.sibling}ee.type===N?(fe=fi(ee.props.children,Q.mode,fe,ee.key),fe.return=Q,Q=fe):(fe=hc(ee.type,ee.key,ee.props,null,Q.mode,fe),Ol(fe,ee),fe.return=Q,Q=fe)}return E(Q);case v:e:{for(Te=ee.key;q!==null;){if(q.key===Te)if(q.tag===4&&q.stateNode.containerInfo===ee.containerInfo&&q.stateNode.implementation===ee.implementation){d(Q,q.sibling),fe=g(q,ee.children||[]),fe.return=Q,Q=fe;break e}else{d(Q,q);break}else o(Q,q);q=q.sibling}fe=fh(ee,Q.mode,fe),fe.return=Q,Q=fe}return E(Q);case V:return Te=ee._init,ee=Te(ee._payload),vt(Q,q,ee,fe)}if(be(ee))return ze(Q,q,ee,fe);if(G(ee)){if(Te=G(ee),typeof Te!="function")throw Error(s(150));return ee=Te.call(ee),Pe(Q,q,ee,fe)}if(typeof ee.then=="function")return vt(Q,q,Tc(ee),fe);if(ee.$$typeof===S)return vt(Q,q,gc(Q,ee),fe);Dc(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,q!==null&&q.tag===6?(d(Q,q.sibling),fe=g(q,ee),fe.return=Q,Q=fe):(d(Q,q),fe=hh(ee,Q.mode,fe),fe.return=Q,Q=fe),E(Q)):d(Q,q)}return function(Q,q,ee,fe){try{Ll=0;var Te=vt(Q,q,ee,fe);return Nr=null,Te}catch(Re){if(Re===Sl||Re===yc)throw Re;var Je=Xs(29,Re,null,Q.mode);return Je.lanes=fe,Je.return=Q,Je}finally{}}}var Ar=x0(!0),y0=x0(!1),hn=M(null),Pn=null;function Ra(i){var o=i.alternate;J(Jt,Jt.current&1),J(hn,i),Pn===null&&(o===null||yr.current!==null||o.memoizedState!==null)&&(Pn=i)}function b0(i){if(i.tag===22){if(J(Jt,Jt.current),J(hn,i),Pn===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(Pn=i)}}else ka()}function ka(){J(Jt,Jt.current),J(hn,hn.current)}function ia(i){F(hn),Pn===i&&(Pn=null),F(Jt)}var Jt=M(0);function Rc(i){for(var o=i;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||Pf(d)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function qh(i,o,d,f){o=i.memoizedState,d=d(f,o),d=d==null?o:p({},o,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Yh={enqueueSetState:function(i,o,d){i=i._reactInternals;var f=Js(),g=Ca(f);g.payload=o,d!=null&&(g.callback=d),o=Ta(i,g,f),o!==null&&(en(o,i,f),_l(o,i,f))},enqueueReplaceState:function(i,o,d){i=i._reactInternals;var f=Js(),g=Ca(f);g.tag=1,g.payload=o,d!=null&&(g.callback=d),o=Ta(i,g,f),o!==null&&(en(o,i,f),_l(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var d=Js(),f=Ca(d);f.tag=2,o!=null&&(f.callback=o),o=Ta(i,f,d),o!==null&&(en(o,i,d),_l(o,i,d))}};function v0(i,o,d,f,g,b,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,E):o.prototype&&o.prototype.isPureReactComponent?!xl(d,f)||!xl(g,b):!0}function w0(i,o,d,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,f),o.state!==i&&Yh.enqueueReplaceState(o,o.state,null)}function Ni(i,o){var d=o;if("ref"in o){d={};for(var f in o)f!=="ref"&&(d[f]=o[f])}if(i=i.defaultProps){d===o&&(d=p({},d));for(var g in i)d[g]===void 0&&(d[g]=i[g])}return d}var kc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function N0(i){kc(i)}function A0(i){console.error(i)}function j0(i){kc(i)}function Mc(i,o){try{var d=i.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function S0(i,o,d){try{var f=i.onCaughtError;f(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Wh(i,o,d){return d=Ca(d),d.tag=3,d.payload={element:null},d.callback=function(){Mc(i,o)},d}function E0(i){return i=Ca(i),i.tag=3,i}function _0(i,o,d,f){var g=d.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;i.payload=function(){return g(b)},i.callback=function(){S0(o,d,f)}}var E=d.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){S0(o,d,f),typeof g!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var k=f.stack;this.componentDidCatch(f.value,{componentStack:k!==null?k:""})})}function Vj(i,o,d,f,g){if(d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=d.alternate,o!==null&&Nl(o,d,g,!0),d=hn.current,d!==null){switch(d.tag){case 13:return Pn===null?bf():d.alternate===null&&Pt===0&&(Pt=3),d.flags&=-257,d.flags|=65536,d.lanes=g,f===Ah?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([f]):o.add(f),wf(i,f,g)),!1;case 22:return d.flags|=65536,f===Ah?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([f]):d.add(f)),wf(i,f,g)),!1}throw Error(s(435,d.tag))}return wf(i,f,g),bf(),!1}if(ut)return o=hn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==gh&&(i=Error(s(422),{cause:f}),wl(on(i,d)))):(f!==gh&&(o=Error(s(423),{cause:f}),wl(on(o,d))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=on(f,d),g=Wh(i.stateNode,f,g),Eh(i,g),Pt!==4&&(Pt=2)),!1;var b=Error(s(520),{cause:f});if(b=on(b,d),Ul===null?Ul=[b]:Ul.push(b),Pt!==4&&(Pt=2),o===null)return!0;f=on(f,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,i=g&-g,d.lanes|=i,i=Wh(d.stateNode,f,i),Eh(d,i),!1;case 1:if(o=d.type,b=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ba===null||!Ba.has(b))))return d.flags|=65536,g&=-g,d.lanes|=g,g=E0(g),_0(g,i,d,f),Eh(d,g),!1}d=d.return}while(d!==null);return!1}var C0=Error(s(461)),ns=!1;function cs(i,o,d,f){o.child=i===null?y0(o,null,d,f):Ar(o,i.child,d,f)}function T0(i,o,d,f,g){d=d.render;var b=o.ref;if("ref"in f){var E={};for(var k in f)k!=="ref"&&(E[k]=f[k])}else E=f;return bi(o),f=Rh(i,o,d,E,b,g),k=kh(),i!==null&&!ns?(Mh(i,o,g),ra(i,o,g)):(ut&&k&&mh(o),o.flags|=1,cs(i,o,f,g),o.child)}function D0(i,o,d,f,g){if(i===null){var b=d.type;return typeof b=="function"&&!uh(b)&&b.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=b,R0(i,o,b,f,g)):(i=hc(d.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(b=i.child,!sf(i,g)){var E=b.memoizedProps;if(d=d.compare,d=d!==null?d:xl,d(E,f)&&i.ref===o.ref)return ra(i,o,g)}return o.flags|=1,i=Jn(b,f),i.ref=o.ref,i.return=o,o.child=i}function R0(i,o,d,f,g){if(i!==null){var b=i.memoizedProps;if(xl(b,f)&&i.ref===o.ref)if(ns=!1,o.pendingProps=f=b,sf(i,g))(i.flags&131072)!==0&&(ns=!0);else return o.lanes=i.lanes,ra(i,o,g)}return Xh(i,o,d,f,g)}function k0(i,o,d){var f=o.pendingProps,g=f.children,b=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=b!==null?b.baseLanes|d:d,i!==null){for(g=o.child=i.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~f}else o.childLanes=0,o.child=null;return M0(i,o,f,d)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&xc(o,b!==null?b.cachePool:null),b!==null?Rx(o,b):Ch(),b0(o);else return o.lanes=o.childLanes=536870912,M0(i,o,b!==null?b.baseLanes|d:d,d)}else b!==null?(xc(o,b.cachePool),Rx(o,b),ka(),o.memoizedState=null):(i!==null&&xc(o,null),Ch(),ka());return cs(i,o,g,d),o.child}function M0(i,o,d,f){var g=Nh();return g=g===null?null:{parent:Kt._currentValue,pool:g},o.memoizedState={baseLanes:d,cachePool:g},i!==null&&xc(o,null),Ch(),b0(o),i!==null&&Nl(i,o,f,!0),null}function Lc(i,o){var d=o.ref;if(d===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(i===null||i.ref!==d)&&(o.flags|=4194816)}}function Xh(i,o,d,f,g){return bi(o),d=Rh(i,o,d,f,void 0,g),f=kh(),i!==null&&!ns?(Mh(i,o,g),ra(i,o,g)):(ut&&f&&mh(o),o.flags|=1,cs(i,o,d,g),o.child)}function L0(i,o,d,f,g,b){return bi(o),o.updateQueue=null,d=Mx(o,f,d,g),kx(i),f=kh(),i!==null&&!ns?(Mh(i,o,b),ra(i,o,b)):(ut&&f&&mh(o),o.flags|=1,cs(i,o,d,b),o.child)}function O0(i,o,d,f,g){if(bi(o),o.stateNode===null){var b=fr,E=d.contextType;typeof E=="object"&&E!==null&&(b=ys(E)),b=new d(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Yh,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},jh(o),E=d.contextType,b.context=typeof E=="object"&&E!==null?ys(E):fr,b.state=o.memoizedState,E=d.getDerivedStateFromProps,typeof E=="function"&&(qh(o,d,E,f),b.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&Yh.enqueueReplaceState(b,b.state,null),Tl(o,f,b,g),Cl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(i===null){b=o.stateNode;var k=o.memoizedProps,B=Ni(d,k);b.props=B;var se=b.context,ue=d.contextType;E=fr,typeof ue=="object"&&ue!==null&&(E=ys(ue));var pe=d.getDerivedStateFromProps;ue=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||se!==E)&&w0(o,b,f,E),_a=!1;var ne=o.memoizedState;b.state=ne,Tl(o,f,b,g),Cl(),se=o.memoizedState,k||ne!==se||_a?(typeof pe=="function"&&(qh(o,d,pe,f),se=o.memoizedState),(B=_a||v0(o,d,B,f,ne,se,E))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=se),b.props=f,b.state=se,b.context=E,f=B):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,Sh(i,o),E=o.memoizedProps,ue=Ni(d,E),b.props=ue,pe=o.pendingProps,ne=b.context,se=d.contextType,B=fr,typeof se=="object"&&se!==null&&(B=ys(se)),k=d.getDerivedStateFromProps,(se=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==pe||ne!==B)&&w0(o,b,f,B),_a=!1,ne=o.memoizedState,b.state=ne,Tl(o,f,b,g),Cl();var ae=o.memoizedState;E!==pe||ne!==ae||_a||i!==null&&i.dependencies!==null&&pc(i.dependencies)?(typeof k=="function"&&(qh(o,d,k,f),ae=o.memoizedState),(ue=_a||v0(o,d,ue,f,ne,ae,B)||i!==null&&i.dependencies!==null&&pc(i.dependencies))?(se||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ae,B),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ae,B)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ae),b.props=f,b.state=ae,b.context=B,f=ue):(typeof b.componentDidUpdate!="function"||E===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),f=!1)}return b=f,Lc(i,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,d=f&&typeof d.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,i!==null&&f?(o.child=Ar(o,i.child,null,g),o.child=Ar(o,null,d,g)):cs(i,o,d,g),o.memoizedState=b.state,i=o.child):i=ra(i,o,g),i}function P0(i,o,d,f){return vl(),o.flags|=256,cs(i,o,d,f),o.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zh(i){return{baseLanes:i,cachePool:Ax()}}function Kh(i,o,d){return i=i!==null?i.childLanes&~d:0,o&&(i|=fn),i}function I0(i,o,d){var f=o.pendingProps,g=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=i!==null&&i.memoizedState===null?!1:(Jt.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,i===null){if(ut){if(g?Ra(o):ka(),ut){var k=Ot,B;if(B=k){e:{for(B=k,k=On;B.nodeType!==8;){if(!k){k=null;break e}if(B=Nn(B.nextSibling),B===null){k=null;break e}}k=B}k!==null?(o.memoizedState={dehydrated:k,treeContext:mi!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},B=Xs(18,null,null,0),B.stateNode=k,B.return=o,o.child=B,Es=o,Ot=null,B=!0):B=!1}B||xi(o)}if(k=o.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return Pf(k)?o.lanes=32:o.lanes=536870912,null;ia(o)}return k=f.children,f=f.fallback,g?(ka(),g=o.mode,k=Oc({mode:"hidden",children:k},g),f=fi(f,g,d,null),k.return=o,f.return=o,k.sibling=f,o.child=k,g=o.child,g.memoizedState=Zh(d),g.childLanes=Kh(i,E,d),o.memoizedState=Qh,f):(Ra(o),Jh(o,k))}if(B=i.memoizedState,B!==null&&(k=B.dehydrated,k!==null)){if(b)o.flags&256?(Ra(o),o.flags&=-257,o=ef(i,o,d)):o.memoizedState!==null?(ka(),o.child=i.child,o.flags|=128,o=null):(ka(),g=f.fallback,k=o.mode,f=Oc({mode:"visible",children:f.children},k),g=fi(g,k,d,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Ar(o,i.child,null,d),f=o.child,f.memoizedState=Zh(d),f.childLanes=Kh(i,E,d),o.memoizedState=Qh,o=g);else if(Ra(o),Pf(k)){if(E=k.nextSibling&&k.nextSibling.dataset,E)var se=E.dgst;E=se,f=Error(s(419)),f.stack="",f.digest=E,wl({value:f,source:null,stack:null}),o=ef(i,o,d)}else if(ns||Nl(i,o,d,!1),E=(d&i.childLanes)!==0,ns||E){if(E=jt,E!==null&&(f=d&-d,f=(f&42)!==0?1:U(f),f=(f&(E.suspendedLanes|d))!==0?0:f,f!==0&&f!==B.retryLane))throw B.retryLane=f,hr(i,f),en(E,i,f),C0;k.data==="$?"||bf(),o=ef(i,o,d)}else k.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=B.treeContext,Ot=Nn(k.nextSibling),Es=o,ut=!0,gi=null,On=!1,i!==null&&(dn[un++]=ea,dn[un++]=ta,dn[un++]=mi,ea=i.id,ta=i.overflow,mi=o),o=Jh(o,f.children),o.flags|=4096);return o}return g?(ka(),g=f.fallback,k=o.mode,B=i.child,se=B.sibling,f=Jn(B,{mode:"hidden",children:f.children}),f.subtreeFlags=B.subtreeFlags&65011712,se!==null?g=Jn(se,g):(g=fi(g,k,d,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,k=i.child.memoizedState,k===null?k=Zh(d):(B=k.cachePool,B!==null?(se=Kt._currentValue,B=B.parent!==se?{parent:se,pool:se}:B):B=Ax(),k={baseLanes:k.baseLanes|d,cachePool:B}),g.memoizedState=k,g.childLanes=Kh(i,E,d),o.memoizedState=Qh,f):(Ra(o),d=i.child,i=d.sibling,d=Jn(d,{mode:"visible",children:f.children}),d.return=o,d.sibling=null,i!==null&&(E=o.deletions,E===null?(o.deletions=[i],o.flags|=16):E.push(i)),o.child=d,o.memoizedState=null,d)}function Jh(i,o){return o=Oc({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Oc(i,o){return i=Xs(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ef(i,o,d){return Ar(o,i.child,null,d),i=Jh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function B0(i,o,d){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),yh(i.return,o,d)}function tf(i,o,d,f,g){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=d,b.tailMode=g)}function H0(i,o,d){var f=o.pendingProps,g=f.revealOrder,b=f.tail;if(cs(i,o,f.children,d),f=Jt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&B0(i,d,o);else if(i.tag===19)B0(i,d,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(J(Jt,f),g){case"forwards":for(d=o.child,g=null;d!==null;)i=d.alternate,i!==null&&Rc(i)===null&&(g=d),d=d.sibling;d=g,d===null?(g=o.child,o.child=null):(g=d.sibling,d.sibling=null),tf(o,!1,g,d,b);break;case"backwards":for(d=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Rc(i)===null){o.child=g;break}i=g.sibling,g.sibling=d,d=g,g=i}tf(o,!0,d,null,b);break;case"together":tf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ra(i,o,d){if(i!==null&&(o.dependencies=i.dependencies),Ia|=o.lanes,(d&o.childLanes)===0)if(i!==null){if(Nl(i,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,d=Jn(i,i.pendingProps),o.child=d,d.return=o;i.sibling!==null;)i=i.sibling,d=d.sibling=Jn(i,i.pendingProps),d.return=o;d.sibling=null}return o.child}function sf(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&pc(i)))}function Gj(i,o,d){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),Ea(o,Kt,i.memoizedState.cache),vl();break;case 27:case 5:Ue(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:Ea(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Ra(o),o.flags|=128,null):(d&o.child.childLanes)!==0?I0(i,o,d):(Ra(o),i=ra(i,o,d),i!==null?i.sibling:null);Ra(o);break;case 19:var g=(i.flags&128)!==0;if(f=(d&o.childLanes)!==0,f||(Nl(i,o,d,!1),f=(d&o.childLanes)!==0),g){if(f)return H0(i,o,d);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),J(Jt,Jt.current),f)break;return null;case 22:case 23:return o.lanes=0,k0(i,o,d);case 24:Ea(o,Kt,i.memoizedState.cache)}return ra(i,o,d)}function z0(i,o,d){if(i!==null)if(i.memoizedProps!==o.pendingProps)ns=!0;else{if(!sf(i,d)&&(o.flags&128)===0)return ns=!1,Gj(i,o,d);ns=(i.flags&131072)!==0}else ns=!1,ut&&(o.flags&1048576)!==0&&gx(o,mc,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")uh(f)?(i=Ni(f,i),o.tag=1,o=O0(null,o,f,i,d)):(o.tag=0,o=Xh(null,o,f,i,d));else{if(f!=null){if(g=f.$$typeof,g===T){o.tag=11,o=T0(null,o,f,i,d);break e}else if(g===H){o.tag=14,o=D0(null,o,f,i,d);break e}}throw o=de(f)||f,Error(s(306,o,""))}}return o;case 0:return Xh(i,o,o.type,o.pendingProps,d);case 1:return f=o.type,g=Ni(f,o.pendingProps),O0(i,o,f,g,d);case 3:e:{if(ke(o,o.stateNode.containerInfo),i===null)throw Error(s(387));f=o.pendingProps;var b=o.memoizedState;g=b.element,Sh(i,o),Tl(o,f,null,d);var E=o.memoizedState;if(f=E.cache,Ea(o,Kt,f),f!==b.cache&&bh(o,[Kt],d,!0),Cl(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=P0(i,o,f,d);break e}else if(f!==g){g=on(Error(s(424)),o),wl(g),o=P0(i,o,f,d);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ot=Nn(i.firstChild),Es=o,ut=!0,gi=null,On=!0,d=y0(o,null,f,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(vl(),f===g){o=ra(i,o,d);break e}cs(i,o,f,d)}o=o.child}return o;case 26:return Lc(i,o),i===null?(d=Vy(o.type,null,o.pendingProps,null))?o.memoizedState=d:ut||(d=o.type,i=o.pendingProps,f=Xc(ye.current).createElement(d),f[it]=o,f[Ze]=i,us(f,d,i),ss(f),o.stateNode=f):o.memoizedState=Vy(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ue(o),i===null&&ut&&(f=o.stateNode=Fy(o.type,o.pendingProps,ye.current),Es=o,On=!0,g=Ot,Fa(o.type)?(If=g,Ot=Nn(f.firstChild)):Ot=g),cs(i,o,o.pendingProps.children,d),Lc(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ut&&((g=f=Ot)&&(f=bS(f,o.type,o.pendingProps,On),f!==null?(o.stateNode=f,Es=o,Ot=Nn(f.firstChild),On=!1,g=!0):g=!1),g||xi(o)),Ue(o),g=o.type,b=o.pendingProps,E=i!==null?i.memoizedProps:null,f=b.children,Mf(g,b)?f=null:E!==null&&Mf(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=Rh(i,o,Ij,null,null,d),Zl._currentValue=g),Lc(i,o),cs(i,o,f,d),o.child;case 6:return i===null&&ut&&((i=d=Ot)&&(d=vS(d,o.pendingProps,On),d!==null?(o.stateNode=d,Es=o,Ot=null,i=!0):i=!1),i||xi(o)),null;case 13:return I0(i,o,d);case 4:return ke(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Ar(o,null,f,d):cs(i,o,f,d),o.child;case 11:return T0(i,o,o.type,o.pendingProps,d);case 7:return cs(i,o,o.pendingProps,d),o.child;case 8:return cs(i,o,o.pendingProps.children,d),o.child;case 12:return cs(i,o,o.pendingProps.children,d),o.child;case 10:return f=o.pendingProps,Ea(o,o.type,f.value),cs(i,o,f.children,d),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,bi(o),g=ys(g),f=f(g),o.flags|=1,cs(i,o,f,d),o.child;case 14:return D0(i,o,o.type,o.pendingProps,d);case 15:return R0(i,o,o.type,o.pendingProps,d);case 19:return H0(i,o,d);case 31:return f=o.pendingProps,d=o.mode,f={mode:f.mode,children:f.children},i===null?(d=Oc(f,d),d.ref=o.ref,o.child=d,d.return=o,o=d):(d=Jn(i.child,f),d.ref=o.ref,o.child=d,d.return=o,o=d),o;case 22:return k0(i,o,d);case 24:return bi(o),f=ys(Kt),i===null?(g=Nh(),g===null&&(g=jt,b=vh(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=d),g=b),o.memoizedState={parent:f,cache:g},jh(o),Ea(o,Kt,g)):((i.lanes&d)!==0&&(Sh(i,o),Tl(o,null,null,d),Cl()),g=i.memoizedState,b=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Ea(o,Kt,f)):(f=b.cache,Ea(o,Kt,f),f!==g.cache&&bh(o,[Kt],d,!0))),cs(i,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function la(i){i.flags|=4}function F0(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Xy(o)){if(o=hn.current,o!==null&&((rt&4194048)===rt?Pn!==null:(rt&62914560)!==rt&&(rt&536870912)===0||o!==Pn))throw El=Ah,jx;i.flags|=8192}}function Pc(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?qs():536870912,i.lanes|=o,_r|=o)}function Pl(i,o){if(!ut)switch(i.tailMode){case"hidden":o=i.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function kt(i){var o=i.alternate!==null&&i.alternate.child===i.child,d=0,f=0;if(o)for(var g=i.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=d,o}function qj(i,o,d){var f=o.pendingProps;switch(ph(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(o),null;case 1:return kt(o),null;case 3:return d=o.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),na(Kt),te(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(bl(o)?la(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,bx())),kt(o),null;case 26:return d=o.memoizedState,i===null?(la(o),d!==null?(kt(o),F0(o,d)):(kt(o),o.flags&=-16777217)):d?d!==i.memoizedState?(la(o),kt(o),F0(o,d)):(kt(o),o.flags&=-16777217):(i.memoizedProps!==f&&la(o),kt(o),o.flags&=-16777217),null;case 27:Ge(o),d=ye.current;var g=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==f&&la(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return kt(o),null}i=me.current,bl(o)?xx(o):(i=Fy(g,f,d),o.stateNode=i,la(o))}return kt(o),null;case 5:if(Ge(o),d=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&la(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return kt(o),null}if(i=me.current,bl(o))xx(o);else{switch(g=Xc(ye.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?g.createElement(d,{is:f.is}):g.createElement(d)}}i[it]=o,i[Ze]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=i;e:switch(us(i,d,f),d){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&la(o)}}return kt(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==f&&la(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(s(166));if(i=ye.current,bl(o)){if(i=o.stateNode,d=o.memoizedProps,f=null,g=Es,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[it]=o,i=!!(i.nodeValue===d||f!==null&&f.suppressHydrationWarning===!0||Ly(i.nodeValue,d)),i||xi(o)}else i=Xc(i).createTextNode(f),i[it]=o,o.stateNode=i}return kt(o),null;case 13:if(f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=bl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[it]=o}else vl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;kt(o),g=!1}else g=bx(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(ia(o),o):(ia(o),null)}if(ia(o),(o.flags&128)!==0)return o.lanes=d,o;if(d=f!==null,i=i!==null&&i.memoizedState!==null,d){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return d!==i&&d&&(o.child.flags|=8192),Pc(o,o.updateQueue),kt(o),null;case 4:return te(),i===null&&Cf(o.stateNode.containerInfo),kt(o),null;case 10:return na(o.type),kt(o),null;case 19:if(F(Jt),g=o.memoizedState,g===null)return kt(o),null;if(f=(o.flags&128)!==0,b=g.rendering,b===null)if(f)Pl(g,!1);else{if(Pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(b=Rc(i),b!==null){for(o.flags|=128,Pl(g,!1),i=b.updateQueue,o.updateQueue=i,Pc(o,i),o.subtreeFlags=0,i=d,d=o.child;d!==null;)px(d,i),d=d.sibling;return J(Jt,Jt.current&1|2),o.child}i=i.sibling}g.tail!==null&&Ee()>Hc&&(o.flags|=128,f=!0,Pl(g,!1),o.lanes=4194304)}else{if(!f)if(i=Rc(b),i!==null){if(o.flags|=128,f=!0,i=i.updateQueue,o.updateQueue=i,Pc(o,i),Pl(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!ut)return kt(o),null}else 2*Ee()-g.renderingStartTime>Hc&&d!==536870912&&(o.flags|=128,f=!0,Pl(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(i=g.last,i!==null?i.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Ee(),o.sibling=null,i=Jt.current,J(Jt,f?i&1|2:i&1),o):(kt(o),null);case 22:case 23:return ia(o),Th(),f=o.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(d&536870912)!==0&&(o.flags&128)===0&&(kt(o),o.subtreeFlags&6&&(o.flags|=8192)):kt(o),d=o.updateQueue,d!==null&&Pc(o,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048),i!==null&&F(vi),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),na(Kt),kt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function Yj(i,o){switch(ph(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return na(Kt),te(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ge(o),null;case 13:if(ia(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));vl()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return F(Jt),null;case 4:return te(),null;case 10:return na(o.type),null;case 22:case 23:return ia(o),Th(),i!==null&&F(vi),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return na(Kt),null;case 25:return null;default:return null}}function U0(i,o){switch(ph(o),o.tag){case 3:na(Kt),te();break;case 26:case 27:case 5:Ge(o);break;case 4:te();break;case 13:ia(o);break;case 19:F(Jt);break;case 10:na(o.type);break;case 22:case 23:ia(o),Th(),i!==null&&F(vi);break;case 24:na(Kt)}}function Il(i,o){try{var d=o.updateQueue,f=d!==null?d.lastEffect:null;if(f!==null){var g=f.next;d=g;do{if((d.tag&i)===i){f=void 0;var b=d.create,E=d.inst;f=b(),E.destroy=f}d=d.next}while(d!==g)}}catch(k){At(o,o.return,k)}}function Ma(i,o,d){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&i)===i){var E=f.inst,k=E.destroy;if(k!==void 0){E.destroy=void 0,g=o;var B=d,se=k;try{se()}catch(ue){At(g,B,ue)}}}f=f.next}while(f!==b)}}catch(ue){At(o,o.return,ue)}}function $0(i){var o=i.updateQueue;if(o!==null){var d=i.stateNode;try{Dx(o,d)}catch(f){At(i,i.return,f)}}}function V0(i,o,d){d.props=Ni(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(f){At(i,o,f)}}function Bl(i,o){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof d=="function"?i.refCleanup=d(f):d.current=f}}catch(g){At(i,o,g)}}function In(i,o){var d=i.ref,f=i.refCleanup;if(d!==null)if(typeof f=="function")try{f()}catch(g){At(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(g){At(i,o,g)}else d.current=null}function G0(i){var o=i.type,d=i.memoizedProps,f=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&f.focus();break e;case"img":d.src?f.src=d.src:d.srcSet&&(f.srcset=d.srcSet)}}catch(g){At(i,i.return,g)}}function nf(i,o,d){try{var f=i.stateNode;mS(f,i.type,d,o),f[Ze]=o}catch(g){At(i,i.return,g)}}function q0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Fa(i.type)||i.tag===4}function af(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||q0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Fa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rf(i,o,d){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(i),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Wc));else if(f!==4&&(f===27&&Fa(i.type)&&(d=i.stateNode,o=null),i=i.child,i!==null))for(rf(i,o,d),i=i.sibling;i!==null;)rf(i,o,d),i=i.sibling}function Ic(i,o,d){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?d.insertBefore(i,o):d.appendChild(i);else if(f!==4&&(f===27&&Fa(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(Ic(i,o,d),i=i.sibling;i!==null;)Ic(i,o,d),i=i.sibling}function Y0(i){var o=i.stateNode,d=i.memoizedProps;try{for(var f=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);us(o,f,d),o[it]=i,o[Ze]=d}catch(b){At(i,i.return,b)}}var oa=!1,Ft=!1,lf=!1,W0=typeof WeakSet=="function"?WeakSet:Set,as=null;function Wj(i,o){if(i=i.containerInfo,Rf=td,i=ix(i),ah(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var E=0,k=-1,B=-1,se=0,ue=0,pe=i,ne=null;t:for(;;){for(var ae;pe!==d||g!==0&&pe.nodeType!==3||(k=E+g),pe!==b||f!==0&&pe.nodeType!==3||(B=E+f),pe.nodeType===3&&(E+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)ne=pe,pe=ae;for(;;){if(pe===i)break t;if(ne===d&&++se===g&&(k=E),ne===b&&++ue===f&&(B=E),(ae=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=ae}d=k===-1||B===-1?null:{start:k,end:B}}else d=null}d=d||{start:0,end:0}}else d=null;for(kf={focusedElem:i,selectionRange:d},td=!1,as=o;as!==null;)if(o=as,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,as=i;else for(;as!==null;){switch(o=as,b=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,d=o,g=b.memoizedProps,b=b.memoizedState,f=d.stateNode;try{var ze=Ni(d.type,g,d.elementType===d.type);i=f.getSnapshotBeforeUpdate(ze,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){At(d,d.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,d=i.nodeType,d===9)Of(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Of(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,as=i;break}as=o.return}}function X0(i,o,d){var f=d.flags;switch(d.tag){case 0:case 11:case 15:La(i,d),f&4&&Il(5,d);break;case 1:if(La(i,d),f&4)if(i=d.stateNode,o===null)try{i.componentDidMount()}catch(E){At(d,d.return,E)}else{var g=Ni(d.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(E){At(d,d.return,E)}}f&64&&$0(d),f&512&&Bl(d,d.return);break;case 3:if(La(i,d),f&64&&(i=d.updateQueue,i!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{Dx(i,o)}catch(E){At(d,d.return,E)}}break;case 27:o===null&&f&4&&Y0(d);case 26:case 5:La(i,d),o===null&&f&4&&G0(d),f&512&&Bl(d,d.return);break;case 12:La(i,d);break;case 13:La(i,d),f&4&&K0(i,d),f&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=nS.bind(null,d),wS(i,d))));break;case 22:if(f=d.memoizedState!==null||oa,!f){o=o!==null&&o.memoizedState!==null||Ft,g=oa;var b=Ft;oa=f,(Ft=o)&&!b?Oa(i,d,(d.subtreeFlags&8772)!==0):La(i,d),oa=g,Ft=b}break;case 30:break;default:La(i,d)}}function Q0(i){var o=i.alternate;o!==null&&(i.alternate=null,Q0(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&xs(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var St=null,Ls=!1;function ca(i,o,d){for(d=d.child;d!==null;)Z0(i,o,d),d=d.sibling}function Z0(i,o,d){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Ae,d)}catch{}switch(d.tag){case 26:Ft||In(d,o),ca(i,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ft||In(d,o);var f=St,g=Ls;Fa(d.type)&&(St=d.stateNode,Ls=!1),ca(i,o,d),Yl(d.stateNode),St=f,Ls=g;break;case 5:Ft||In(d,o);case 6:if(f=St,g=Ls,St=null,ca(i,o,d),St=f,Ls=g,St!==null)if(Ls)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(d.stateNode)}catch(b){At(d,o,b)}else try{St.removeChild(d.stateNode)}catch(b){At(d,o,b)}break;case 18:St!==null&&(Ls?(i=St,Hy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),to(i)):Hy(St,d.stateNode));break;case 4:f=St,g=Ls,St=d.stateNode.containerInfo,Ls=!0,ca(i,o,d),St=f,Ls=g;break;case 0:case 11:case 14:case 15:Ft||Ma(2,d,o),Ft||Ma(4,d,o),ca(i,o,d);break;case 1:Ft||(In(d,o),f=d.stateNode,typeof f.componentWillUnmount=="function"&&V0(d,o,f)),ca(i,o,d);break;case 21:ca(i,o,d);break;case 22:Ft=(f=Ft)||d.memoizedState!==null,ca(i,o,d),Ft=f;break;default:ca(i,o,d)}}function K0(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{to(i)}catch(d){At(o,o.return,d)}}function Xj(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new W0),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new W0),o;default:throw Error(s(435,i.tag))}}function of(i,o){var d=Xj(i);o.forEach(function(f){var g=aS.bind(null,i,f);d.has(f)||(d.add(f),f.then(g,g))})}function Qs(i,o){var d=o.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f],b=i,E=o,k=E;e:for(;k!==null;){switch(k.tag){case 27:if(Fa(k.type)){St=k.stateNode,Ls=!1;break e}break;case 5:St=k.stateNode,Ls=!1;break e;case 3:case 4:St=k.stateNode.containerInfo,Ls=!0;break e}k=k.return}if(St===null)throw Error(s(160));Z0(b,E,g),St=null,Ls=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)J0(o,i),o=o.sibling}var wn=null;function J0(i,o){var d=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Qs(o,i),Zs(i),f&4&&(Ma(3,i,i.return),Il(3,i),Ma(5,i,i.return));break;case 1:Qs(o,i),Zs(i),f&512&&(Ft||d===null||In(d,d.return)),f&64&&oa&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?f:d.concat(f))));break;case 26:var g=wn;if(Qs(o,i),Zs(i),f&512&&(Ft||d===null||In(d,d.return)),f&4){var b=d!==null?d.memoizedState:null;if(f=i.memoizedState,d===null)if(f===null)if(i.stateNode===null){e:{f=i.type,d=i.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[yn]||b[it]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),us(b,f,d),b[it]=i,ss(b),f=b;break e;case"link":var E=Yy("link","href",g).get(f+(d.href||""));if(E){for(var k=0;k<E.length;k++)if(b=E[k],b.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&b.getAttribute("rel")===(d.rel==null?null:d.rel)&&b.getAttribute("title")===(d.title==null?null:d.title)&&b.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){E.splice(k,1);break t}}b=g.createElement(f),us(b,f,d),g.head.appendChild(b);break;case"meta":if(E=Yy("meta","content",g).get(f+(d.content||""))){for(k=0;k<E.length;k++)if(b=E[k],b.getAttribute("content")===(d.content==null?null:""+d.content)&&b.getAttribute("name")===(d.name==null?null:d.name)&&b.getAttribute("property")===(d.property==null?null:d.property)&&b.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&b.getAttribute("charset")===(d.charSet==null?null:d.charSet)){E.splice(k,1);break t}}b=g.createElement(f),us(b,f,d),g.head.appendChild(b);break;default:throw Error(s(468,f))}b[it]=i,ss(b),f=b}i.stateNode=f}else Wy(g,i.type,i.stateNode);else i.stateNode=qy(g,f,i.memoizedProps);else b!==f?(b===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):b.count--,f===null?Wy(g,i.type,i.stateNode):qy(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&nf(i,i.memoizedProps,d.memoizedProps)}break;case 27:Qs(o,i),Zs(i),f&512&&(Ft||d===null||In(d,d.return)),d!==null&&f&4&&nf(i,i.memoizedProps,d.memoizedProps);break;case 5:if(Qs(o,i),Zs(i),f&512&&(Ft||d===null||In(d,d.return)),i.flags&32){g=i.stateNode;try{ir(g,"")}catch(ae){At(i,i.return,ae)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,nf(i,g,d!==null?d.memoizedProps:g)),f&1024&&(lf=!0);break;case 6:if(Qs(o,i),Zs(i),f&4){if(i.stateNode===null)throw Error(s(162));f=i.memoizedProps,d=i.stateNode;try{d.nodeValue=f}catch(ae){At(i,i.return,ae)}}break;case 3:if(Kc=null,g=wn,wn=Qc(o.containerInfo),Qs(o,i),wn=g,Zs(i),f&4&&d!==null&&d.memoizedState.isDehydrated)try{to(o.containerInfo)}catch(ae){At(i,i.return,ae)}lf&&(lf=!1,ey(i));break;case 4:f=wn,wn=Qc(i.stateNode.containerInfo),Qs(o,i),Zs(i),wn=f;break;case 12:Qs(o,i),Zs(i);break;case 13:Qs(o,i),Zs(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(mf=Ee()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,of(i,f)));break;case 22:g=i.memoizedState!==null;var B=d!==null&&d.memoizedState!==null,se=oa,ue=Ft;if(oa=se||g,Ft=ue||B,Qs(o,i),Ft=ue,oa=se,Zs(i),f&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(d===null||B||oa||Ft||Ai(i)),d=null,o=i;;){if(o.tag===5||o.tag===26){if(d===null){B=d=o;try{if(b=B.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{k=B.stateNode;var pe=B.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;k.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ae){At(B,B.return,ae)}}}else if(o.tag===6){if(d===null){B=o;try{B.stateNode.nodeValue=g?"":B.memoizedProps}catch(ae){At(B,B.return,ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=i.updateQueue,f!==null&&(d=f.retryQueue,d!==null&&(f.retryQueue=null,of(i,d))));break;case 19:Qs(o,i),Zs(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,of(i,f)));break;case 30:break;case 21:break;default:Qs(o,i),Zs(i)}}function Zs(i){var o=i.flags;if(o&2){try{for(var d,f=i.return;f!==null;){if(q0(f)){d=f;break}f=f.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var g=d.stateNode,b=af(i);Ic(i,b,g);break;case 5:var E=d.stateNode;d.flags&32&&(ir(E,""),d.flags&=-33);var k=af(i);Ic(i,k,E);break;case 3:case 4:var B=d.stateNode.containerInfo,se=af(i);rf(i,se,B);break;default:throw Error(s(161))}}catch(ue){At(i,i.return,ue)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ey(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;ey(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function La(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)X0(i,o.alternate,o),o=o.sibling}function Ai(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Ma(4,o,o.return),Ai(o);break;case 1:In(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&V0(o,o.return,d),Ai(o);break;case 27:Yl(o.stateNode);case 26:case 5:In(o,o.return),Ai(o);break;case 22:o.memoizedState===null&&Ai(o);break;case 30:Ai(o);break;default:Ai(o)}i=i.sibling}}function Oa(i,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=i,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:Oa(g,b,d),Il(4,b);break;case 1:if(Oa(g,b,d),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(se){At(f,f.return,se)}if(f=b,g=f.updateQueue,g!==null){var k=f.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)Tx(B[g],k)}catch(se){At(f,f.return,se)}}d&&E&64&&$0(b),Bl(b,b.return);break;case 27:Y0(b);case 26:case 5:Oa(g,b,d),d&&f===null&&E&4&&G0(b),Bl(b,b.return);break;case 12:Oa(g,b,d);break;case 13:Oa(g,b,d),d&&E&4&&K0(g,b);break;case 22:b.memoizedState===null&&Oa(g,b,d),Bl(b,b.return);break;case 30:break;default:Oa(g,b,d)}o=o.sibling}}function cf(i,o){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&Al(d))}function df(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Al(i))}function Bn(i,o,d,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ty(i,o,d,f),o=o.sibling}function ty(i,o,d,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Bn(i,o,d,f),g&2048&&Il(9,o);break;case 1:Bn(i,o,d,f);break;case 3:Bn(i,o,d,f),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Al(i)));break;case 12:if(g&2048){Bn(i,o,d,f),i=o.stateNode;try{var b=o.memoizedProps,E=b.id,k=b.onPostCommit;typeof k=="function"&&k(E,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){At(o,o.return,B)}}else Bn(i,o,d,f);break;case 13:Bn(i,o,d,f);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Bn(i,o,d,f):Hl(i,o):b._visibility&2?Bn(i,o,d,f):(b._visibility|=2,jr(i,o,d,f,(o.subtreeFlags&10256)!==0)),g&2048&&cf(E,o);break;case 24:Bn(i,o,d,f),g&2048&&df(o.alternate,o);break;default:Bn(i,o,d,f)}}function jr(i,o,d,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=i,E=o,k=d,B=f,se=E.flags;switch(E.tag){case 0:case 11:case 15:jr(b,E,k,B,g),Il(8,E);break;case 23:break;case 22:var ue=E.stateNode;E.memoizedState!==null?ue._visibility&2?jr(b,E,k,B,g):Hl(b,E):(ue._visibility|=2,jr(b,E,k,B,g)),g&&se&2048&&cf(E.alternate,E);break;case 24:jr(b,E,k,B,g),g&&se&2048&&df(E.alternate,E);break;default:jr(b,E,k,B,g)}o=o.sibling}}function Hl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=i,f=o,g=f.flags;switch(f.tag){case 22:Hl(d,f),g&2048&&cf(f.alternate,f);break;case 24:Hl(d,f),g&2048&&df(f.alternate,f);break;default:Hl(d,f)}o=o.sibling}}var zl=8192;function Sr(i){if(i.subtreeFlags&zl)for(i=i.child;i!==null;)sy(i),i=i.sibling}function sy(i){switch(i.tag){case 26:Sr(i),i.flags&zl&&i.memoizedState!==null&&LS(wn,i.memoizedState,i.memoizedProps);break;case 5:Sr(i);break;case 3:case 4:var o=wn;wn=Qc(i.stateNode.containerInfo),Sr(i),wn=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=zl,zl=16777216,Sr(i),zl=o):Sr(i));break;default:Sr(i)}}function ny(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Fl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var f=o[d];as=f,iy(f,i)}ny(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ay(i),i=i.sibling}function ay(i){switch(i.tag){case 0:case 11:case 15:Fl(i),i.flags&2048&&Ma(9,i,i.return);break;case 3:Fl(i);break;case 12:Fl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Bc(i)):Fl(i);break;default:Fl(i)}}function Bc(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var f=o[d];as=f,iy(f,i)}ny(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Ma(8,o,o.return),Bc(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,Bc(o));break;default:Bc(o)}i=i.sibling}}function iy(i,o){for(;as!==null;){var d=as;switch(d.tag){case 0:case 11:case 15:Ma(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var f=d.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Al(d.memoizedState.cache)}if(f=d.child,f!==null)f.return=d,as=f;else e:for(d=i;as!==null;){f=as;var g=f.sibling,b=f.return;if(Q0(f),f===d){as=null;break e}if(g!==null){g.return=b,as=g;break e}as=b}}}var Qj={getCacheForType:function(i){var o=ys(Kt),d=o.data.get(i);return d===void 0&&(d=i(),o.data.set(i,d)),d}},Zj=typeof WeakMap=="function"?WeakMap:Map,mt=0,jt=null,et=null,rt=0,pt=0,Ks=null,Pa=!1,Er=!1,uf=!1,da=0,Pt=0,Ia=0,ji=0,hf=0,fn=0,_r=0,Ul=null,Os=null,ff=!1,mf=0,Hc=1/0,zc=null,Ba=null,ds=0,Ha=null,Cr=null,Tr=0,pf=0,gf=null,ry=null,$l=0,xf=null;function Js(){if((mt&2)!==0&&rt!==0)return rt&-rt;if(I.T!==null){var i=gr;return i!==0?i:jf()}return _e()}function ly(){fn===0&&(fn=(rt&536870912)===0||ut?li():536870912);var i=hn.current;return i!==null&&(i.flags|=32),fn}function en(i,o,d){(i===jt&&(pt===2||pt===9)||i.cancelPendingCommit!==null)&&(Dr(i,0),za(i,rt,fn,!1)),js(i,d),((mt&2)===0||i!==jt)&&(i===jt&&((mt&2)===0&&(ji|=d),Pt===4&&za(i,rt,fn,!1)),Hn(i))}function oy(i,o,d){if((mt&6)!==0)throw Error(s(327));var f=!d&&(o&124)===0&&(o&i.expiredLanes)===0||Gs(i,o),g=f?eS(i,o):vf(i,o,!0),b=f;do{if(g===0){Er&&!f&&za(i,o,0,!1);break}else{if(d=i.current.alternate,b&&!Kj(d)){g=vf(i,o,!1),b=!1;continue}if(g===2){if(b=o,i.errorRecoveryDisabledLanes&b)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var k=i;g=Ul;var B=k.current.memoizedState.isDehydrated;if(B&&(Dr(k,E).flags|=256),E=vf(k,E,!1),E!==2){if(uf&&!B){k.errorRecoveryDisabledLanes|=b,ji|=b,g=4;break e}b=Os,Os=g,b!==null&&(Os===null?Os=b:Os.push.apply(Os,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){Dr(i,0),za(i,o,0,!0);break}e:{switch(f=i,b=g,b){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:za(f,o,fn,!Pa);break e;case 2:Os=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=mf+300-Ee(),10<g)){if(za(f,o,fn,!Pa),xn(f,0,!0)!==0)break e;f.timeoutHandle=Iy(cy.bind(null,f,d,Os,zc,ff,o,fn,ji,_r,Pa,b,2,-0,0),g);break e}cy(f,d,Os,zc,ff,o,fn,ji,_r,Pa,b,0,-0,0)}}break}while(!0);Hn(i)}function cy(i,o,d,f,g,b,E,k,B,se,ue,pe,ne,ae){if(i.timeoutHandle=-1,pe=o.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Ql={stylesheets:null,count:0,unsuspend:MS},sy(o),pe=OS(),pe!==null)){i.cancelPendingCommit=pe(gy.bind(null,i,o,b,d,f,g,E,k,B,ue,1,ne,ae)),za(i,b,E,!se);return}gy(i,o,b,d,f,g,E,k,B)}function Kj(i){for(var o=i;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var f=0;f<d.length;f++){var g=d[f],b=g.getSnapshot;g=g.value;try{if(!Ws(b(),g))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function za(i,o,d,f){o&=~hf,o&=~ji,i.suspendedLanes|=o,i.pingedLanes&=~o,f&&(i.warmLanes|=o),f=i.expirationTimes;for(var g=o;0<g;){var b=31-lt(g),E=1<<b;f[b]=-1,g&=~E}d!==0&&Hu(i,d,o)}function Fc(){return(mt&6)===0?(Vl(0),!1):!0}function yf(){if(et!==null){if(pt===0)var i=et.return;else i=et,sa=yi=null,Lh(i),Nr=null,Ll=0,i=et;for(;i!==null;)U0(i.alternate,i),i=i.return;et=null}}function Dr(i,o){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,gS(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),yf(),jt=i,et=d=Jn(i.current,null),rt=o,pt=0,Ks=null,Pa=!1,Er=Gs(i,o),uf=!1,_r=fn=hf=ji=Ia=Pt=0,Os=Ul=null,ff=!1,(o&8)!==0&&(o|=o&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=o;0<f;){var g=31-lt(f),b=1<<g;o|=i[g],f&=~b}return da=o,cc(),d}function dy(i,o){Ke=null,I.H=Cc,o===Sl||o===yc?(o=_x(),pt=3):o===jx?(o=_x(),pt=4):pt=o===C0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ks=o,et===null&&(Pt=1,Mc(i,on(o,i.current)))}function uy(){var i=I.H;return I.H=Cc,i===null?Cc:i}function hy(){var i=I.A;return I.A=Qj,i}function bf(){Pt=4,Pa||(rt&4194048)!==rt&&hn.current!==null||(Er=!0),(Ia&134217727)===0&&(ji&134217727)===0||jt===null||za(jt,rt,fn,!1)}function vf(i,o,d){var f=mt;mt|=2;var g=uy(),b=hy();(jt!==i||rt!==o)&&(zc=null,Dr(i,o)),o=!1;var E=Pt;e:do try{if(pt!==0&&et!==null){var k=et,B=Ks;switch(pt){case 8:yf(),E=6;break e;case 3:case 2:case 9:case 6:hn.current===null&&(o=!0);var se=pt;if(pt=0,Ks=null,Rr(i,k,B,se),d&&Er){E=0;break e}break;default:se=pt,pt=0,Ks=null,Rr(i,k,B,se)}}Jj(),E=Pt;break}catch(ue){dy(i,ue)}while(!0);return o&&i.shellSuspendCounter++,sa=yi=null,mt=f,I.H=g,I.A=b,et===null&&(jt=null,rt=0,cc()),E}function Jj(){for(;et!==null;)fy(et)}function eS(i,o){var d=mt;mt|=2;var f=uy(),g=hy();jt!==i||rt!==o?(zc=null,Hc=Ee()+500,Dr(i,o)):Er=Gs(i,o);e:do try{if(pt!==0&&et!==null){o=et;var b=Ks;t:switch(pt){case 1:pt=0,Ks=null,Rr(i,o,b,1);break;case 2:case 9:if(Sx(b)){pt=0,Ks=null,my(o);break}o=function(){pt!==2&&pt!==9||jt!==i||(pt=7),Hn(i)},b.then(o,o);break e;case 3:pt=7;break e;case 4:pt=5;break e;case 7:Sx(b)?(pt=0,Ks=null,my(o)):(pt=0,Ks=null,Rr(i,o,b,7));break;case 5:var E=null;switch(et.tag){case 26:E=et.memoizedState;case 5:case 27:var k=et;if(!E||Xy(E)){pt=0,Ks=null;var B=k.sibling;if(B!==null)et=B;else{var se=k.return;se!==null?(et=se,Uc(se)):et=null}break t}}pt=0,Ks=null,Rr(i,o,b,5);break;case 6:pt=0,Ks=null,Rr(i,o,b,6);break;case 8:yf(),Pt=6;break e;default:throw Error(s(462))}}tS();break}catch(ue){dy(i,ue)}while(!0);return sa=yi=null,I.H=f,I.A=g,mt=d,et!==null?0:(jt=null,rt=0,cc(),Pt)}function tS(){for(;et!==null&&!he();)fy(et)}function fy(i){var o=z0(i.alternate,i,da);i.memoizedProps=i.pendingProps,o===null?Uc(i):et=o}function my(i){var o=i,d=o.alternate;switch(o.tag){case 15:case 0:o=L0(d,o,o.pendingProps,o.type,void 0,rt);break;case 11:o=L0(d,o,o.pendingProps,o.type.render,o.ref,rt);break;case 5:Lh(o);default:U0(d,o),o=et=px(o,da),o=z0(d,o,da)}i.memoizedProps=i.pendingProps,o===null?Uc(i):et=o}function Rr(i,o,d,f){sa=yi=null,Lh(o),Nr=null,Ll=0;var g=o.return;try{if(Vj(i,g,o,d,rt)){Pt=1,Mc(i,on(d,i.current)),et=null;return}}catch(b){if(g!==null)throw et=g,b;Pt=1,Mc(i,on(d,i.current)),et=null;return}o.flags&32768?(ut||f===1?i=!0:Er||(rt&536870912)!==0?i=!1:(Pa=i=!0,(f===2||f===9||f===3||f===6)&&(f=hn.current,f!==null&&f.tag===13&&(f.flags|=16384))),py(o,i)):Uc(o)}function Uc(i){var o=i;do{if((o.flags&32768)!==0){py(o,Pa);return}i=o.return;var d=qj(o.alternate,o,da);if(d!==null){et=d;return}if(o=o.sibling,o!==null){et=o;return}et=o=i}while(o!==null);Pt===0&&(Pt=5)}function py(i,o){do{var d=Yj(i.alternate,i);if(d!==null){d.flags&=32767,et=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(i=i.sibling,i!==null)){et=i;return}et=i=d}while(i!==null);Pt=6,et=null}function gy(i,o,d,f,g,b,E,k,B){i.cancelPendingCommit=null;do $c();while(ds!==0);if((mt&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(b=o.lanes|o.childLanes,b|=ch,er(i,d,b,E,k,B),i===jt&&(et=jt=null,rt=0),Cr=o,Ha=i,Tr=d,pf=b,gf=g,ry=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,iS(De,function(){return wy(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=I.T,I.T=null,g=Z.p,Z.p=2,E=mt,mt|=4;try{Wj(i,o,d)}finally{mt=E,Z.p=g,I.T=f}}ds=1,xy(),yy(),by()}}function xy(){if(ds===1){ds=0;var i=Ha,o=Cr,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=I.T,I.T=null;var f=Z.p;Z.p=2;var g=mt;mt|=4;try{J0(o,i);var b=kf,E=ix(i.containerInfo),k=b.focusedElem,B=b.selectionRange;if(E!==k&&k&&k.ownerDocument&&ax(k.ownerDocument.documentElement,k)){if(B!==null&&ah(k)){var se=B.start,ue=B.end;if(ue===void 0&&(ue=se),"selectionStart"in k)k.selectionStart=se,k.selectionEnd=Math.min(ue,k.value.length);else{var pe=k.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),ze=k.textContent.length,Pe=Math.min(B.start,ze),vt=B.end===void 0?Pe:Math.min(B.end,ze);!ae.extend&&Pe>vt&&(E=vt,vt=Pe,Pe=E);var Q=nx(k,Pe),q=nx(k,vt);if(Q&&q&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var ee=pe.createRange();ee.setStart(Q.node,Q.offset),ae.removeAllRanges(),Pe>vt?(ae.addRange(ee),ae.extend(q.node,q.offset)):(ee.setEnd(q.node,q.offset),ae.addRange(ee))}}}}for(pe=[],ae=k;ae=ae.parentNode;)ae.nodeType===1&&pe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<pe.length;k++){var fe=pe[k];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}td=!!Rf,kf=Rf=null}finally{mt=g,Z.p=f,I.T=d}}i.current=o,ds=2}}function yy(){if(ds===2){ds=0;var i=Ha,o=Cr,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=I.T,I.T=null;var f=Z.p;Z.p=2;var g=mt;mt|=4;try{X0(i,o.alternate,o)}finally{mt=g,Z.p=f,I.T=d}}ds=3}}function by(){if(ds===4||ds===3){ds=0,ge();var i=Ha,o=Cr,d=Tr,f=ry;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ds=5:(ds=0,Cr=Ha=null,vy(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ba=null),we(d),o=o.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Ae,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=I.T,g=Z.p,Z.p=2,I.T=null;try{for(var b=i.onRecoverableError,E=0;E<f.length;E++){var k=f[E];b(k.value,{componentStack:k.stack})}}finally{I.T=o,Z.p=g}}(Tr&3)!==0&&$c(),Hn(i),g=i.pendingLanes,(d&4194090)!==0&&(g&42)!==0?i===xf?$l++:($l=0,xf=i):$l=0,Vl(0)}}function vy(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Al(o)))}function $c(i){return xy(),yy(),by(),wy()}function wy(){if(ds!==5)return!1;var i=Ha,o=pf;pf=0;var d=we(Tr),f=I.T,g=Z.p;try{Z.p=32>d?32:d,I.T=null,d=gf,gf=null;var b=Ha,E=Tr;if(ds=0,Cr=Ha=null,Tr=0,(mt&6)!==0)throw Error(s(331));var k=mt;if(mt|=4,ay(b.current),ty(b,b.current,E,d),mt=k,Vl(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Ae,b)}catch{}return!0}finally{Z.p=g,I.T=f,vy(i,o)}}function Ny(i,o,d){o=on(d,o),o=Wh(i.stateNode,o,2),i=Ta(i,o,2),i!==null&&(js(i,2),Hn(i))}function At(i,o,d){if(i.tag===3)Ny(i,i,d);else for(;o!==null;){if(o.tag===3){Ny(o,i,d);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ba===null||!Ba.has(f))){i=on(d,i),d=E0(2),f=Ta(o,d,2),f!==null&&(_0(d,f,o,i),js(f,2),Hn(f));break}}o=o.return}}function wf(i,o,d){var f=i.pingCache;if(f===null){f=i.pingCache=new Zj;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(d)||(uf=!0,g.add(d),i=sS.bind(null,i,o,d),o.then(i,i))}function sS(i,o,d){var f=i.pingCache;f!==null&&f.delete(o),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,jt===i&&(rt&d)===d&&(Pt===4||Pt===3&&(rt&62914560)===rt&&300>Ee()-mf?(mt&2)===0&&Dr(i,0):hf|=d,_r===rt&&(_r=0)),Hn(i)}function Ay(i,o){o===0&&(o=qs()),i=hr(i,o),i!==null&&(js(i,o),Hn(i))}function nS(i){var o=i.memoizedState,d=0;o!==null&&(d=o.retryLane),Ay(i,d)}function aS(i,o){var d=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(o),Ay(i,d)}function iS(i,o){return ve(i,o)}var Vc=null,kr=null,Nf=!1,Gc=!1,Af=!1,Si=0;function Hn(i){i!==kr&&i.next===null&&(kr===null?Vc=kr=i:kr=kr.next=i),Gc=!0,Nf||(Nf=!0,lS())}function Vl(i,o){if(!Af&&Gc){Af=!0;do for(var d=!1,f=Vc;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var E=f.suspendedLanes,k=f.pingedLanes;b=(1<<31-lt(42|i)+1)-1,b&=g&~(E&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(d=!0,_y(f,b))}else b=rt,b=xn(f,f===jt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Gs(f,b)||(d=!0,_y(f,b));f=f.next}while(d);Af=!1}}function rS(){jy()}function jy(){Gc=Nf=!1;var i=0;Si!==0&&(pS()&&(i=Si),Si=0);for(var o=Ee(),d=null,f=Vc;f!==null;){var g=f.next,b=Sy(f,o);b===0?(f.next=null,d===null?Vc=g:d.next=g,g===null&&(kr=d)):(d=f,(i!==0||(b&3)!==0)&&(Gc=!0)),f=g}Vl(i)}function Sy(i,o){for(var d=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var E=31-lt(b),k=1<<E,B=g[E];B===-1?((k&d)===0||(k&f)!==0)&&(g[E]=Na(k,o)):B<=o&&(i.expiredLanes|=k),b&=~k}if(o=jt,d=rt,d=xn(i,i===o?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,d===0||i===o&&(pt===2||pt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&W(f),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||Gs(i,d)){if(o=d&-d,o===i.callbackPriority)return o;switch(f!==null&&W(f),we(d)){case 2:case 8:d=Ne;break;case 32:d=De;break;case 268435456:d=xt;break;default:d=De}return f=Ey.bind(null,i),d=ve(d,f),i.callbackPriority=o,i.callbackNode=d,o}return f!==null&&f!==null&&W(f),i.callbackPriority=2,i.callbackNode=null,2}function Ey(i,o){if(ds!==0&&ds!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if($c()&&i.callbackNode!==d)return null;var f=rt;return f=xn(i,i===jt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(oy(i,f,o),Sy(i,Ee()),i.callbackNode!=null&&i.callbackNode===d?Ey.bind(null,i):null)}function _y(i,o){if($c())return null;oy(i,o,!0)}function lS(){xS(function(){(mt&6)!==0?ve($,rS):jy()})}function jf(){return Si===0&&(Si=li()),Si}function Cy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:sc(""+i)}function Ty(i,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,i.id&&d.setAttribute("form",i.id),o.parentNode.insertBefore(d,o),i=new FormData(i),d.parentNode.removeChild(d),i}function oS(i,o,d,f,g){if(o==="submit"&&d&&d.stateNode===g){var b=Cy((g[Ze]||null).action),E=f.submitter;E&&(o=(o=E[Ze]||null)?Cy(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var k=new rc("action","action",null,f,g);i.push({event:k,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Si!==0){var B=E?Ty(g,E):new FormData(g);$h(d,{pending:!0,data:B,method:g.method,action:b},null,B)}}else typeof b=="function"&&(k.preventDefault(),B=E?Ty(g,E):new FormData(g),$h(d,{pending:!0,data:B,method:g.method,action:b},b,B))},currentTarget:g}]})}}for(var Sf=0;Sf<oh.length;Sf++){var Ef=oh[Sf],cS=Ef.toLowerCase(),dS=Ef[0].toUpperCase()+Ef.slice(1);vn(cS,"on"+dS)}vn(ox,"onAnimationEnd"),vn(cx,"onAnimationIteration"),vn(dx,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(_j,"onTransitionRun"),vn(Cj,"onTransitionStart"),vn(Tj,"onTransitionCancel"),vn(ux,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function Dy(i,o){o=(o&4)!==0;for(var d=0;d<i.length;d++){var f=i[d],g=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var E=f.length-1;0<=E;E--){var k=f[E],B=k.instance,se=k.currentTarget;if(k=k.listener,B!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=se;try{b(g)}catch(ue){kc(ue)}g.currentTarget=null,b=B}else for(E=0;E<f.length;E++){if(k=f[E],B=k.instance,se=k.currentTarget,k=k.listener,B!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=se;try{b(g)}catch(ue){kc(ue)}g.currentTarget=null,b=B}}}}function tt(i,o){var d=o[Zt];d===void 0&&(d=o[Zt]=new Set);var f=i+"__bubble";d.has(f)||(Ry(o,i,2,!1),d.add(f))}function _f(i,o,d){var f=0;o&&(f|=4),Ry(d,i,f,o)}var qc="_reactListening"+Math.random().toString(36).slice(2);function Cf(i){if(!i[qc]){i[qc]=!0,jg.forEach(function(d){d!=="selectionchange"&&(uS.has(d)||_f(d,!1,i),_f(d,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[qc]||(o[qc]=!0,_f("selectionchange",!1,o))}}function Ry(i,o,d,f){switch(tb(o)){case 2:var g=BS;break;case 8:g=HS;break;default:g=Uf}d=g.bind(null,o,d,i),g=void 0,!Xu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,d,{capture:!0,passive:g}):i.addEventListener(o,d,!0):g!==void 0?i.addEventListener(o,d,{passive:g}):i.addEventListener(o,d,!1)}function Tf(i,o,d,f,g){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var k=f.stateNode.containerInfo;if(k===g)break;if(E===4)for(E=f.return;E!==null;){var B=E.tag;if((B===3||B===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;k!==null;){if(E=bn(k),E===null)return;if(B=E.tag,B===5||B===6||B===26||B===27){f=b=E;continue e}k=k.parentNode}}f=f.return}Bg(function(){var se=b,ue=Yu(d),pe=[];e:{var ne=hx.get(i);if(ne!==void 0){var ae=rc,ze=i;switch(i){case"keypress":if(ac(d)===0)break e;case"keydown":case"keyup":ae=ij;break;case"focusin":ze="focus",ae=Ju;break;case"focusout":ze="blur",ae=Ju;break;case"beforeblur":case"afterblur":ae=Ju;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=YA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=oj;break;case ox:case cx:case dx:ae=QA;break;case ux:ae=dj;break;case"scroll":case"scrollend":ae=GA;break;case"wheel":ae=hj;break;case"copy":case"cut":case"paste":ae=KA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=$g;break;case"toggle":case"beforetoggle":ae=mj}var Pe=(o&4)!==0,vt=!Pe&&(i==="scroll"||i==="scrollend"),Q=Pe?ne!==null?ne+"Capture":null:ne;Pe=[];for(var q=se,ee;q!==null;){var fe=q;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||Q===null||(fe=dl(q,Q),fe!=null&&Pe.push(ql(q,fe,ee))),vt)break;q=q.return}0<Pe.length&&(ne=new ae(ne,ze,null,d,ue),pe.push({event:ne,listeners:Pe}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",ne&&d!==qu&&(ze=d.relatedTarget||d.fromElement)&&(bn(ze)||ze[ts]))break e;if((ae||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(ze=d.relatedTarget||d.toElement,ae=se,ze=ze?bn(ze):null,ze!==null&&(vt=l(ze),Pe=ze.tag,ze!==vt||Pe!==5&&Pe!==27&&Pe!==6)&&(ze=null)):(ae=null,ze=se),ae!==ze)){if(Pe=Fg,fe="onMouseLeave",Q="onMouseEnter",q="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=$g,fe="onPointerLeave",Q="onPointerEnter",q="pointer"),vt=ae==null?ne:ja(ae),ee=ze==null?ne:ja(ze),ne=new Pe(fe,q+"leave",ae,d,ue),ne.target=vt,ne.relatedTarget=ee,fe=null,bn(ue)===se&&(Pe=new Pe(Q,q+"enter",ze,d,ue),Pe.target=ee,Pe.relatedTarget=vt,fe=Pe),vt=fe,ae&&ze)t:{for(Pe=ae,Q=ze,q=0,ee=Pe;ee;ee=Mr(ee))q++;for(ee=0,fe=Q;fe;fe=Mr(fe))ee++;for(;0<q-ee;)Pe=Mr(Pe),q--;for(;0<ee-q;)Q=Mr(Q),ee--;for(;q--;){if(Pe===Q||Q!==null&&Pe===Q.alternate)break t;Pe=Mr(Pe),Q=Mr(Q)}Pe=null}else Pe=null;ae!==null&&ky(pe,ne,ae,Pe,!1),ze!==null&&vt!==null&&ky(pe,vt,ze,Pe,!0)}}e:{if(ne=se?ja(se):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var Te=Zg;else if(Xg(ne))if(Kg)Te=jj;else{Te=Nj;var Je=wj}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?se&&Gu(se.elementType)&&(Te=Zg):Te=Aj;if(Te&&(Te=Te(i,se))){Qg(pe,Te,d,ue);break e}Je&&Je(i,ne,se),i==="focusout"&&se&&ne.type==="number"&&se.memoizedProps.value!=null&&Vu(ne,"number",ne.value)}switch(Je=se?ja(se):window,i){case"focusin":(Xg(Je)||Je.contentEditable==="true")&&(cr=Je,ih=se,yl=null);break;case"focusout":yl=ih=cr=null;break;case"mousedown":rh=!0;break;case"contextmenu":case"mouseup":case"dragend":rh=!1,rx(pe,d,ue);break;case"selectionchange":if(Ej)break;case"keydown":case"keyup":rx(pe,d,ue)}var Re;if(th)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else or?Yg(i,d)&&(Be="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Be="onCompositionStart");Be&&(Vg&&d.locale!=="ko"&&(or||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&or&&(Re=Hg()):(Sa=ue,Qu="value"in Sa?Sa.value:Sa.textContent,or=!0)),Je=Yc(se,Be),0<Je.length&&(Be=new Ug(Be,i,null,d,ue),pe.push({event:Be,listeners:Je}),Re?Be.data=Re:(Re=Wg(d),Re!==null&&(Be.data=Re)))),(Re=gj?xj(i,d):yj(i,d))&&(Be=Yc(se,"onBeforeInput"),0<Be.length&&(Je=new Ug("onBeforeInput","beforeinput",null,d,ue),pe.push({event:Je,listeners:Be}),Je.data=Re)),oS(pe,i,se,d,ue)}Dy(pe,o)})}function ql(i,o,d){return{instance:i,listener:o,currentTarget:d}}function Yc(i,o){for(var d=o+"Capture",f=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=dl(i,d),g!=null&&f.unshift(ql(i,g,b)),g=dl(i,o),g!=null&&f.push(ql(i,g,b))),i.tag===3)return f;i=i.return}return[]}function Mr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ky(i,o,d,f,g){for(var b=o._reactName,E=[];d!==null&&d!==f;){var k=d,B=k.alternate,se=k.stateNode;if(k=k.tag,B!==null&&B===f)break;k!==5&&k!==26&&k!==27||se===null||(B=se,g?(se=dl(d,b),se!=null&&E.unshift(ql(d,se,B))):g||(se=dl(d,b),se!=null&&E.push(ql(d,se,B)))),d=d.return}E.length!==0&&i.push({event:o,listeners:E})}var hS=/\r\n?/g,fS=/\u0000|\uFFFD/g;function My(i){return(typeof i=="string"?i:""+i).replace(hS,`
`).replace(fS,"")}function Ly(i,o){return o=My(o),My(i)===o}function Wc(){}function bt(i,o,d,f,g,b){switch(d){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||ir(i,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&ir(i,""+f);break;case"className":Jo(i,"class",f);break;case"tabIndex":Jo(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Jo(i,d,f);break;case"style":Pg(i,f,b);break;case"data":if(o!=="object"){Jo(i,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||d!=="href")){i.removeAttribute(d);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(d);break}f=sc(""+f),i.setAttribute(d,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(d==="formAction"?(o!=="input"&&bt(i,o,"name",g.name,g,null),bt(i,o,"formEncType",g.formEncType,g,null),bt(i,o,"formMethod",g.formMethod,g,null),bt(i,o,"formTarget",g.formTarget,g,null)):(bt(i,o,"encType",g.encType,g,null),bt(i,o,"method",g.method,g,null),bt(i,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(d);break}f=sc(""+f),i.setAttribute(d,f);break;case"onClick":f!=null&&(i.onclick=Wc);break;case"onScroll":f!=null&&tt("scroll",i);break;case"onScrollEnd":f!=null&&tt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(d=f.__html,d!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=d}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}d=sc(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(d,""+f):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":f===!0?i.setAttribute(d,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(d,f):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(d,f):i.removeAttribute(d);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(d):i.setAttribute(d,f);break;case"popover":tt("beforetoggle",i),tt("toggle",i),Ko(i,"popover",f);break;case"xlinkActuate":Zn(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Zn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Zn(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Zn(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Zn(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Zn(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ko(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=$A.get(d)||d,Ko(i,d,f))}}function Df(i,o,d,f,g,b){switch(d){case"style":Pg(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(d=f.__html,d!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=d}}break;case"children":typeof f=="string"?ir(i,f):(typeof f=="number"||typeof f=="bigint")&&ir(i,""+f);break;case"onScroll":f!=null&&tt("scroll",i);break;case"onScrollEnd":f!=null&&tt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sg.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(g=d.endsWith("Capture"),o=d.slice(2,g?d.length-7:void 0),b=i[Ze]||null,b=b!=null?b[d]:null,typeof b=="function"&&i.removeEventListener(o,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(o,f,g);break e}d in i?i[d]=f:f===!0?i.setAttribute(d,""):Ko(i,d,f)}}}function us(i,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",i),tt("load",i);var f=!1,g=!1,b;for(b in d)if(d.hasOwnProperty(b)){var E=d[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:bt(i,o,b,E,d,null)}}g&&bt(i,o,"srcSet",d.srcSet,d,null),f&&bt(i,o,"src",d.src,d,null);return;case"input":tt("invalid",i);var k=b=E=g=null,B=null,se=null;for(f in d)if(d.hasOwnProperty(f)){var ue=d[f];if(ue!=null)switch(f){case"name":g=ue;break;case"type":E=ue;break;case"checked":B=ue;break;case"defaultChecked":se=ue;break;case"value":b=ue;break;case"defaultValue":k=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,o));break;default:bt(i,o,f,ue,d,null)}}kg(i,b,k,B,se,E,g,!1),ec(i);return;case"select":tt("invalid",i),f=E=b=null;for(g in d)if(d.hasOwnProperty(g)&&(k=d[g],k!=null))switch(g){case"value":b=k;break;case"defaultValue":E=k;break;case"multiple":f=k;default:bt(i,o,g,k,d,null)}o=b,d=E,i.multiple=!!f,o!=null?ar(i,!!f,o,!1):d!=null&&ar(i,!!f,d,!0);return;case"textarea":tt("invalid",i),b=g=f=null;for(E in d)if(d.hasOwnProperty(E)&&(k=d[E],k!=null))switch(E){case"value":f=k;break;case"defaultValue":g=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:bt(i,o,E,k,d,null)}Lg(i,f,g,b),ec(i);return;case"option":for(B in d)if(d.hasOwnProperty(B)&&(f=d[B],f!=null))switch(B){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:bt(i,o,B,f,d,null)}return;case"dialog":tt("beforetoggle",i),tt("toggle",i),tt("cancel",i),tt("close",i);break;case"iframe":case"object":tt("load",i);break;case"video":case"audio":for(f=0;f<Gl.length;f++)tt(Gl[f],i);break;case"image":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"embed":case"source":case"link":tt("error",i),tt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in d)if(d.hasOwnProperty(se)&&(f=d[se],f!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:bt(i,o,se,f,d,null)}return;default:if(Gu(o)){for(ue in d)d.hasOwnProperty(ue)&&(f=d[ue],f!==void 0&&Df(i,o,ue,f,d,void 0));return}}for(k in d)d.hasOwnProperty(k)&&(f=d[k],f!=null&&bt(i,o,k,f,d,null))}function mS(i,o,d,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,k=null,B=null,se=null,ue=null;for(ae in d){var pe=d[ae];if(d.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":B=pe;default:f.hasOwnProperty(ae)||bt(i,o,ae,null,f,pe)}}for(var ne in f){var ae=f[ne];if(pe=d[ne],f.hasOwnProperty(ne)&&(ae!=null||pe!=null))switch(ne){case"type":b=ae;break;case"name":g=ae;break;case"checked":se=ae;break;case"defaultChecked":ue=ae;break;case"value":E=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,o));break;default:ae!==pe&&bt(i,o,ne,ae,f,pe)}}$u(i,E,k,B,se,ue,b,g);return;case"select":ae=E=k=ne=null;for(b in d)if(B=d[b],d.hasOwnProperty(b)&&B!=null)switch(b){case"value":break;case"multiple":ae=B;default:f.hasOwnProperty(b)||bt(i,o,b,null,f,B)}for(g in f)if(b=f[g],B=d[g],f.hasOwnProperty(g)&&(b!=null||B!=null))switch(g){case"value":ne=b;break;case"defaultValue":k=b;break;case"multiple":E=b;default:b!==B&&bt(i,o,g,b,f,B)}o=k,d=E,f=ae,ne!=null?ar(i,!!d,ne,!1):!!f!=!!d&&(o!=null?ar(i,!!d,o,!0):ar(i,!!d,d?[]:"",!1));return;case"textarea":ae=ne=null;for(k in d)if(g=d[k],d.hasOwnProperty(k)&&g!=null&&!f.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:bt(i,o,k,null,f,g)}for(E in f)if(g=f[E],b=d[E],f.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":ne=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==b&&bt(i,o,E,g,f,b)}Mg(i,ne,ae);return;case"option":for(var ze in d)if(ne=d[ze],d.hasOwnProperty(ze)&&ne!=null&&!f.hasOwnProperty(ze))switch(ze){case"selected":i.selected=!1;break;default:bt(i,o,ze,null,f,ne)}for(B in f)if(ne=f[B],ae=d[B],f.hasOwnProperty(B)&&ne!==ae&&(ne!=null||ae!=null))switch(B){case"selected":i.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:bt(i,o,B,ne,f,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in d)ne=d[Pe],d.hasOwnProperty(Pe)&&ne!=null&&!f.hasOwnProperty(Pe)&&bt(i,o,Pe,null,f,ne);for(se in f)if(ne=f[se],ae=d[se],f.hasOwnProperty(se)&&ne!==ae&&(ne!=null||ae!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,o));break;default:bt(i,o,se,ne,f,ae)}return;default:if(Gu(o)){for(var vt in d)ne=d[vt],d.hasOwnProperty(vt)&&ne!==void 0&&!f.hasOwnProperty(vt)&&Df(i,o,vt,void 0,f,ne);for(ue in f)ne=f[ue],ae=d[ue],!f.hasOwnProperty(ue)||ne===ae||ne===void 0&&ae===void 0||Df(i,o,ue,ne,f,ae);return}}for(var Q in d)ne=d[Q],d.hasOwnProperty(Q)&&ne!=null&&!f.hasOwnProperty(Q)&&bt(i,o,Q,null,f,ne);for(pe in f)ne=f[pe],ae=d[pe],!f.hasOwnProperty(pe)||ne===ae||ne==null&&ae==null||bt(i,o,pe,ne,f,ae)}var Rf=null,kf=null;function Xc(i){return i.nodeType===9?i:i.ownerDocument}function Oy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Py(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Mf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lf=null;function pS(){var i=window.event;return i&&i.type==="popstate"?i===Lf?!1:(Lf=i,!0):(Lf=null,!1)}var Iy=typeof setTimeout=="function"?setTimeout:void 0,gS=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(i){return By.resolve(null).then(i).catch(yS)}:Iy;function yS(i){setTimeout(function(){throw i})}function Fa(i){return i==="head"}function Hy(i,o){var d=o,f=0,g=0;do{var b=d.nextSibling;if(i.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(0<f&&8>f){d=f;var E=i.ownerDocument;if(d&1&&Yl(E.documentElement),d&2&&Yl(E.body),d&4)for(d=E.head,Yl(d),E=d.firstChild;E;){var k=E.nextSibling,B=E.nodeName;E[yn]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&E.rel.toLowerCase()==="stylesheet"||d.removeChild(E),E=k}}if(g===0){i.removeChild(b),to(o);return}g--}else d==="$"||d==="$?"||d==="$!"?g++:f=d.charCodeAt(0)-48;else f=0;d=b}while(d);to(o)}function Of(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Of(d),xs(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function bS(i,o,d,f){for(;i.nodeType===1;){var g=d;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[yn])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Nn(i.nextSibling),i===null)break}return null}function vS(i,o,d){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Nn(i.nextSibling),i===null))return null;return i}function Pf(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function wS(i,o){var d=i.ownerDocument;if(i.data!=="$?"||d.readyState==="complete")o();else{var f=function(){o(),d.removeEventListener("DOMContentLoaded",f)};d.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Nn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var If=null;function zy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return i;o--}else d==="/$"&&o++}i=i.previousSibling}return null}function Fy(i,o,d){switch(o=Xc(d),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Yl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);xs(i)}var mn=new Map,Uy=new Set;function Qc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ua=Z.d;Z.d={f:NS,r:AS,D:jS,C:SS,L:ES,m:_S,X:TS,S:CS,M:DS};function NS(){var i=ua.f(),o=Fc();return i||o}function AS(i){var o=Ln(i);o!==null&&o.tag===5&&o.type==="form"?o0(o):ua.r(i)}var Lr=typeof document>"u"?null:document;function $y(i,o,d){var f=Lr;if(f&&typeof o=="string"&&o){var g=ln(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof d=="string"&&(g+='[crossorigin="'+d+'"]'),Uy.has(g)||(Uy.add(g),i={rel:i,crossOrigin:d,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),us(o,"link",i),ss(o),f.head.appendChild(o)))}}function jS(i){ua.D(i),$y("dns-prefetch",i,null)}function SS(i,o){ua.C(i,o),$y("preconnect",i,o)}function ES(i,o,d){ua.L(i,o,d);var f=Lr;if(f&&i&&o){var g='link[rel="preload"][as="'+ln(o)+'"]';o==="image"&&d&&d.imageSrcSet?(g+='[imagesrcset="'+ln(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(g+='[imagesizes="'+ln(d.imageSizes)+'"]')):g+='[href="'+ln(i)+'"]';var b=g;switch(o){case"style":b=Or(i);break;case"script":b=Pr(i)}mn.has(b)||(i=p({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:i,as:o},d),mn.set(b,i),f.querySelector(g)!==null||o==="style"&&f.querySelector(Wl(b))||o==="script"&&f.querySelector(Xl(b))||(o=f.createElement("link"),us(o,"link",i),ss(o),f.head.appendChild(o)))}}function _S(i,o){ua.m(i,o);var d=Lr;if(d&&i){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+ln(f)+'"][href="'+ln(i)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Pr(i)}if(!mn.has(b)&&(i=p({rel:"modulepreload",href:i},o),mn.set(b,i),d.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Xl(b)))return}f=d.createElement("link"),us(f,"link",i),ss(f),d.head.appendChild(f)}}}function CS(i,o,d){ua.S(i,o,d);var f=Lr;if(f&&i){var g=tr(f).hoistableStyles,b=Or(i);o=o||"default";var E=g.get(b);if(!E){var k={loading:0,preload:null};if(E=f.querySelector(Wl(b)))k.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},d),(d=mn.get(b))&&Bf(i,d);var B=E=f.createElement("link");ss(B),us(B,"link",i),B._p=new Promise(function(se,ue){B.onload=se,B.onerror=ue}),B.addEventListener("load",function(){k.loading|=1}),B.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Zc(E,o,f)}E={type:"stylesheet",instance:E,count:1,state:k},g.set(b,E)}}}function TS(i,o){ua.X(i,o);var d=Lr;if(d&&i){var f=tr(d).hoistableScripts,g=Pr(i),b=f.get(g);b||(b=d.querySelector(Xl(g)),b||(i=p({src:i,async:!0},o),(o=mn.get(g))&&Hf(i,o),b=d.createElement("script"),ss(b),us(b,"link",i),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function DS(i,o){ua.M(i,o);var d=Lr;if(d&&i){var f=tr(d).hoistableScripts,g=Pr(i),b=f.get(g);b||(b=d.querySelector(Xl(g)),b||(i=p({src:i,async:!0,type:"module"},o),(o=mn.get(g))&&Hf(i,o),b=d.createElement("script"),ss(b),us(b,"link",i),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function Vy(i,o,d,f){var g=(g=ye.current)?Qc(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=Or(d.href),d=tr(g).hoistableStyles,f=d.get(o),f||(f={type:"style",instance:null,count:0,state:null},d.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=Or(d.href);var b=tr(g).hoistableStyles,E=b.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,E),(b=g.querySelector(Wl(i)))&&!b._p&&(E.instance=b,E.state.loading=5),mn.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},mn.set(i,d),b||RS(g,i,d,E.state))),o&&f===null)throw Error(s(528,""));return E}if(o&&f!==null)throw Error(s(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Pr(d),d=tr(g).hoistableScripts,f=d.get(o),f||(f={type:"script",instance:null,count:0,state:null},d.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Or(i){return'href="'+ln(i)+'"'}function Wl(i){return'link[rel="stylesheet"]['+i+"]"}function Gy(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function RS(i,o,d,f){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=i.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),us(o,"link",d),ss(o),i.head.appendChild(o))}function Pr(i){return'[src="'+ln(i)+'"]'}function Xl(i){return"script[async]"+i}function qy(i,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var f=i.querySelector('style[data-href~="'+ln(d.href)+'"]');if(f)return o.instance=f,ss(f),f;var g=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),ss(f),us(f,"style",g),Zc(f,d.precedence,i),o.instance=f;case"stylesheet":g=Or(d.href);var b=i.querySelector(Wl(g));if(b)return o.state.loading|=4,o.instance=b,ss(b),b;f=Gy(d),(g=mn.get(g))&&Bf(f,g),b=(i.ownerDocument||i).createElement("link"),ss(b);var E=b;return E._p=new Promise(function(k,B){E.onload=k,E.onerror=B}),us(b,"link",f),o.state.loading|=4,Zc(b,d.precedence,i),o.instance=b;case"script":return b=Pr(d.src),(g=i.querySelector(Xl(b)))?(o.instance=g,ss(g),g):(f=d,(g=mn.get(b))&&(f=p({},d),Hf(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),ss(g),us(g,"link",f),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Zc(f,d.precedence,i));return o.instance}function Zc(i,o,d){for(var f=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,E=0;E<f.length;E++){var k=f[E];if(k.dataset.precedence===o)b=k;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(i,o.firstChild))}function Bf(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Hf(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Kc=null;function Yy(i,o,d){if(Kc===null){var f=new Map,g=Kc=new Map;g.set(d,f)}else g=Kc,f=g.get(d),f||(f=new Map,g.set(d,f));if(f.has(i))return f;for(f.set(i,null),d=d.getElementsByTagName(i),g=0;g<d.length;g++){var b=d[g];if(!(b[yn]||b[it]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=i+E;var k=f.get(E);k?k.push(b):f.set(E,[b])}}return f}function Wy(i,o,d){i=i.ownerDocument||i,i.head.insertBefore(d,o==="title"?i.querySelector("head > title"):null)}function kS(i,o,d){if(d===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Xy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Ql=null;function MS(){}function LS(i,o,d){if(Ql===null)throw Error(s(475));var f=Ql;if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Or(d.href),b=i.querySelector(Wl(g));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=Jc.bind(f),i.then(f,f)),o.state.loading|=4,o.instance=b,ss(b);return}b=i.ownerDocument||i,d=Gy(d),(g=mn.get(g))&&Bf(d,g),b=b.createElement("link"),ss(b);var E=b;E._p=new Promise(function(k,B){E.onload=k,E.onerror=B}),us(b,"link",d),o.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=Jc.bind(f),i.addEventListener("load",o),i.addEventListener("error",o))}}function OS(){if(Ql===null)throw Error(s(475));var i=Ql;return i.stylesheets&&i.count===0&&zf(i,i.stylesheets),0<i.count?function(o){var d=setTimeout(function(){if(i.stylesheets&&zf(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(d)}}:null}function Jc(){if(this.count--,this.count===0){if(this.stylesheets)zf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ed=null;function zf(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ed=new Map,o.forEach(PS,i),ed=null,Jc.call(i))}function PS(i,o){if(!(o.state.loading&4)){var d=ed.get(i);if(d)var f=d.get(null);else{d=new Map,ed.set(i,d);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(d.set(E.dataset.precedence,E),f=E)}f&&d.set(null,f)}g=o.instance,E=g.getAttribute("data-precedence"),b=d.get(E)||f,b===f&&d.set(null,g),d.set(E,g),this.count++,f=Jc.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Zl={$$typeof:S,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function IS(i,o,d,f,g,b,E,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Aa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Aa(0),this.hiddenUpdates=Aa(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Qy(i,o,d,f,g,b,E,k,B,se,ue,pe){return i=new IS(i,o,d,E,k,B,se,pe),o=1,b===!0&&(o|=24),b=Xs(3,null,null,o),i.current=b,b.stateNode=i,o=vh(),o.refCount++,i.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:d,cache:o},jh(b),i}function Zy(i){return i?(i=fr,i):fr}function Ky(i,o,d,f,g,b){g=Zy(g),f.context===null?f.context=g:f.pendingContext=g,f=Ca(o),f.payload={element:d},b=b===void 0?null:b,b!==null&&(f.callback=b),d=Ta(i,f,o),d!==null&&(en(d,i,o),_l(d,i,o))}function Jy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<o?d:o}}function Ff(i,o){Jy(i,o),(i=i.alternate)&&Jy(i,o)}function eb(i){if(i.tag===13){var o=hr(i,67108864);o!==null&&en(o,i,67108864),Ff(i,67108864)}}var td=!0;function BS(i,o,d,f){var g=I.T;I.T=null;var b=Z.p;try{Z.p=2,Uf(i,o,d,f)}finally{Z.p=b,I.T=g}}function HS(i,o,d,f){var g=I.T;I.T=null;var b=Z.p;try{Z.p=8,Uf(i,o,d,f)}finally{Z.p=b,I.T=g}}function Uf(i,o,d,f){if(td){var g=$f(f);if(g===null)Tf(i,o,f,sd,d),sb(i,f);else if(FS(g,i,o,d,f))f.stopPropagation();else if(sb(i,f),o&4&&-1<zS.indexOf(i)){for(;g!==null;){var b=Ln(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=As(b.pendingLanes);if(E!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;E;){var B=1<<31-lt(E);k.entanglements[1]|=B,E&=~B}Hn(b),(mt&6)===0&&(Hc=Ee()+500,Vl(0))}}break;case 13:k=hr(b,2),k!==null&&en(k,b,2),Fc(),Ff(b,2)}if(b=$f(f),b===null&&Tf(i,o,f,sd,d),b===g)break;g=b}g!==null&&f.stopPropagation()}else Tf(i,o,f,null,d)}}function $f(i){return i=Yu(i),Vf(i)}var sd=null;function Vf(i){if(sd=null,i=bn(i),i!==null){var o=l(i);if(o===null)i=null;else{var d=o.tag;if(d===13){if(i=c(o),i!==null)return i;i=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return sd=i,null}function tb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case $:return 2;case Ne:return 8;case De:case qe:return 32;case xt:return 268435456;default:return 32}default:return 32}}var Gf=!1,Ua=null,$a=null,Va=null,Kl=new Map,Jl=new Map,Ga=[],zS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(i,o){switch(i){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":$a=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":Kl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(o.pointerId)}}function eo(i,o,d,f,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:o,domEventName:d,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},o!==null&&(o=Ln(o),o!==null&&eb(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function FS(i,o,d,f,g){switch(o){case"focusin":return Ua=eo(Ua,i,o,d,f,g),!0;case"dragenter":return $a=eo($a,i,o,d,f,g),!0;case"mouseover":return Va=eo(Va,i,o,d,f,g),!0;case"pointerover":var b=g.pointerId;return Kl.set(b,eo(Kl.get(b)||null,i,o,d,f,g)),!0;case"gotpointercapture":return b=g.pointerId,Jl.set(b,eo(Jl.get(b)||null,i,o,d,f,g)),!0}return!1}function nb(i){var o=bn(i.target);if(o!==null){var d=l(o);if(d!==null){if(o=d.tag,o===13){if(o=c(d),o!==null){i.blockedOn=o,Ie(i.priority,function(){if(d.tag===13){var f=Js();f=U(f);var g=hr(d,f);g!==null&&en(g,d,f),Ff(d,f)}});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function nd(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var d=$f(i.nativeEvent);if(d===null){d=i.nativeEvent;var f=new d.constructor(d.type,d);qu=f,d.target.dispatchEvent(f),qu=null}else return o=Ln(d),o!==null&&eb(o),i.blockedOn=d,!1;o.shift()}return!0}function ab(i,o,d){nd(i)&&d.delete(o)}function US(){Gf=!1,Ua!==null&&nd(Ua)&&(Ua=null),$a!==null&&nd($a)&&($a=null),Va!==null&&nd(Va)&&(Va=null),Kl.forEach(ab),Jl.forEach(ab)}function ad(i,o){i.blockedOn===o&&(i.blockedOn=null,Gf||(Gf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,US)))}var id=null;function ib(i){id!==i&&(id=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){id===i&&(id=null);for(var o=0;o<i.length;o+=3){var d=i[o],f=i[o+1],g=i[o+2];if(typeof f!="function"){if(Vf(f||d)===null)continue;break}var b=Ln(d);b!==null&&(i.splice(o,3),o-=3,$h(b,{pending:!0,data:g,method:d.method,action:f},f,g))}}))}function to(i){function o(B){return ad(B,i)}Ua!==null&&ad(Ua,i),$a!==null&&ad($a,i),Va!==null&&ad(Va,i),Kl.forEach(o),Jl.forEach(o);for(var d=0;d<Ga.length;d++){var f=Ga[d];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Ga.length&&(d=Ga[0],d.blockedOn===null);)nb(d),d.blockedOn===null&&Ga.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(f=0;f<d.length;f+=3){var g=d[f],b=d[f+1],E=g[Ze]||null;if(typeof b=="function")E||ib(d);else if(E){var k=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[Ze]||null)k=E.formAction;else if(Vf(g)!==null)continue}else k=E.action;typeof k=="function"?d[f+1]=k:(d.splice(f,3),f-=3),ib(d)}}}function qf(i){this._internalRoot=i}rd.prototype.render=qf.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var d=o.current,f=Js();Ky(d,f,i,o,null,null)},rd.prototype.unmount=qf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ky(i.current,2,null,i,null,null),Fc(),o[ts]=null}};function rd(i){this._internalRoot=i}rd.prototype.unstable_scheduleHydration=function(i){if(i){var o=_e();i={blockedOn:null,target:i,priority:o};for(var d=0;d<Ga.length&&o!==0&&o<Ga[d].priority;d++);Ga.splice(d,0,i),d===0&&nb(i)}};var rb=e.version;if(rb!=="19.1.1")throw Error(s(527,rb,"19.1.1"));Z.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var $S={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{Ae=ld.inject($S),je=ld}catch{}}return no.createRoot=function(i,o){if(!r(i))throw Error(s(299));var d=!1,f="",g=N0,b=A0,E=j0,k=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks)),o=Qy(i,1,!1,null,null,d,f,g,b,E,k,null),i[ts]=o.current,Cf(i),new qf(o)},no.hydrateRoot=function(i,o,d){if(!r(i))throw Error(s(299));var f=!1,g="",b=N0,E=A0,k=j0,B=null,se=null;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(b=d.onUncaughtError),d.onCaughtError!==void 0&&(E=d.onCaughtError),d.onRecoverableError!==void 0&&(k=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(B=d.unstable_transitionCallbacks),d.formState!==void 0&&(se=d.formState)),o=Qy(i,1,!0,o,d??null,f,g,b,E,k,B,se),o.context=Zy(null),d=o.current,f=Js(),f=U(f),g=Ca(f),g.callback=null,Ta(d,g,f),d=f,o.current.lanes=d,js(o,d),Hn(o),i[ts]=o.current,Cf(i),new rd(o)},no.version="19.1.1",no}var yb;function JS(){if(yb)return Qf.exports;yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qf.exports=KS(),Qf.exports}var eE=JS();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bb="popstate";function tE(n={}){function e(s,r){let{pathname:l,search:c,hash:u}=s.location;return zm("",{pathname:l,search:c,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:jo(r)}return nE(e,t,null,n)}function Dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function En(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sE(){return Math.random().toString(36).substring(2,10)}function vb(n,e){return{usr:n.state,key:n.key,idx:e}}function zm(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?sl(e):e,state:t,key:e&&e.key||s||sE()}}function jo({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function sl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function nE(n,e,t,s={}){let{window:r=document.defaultView,v5Compat:l=!1}=s,c=r.history,u="POP",h=null,m=p();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function p(){return(c.state||{idx:null}).idx}function x(){u="POP";let A=p(),j=A==null?null:A-m;m=A,h&&h({action:u,location:w.location,delta:j})}function y(A,j){u="PUSH";let C=zm(w.location,A,j);m=p()+1;let S=vb(C,m),T=w.createHref(C);try{c.pushState(S,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(T)}l&&h&&h({action:u,location:w.location,delta:1})}function v(A,j){u="REPLACE";let C=zm(w.location,A,j);m=p();let S=vb(C,m),T=w.createHref(C);c.replaceState(S,"",T),l&&h&&h({action:u,location:w.location,delta:0})}function N(A){return aE(A)}let w={get action(){return u},get location(){return n(r,c)},listen(A){if(h)throw new Error("A history only accepts one active listener");return r.addEventListener(bb,x),h=A,()=>{r.removeEventListener(bb,x),h=null}},createHref(A){return e(r,A)},createURL:N,encodeLocation(A){let j=N(A);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:y,replace:v,go(A){return c.go(A)}};return w}function aE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Dt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:jo(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function bw(n,e,t="/"){return iE(n,e,t,!1)}function iE(n,e,t,s){let r=typeof e=="string"?sl(e):e,l=ya(r.pathname||"/",t);if(l==null)return null;let c=vw(n);rE(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=xE(l);u=pE(c[h],m,s)}return u}function vw(n,e=[],t=[],s="",r=!1){let l=(c,u,h=r,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&h)return;Dt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let x=xa([s,p.relativePath]),y=t.concat(p);c.children&&c.children.length>0&&(Dt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),vw(c.children,e,y,x,h)),!(c.path==null&&!c.index)&&e.push({path:x,score:fE(x,c.index),routesMeta:y})};return n.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))l(c,u);else for(let h of ww(c.path))l(c,u,!0,h)}),e}function ww(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return r?[l,""]:[l];let c=ww(s.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),r&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function rE(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var lE=/^:[\w-]+$/,oE=3,cE=2,dE=1,uE=10,hE=-2,wb=n=>n==="*";function fE(n,e){let t=n.split("/"),s=t.length;return t.some(wb)&&(s+=hE),e&&(s+=cE),t.filter(r=>!wb(r)).reduce((r,l)=>r+(lE.test(l)?oE:l===""?dE:uE),s)}function mE(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function pE(n,e,t=!1){let{routesMeta:s}=n,r={},l="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],m=u===s.length-1,p=l==="/"?e:e.slice(l.length)||"/",x=Hd({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),y=h.route;if(!x&&m&&t&&!s[s.length-1].route.index&&(x=Hd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!x)return null;Object.assign(r,x.params),c.push({params:r,pathname:xa([l,x.pathname]),pathnameBase:wE(xa([l,x.pathnameBase])),route:y}),x.pathnameBase!=="/"&&(l=xa([l,x.pathnameBase]))}return c}function Hd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=gE(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:s.reduce((m,{paramName:p,isOptional:x},y)=>{if(p==="*"){let N=u[y]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const v=u[y];return x&&!v?m[p]=void 0:m[p]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function gE(n,e=!1,t=!0){En(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function xE(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return En(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ya(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function yE(n,e="/"){let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?sl(n):n;return{pathname:t?t.startsWith("/")?t:bE(t,e):e,search:NE(s),hash:AE(r)}}function bE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function em(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Np(n){let e=vE(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Ap(n,e,t,s=!1){let r;typeof n=="string"?r=sl(n):(r={...n},Dt(!r.pathname||!r.pathname.includes("?"),em("?","pathname","search",r)),Dt(!r.pathname||!r.pathname.includes("#"),em("#","pathname","hash",r)),Dt(!r.search||!r.search.includes("#"),em("#","search","hash",r)));let l=n===""||r.pathname==="",c=l?"/":r.pathname,u;if(c==null)u=t;else{let x=e.length-1;if(!s&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),x-=1;r.pathname=y.join("/")}u=x>=0?e[x]:"/"}let h=yE(r,u),m=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var xa=n=>n.join("/").replace(/\/\/+/g,"/"),wE=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NE=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,AE=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Nw=["POST","PUT","PATCH","DELETE"];new Set(Nw);var SE=["GET",...Nw];new Set(SE);var nl=_.createContext(null);nl.displayName="DataRouter";var du=_.createContext(null);du.displayName="DataRouterState";_.createContext(!1);var Aw=_.createContext({isTransitioning:!1});Aw.displayName="ViewTransition";var EE=_.createContext(new Map);EE.displayName="Fetchers";var _E=_.createContext(null);_E.displayName="Await";var Tn=_.createContext(null);Tn.displayName="Navigation";var Oo=_.createContext(null);Oo.displayName="Location";var Dn=_.createContext({outlet:null,matches:[],isDataRoute:!1});Dn.displayName="Route";var jp=_.createContext(null);jp.displayName="RouteError";function CE(n,{relative:e}={}){Dt(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=_.useContext(Tn),{hash:r,pathname:l,search:c}=Po(n,{relative:e}),u=l;return t!=="/"&&(u=l==="/"?t:xa([t,l])),s.createHref({pathname:u,search:c,hash:r})}function al(){return _.useContext(Oo)!=null}function va(){return Dt(al(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Oo).location}var jw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sw(n){_.useContext(Tn).static||_.useLayoutEffect(n)}function il(){let{isDataRoute:n}=_.useContext(Dn);return n?$E():TE()}function TE(){Dt(al(),"useNavigate() may be used only in the context of a <Router> component.");let n=_.useContext(nl),{basename:e,navigator:t}=_.useContext(Tn),{matches:s}=_.useContext(Dn),{pathname:r}=va(),l=JSON.stringify(Np(s)),c=_.useRef(!1);return Sw(()=>{c.current=!0}),_.useCallback((h,m={})=>{if(En(c.current,jw),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=Ap(h,JSON.parse(l),r,m.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:xa([e,p.pathname])),(m.replace?t.replace:t.push)(p,m.state,m)},[e,t,l,r,n])}var DE=_.createContext(null);function RE(n){let e=_.useContext(Dn).outlet;return e&&_.createElement(DE.Provider,{value:n},e)}function Po(n,{relative:e}={}){let{matches:t}=_.useContext(Dn),{pathname:s}=va(),r=JSON.stringify(Np(t));return _.useMemo(()=>Ap(n,JSON.parse(r),s,e==="path"),[n,r,s,e])}function kE(n,e){return Ew(n,e)}function Ew(n,e,t,s,r){Dt(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=_.useContext(Tn),{matches:c}=_.useContext(Dn),u=c[c.length-1],h=u?u.params:{},m=u?u.pathname:"/",p=u?u.pathnameBase:"/",x=u&&u.route;{let C=x&&x.path||"";_w(m,!x||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=va(),v;if(e){let C=typeof e=="string"?sl(e):e;Dt(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=y;let N=v.pathname||"/",w=N;if(p!=="/"){let C=p.replace(/^\//,"").split("/");w="/"+N.replace(/^\//,"").split("/").slice(C.length).join("/")}let A=bw(n,{pathname:w});En(x||A!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),En(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=IE(A&&A.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:xa([p,l.encodeLocation?l.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:xa([p,l.encodeLocation?l.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),c,t,s,r);return e&&j?_.createElement(Oo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},j):j}function ME(){let n=UE(),e=jE(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:l},"ErrorBoundary")," or"," ",_.createElement("code",{style:l},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:r},t):null,c)}var LE=_.createElement(ME,null),OE=class extends _.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?_.createElement(Dn.Provider,{value:this.props.routeContext},_.createElement(jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function PE({routeContext:n,match:e,children:t}){let s=_.useContext(nl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Dn.Provider,{value:n},t)}function IE(n,e=[],t=null,s=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let m=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);Dt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,m+1))}let u=!1,h=-1;if(t)for(let m=0;m<l.length;m++){let p=l[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:x,errors:y}=t,v=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||v){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((m,p,x)=>{let y,v=!1,N=null,w=null;t&&(y=c&&p.route.id?c[p.route.id]:void 0,N=p.route.errorElement||LE,u&&(h<0&&x===0?(_w("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):h===x&&(v=!0,w=p.route.hydrateFallbackElement||null)));let A=e.concat(l.slice(0,x+1)),j=()=>{let C;return y?C=N:v?C=w:p.route.Component?C=_.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=m,_.createElement(PE,{match:p,routeContext:{outlet:m,matches:A,isDataRoute:t!=null},children:C})};return t&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?_.createElement(OE,{location:t.location,revalidation:t.revalidation,component:N,error:y,children:j(),routeContext:{outlet:null,matches:A,isDataRoute:!0},unstable_onError:s}):j()},null)}function Sp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BE(n){let e=_.useContext(nl);return Dt(e,Sp(n)),e}function HE(n){let e=_.useContext(du);return Dt(e,Sp(n)),e}function zE(n){let e=_.useContext(Dn);return Dt(e,Sp(n)),e}function Ep(n){let e=zE(n),t=e.matches[e.matches.length-1];return Dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FE(){return Ep("useRouteId")}function UE(){let n=_.useContext(jp),e=HE("useRouteError"),t=Ep("useRouteError");return n!==void 0?n:e.errors?.[t]}function $E(){let{router:n}=BE("useNavigate"),e=Ep("useNavigate"),t=_.useRef(!1);return Sw(()=>{t.current=!0}),_.useCallback(async(r,l={})=>{En(t.current,jw),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...l}))},[n,e])}var Nb={};function _w(n,e,t){!e&&!Nb[n]&&(Nb[n]=!0,En(!1,t))}_.memo(VE);function VE({routes:n,future:e,state:t,unstable_onError:s}){return Ew(n,void 0,t,s,e)}function ga({to:n,replace:e,state:t,relative:s}){Dt(al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=_.useContext(Tn);En(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=_.useContext(Dn),{pathname:c}=va(),u=il(),h=Ap(n,Np(l),c,s==="path"),m=JSON.stringify(h);return _.useEffect(()=>{u(JSON.parse(m),{replace:e,state:t,relative:s})},[u,m,s,e,t]),null}function _p(n){return RE(n.context)}function wt(n){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GE({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:r,static:l=!1}){Dt(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:r,static:l,future:{}}),[c,r,l]);typeof t=="string"&&(t=sl(t));let{pathname:h="/",search:m="",hash:p="",state:x=null,key:y="default"}=t,v=_.useMemo(()=>{let N=ya(h,c);return N==null?null:{location:{pathname:N,search:m,hash:p,state:x,key:y},navigationType:s}},[c,h,m,p,x,y,s]);return En(v!=null,`<Router basename="${c}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:_.createElement(Tn.Provider,{value:u},_.createElement(Oo.Provider,{children:e,value:v}))}function qE({children:n,location:e}){return kE(Fm(n),e)}function Fm(n,e=[]){let t=[];return _.Children.forEach(n,(s,r)=>{if(!_.isValidElement(s))return;let l=[...e,r];if(s.type===_.Fragment){t.push.apply(t,Fm(s.props.children,l));return}Dt(s.type===wt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Fm(s.props.children,l)),t.push(c)}),t}var Ed="get",_d="application/x-www-form-urlencoded";function uu(n){return n!=null&&typeof n.tagName=="string"}function YE(n){return uu(n)&&n.tagName.toLowerCase()==="button"}function WE(n){return uu(n)&&n.tagName.toLowerCase()==="form"}function XE(n){return uu(n)&&n.tagName.toLowerCase()==="input"}function QE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZE(n,e){return n.button===0&&(!e||e==="_self")&&!QE(n)}var od=null;function KE(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var JE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(n){return n!=null&&!JE.has(n)?(En(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):n}function e2(n,e){let t,s,r,l,c;if(WE(n)){let u=n.getAttribute("action");s=u?ya(u,e):null,t=n.getAttribute("method")||Ed,r=tm(n.getAttribute("enctype"))||_d,l=new FormData(n)}else if(YE(n)||XE(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(s=h?ya(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Ed,r=tm(n.getAttribute("formenctype"))||tm(u.getAttribute("enctype"))||_d,l=new FormData(u,n),!KE()){let{name:m,type:p,value:x}=n;if(p==="image"){let y=m?`${m}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else m&&l.append(m,x)}}else{if(uu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ed,s=null,r=_d,c=n}return l&&r==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function t2(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&ya(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function s2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function n2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function a2(n,e,t){let s=await Promise.all(n.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await s2(l,t);return c.links?c.links():[]}return[]}));return o2(s.flat(1).filter(n2).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Ab(n,e,t,s,r,l){let c=(h,m)=>t[m]?h.route.id!==t[m].route.id:!0,u=(h,m)=>t[m].pathname!==h.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==h.params["*"];return l==="assets"?e.filter((h,m)=>c(h,m)||u(h,m)):l==="data"?e.filter((h,m)=>{let p=s.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,m)||u(h,m))return!0;if(h.route.shouldRevalidate){let x=h.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function i2(n,e,{includeHydrateFallback:t}={}){return r2(n.map(s=>{let r=e.routes[s.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function r2(n){return[...new Set(n)]}function l2(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function o2(n,e){let t=new Set;return new Set(e),n.reduce((s,r)=>{let l=JSON.stringify(l2(r));return t.has(l)||(t.add(l),s.push({key:l,link:r})),s},[])}function Cw(){let n=_.useContext(nl);return Cp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function c2(){let n=_.useContext(du);return Cp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Tp=_.createContext(void 0);Tp.displayName="FrameworkContext";function Tw(){let n=_.useContext(Tp);return Cp(n,"You must render this element inside a <HydratedRouter> element"),n}function d2(n,e){let t=_.useContext(Tp),[s,r]=_.useState(!1),[l,c]=_.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:x}=e,y=_.useRef(null);_.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let w=j=>{j.forEach(C=>{c(C.isIntersecting)})},A=new IntersectionObserver(w,{threshold:.5});return y.current&&A.observe(y.current),()=>{A.disconnect()}}},[n]),_.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let v=()=>{r(!0)},N=()=>{r(!1),c(!1)};return t?n!=="intent"?[l,y,{}]:[l,y,{onFocus:ao(u,v),onBlur:ao(h,N),onMouseEnter:ao(m,v),onMouseLeave:ao(p,N),onTouchStart:ao(x,v)}]:[!1,y,{}]}function ao(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function u2({page:n,...e}){let{router:t}=Cw(),s=_.useMemo(()=>bw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?_.createElement(f2,{page:n,matches:s,...e}):null}function h2(n){let{manifest:e,routeModules:t}=Tw(),[s,r]=_.useState([]);return _.useEffect(()=>{let l=!1;return a2(n,e,t).then(c=>{l||r(c)}),()=>{l=!0}},[n,e,t]),s}function f2({page:n,matches:e,...t}){let s=va(),{manifest:r,routeModules:l}=Tw(),{basename:c}=Cw(),{loaderData:u,matches:h}=c2(),m=_.useMemo(()=>Ab(n,e,h,r,s,"data"),[n,e,h,r,s]),p=_.useMemo(()=>Ab(n,e,h,r,s,"assets"),[n,e,h,r,s]),x=_.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let N=new Set,w=!1;if(e.forEach(j=>{let C=r.routes[j.route.id];!C||!C.hasLoader||(!m.some(S=>S.route.id===j.route.id)&&j.route.id in u&&l[j.route.id]?.shouldRevalidate||C.hasClientLoader?w=!0:N.add(j.route.id))}),N.size===0)return[];let A=t2(n,c,"data");return w&&N.size>0&&A.searchParams.set("_routes",e.filter(j=>N.has(j.route.id)).map(j=>j.route.id).join(",")),[A.pathname+A.search]},[c,u,s,r,m,e,n,l]),y=_.useMemo(()=>i2(p,r),[p,r]),v=h2(p);return _.createElement(_.Fragment,null,x.map(N=>_.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),y.map(N=>_.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),v.map(({key:N,link:w})=>_.createElement("link",{key:N,nonce:t.nonce,...w})))}function m2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Dw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dw&&(window.__reactRouterVersion="7.8.2")}catch{}function p2({basename:n,children:e,window:t}){let s=_.useRef();s.current==null&&(s.current=tE({window:t,v5Compat:!0}));let r=s.current,[l,c]=_.useState({action:r.action,location:r.location}),u=_.useCallback(h=>{_.startTransition(()=>c(h))},[c]);return _.useLayoutEffect(()=>r.listen(u),[r,u]),_.createElement(GE,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:r})}var Rw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dp=_.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:r,reloadDocument:l,replace:c,state:u,target:h,to:m,preventScrollReset:p,viewTransition:x,...y},v){let{basename:N}=_.useContext(Tn),w=typeof m=="string"&&Rw.test(m),A,j=!1;if(typeof m=="string"&&w&&(A=m,Dw))try{let L=new URL(window.location.href),K=m.startsWith("//")?new URL(L.protocol+m):new URL(m),z=ya(K.pathname,N);K.origin===L.origin&&z!=null?m=z+K.search+K.hash:j=!0}catch{En(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=CE(m,{relative:r}),[S,T,R]=d2(s,y),O=b2(m,{replace:c,state:u,target:h,preventScrollReset:p,relative:r,viewTransition:x});function H(L){e&&e(L),L.defaultPrevented||O(L)}let V=_.createElement("a",{...y,...R,href:A||C,onClick:j||l?e:H,ref:m2(v,T),target:h,"data-discover":!w&&t==="render"?"true":void 0});return S&&!w?_.createElement(_.Fragment,null,V,_.createElement(u2,{page:C})):V});Dp.displayName="Link";var g2=_.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:r=!1,style:l,to:c,viewTransition:u,children:h,...m},p){let x=Po(c,{relative:m.relative}),y=va(),v=_.useContext(du),{navigator:N,basename:w}=_.useContext(Tn),A=v!=null&&j2(x)&&u===!0,j=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,C=y.pathname,S=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(C=C.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&w&&(S=ya(S,w)||S);const T=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let R=C===j||!r&&C.startsWith(j)&&C.charAt(T)==="/",O=S!=null&&(S===j||!r&&S.startsWith(j)&&S.charAt(j.length)==="/"),H={isActive:R,isPending:O,isTransitioning:A},V=R?e:void 0,L;typeof s=="function"?L=s(H):L=[s,R?"active":null,O?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(H):l;return _.createElement(Dp,{...m,"aria-current":V,className:L,ref:p,style:K,to:c,viewTransition:u},typeof h=="function"?h(H):h)});g2.displayName="NavLink";var x2=_.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:r,state:l,method:c=Ed,action:u,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:x,...y},v)=>{let N=N2(),w=A2(u,{relative:m}),A=c.toLowerCase()==="get"?"get":"post",j=typeof u=="string"&&Rw.test(u),C=S=>{if(h&&h(S),S.defaultPrevented)return;S.preventDefault();let T=S.nativeEvent.submitter,R=T?.getAttribute("formmethod")||c;N(T||S.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:r,state:l,relative:m,preventScrollReset:p,viewTransition:x})};return _.createElement("form",{ref:v,method:A,action:w,onSubmit:s?h:C,...y,"data-discover":!j&&n==="render"?"true":void 0})});x2.displayName="Form";function y2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kw(n){let e=_.useContext(nl);return Dt(e,y2(n)),e}function b2(n,{target:e,replace:t,state:s,preventScrollReset:r,relative:l,viewTransition:c}={}){let u=il(),h=va(),m=Po(n,{relative:l});return _.useCallback(p=>{if(ZE(p,e)){p.preventDefault();let x=t!==void 0?t:jo(h)===jo(m);u(n,{replace:x,state:s,preventScrollReset:r,relative:l,viewTransition:c})}},[h,u,m,t,s,e,n,r,l,c])}var v2=0,w2=()=>`__${String(++v2)}__`;function N2(){let{router:n}=kw("useSubmit"),{basename:e}=_.useContext(Tn),t=FE();return _.useCallback(async(s,r={})=>{let{action:l,method:c,encType:u,formData:h,body:m}=e2(s,e);if(r.navigate===!1){let p=r.fetcherKey||w2();await n.fetch(p,t,r.action||l,{preventScrollReset:r.preventScrollReset,formData:h,body:m,formMethod:r.method||c,formEncType:r.encType||u,flushSync:r.flushSync})}else await n.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:h,body:m,formMethod:r.method||c,formEncType:r.encType||u,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function A2(n,{relative:e}={}){let{basename:t}=_.useContext(Tn),s=_.useContext(Dn);Dt(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),l={...Po(n||".",{relative:e})},c=va();if(n==null){l.search=c.search;let u=new URLSearchParams(l.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(x=>x).forEach(x=>u.append("index",x));let p=u.toString();l.search=p?`?${p}`:""}}return(!n||n===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xa([t,l.pathname])),jo(l)}function j2(n,{relative:e}={}){let t=_.useContext(Aw);Dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=kw("useViewTransitionState"),r=Po(n,{relative:e});if(!t.isTransitioning)return!1;let l=ya(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=ya(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Hd(r.pathname,c)!=null||Hd(r.pathname,l)!=null}var Um=yw();function Mw(n,e){return function(){return n.apply(e,arguments)}}const{toString:S2}=Object.prototype,{getPrototypeOf:Rp}=Object,{iterator:hu,toStringTag:Lw}=Symbol,fu=(n=>e=>{const t=S2.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rn=n=>(n=n.toLowerCase(),e=>fu(e)===n),mu=n=>e=>typeof e===n,{isArray:rl}=Array,So=mu("undefined");function Io(n){return n!==null&&!So(n)&&n.constructor!==null&&!So(n.constructor)&&Fs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Ow=Rn("ArrayBuffer");function E2(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Ow(n.buffer),e}const _2=mu("string"),Fs=mu("function"),Pw=mu("number"),Bo=n=>n!==null&&typeof n=="object",C2=n=>n===!0||n===!1,Cd=n=>{if(fu(n)!=="object")return!1;const e=Rp(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Lw in n)&&!(hu in n)},T2=n=>{if(!Bo(n)||Io(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},D2=Rn("Date"),R2=Rn("File"),k2=Rn("Blob"),M2=Rn("FileList"),L2=n=>Bo(n)&&Fs(n.pipe),O2=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Fs(n.append)&&((e=fu(n))==="formdata"||e==="object"&&Fs(n.toString)&&n.toString()==="[object FormData]"))},P2=Rn("URLSearchParams"),[I2,B2,H2,z2]=["ReadableStream","Request","Response","Headers"].map(Rn),F2=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ho(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),rl(n))for(s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else{if(Io(n))return;const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let u;for(s=0;s<c;s++)u=l[s],e.call(null,n[u],u,n)}}function Iw(n,e){if(Io(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,r;for(;s-- >0;)if(r=t[s],e===r.toLowerCase())return r;return null}const Ri=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bw=n=>!So(n)&&n!==Ri;function $m(){const{caseless:n}=Bw(this)&&this||{},e={},t=(s,r)=>{const l=n&&Iw(e,r)||r;Cd(e[l])&&Cd(s)?e[l]=$m(e[l],s):Cd(s)?e[l]=$m({},s):rl(s)?e[l]=s.slice():e[l]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Ho(arguments[s],t);return e}const U2=(n,e,t,{allOwnKeys:s}={})=>(Ho(e,(r,l)=>{t&&Fs(r)?n[l]=Mw(r,t):n[l]=r},{allOwnKeys:s}),n),$2=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),V2=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},G2=(n,e,t,s)=>{let r,l,c;const u={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),l=r.length;l-- >0;)c=r[l],(!s||s(c,n,e))&&!u[c]&&(e[c]=n[c],u[c]=!0);n=t!==!1&&Rp(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},q2=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},Y2=n=>{if(!n)return null;if(rl(n))return n;let e=n.length;if(!Pw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},W2=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Rp(Uint8Array)),X2=(n,e)=>{const s=(n&&n[hu]).call(n);let r;for(;(r=s.next())&&!r.done;){const l=r.value;e.call(n,l[0],l[1])}},Q2=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},Z2=Rn("HTMLFormElement"),K2=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,r){return s.toUpperCase()+r}),jb=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),J2=Rn("RegExp"),Hw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};Ho(t,(r,l)=>{let c;(c=e(r,l,n))!==!1&&(s[l]=c||r)}),Object.defineProperties(n,s)},e_=n=>{Hw(n,(e,t)=>{if(Fs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Fs(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},t_=(n,e)=>{const t={},s=r=>{r.forEach(l=>{t[l]=!0})};return rl(n)?s(n):s(String(n).split(e)),t},s_=()=>{},n_=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function a_(n){return!!(n&&Fs(n.append)&&n[Lw]==="FormData"&&n[hu])}const i_=n=>{const e=new Array(10),t=(s,r)=>{if(Bo(s)){if(e.indexOf(s)>=0)return;if(Io(s))return s;if(!("toJSON"in s)){e[r]=s;const l=rl(s)?[]:{};return Ho(s,(c,u)=>{const h=t(c,r+1);!So(h)&&(l[u]=h)}),e[r]=void 0,l}}return s};return t(n,0)},r_=Rn("AsyncFunction"),l_=n=>n&&(Bo(n)||Fs(n))&&Fs(n.then)&&Fs(n.catch),zw=((n,e)=>n?setImmediate:e?((t,s)=>(Ri.addEventListener("message",({source:r,data:l})=>{r===Ri&&l===t&&s.length&&s.shift()()},!1),r=>{s.push(r),Ri.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Fs(Ri.postMessage)),o_=typeof queueMicrotask<"u"?queueMicrotask.bind(Ri):typeof process<"u"&&process.nextTick||zw,c_=n=>n!=null&&Fs(n[hu]),oe={isArray:rl,isArrayBuffer:Ow,isBuffer:Io,isFormData:O2,isArrayBufferView:E2,isString:_2,isNumber:Pw,isBoolean:C2,isObject:Bo,isPlainObject:Cd,isEmptyObject:T2,isReadableStream:I2,isRequest:B2,isResponse:H2,isHeaders:z2,isUndefined:So,isDate:D2,isFile:R2,isBlob:k2,isRegExp:J2,isFunction:Fs,isStream:L2,isURLSearchParams:P2,isTypedArray:W2,isFileList:M2,forEach:Ho,merge:$m,extend:U2,trim:F2,stripBOM:$2,inherits:V2,toFlatObject:G2,kindOf:fu,kindOfTest:Rn,endsWith:q2,toArray:Y2,forEachEntry:X2,matchAll:Q2,isHTMLForm:Z2,hasOwnProperty:jb,hasOwnProp:jb,reduceDescriptors:Hw,freezeMethods:e_,toObjectSet:t_,toCamelCase:K2,noop:s_,toFiniteNumber:n_,findKey:Iw,global:Ri,isContextDefined:Bw,isSpecCompliantForm:a_,toJSONObject:i_,isAsyncFn:r_,isThenable:l_,setImmediate:zw,asap:o_,isIterable:c_};function Ye(n,e,t,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}oe.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const Fw=Ye.prototype,Uw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Uw[n]={value:n}});Object.defineProperties(Ye,Uw);Object.defineProperty(Fw,"isAxiosError",{value:!0});Ye.from=(n,e,t,s,r,l)=>{const c=Object.create(Fw);return oe.toFlatObject(n,c,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Ye.call(c,n.message,e,t,s,r),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const d_=null;function Vm(n){return oe.isPlainObject(n)||oe.isArray(n)}function $w(n){return oe.endsWith(n,"[]")?n.slice(0,-2):n}function Sb(n,e,t){return n?n.concat(e).map(function(r,l){return r=$w(r),!t&&l?"["+r+"]":r}).join(t?".":""):e}function u_(n){return oe.isArray(n)&&!n.some(Vm)}const h_=oe.toFlatObject(oe,{},null,function(e){return/^is[A-Z]/.test(e)});function pu(n,e,t){if(!oe.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=oe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,A){return!oe.isUndefined(A[w])});const s=t.metaTokens,r=t.visitor||p,l=t.dots,c=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(e);if(!oe.isFunction(r))throw new TypeError("visitor must be a function");function m(N){if(N===null)return"";if(oe.isDate(N))return N.toISOString();if(oe.isBoolean(N))return N.toString();if(!h&&oe.isBlob(N))throw new Ye("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(N)||oe.isTypedArray(N)?h&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function p(N,w,A){let j=N;if(N&&!A&&typeof N=="object"){if(oe.endsWith(w,"{}"))w=s?w:w.slice(0,-2),N=JSON.stringify(N);else if(oe.isArray(N)&&u_(N)||(oe.isFileList(N)||oe.endsWith(w,"[]"))&&(j=oe.toArray(N)))return w=$w(w),j.forEach(function(S,T){!(oe.isUndefined(S)||S===null)&&e.append(c===!0?Sb([w],T,l):c===null?w:w+"[]",m(S))}),!1}return Vm(N)?!0:(e.append(Sb(A,w,l),m(N)),!1)}const x=[],y=Object.assign(h_,{defaultVisitor:p,convertValue:m,isVisitable:Vm});function v(N,w){if(!oe.isUndefined(N)){if(x.indexOf(N)!==-1)throw Error("Circular reference detected in "+w.join("."));x.push(N),oe.forEach(N,function(j,C){(!(oe.isUndefined(j)||j===null)&&r.call(e,j,oe.isString(C)?C.trim():C,w,y))===!0&&v(j,w?w.concat(C):[C])}),x.pop()}}if(!oe.isObject(n))throw new TypeError("data must be an object");return v(n),e}function Eb(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function kp(n,e){this._pairs=[],n&&pu(n,this,e)}const Vw=kp.prototype;Vw.append=function(e,t){this._pairs.push([e,t])};Vw.toString=function(e){const t=e?function(s){return e.call(this,s,Eb)}:Eb;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function f_(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Gw(n,e,t){if(!e)return n;const s=t&&t.encode||f_;oe.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let l;if(r?l=r(e,t):l=oe.isURLSearchParams(e)?e.toString():new kp(e,t).toString(s),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class _b{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){oe.forEach(this.handlers,function(s){s!==null&&e(s)})}}const qw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m_=typeof URLSearchParams<"u"?URLSearchParams:kp,p_=typeof FormData<"u"?FormData:null,g_=typeof Blob<"u"?Blob:null,x_={isBrowser:!0,classes:{URLSearchParams:m_,FormData:p_,Blob:g_},protocols:["http","https","file","blob","url","data"]},Mp=typeof window<"u"&&typeof document<"u",Gm=typeof navigator=="object"&&navigator||void 0,y_=Mp&&(!Gm||["ReactNative","NativeScript","NS"].indexOf(Gm.product)<0),b_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",v_=Mp&&window.location.href||"http://localhost",w_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mp,hasStandardBrowserEnv:y_,hasStandardBrowserWebWorkerEnv:b_,navigator:Gm,origin:v_},Symbol.toStringTag,{value:"Module"})),ws={...w_,...x_};function N_(n,e){return pu(n,new ws.classes.URLSearchParams,{visitor:function(t,s,r,l){return ws.isNode&&oe.isBuffer(t)?(this.append(s,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function A_(n){return oe.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function j_(n){const e={},t=Object.keys(n);let s;const r=t.length;let l;for(s=0;s<r;s++)l=t[s],e[l]=n[l];return e}function Yw(n){function e(t,s,r,l){let c=t[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=l>=t.length;return c=!c&&oe.isArray(r)?r.length:c,h?(oe.hasOwnProp(r,c)?r[c]=[r[c],s]:r[c]=s,!u):((!r[c]||!oe.isObject(r[c]))&&(r[c]=[]),e(t,s,r[c],l)&&oe.isArray(r[c])&&(r[c]=j_(r[c])),!u)}if(oe.isFormData(n)&&oe.isFunction(n.entries)){const t={};return oe.forEachEntry(n,(s,r)=>{e(A_(s),r,t,0)}),t}return null}function S_(n,e,t){if(oe.isString(n))try{return(e||JSON.parse)(n),oe.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const zo={transitional:qw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,l=oe.isObject(e);if(l&&oe.isHTMLForm(e)&&(e=new FormData(e)),oe.isFormData(e))return r?JSON.stringify(Yw(e)):e;if(oe.isArrayBuffer(e)||oe.isBuffer(e)||oe.isStream(e)||oe.isFile(e)||oe.isBlob(e)||oe.isReadableStream(e))return e;if(oe.isArrayBufferView(e))return e.buffer;if(oe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return N_(e,this.formSerializer).toString();if((u=oe.isFileList(e))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return pu(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||r?(t.setContentType("application/json",!1),S_(e)):e}],transformResponse:[function(e){const t=this.transitional||zo.transitional,s=t&&t.forcedJSONParsing,r=this.responseType==="json";if(oe.isResponse(e)||oe.isReadableStream(e))return e;if(e&&oe.isString(e)&&(s&&!this.responseType||r)){const c=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Ye.from(u,Ye.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ws.classes.FormData,Blob:ws.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],n=>{zo.headers[n]={}});const E_=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),__=n=>{const e={};let t,s,r;return n&&n.split(`
`).forEach(function(c){r=c.indexOf(":"),t=c.substring(0,r).trim().toLowerCase(),s=c.substring(r+1).trim(),!(!t||e[t]&&E_[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},Cb=Symbol("internals");function io(n){return n&&String(n).trim().toLowerCase()}function Td(n){return n===!1||n==null?n:oe.isArray(n)?n.map(Td):String(n)}function C_(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const T_=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function sm(n,e,t,s,r){if(oe.isFunction(s))return s.call(this,e,t);if(r&&(e=t),!!oe.isString(e)){if(oe.isString(s))return e.indexOf(s)!==-1;if(oe.isRegExp(s))return s.test(e)}}function D_(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function R_(n,e){const t=oe.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(r,l,c){return this[s].call(this,e,r,l,c)},configurable:!0})})}let Us=class{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function l(u,h,m){const p=io(h);if(!p)throw new Error("header name must be a non-empty string");const x=oe.findKey(r,p);(!x||r[x]===void 0||m===!0||m===void 0&&r[x]!==!1)&&(r[x||h]=Td(u))}const c=(u,h)=>oe.forEach(u,(m,p)=>l(m,p,h));if(oe.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(oe.isString(e)&&(e=e.trim())&&!T_(e))c(__(e),t);else if(oe.isObject(e)&&oe.isIterable(e)){let u={},h,m;for(const p of e){if(!oe.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?oe.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(u,t)}else e!=null&&l(t,e,s);return this}get(e,t){if(e=io(e),e){const s=oe.findKey(this,e);if(s){const r=this[s];if(!t)return r;if(t===!0)return C_(r);if(oe.isFunction(t))return t.call(this,r,s);if(oe.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=io(e),e){const s=oe.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||sm(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let r=!1;function l(c){if(c=io(c),c){const u=oe.findKey(s,c);u&&(!t||sm(s,s[u],u,t))&&(delete s[u],r=!0)}}return oe.isArray(e)?e.forEach(l):l(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const l=t[s];(!e||sm(this,this[l],l,e,!0))&&(delete this[l],r=!0)}return r}normalize(e){const t=this,s={};return oe.forEach(this,(r,l)=>{const c=oe.findKey(s,l);if(c){t[c]=Td(r),delete t[l];return}const u=e?D_(l):String(l).trim();u!==l&&delete t[l],t[u]=Td(r),s[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return oe.forEach(this,(s,r)=>{s!=null&&s!==!1&&(t[r]=e&&oe.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[Cb]=this[Cb]={accessors:{}}).accessors,r=this.prototype;function l(c){const u=io(c);s[u]||(R_(r,c),s[u]=!0)}return oe.isArray(e)?e.forEach(l):l(e),this}};Us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(Us.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});oe.freezeMethods(Us);function nm(n,e){const t=this||zo,s=e||t,r=Us.from(s.headers);let l=s.data;return oe.forEach(n,function(u){l=u.call(t,l,r.normalize(),e?e.status:void 0)}),r.normalize(),l}function Ww(n){return!!(n&&n.__CANCEL__)}function ll(n,e,t){Ye.call(this,n??"canceled",Ye.ERR_CANCELED,e,t),this.name="CanceledError"}oe.inherits(ll,Ye,{__CANCEL__:!0});function Xw(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new Ye("Request failed with status code "+t.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function k_(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function M_(n,e){n=n||10;const t=new Array(n),s=new Array(n);let r=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const m=Date.now(),p=s[l];c||(c=m),t[r]=h,s[r]=m;let x=l,y=0;for(;x!==r;)y+=t[x++],x=x%n;if(r=(r+1)%n,r===l&&(l=(l+1)%n),m-c<e)return;const v=p&&m-p;return v?Math.round(y*1e3/v):void 0}}function L_(n,e){let t=0,s=1e3/e,r,l;const c=(m,p=Date.now())=>{t=p,r=null,l&&(clearTimeout(l),l=null),n(...m)};return[(...m)=>{const p=Date.now(),x=p-t;x>=s?c(m,p):(r=m,l||(l=setTimeout(()=>{l=null,c(r)},s-x)))},()=>r&&c(r)]}const zd=(n,e,t=3)=>{let s=0;const r=M_(50,250);return L_(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,h=c-s,m=r(h),p=c<=u;s=c;const x={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-c)/m:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(x)},t)},Tb=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},Db=n=>(...e)=>oe.asap(()=>n(...e)),O_=ws.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ws.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ws.origin),ws.navigator&&/(msie|trident)/i.test(ws.navigator.userAgent)):()=>!0,P_=ws.hasStandardBrowserEnv?{write(n,e,t,s,r,l){const c=[n+"="+encodeURIComponent(e)];oe.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),oe.isString(s)&&c.push("path="+s),oe.isString(r)&&c.push("domain="+r),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function I_(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function B_(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Qw(n,e,t){let s=!I_(e);return n&&(s||t==!1)?B_(n,e):e}const Rb=n=>n instanceof Us?{...n}:n;function zi(n,e){e=e||{};const t={};function s(m,p,x,y){return oe.isPlainObject(m)&&oe.isPlainObject(p)?oe.merge.call({caseless:y},m,p):oe.isPlainObject(p)?oe.merge({},p):oe.isArray(p)?p.slice():p}function r(m,p,x,y){if(oe.isUndefined(p)){if(!oe.isUndefined(m))return s(void 0,m,x,y)}else return s(m,p,x,y)}function l(m,p){if(!oe.isUndefined(p))return s(void 0,p)}function c(m,p){if(oe.isUndefined(p)){if(!oe.isUndefined(m))return s(void 0,m)}else return s(void 0,p)}function u(m,p,x){if(x in e)return s(m,p);if(x in n)return s(void 0,m)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(m,p,x)=>r(Rb(m),Rb(p),x,!0)};return oe.forEach(Object.keys({...n,...e}),function(p){const x=h[p]||r,y=x(n[p],e[p],p);oe.isUndefined(y)&&x!==u||(t[p]=y)}),t}const Zw=n=>{const e=zi({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:l,headers:c,auth:u}=e;e.headers=c=Us.from(c),e.url=Gw(Qw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(oe.isFormData(t)){if(ws.hasStandardBrowserEnv||ws.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[m,...p]=h?h.split(";").map(x=>x.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",...p].join("; "))}}if(ws.hasStandardBrowserEnv&&(s&&oe.isFunction(s)&&(s=s(e)),s||s!==!1&&O_(e.url))){const m=r&&l&&P_.read(l);m&&c.set(r,m)}return e},H_=typeof XMLHttpRequest<"u",z_=H_&&function(n){return new Promise(function(t,s){const r=Zw(n);let l=r.data;const c=Us.from(r.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=r,p,x,y,v,N;function w(){v&&v(),N&&N(),r.cancelToken&&r.cancelToken.unsubscribe(p),r.signal&&r.signal.removeEventListener("abort",p)}let A=new XMLHttpRequest;A.open(r.method.toUpperCase(),r.url,!0),A.timeout=r.timeout;function j(){if(!A)return;const S=Us.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),R={data:!u||u==="text"||u==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:S,config:n,request:A};Xw(function(H){t(H),w()},function(H){s(H),w()},R),A=null}"onloadend"in A?A.onloadend=j:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(j)},A.onabort=function(){A&&(s(new Ye("Request aborted",Ye.ECONNABORTED,n,A)),A=null)},A.onerror=function(){s(new Ye("Network Error",Ye.ERR_NETWORK,n,A)),A=null},A.ontimeout=function(){let T=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const R=r.transitional||qw;r.timeoutErrorMessage&&(T=r.timeoutErrorMessage),s(new Ye(T,R.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,n,A)),A=null},l===void 0&&c.setContentType(null),"setRequestHeader"in A&&oe.forEach(c.toJSON(),function(T,R){A.setRequestHeader(R,T)}),oe.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),u&&u!=="json"&&(A.responseType=r.responseType),m&&([y,N]=zd(m,!0),A.addEventListener("progress",y)),h&&A.upload&&([x,v]=zd(h),A.upload.addEventListener("progress",x),A.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(p=S=>{A&&(s(!S||S.type?new ll(null,n,A):S),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(p),r.signal&&(r.signal.aborted?p():r.signal.addEventListener("abort",p)));const C=k_(r.url);if(C&&ws.protocols.indexOf(C)===-1){s(new Ye("Unsupported protocol "+C+":",Ye.ERR_BAD_REQUEST,n));return}A.send(l||null)})},F_=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,r;const l=function(m){if(!r){r=!0,u();const p=m instanceof Error?m:this.reason;s.abort(p instanceof Ye?p:new ll(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Ye(`timeout ${e} of ms exceeded`,Ye.ETIMEDOUT))},e);const u=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),n=null)};n.forEach(m=>m.addEventListener("abort",l));const{signal:h}=s;return h.unsubscribe=()=>oe.asap(u),h}},U_=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,r;for(;s<t;)r=s+e,yield n.slice(s,r),s=r},$_=async function*(n,e){for await(const t of V_(n))yield*U_(t,e)},V_=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},kb=(n,e,t,s)=>{const r=$_(n,e);let l=0,c,u=h=>{c||(c=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await r.next();if(m){u(),h.close();return}let x=p.byteLength;if(t){let y=l+=x;t(y)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),r.return()}},{highWaterMark:2})},gu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Kw=gu&&typeof ReadableStream=="function",G_=gu&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Jw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},q_=Kw&&Jw(()=>{let n=!1;const e=new Request(ws.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Mb=64*1024,qm=Kw&&Jw(()=>oe.isReadableStream(new Response("").body)),Fd={stream:qm&&(n=>n.body)};gu&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Fd[e]&&(Fd[e]=oe.isFunction(n[e])?t=>t[e]():(t,s)=>{throw new Ye(`Response type '${e}' is not supported`,Ye.ERR_NOT_SUPPORT,s)})})})(new Response);const Y_=async n=>{if(n==null)return 0;if(oe.isBlob(n))return n.size;if(oe.isSpecCompliantForm(n))return(await new Request(ws.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(n)||oe.isArrayBuffer(n))return n.byteLength;if(oe.isURLSearchParams(n)&&(n=n+""),oe.isString(n))return(await G_(n)).byteLength},W_=async(n,e)=>{const t=oe.toFiniteNumber(n.getContentLength());return t??Y_(e)},X_=gu&&(async n=>{let{url:e,method:t,data:s,signal:r,cancelToken:l,timeout:c,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:x="same-origin",fetchOptions:y}=Zw(n);m=m?(m+"").toLowerCase():"text";let v=F_([r,l&&l.toAbortSignal()],c),N;const w=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let A;try{if(h&&q_&&t!=="get"&&t!=="head"&&(A=await W_(p,s))!==0){let R=new Request(e,{method:"POST",body:s,duplex:"half"}),O;if(oe.isFormData(s)&&(O=R.headers.get("content-type"))&&p.setContentType(O),R.body){const[H,V]=Tb(A,zd(Db(h)));s=kb(R.body,Mb,H,V)}}oe.isString(x)||(x=x?"include":"omit");const j="credentials"in Request.prototype;N=new Request(e,{...y,signal:v,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:s,duplex:"half",credentials:j?x:void 0});let C=await fetch(N,y);const S=qm&&(m==="stream"||m==="response");if(qm&&(u||S&&w)){const R={};["status","statusText","headers"].forEach(L=>{R[L]=C[L]});const O=oe.toFiniteNumber(C.headers.get("content-length")),[H,V]=u&&Tb(O,zd(Db(u),!0))||[];C=new Response(kb(C.body,Mb,H,()=>{V&&V(),w&&w()}),R)}m=m||"text";let T=await Fd[oe.findKey(Fd,m)||"text"](C,n);return!S&&w&&w(),await new Promise((R,O)=>{Xw(R,O,{data:T,headers:Us.from(C.headers),status:C.status,statusText:C.statusText,config:n,request:N})})}catch(j){throw w&&w(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,n,N),{cause:j.cause||j}):Ye.from(j,j&&j.code,n,N)}}),Ym={http:d_,xhr:z_,fetch:X_};oe.forEach(Ym,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Lb=n=>`- ${n}`,Q_=n=>oe.isFunction(n)||n===null||n===!1,e1={getAdapter:n=>{n=oe.isArray(n)?n:[n];const{length:e}=n;let t,s;const r={};for(let l=0;l<e;l++){t=n[l];let c;if(s=t,!Q_(t)&&(s=Ym[(c=String(t)).toLowerCase()],s===void 0))throw new Ye(`Unknown adapter '${c}'`);if(s)break;r[c||"#"+l]=s}if(!s){const l=Object.entries(r).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(Lb).join(`
`):" "+Lb(l[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s},adapters:Ym};function am(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new ll(null,n)}function Ob(n){return am(n),n.headers=Us.from(n.headers),n.data=nm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),e1.getAdapter(n.adapter||zo.adapter)(n).then(function(s){return am(n),s.data=nm.call(n,n.transformResponse,s),s.headers=Us.from(s.headers),s},function(s){return Ww(s)||(am(n),s&&s.response&&(s.response.data=nm.call(n,n.transformResponse,s.response),s.response.headers=Us.from(s.response.headers))),Promise.reject(s)})}const t1="1.11.0",xu={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{xu[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Pb={};xu.transitional=function(e,t,s){function r(l,c){return"[Axios v"+t1+"] Transitional option '"+l+"'"+c+(s?". "+s:"")}return(l,c,u)=>{if(e===!1)throw new Ye(r(c," has been removed"+(t?" in "+t:"")),Ye.ERR_DEPRECATED);return t&&!Pb[c]&&(Pb[c]=!0,console.warn(r(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,u):!0}};xu.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Z_(n,e,t){if(typeof n!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const l=s[r],c=e[l];if(c){const u=n[l],h=u===void 0||c(u,l,n);if(h!==!0)throw new Ye("option "+l+" must be "+h,Ye.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ye("Unknown option "+l,Ye.ERR_BAD_OPTION)}}const Dd={assertOptions:Z_,validators:xu},Un=Dd.validators;let Ii=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _b,response:new _b}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=zi(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:l}=t;s!==void 0&&Dd.assertOptions(s,{silentJSONParsing:Un.transitional(Un.boolean),forcedJSONParsing:Un.transitional(Un.boolean),clarifyTimeoutError:Un.transitional(Un.boolean)},!1),r!=null&&(oe.isFunction(r)?t.paramsSerializer={serialize:r}:Dd.assertOptions(r,{encode:Un.function,serialize:Un.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Dd.assertOptions(t,{baseUrl:Un.spelling("baseURL"),withXsrfToken:Un.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&oe.merge(l.common,l[t.method]);l&&oe.forEach(["delete","get","head","post","put","patch","common"],N=>{delete l[N]}),t.headers=Us.concat(c,l);const u=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(t)===!1||(h=h&&w.synchronous,u.unshift(w.fulfilled,w.rejected))});const m=[];this.interceptors.response.forEach(function(w){m.push(w.fulfilled,w.rejected)});let p,x=0,y;if(!h){const N=[Ob.bind(this),void 0];for(N.unshift(...u),N.push(...m),y=N.length,p=Promise.resolve(t);x<y;)p=p.then(N[x++],N[x++]);return p}y=u.length;let v=t;for(x=0;x<y;){const N=u[x++],w=u[x++];try{v=N(v)}catch(A){w.call(this,A);break}}try{p=Ob.call(this,v)}catch(N){return Promise.reject(N)}for(x=0,y=m.length;x<y;)p=p.then(m[x++],m[x++]);return p}getUri(e){e=zi(this.defaults,e);const t=Qw(e.baseURL,e.url,e.allowAbsoluteUrls);return Gw(t,e.params,e.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(e){Ii.prototype[e]=function(t,s){return this.request(zi(s||{},{method:e,url:t,data:(s||{}).data}))}});oe.forEach(["post","put","patch"],function(e){function t(s){return function(l,c,u){return this.request(zi(u||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Ii.prototype[e]=t(),Ii.prototype[e+"Form"]=t(!0)});let K_=class s1{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const s=this;this.promise.then(r=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](r);s._listeners=null}),this.promise.then=r=>{let l;const c=new Promise(u=>{s.subscribe(u),l=u}).then(r);return c.cancel=function(){s.unsubscribe(l)},c},e(function(l,c,u){s.reason||(s.reason=new ll(l,c,u),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new s1(function(r){e=r}),cancel:e}}};function J_(n){return function(t){return n.apply(null,t)}}function eC(n){return oe.isObject(n)&&n.isAxiosError===!0}const Wm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wm).forEach(([n,e])=>{Wm[e]=n});function n1(n){const e=new Ii(n),t=Mw(Ii.prototype.request,e);return oe.extend(t,Ii.prototype,e,{allOwnKeys:!0}),oe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return n1(zi(n,r))},t}const $t=n1(zo);$t.Axios=Ii;$t.CanceledError=ll;$t.CancelToken=K_;$t.isCancel=Ww;$t.VERSION=t1;$t.toFormData=pu;$t.AxiosError=Ye;$t.Cancel=$t.CanceledError;$t.all=function(e){return Promise.all(e)};$t.spread=J_;$t.isAxiosError=eC;$t.mergeConfig=zi;$t.AxiosHeaders=Us;$t.formToJSON=n=>Yw(oe.isHTMLForm(n)?new FormData(n):n);$t.getAdapter=e1.getAdapter;$t.HttpStatusCode=Wm;$t.default=$t;const{Axios:aI,AxiosError:iI,CanceledError:rI,isCancel:lI,CancelToken:oI,VERSION:cI,all:dI,Cancel:uI,isAxiosError:hI,spread:fI,toFormData:mI,AxiosHeaders:pI,HttpStatusCode:gI,formToJSON:xI,getAdapter:yI,mergeConfig:bI}=$t,xe=$t.create({baseURL:"http://localhost:4000/api",headers:{"Content-Type":"application/json"}});xe.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));const a1=_.createContext(),tC=({children:n})=>{const[e,t]=_.useState(null),[s,r]=_.useState(localStorage.getItem("token")||null),[l,c]=_.useState(!0),u=async(y,v)=>{const N=await xe.post("/auth/login",{email:y,password:v});r(N.data.token),localStorage.setItem("token",N.data.token),t(N.data.user)},h=()=>{t(null),r(null),localStorage.removeItem("token")},m=async y=>(await xe.post("/auth/forgot-password",{email:y})).data,p=async(y,v)=>(await xe.post("/auth/verify-otp",{email:y,otp:v})).data,x=async(y,v,N)=>(await xe.post("/auth/reset-password",{email:y,otp:v,password:N})).data;return _.useEffect(()=>{(async()=>{if(s)try{const v=await xe.get("/auth/me",{headers:{Authorization:`Bearer ${s}`}});t(v.data)}catch{h()}c(!1)})()},[s]),a.jsx(a1.Provider,{value:{user:e,token:s,loading:l,login:u,logout:h,requestPasswordReset:m,verifyOtp:p,resetPassword:x},children:n})},os=()=>_.useContext(a1);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Ib=n=>{const e=nC(n);return e.charAt(0).toUpperCase()+e.slice(1)},i1=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),aC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...iC,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:i1("lucide",r),...!l&&!aC(u)&&{"aria-hidden":"true"},...u},[...c.map(([m,p])=>_.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(n,e)=>{const t=_.forwardRef(({className:s,...r},l)=>_.createElement(rC,{ref:l,iconNode:e,className:i1(`lucide-${sC(Ib(n))}`,`lucide-${n}`,s),...r}));return t.displayName=Ib(n),t};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oC=nt("arrow-left",lC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],im=nt("arrow-right",cC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],uC=nt("camera",dC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$s=nt("calendar",hC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],rm=nt("chart-column",fC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cd=nt("chevron-down",mC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gC=nt("chevron-left",pC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yC=nt("chevron-right",xC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],dd=nt("chevron-up",bC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ms=nt("circle-alert",vC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ps=nt("circle-check-big",wC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Bb=nt("circle-user",NC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hs=nt("circle-x",AC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jn=nt("clock",jC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ud=nt("coffee",SC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lm=nt("credit-card",EC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],r1=nt("dollar-sign",_C);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xm=nt("eye-off",CC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zr=nt("eye",TC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],go=nt("file-text",DC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kC=nt("funnel",RC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],$d=nt("heart",MC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],OC=nt("info",LC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],IC=nt("loader",PC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ur=nt("lock",BC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],zC=nt("log-out",HC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],l1=nt("mail",FC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],o1=nt("menu",UC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bi=nt("plus",$C);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fi=nt("refresh-cw",VC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],c1=nt("search",GC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qm=nt("square-pen",qC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Eo=nt("trash-2",YC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Zm=nt("user",WC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vd=nt("users",XC);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Fo=nt("x",QC),ZC=()=>{const[n,e]=_.useState(""),[t,s]=_.useState(""),[r,l]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(""),{login:p}=os(),x=il(),y=async v=>{if(v.preventDefault(),m(""),u(!0),!n||!t){m("Please fill in all fields"),u(!1);return}if(!n.includes("@")){m("Please enter a valid email address"),u(!1);return}try{await p(n,t);const N=JSON.parse(localStorage.getItem("user"))?.role;x(N==="admin"?"/admin":N==="hr"?"/hr":"/employee")}catch(N){m(N.response?.data?.message||"Invalid credentials")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 flex items-center justify-center p-3 sm:p-4",children:a.jsxs("div",{className:"max-w-sm w-full space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-[#104774] rounded-full flex items-center justify-center mb-3",children:a.jsx(Ur,{className:"h-5 w-5 text-white"})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1",children:"Welcome back"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Please sign in to your account"})]}),a.jsx("div",{className:"bg-white py-4 sm:py-6 px-4 sm:px-6 shadow-lg rounded-lg border border-gray-100",children:a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[h&&a.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx(ms,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-red-700",children:h})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Email address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:a.jsx(l1,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full pl-8 pr-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#104774] focus:border-[#104774] text-xs sm:text-sm transition-colors duration-200",placeholder:"Enter your email",value:n,onChange:v=>e(v.target.value),disabled:c})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:a.jsx(Ur,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full pl-8 pr-8 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#104774] focus:border-[#104774] text-xs sm:text-sm transition-colors duration-200",placeholder:"Enter your password",value:t,onChange:v=>s(v.target.value),disabled:c}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-2 flex items-center",onClick:()=>l(!r),disabled:c,children:r?a.jsx(Xm,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"}):a.jsx(Zr,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]}),a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{onClick:()=>x("/forgot-password"),type:"button",className:"text-xs sm:text-sm text-[#104774] hover:text-[#0d385d] font-medium transition-colors duration-200",children:"Forgot your password?"})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-xs sm:text-sm font-medium rounded-lg text-white bg-[#104774] hover:bg-[#0d385d] focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-[#104774] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:c?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Signing in..."})]}):"Sign in"})})]})})]})})},KC="/assets/gys_logo-Blem-OFh.png",Lp=({closeSidebar:n})=>{const{user:e,logout:t}=os(),s=va(),r=_.useRef(null);if(!e)return null;const l={admin:[{label:"Dashboard",path:"/admin",icon:rm},{label:"Manage Employees",path:"/admin/manage-employees",icon:Vd},{label:"Attendance Management",path:"/admin/attendance",icon:jn},{label:"Payroll Approval",path:"/admin/payroll-approval",icon:lm},{label:"Calendar",path:"/admin/calendar",icon:$s},{label:"Leaves Management",path:"/admin/leaves",icon:go}],hr:[{label:"Dashboard",path:"/hr",icon:rm},{label:"Manage Employees",path:"/hr/manage-employees",icon:Vd},{label:"Attendance Management",path:"/hr/attendance",icon:jn},{label:"Payroll",path:"/hr/payroll",icon:lm},{label:"Leaves Management",path:"/hr/leaves",icon:go},{label:"My Profile",path:"/hr/profile",icon:Bb},{label:"Calendar",path:"/hr/calendar",icon:$s}],employee:[{label:"Dashboard",path:"/employee",icon:rm},{label:"My Attendance",path:"/employee/attendance",icon:jn},{label:"My Leaves",path:"/employee/leaves",icon:go},{label:"Payslip",path:"/employee/payslip",icon:lm},{label:"My Profile",path:"/employee/profile",icon:Bb},{label:"Calendar",path:"/employee/calendar",icon:$s}]};return _.useEffect(()=>{const c=u=>{r.current&&!r.current.contains(u.target)&&window.innerWidth<1024&&n()};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[n]),a.jsxs("div",{ref:r,className:"bg-white shadow-lg w-60 sm:w-60 lg:w-72 min-h-screen flex flex-col relative transition-all duration-200",children:[a.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center min-w-0 flex-1",children:a.jsx("img",{src:KC,alt:"GYS Logo",className:"h-20 w-auto object-contain max-w-full"})}),a.jsx("button",{onClick:n,className:"lg:hidden text-gray-600 hover:text-gray-900 p-1 rounded-md hover:bg-gray-100 transition-colors flex-shrink-0",children:a.jsx("span",{className:"text-base",children:""})})]}),a.jsx("div",{className:"p-3 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[e?.avatarUrl?a.jsx("img",{src:e?.avatarUrl,alt:e.firstName,className:"w-10 h-10 rounded-full object-cover border border-gray-200 flex-shrink-0"}):a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-300 to-gray-400 rounded-full flex items-center justify-center flex-shrink-0",children:a.jsx(Zm,{size:16,className:"text-gray-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"font-semibold text-gray-800 text-sm truncate",children:`${e?.firstName||""} ${e?.lastName||""}`}),a.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full mt-1 truncate",children:e?.designation?.toUpperCase()||e?.role?.toUpperCase()})]})]})}),a.jsx("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:l[e.role]?.map((c,u)=>{const h=c.icon,m=s.pathname===c.path;return a.jsxs(Dp,{to:c.path,onClick:n,className:`w-full flex items-center px-3 py-2 rounded-md transition-all duration-200 group min-h-[2.25rem] ${m?"bg-gradient-to-r from-[#104774] to-[#0d3a61] text-white shadow-sm scale-[1.02]":"text-gray-600 hover:bg-gray-50 hover:text-[#104774]"}`,children:[a.jsx(h,{size:16,className:`mr-3 transition-transform duration-200 flex-shrink-0 w-4 h-4 ${m?"scale-110":"group-hover:scale-110"}`}),a.jsx("span",{className:"font-medium text-sm truncate flex-1 leading-tight",children:c.label})]},u)})}),a.jsx("div",{className:"p-3 border-t border-gray-100 mt-4",children:a.jsxs("button",{onClick:t,className:"w-full flex items-center px-3 py-2 text-red-600 hover:bg-red-50 rounded-md transition-all duration-200 group min-h-[2.25rem]",children:[a.jsx(zC,{size:16,className:"mr-3 transition-transform duration-200 group-hover:scale-110 flex-shrink-0 w-4 h-4"}),a.jsx("span",{className:"font-medium text-sm truncate",children:"Log Out"})]})})]})},Op=({onMenuClick:n})=>{const{user:e}=os();if(!e)return null;const t=new Date().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short"}),s=new Date().getHours();let r="Hello";return s<12?r="Good Morning":s<18?r="Good Afternoon":r="Good Evening",a.jsxs("div",{className:"sticky top-0 z-50 bg-gradient-to-r from-white to-gray-50 px-3 py-2 flex justify-between items-center border-b border-gray-200 shadow-sm min-h-[56px]",children:[a.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[a.jsx("button",{onClick:n,className:"lg:hidden p-1.5 rounded-md text-gray-700 hover:bg-gray-100 transition-colors flex-shrink-0",children:a.jsx(o1,{size:18,className:"w-5 h-5"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsxs("h1",{className:"text-sm font-bold text-gray-800 leading-tight truncate",children:[r,", ",e.firstName]}),a.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:t})]})]}),a.jsx("div",{className:"flex-shrink-0 ml-3",children:a.jsx("span",{className:"px-2 py-0.5 bg-gradient-to-r from-[#104774] to-[#0d3a61] text-white rounded-full text-xs font-medium shadow whitespace-nowrap",children:e.role.toUpperCase()})})]})},JC=()=>{const[n,e]=_.useState(!1);return a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:`fixed inset-0 z-40 lg:static lg:translate-x-0 transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:a.jsx(Lp,{closeSidebar:()=>e(!1)})}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[a.jsx(Op,{onMenuClick:()=>e(!0)}),a.jsx("div",{className:"p-6 flex-1 bg-gray-50 overflow-y-auto",children:a.jsx(_p,{})})]})]})},eT=()=>{const[n,e]=_.useState(!1);return a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:`fixed inset-0 z-40 lg:static lg:translate-x-0 transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:a.jsx(Lp,{closeSidebar:()=>e(!1)})}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[a.jsx(Op,{onMenuClick:()=>e(!0)}),a.jsx("div",{className:"p-6 flex-1 bg-gray-50 overflow-y-auto",children:a.jsx(_p,{})})]})]})},tT=()=>{const[n,e]=_.useState(!1);return a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:`fixed inset-0 z-40 lg:static lg:translate-x-0 transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:a.jsx(Lp,{closeSidebar:()=>e(!1)})}),a.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[a.jsx(Op,{onMenuClick:()=>e(!0)}),a.jsx("div",{className:"p-6 flex-1 bg-gray-50 overflow-y-auto",children:a.jsx(_p,{})})]})]})},sT=({formData:n,errors:e,handleInputChange:t,isEditMode:s=!1})=>{const r=l=>{if(!l)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(l))return l;const c=new Date(l);return isNaN(c.getTime())?"":c.toISOString().split("T")[0]};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Job Information"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the employee's job details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation *"}),a.jsx("input",{type:"text",value:n.jobInfo.designation,onChange:l=>t("jobInfo","designation",l.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.designation?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Software Developer"}),e.designation&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.designation})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),a.jsxs("select",{value:n.jobInfo.department,onChange:l=>t("jobInfo","department",l.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.department?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select Department"}),a.jsx("option",{value:"Software Developer",children:"Software Developer"}),a.jsx("option",{value:"UI",children:"UI/UX Designer"}),a.jsx("option",{value:"HR",children:"Human Resources"}),a.jsx("option",{value:"Finance",children:"Finance"}),a.jsx("option",{value:"Marketing",children:"Marketing"}),a.jsx("option",{value:"Sales",children:"Sales"}),a.jsx("option",{value:"Operations",children:"Operations"})]}),e.department&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.department})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Joining *"}),a.jsx("input",{type:"date",value:r(n.jobInfo.dateOfJoining),onChange:l=>t("jobInfo","dateOfJoining",l.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.dateOfJoining?"border-red-500":"border-gray-300"}`,disabled:s}),e.dateOfJoining&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.dateOfJoining}),s&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Joining date cannot be changed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employment Type"}),a.jsxs("select",{value:n.jobInfo.employmentType||"full-time",onChange:l=>t("jobInfo","employmentType",l.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[a.jsx("option",{value:"full-time",children:"Full Time"}),a.jsx("option",{value:"intern",children:"Intern"}),a.jsx("option",{value:"part-time",children:"Part Time"}),a.jsx("option",{value:"contract",children:"Contract"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Mode"}),a.jsxs("select",{value:n.jobInfo.workMode||"work-from-home",onChange:l=>t("jobInfo","workMode",l.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[a.jsx("option",{value:"work-from-home",children:"Work From Home"}),a.jsx("option",{value:"work-from-office",children:"Work From Office"}),a.jsx("option",{value:"hybrid",children:"Hybrid"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Start Time"}),a.jsx("input",{type:"time",value:n.jobInfo.shiftTiming?.start||"",onChange:l=>{const c={...n.jobInfo.shiftTiming,start:l.target.value};t("jobInfo","shiftTiming",c)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift End Time"}),a.jsx("input",{type:"time",value:n.jobInfo.shiftTiming?.end||"",onChange:l=>{const c={...n.jobInfo.shiftTiming,end:l.target.value};t("jobInfo","shiftTiming",c)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]})]})]})},nT=({formData:n,errors:e,handlePasswordChange:t,handleRoleChange:s,isEditMode:r=!1})=>a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Account Credentials"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r?"Update employee's login credentials":"Set up login credentials for the employee"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-300",children:a.jsx("span",{className:"text-gray-800",children:n.basicInfo.email})}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This will be the username for login"})]}),!r&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Create Password *"}),a.jsx("input",{type:"password",value:n.password,onChange:t,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter secure password"}),e.password&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.password}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Minimum 6 characters required"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role"}),a.jsxs("select",{value:n.role,onChange:s,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"hr",children:"HR Manager"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n.role==="hr"?"HR managers can manage employees and leave requests":"Employees can view their profile and submit leave requests"})]}),!r&&a.jsxs("div",{className:"bg-[#104774]/10 p-4 rounded-lg border border-[#104774]/40",children:[a.jsx("h4",{className:"font-semibold text-[#104774] mb-2",children:" Login Instructions"}),a.jsx("p",{className:"text-sm text-[#104774]",children:"The employee will receive an email with these credentials to access their account on their joining date."})]})]}),aT=({formData:n,handleDocumentUpload:e,removeDocument:t,isEditMode:s=!1,uploadProgress:r={},uploadingDocs:l={}})=>{const[c,u]=_.useState(!0),[h,m]=_.useState(""),[p,x]=_.useState([]),y=[{id:"aadhar",label:"Aadhar Card",required:!0},{id:"pan",label:"PAN Card",required:!0},{id:"tenth",label:"10th Marksheet",required:!0},{id:"twelfth",label:"12th Marksheet",required:!0},{id:"bank",label:"Bank Passbook",required:!0}],v=[{id:"provisional",label:"Provisional Certificate",required:!0},{id:"graduation",label:"Graduation Marksheet",required:!0}],N=j=>{u(j)},w=()=>{const j=(h||"").trim();if(!j)return alert("Enter a document name");const C=`custom_${Date.now()}`;x(S=>[...S,{id:C,label:j,required:!1}]),m("")},A=(j,C)=>{const S=n.basicInfo.documents||[];let T=S.find(O=>O.type===j);if(T)return T;const R=(C||"").toLowerCase().split(" ")[0];return T=S.find(O=>O.name&&O.name.toLowerCase().includes(R)||O.originalName&&O.originalName.toLowerCase().includes(R))||null,T};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Status"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"inline-flex items-center",children:[a.jsx("input",{type:"radio",checked:c,onChange:()=>N(!0),className:"form-radio text-[#104774]"}),a.jsx("span",{className:"ml-2",children:"Student"})]}),a.jsxs("label",{className:"inline-flex items-center",children:[a.jsx("input",{type:"radio",checked:!c,onChange:()=>N(!1),className:"form-radio text-[#104774]"}),a.jsx("span",{className:"ml-2",children:"Graduated"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Documents"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.map(j=>a.jsx(om,{doc:j,uploadedFile:A(j.id,j.label),handleDocumentUpload:e,removeDocument:t,isEditMode:s,uploadProgress:r[j.id]||0,isUploading:l[j.id]||!1},j.id)),!c&&v.map(j=>a.jsx(om,{doc:j,uploadedFile:A(j.id,j.label),handleDocumentUpload:e,removeDocument:t,isEditMode:s,uploadProgress:r[j.id]||0,isUploading:l[j.id]||!1},j.id)),p.map(j=>a.jsx(om,{doc:j,uploadedFile:A(j.id,j.label),handleDocumentUpload:e,removeDocument:t,isEditMode:s,uploadProgress:r[j.id]||0,isUploading:l[j.id]||!1},j.id))]}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsx("input",{type:"text",value:h,onChange:j=>m(j.target.value),placeholder:"New document name (e.g. Driving Licence)",className:"w-[80%] p-2 border border-gray-300 rounded-lg"}),a.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-[#104774] text-white rounded-lg",children:"+ Add Document"})]})]})]})},om=({doc:n,uploadedFile:e,handleDocumentUpload:t,removeDocument:s,isEditMode:r=!1,uploadProgress:l=0,isUploading:c=!1})=>{const u=`document-${n.id}`,h=e&&(e.displayName||e.name)||n.label||"Document";return a.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.label," ",n.required&&a.jsx("span",{className:"text-red-500",children:"*"})]}),e?a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-gray-100 rounded-lg mr-2",children:a.jsx("i",{className:"far fa-file text-gray-600"})}),a.jsx("span",{className:"text-sm text-gray-700 truncate",children:h})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"text-sm text-[#104774] underline",children:"View"}),a.jsx("button",{type:"button",onClick:()=>s(e),className:"text-red-500 hover:text-red-700 text-sm",children:"remove"})]})]}):a.jsxs("div",{children:[a.jsx("input",{type:"file",id:u,onChange:m=>t(m,n),className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",disabled:c}),a.jsx("label",{htmlFor:u,className:`cursor-pointer flex items-center justify-center p-3 border border-dashed border-gray-300 rounded-lg text-center transition-colors ${c?"opacity-50":"hover:border-[#104774]"}`,children:c?a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-[#104774] border-t-transparent rounded-full animate-spin mx-auto mb-2"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Uploading... ",l,"%"]})]}):a.jsxs("div",{children:[a.jsx("i",{className:"far fa-cloud-upload text-gray-400 text-xl mb-1"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Upload ",n.label]}),a.jsx("p",{className:"text-xs text-gray-400",children:"PDF, JPG, PNG (Max 5MB)"})]})})]})]})},iT=({formData:n,errors:e,handleInputChange:t,handleDocumentUpload:s,removeDocument:r,profileImage:l,handleProfileImageUpload:c,removeProfileImage:u,isEditMode:h=!1,uploadProgress:m,uploadingDocs:p})=>{const x=y=>{if(!y)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(y))return y;const v=new Date(y);return isNaN(v.getTime())?"":v.toISOString().split("T")[0]};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Basic Information"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the employee's personal details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[l?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:l.url||l,alt:"Profile preview",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-300"}),!h&&a.jsx("button",{type:"button",onClick:u,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 text-xs",children:""})]}):a.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500 text-sm",children:"No image"})}),!h&&a.jsxs("div",{children:[a.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"hidden",id:"profile-image-upload",disabled:p.profile}),a.jsx("label",{htmlFor:"profile-image-upload",className:`cursor-pointer text-white px-4 py-2 rounded-lg text-sm transition-colors ${p.profile?"bg-gray-400":"bg-[#104774] hover:bg-[#104774]"}`,children:p.profile?`Uploading... ${m.profile||0}%`:l?"Change Photo":"Upload Photo"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG (Max 5MB)"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",value:n.basicInfo.firstName,onChange:y=>t("basicInfo","firstName",y.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name"}),e.firstName&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.firstName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),a.jsx("input",{type:"text",value:n.basicInfo.lastName,onChange:y=>t("basicInfo","lastName",y.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Enter last name"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:n.basicInfo.email,onChange:y=>t("basicInfo","email",y.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.email?"border-red-500":"border-gray-300"}`,placeholder:"employee@company.com",disabled:h}),e.email&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.email}),h&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),a.jsx("input",{type:"tel",value:n.basicInfo.phone,onChange:y=>t("basicInfo","phone",y.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.phone?"border-red-500":"border-gray-300"}`,placeholder:"+91 1234567890"}),e.phone&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.phone})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),a.jsx("input",{type:"date",value:x(n.basicInfo.dob),max:new Date(new Date().setFullYear(new Date().getFullYear()-16)).toISOString().split("T")[0],onChange:y=>t("basicInfo","dob",y.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.dob?"border-red-500":"border-gray-300"}`}),e.dob&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.dob})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),a.jsxs("select",{value:n.basicInfo.gender,onChange:y=>t("basicInfo","gender",y.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"}),a.jsx("option",{value:"other",children:"Other"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("textarea",{value:n.basicInfo.address||"",onChange:y=>t("basicInfo","address",y.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Enter complete address",rows:"3"})]}),a.jsx(aT,{formData:n,handleDocumentUpload:s,removeDocument:r,isEditMode:h,uploadProgress:m,uploadingDocs:p})]})},rT=({formData:n,errors:e,handleInputChange:t,handleAddAllowance:s,handleRemoveAllowance:r,handleAddDeduction:l,handleRemoveDeduction:c,isEditMode:u=!1})=>{const h=parseFloat(n.payrollInfo.basic)||0,m=parseFloat(n.payrollInfo.hra)||0,p=parseFloat(n.payrollInfo.tax)||0,x=Math.round(h*p/100*100)/100,y=n.payrollInfo.allowances.reduce((A,j)=>A+(parseFloat(j.amount)||0),0),v=n.payrollInfo.deductions.reduce((A,j)=>A+(parseFloat(j.amount)||0),0)+x,N=h+m+y,w=N-v;return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Payroll Information"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Set up the employee's salary structure"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Basic Salary *"}),a.jsx("input",{type:"number",value:n.payrollInfo.basic,onChange:A=>t("payrollInfo","basic",A.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.basic?"border-red-500":"border-gray-300"}`,placeholder:"0.00",min:"0"}),e.basic&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.basic})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HRA"}),a.jsx("input",{type:"number",value:n.payrollInfo.hra,onChange:A=>t("payrollInfo","hra",A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"0.00",min:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax (%)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:n.payrollInfo.tax,onChange:A=>t("payrollInfo","tax",A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Tax percentage e.g. 2"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Allowances"}),a.jsx("button",{type:"button",onClick:s,className:"text-sm text-[#104774] hover:text-[#104774] font-medium",children:"+ Add Allowance"})]}),n.payrollInfo.allowances.map((A,j)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[a.jsx("input",{type:"text",value:A.title,onChange:C=>{const S=[...n.payrollInfo.allowances];S[j].title=C.target.value,t("payrollInfo","allowances",S)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Allowance title"}),a.jsx("input",{type:"number",value:A.amount,onChange:C=>{const S=[...n.payrollInfo.allowances];S[j].amount=C.target.value,t("payrollInfo","allowances",S)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Amount",min:"0"}),a.jsx("button",{type:"button",onClick:()=>r(j),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:"Remove"})]},j))]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deductions"}),a.jsx("button",{type:"button",onClick:l,className:"text-sm text-[#104774] hover:text-[#104774] font-medium",children:"+ Add Deduction"})]}),n.payrollInfo.deductions.map((A,j)=>a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[a.jsx("input",{type:"text",value:A.title,onChange:C=>{const S=[...n.payrollInfo.deductions];S[j].title=C.target.value,t("payrollInfo","deductions",S)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Deduction title"}),a.jsx("input",{type:"number",value:A.amount,onChange:C=>{const S=[...n.payrollInfo.deductions];S[j].amount=C.target.value,t("payrollInfo","deductions",S)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Amount",min:"0"}),a.jsx("button",{type:"button",onClick:()=>c(j),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:"Remove"})]},j))]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payroll Month *"}),a.jsx("input",{type:"month",value:n.payrollInfo.month,onChange:A=>t("payrollInfo","month",A.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.month?"border-red-500":"border-gray-300"}`}),e.month&&a.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.month})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mt-4",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Salary Summary"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Basic Salary:"}),a.jsxs("span",{className:"font-medium",children:["",h.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"HRA:"}),a.jsxs("span",{className:"font-medium",children:["",m.toLocaleString()]})]}),n.payrollInfo.allowances.map((A,j)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:[A.title||"Allowance",":"]}),a.jsxs("span",{className:"font-medium",children:["",(parseFloat(A.amount)||0).toLocaleString()]})]},j)),a.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[a.jsx("span",{className:"text-gray-600",children:"Total Earnings:"}),a.jsxs("span",{className:"font-medium text-green-600",children:["",N.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:["Tax Deduction (",p,"%):"]}),a.jsxs("span",{className:"font-medium text-red-600",children:["-",x.toLocaleString()]})]}),n.payrollInfo.deductions.map((A,j)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600",children:[A.title||"Deduction",":"]}),a.jsxs("span",{className:"font-medium text-red-600",children:["-",(parseFloat(A.amount)||0).toLocaleString()]})]},j)),a.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[a.jsx("span",{className:"text-gray-800 font-semibold",children:"Net Pay:"}),a.jsxs("span",{className:"font-bold text-[#104774]",children:["",w.toLocaleString()]})]})]})]})]})},lT=({onClose:n,employee:e,isEditMode:t=!1})=>{const[s,r]=_.useState(1),[l,c]=_.useState({basicInfo:{firstName:"",lastName:"",email:"",phone:"",dob:"",gender:"other",address:"",documents:[],profileImage:null},jobInfo:{designation:"",department:"",dateOfJoining:"",employmentType:"full-time",workMode:"work-from-home",shiftTiming:{start:"",end:""}},payrollInfo:{basic:"",hra:"",tax:"",allowances:[],deductions:[],month:new Date().toISOString().slice(0,7),status:"draft"},password:"",role:"employee"}),[u,h]=_.useState({}),[m,p]=_.useState(!1),[x,y]=_.useState(null),[v,N]=_.useState({}),[w,A]=_.useState({});_.useEffect(()=>{if(t&&e){const P=(e.documents||[]).map(D=>({type:D.type||D.docType||null,name:D.name||D.originalName||D.filename||D.fileName||D._id||"",originalName:D.originalName||D.name||null,url:D.url||D.path||D.secure_url||D.link||"",fileType:D.fileType||D.type||null,uploadedAt:D.uploadedAt||D.createdAt||null,raw:D}));c(D=>({...D,basicInfo:{firstName:e.firstName||"",lastName:e.lastName||"",email:e.user?.email||"",phone:e.phone||"",dob:e.dob||"",gender:e.gender||"other",address:e.address||"",documents:P||[],profileImage:e.avatarUrl?{url:e.avatarUrl}:null},jobInfo:{designation:e.designation||"",department:e.department||"",dateOfJoining:e.dateOfJoining||"",employmentType:e.employmentType||"full-time",workMode:e.workMode||"work-from-home",shiftTiming:e.shiftTiming||{start:"",end:""}},role:e.user?.role||"employee",payrollInfo:{...D.payrollInfo,basic:e.payrollInfo?.basic??D.payrollInfo.basic,hra:e.payrollInfo?.hra??D.payrollInfo.hra,tax:e.payrollInfo?.tax??D.payrollInfo.tax,allowances:e.payrollInfo?.allowances||D.payrollInfo.allowances,deductions:e.payrollInfo?.deductions||D.payrollInfo.deductions,month:e.payrollInfo?.month||D.payrollInfo.month,status:e.payrollInfo?.status||D.payrollInfo.status}})),e.avatarUrl&&y({url:e.avatarUrl})}},[t,e]);const j=async P=>{try{const D=new FormData;return P.forEach(F=>D.append("documents",F.file)),P.forEach(F=>D.append("types[]",F.type||"")),P.forEach(F=>D.append("originalNames[]",F.name||F.file.name)),(await xe.post("/upload-files/upload",D,{onUploadProgress:F=>{if(F.total){const J=Math.round(F.loaded*100/F.total);console.log("overall upload:",J,"%")}}})).data.files.map((F,J)=>({type:F.type||P[J]?.type||null,originalName:F.originalName||F.name||P[J]?.name,url:F.url||F.secure_url||F.path||"",raw:F}))}catch(D){throw console.error("File upload error (frontend):",D),D.response?(console.error("Server response:",D.response.status,D.response.data),D.response.status===413?new Error("File too large: Maximum size is 5MB"):new Error(D.response.data?.message||"Server error while uploading files")):D.request?new Error("Network error: Please check your connection"):new Error(D.message||"Failed to upload files")}},C=P=>{const D={};if(P===1){l.basicInfo.firstName.trim()||(D.firstName="First name is required"),l.basicInfo.email.trim()?/\S+@\S+\.\S+/.test(l.basicInfo.email)||(D.email="Invalid email format"):D.email="Email is required",l.basicInfo.phone.trim()||(D.phone="Phone number is required"),l.basicInfo.dob||(D.dob="Date of birth is required");const M=["aadhar","pan","tenth","twelfth","bank"],F=(l.basicInfo.documents||[]).map(me=>me.type);M.filter(me=>!F.includes(me)).length>0&&!t&&(D.documents="Please upload all required documents")}return P===2&&(l.jobInfo.designation.trim()||(D.designation="Designation is required"),l.jobInfo.department.trim()||(D.department="Department is required"),l.jobInfo.dateOfJoining||(D.dateOfJoining="Date of joining is required")),P===3&&((!l.payrollInfo.basic||l.payrollInfo.basic<=0)&&(D.basic="Valid basic salary is required"),l.payrollInfo.month||(D.month="Payroll month is required")),P===4&&!t&&(l.password.trim()?l.password.length<6&&(D.password="Password must be at least 6 characters"):D.password="Password is required"),h(D),Object.keys(D).length===0},S=()=>{C(s)&&r(P=>P+1)},T=()=>r(P=>Math.max(1,P-1)),R=(P,D,M)=>{c(F=>({...F,[P]:{...F[P],[D]:M}})),u[D]&&h(F=>({...F,[D]:""}))},O=P=>{const D=P.target.value;c(M=>({...M,password:D})),u.password&&h(M=>({...M,password:""}))},H=P=>{const D=P.target.value;c(M=>({...M,role:D}))},V=async(P,D)=>{const M=P.target.files?.[0];if(!M)return;const F=typeof D=="string"?D:D.id,J=typeof D=="object"?D.label:null;if(M.size>5*1024*1024){alert("File size must be less than 5MB"),P.target.value="";return}if(!["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(M.type)){alert("Only JPEG, PNG, PDF, DOC, and DOCX files are allowed"),P.target.value="";return}A(ce=>({...ce,[F]:!0})),N(ce=>({...ce,[F]:0}));try{const ce=new FormData;ce.append("document",M);const ye=await xe.post("/upload-files/upload",ce,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Se=>{if(Se.total){const ke=Math.round(Se.loaded*100/Se.total);N(te=>({...te,[F]:ke}))}}});if(ye.data?.success&&ye.data?.file){const Se=ye.data.file,ke={type:F,name:J||Se.originalName||M.name,originalName:Se.originalName||M.name,url:Se.url,fileType:Se.type};c(te=>{const Ue=(te.basicInfo.documents||[]).filter(Ge=>Ge.type!==F);return{...te,basicInfo:{...te.basicInfo,documents:[...Ue,ke]}}})}else throw new Error("Invalid upload response")}catch(ce){console.error("Document upload failed:",ce),alert(ce.response?.data?.message||ce.message||"Upload failed")}finally{A(ce=>({...ce,[F]:!1})),N(ce=>({...ce,[F]:0})),P.target.value=""}},L=P=>{const D=typeof P=="string"?P:P&&(P.type||P.url||P.originalName||P.name);if(!window.confirm("Are you sure you want to remove this document?"))return;const M=(l.basicInfo.documents||[]).filter(F=>{if(!D)return!0;const J=F.type&&D&&F.type===D,me=F.url&&D&&F.url===D,ce=F.originalName&&D&&F.originalName===D,ye=F.name&&D&&F.name===D;return!(J||me||ce||ye)});c(F=>({...F,basicInfo:{...F.basicInfo,documents:M}}))},K=async P=>{const D=P.target.files[0];if(D){if(D.size>5*1024*1024){alert("Profile image must be less than 5MB");return}if(!D.type.startsWith("image/")){alert("Please select an image file");return}A(M=>({...M,profile:!0})),N(M=>({...M,profile:0}));try{const M=new FormData;M.append("document",D);const F=await xe.post("/upload-files/upload",M,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:J=>{if(J.total){const me=Math.round(J.loaded*100/J.total);N(ce=>({...ce,profile:me}))}}});if(F.data.success){const J=F.data.file,me={name:J.originalName,url:J.url,fileType:J.type};y(me),c(ce=>({...ce,basicInfo:{...ce.basicInfo,profileImage:{url:J.url}}}))}}catch(M){console.error("Profile image upload error:",M),alert("Profile image upload failed. Please try again.")}finally{A(M=>({...M,profile:!1})),N(M=>({...M,profile:0})),P.target.value=""}}},z=()=>{y(null),c(P=>({...P,basicInfo:{...P.basicInfo,profileImage:null}}))},G=()=>{c(P=>({...P,payrollInfo:{...P.payrollInfo,allowances:[...P.payrollInfo.allowances,{title:"",amount:0}]}}))},Y=P=>{c(D=>({...D,payrollInfo:{...D.payrollInfo,allowances:D.payrollInfo.allowances.filter((M,F)=>F!==P)}}))},de=()=>{c(P=>({...P,payrollInfo:{...P.payrollInfo,deductions:[...P.payrollInfo.deductions,{title:"",amount:0}]}}))},be=P=>{c(D=>({...D,payrollInfo:{...D.payrollInfo,deductions:D.payrollInfo.deductions.filter((M,F)=>F!==P)}}))},I=async()=>{if(C(4)){p(!0);try{let P=null;if(x&&x.file){const ce=new FormData;ce.append("document",x.file);const ye=await xe.post("/upload-files/upload",ce,{headers:{"Content-Type":"multipart/form-data"}});ye.data.file&&(P=ye.data.file)}let D=[];const M=(l.basicInfo.documents||[]).filter(ce=>!ce.url&&ce.file);M.length>0&&(D=await j(M));const F=(l.basicInfo.documents||[]).map(ce=>{const ye=D.find(Se=>Se.type===ce.type||Se.originalName===ce.originalName);return ye?{type:ye.type,name:ce.name||ye.originalName,url:ye.url}:{type:ce.type,name:ce.name||ce.originalName||ce.name,url:ce.url}}),J={basicInfo:{...l.basicInfo,profileImage:P?{url:P.url}:l.basicInfo.profileImage,documents:F},jobInfo:l.jobInfo,payrollInfo:l.payrollInfo,password:l.password,role:l.role},me=await xe.post("/employee/add",J);alert("Employee added successfully!"),n()}catch(P){console.error("Error adding employee:",P),alert(P.response?.data?.message||"Error adding employee")}finally{p(!1)}}},Z=async()=>{if(C(4)){p(!0);try{let P=null;if(x&&x.file){const ce=new FormData;ce.append("document",x.file);const ye=await xe.post("/upload-files/upload",ce,{headers:{"Content-Type":"multipart/form-data"}});ye.data.file&&(P=ye.data.file)}let D=[];const M=(l.basicInfo.documents||[]).filter(ce=>!ce.url&&ce.file);M.length>0&&(D=await j(M));const F=(l.basicInfo.documents||[]).map(ce=>{const ye=D.find(Se=>Se.type===ce.type||Se.originalName===ce.originalName);return ye?{type:ye.type,name:ce.name||ye.originalName,url:ye.url}:{type:ce.type,name:ce.name||ce.originalName||ce.name,url:ce.url}}),J={basicInfo:{...l.basicInfo,profileImage:P?{url:P.url}:l.basicInfo.profileImage,documents:F},jobInfo:l.jobInfo,payrollInfo:l.payrollInfo},me=await xe.put(`/employee/update/${e._id}`,J);alert("Employee updated successfully!"),n()}catch(P){console.error("Error updating employee:",P),alert(P.response?.data?.message||"Error updating employee")}finally{p(!1)}}},X=s/4*100;return a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-auto my-8 relative",children:[a.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-10 bg-gray-200 hover:bg-gray-300 rounded-full p-2",children:""}),a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-xl",children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Employee":"Add New Employee"})}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:a.jsx("div",{className:"bg-[#104774] h-2 rounded-full transition-all duration-300",style:{width:`${X}%`}})}),a.jsx("div",{className:"flex justify-between mb-2",children:["Basic Info","Job Details","Payroll","Credentials"].map((P,D)=>a.jsx("div",{className:`text-xs font-medium ${s>D+1?"text-green-600":s===D+1?"text-[#104774]":"text-gray-500"}`,children:P},P))})]}),a.jsxs("div",{className:"p-6",children:[s===1&&a.jsx(iT,{formData:l,errors:u,handleInputChange:R,handleDocumentUpload:V,removeDocument:L,profileImage:x,handleProfileImageUpload:K,removeProfileImage:z,isEditMode:t,uploadProgress:v,uploadingDocs:w}),s===2&&a.jsx(sT,{formData:l,errors:u,handleInputChange:R,isEditMode:t}),s===3&&a.jsx(rT,{formData:l,errors:u,handleInputChange:R,handleAddAllowance:G,handleRemoveAllowance:Y,handleAddDeduction:de,handleRemoveDeduction:be,isEditMode:t}),s===4&&a.jsx(nT,{formData:l,errors:u,handlePasswordChange:O,handleRoleChange:H,isEditMode:t})]}),a.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 rounded-b-xl",children:a.jsxs("div",{className:"flex justify-between",children:[s>1?a.jsx("button",{onClick:T,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",disabled:m,children:" Back"}):a.jsx("div",{}),s<4?a.jsx("button",{onClick:S,className:"px-6 py-3 bg-[#104774] text-white rounded-lg hover:bg-[#104774] transition-colors",children:"Next "}):a.jsx("button",{onClick:t?Z:I,disabled:m,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-green-400 transition-colors",children:m?a.jsxs("span",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):t?"Update Employee":"Create Employee"})]})})]})},Cs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Km=[.001,0,0,.001,0,0],cm=1.35,tn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Wa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},d1="pdfjs_internal_editor_",$e={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},at={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},oT={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},vs={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Rd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Wt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Br={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},yu={ERRORS:0,WARNINGS:1,INFOS:5},Gd={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ud={moveTo:0,lineTo:1,curveTo:2,closePath:3},cT={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let bu=yu.WARNINGS;function dT(n){Number.isInteger(n)&&(bu=n)}function uT(){return bu}function vu(n){bu>=yu.INFOS&&console.log(`Info: ${n}`)}function Ve(n){bu>=yu.WARNINGS&&console.log(`Warning: ${n}`)}function Nt(n){throw new Error(n)}function Qt(n,e){n||Nt(e)}function hT(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u1(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=xT(n)}catch{}const s=e?URL.parse(n,e):URL.parse(n);return hT(s)?s:null}function h1(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&u1(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function st(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const qi=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class Hb extends qi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class dm extends qi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Jm extends qi{constructor(e){super(e,"InvalidPDFException")}}class qd extends qi{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class fT extends qi{constructor(e){super(e,"FormatError")}}class ei extends qi{constructor(e){super(e,"AbortException")}}function f1(n){(typeof n!="object"||n?.length===void 0)&&Nt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const l=Math.min(r+t,e),c=n.subarray(r,l);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Uo(n){typeof n!="string"&&Nt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function mT(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function pT(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function gT(){try{return new Function(""),!0}catch{return!1}}class gs{static get isLittleEndian(){return st(this,"isLittleEndian",pT())}static get isEvalSupported(){return st(this,"isEvalSupported",gT())}static get isOffscreenCanvasSupported(){return st(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return st(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return st(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return st(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const um=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Me{static makeHexColor(e,t,s){return`#${um[e]}${um[t]}${um[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const r=e[s],l=e[s+1];e[s]=r*t[0]+l*t[2]+t[4],e[s+1]=r*t[1]+l*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],l=t[1],c=t[2],u=t[3],h=t[4],m=t[5];for(let p=0;p<6;p+=2){const x=e[s+p],y=e[s+p+1];e[s+p]=x*r+y*c+h,e[s+p+1]=x*l+y*u+m}}static applyInverseTransform(e,t){const s=e[0],r=e[1],l=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/l,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/l}static axialAlignedBoundingBox(e,t,s){const r=t[0],l=t[1],c=t[2],u=t[3],h=t[4],m=t[5],p=e[0],x=e[1],y=e[2],v=e[3];let N=r*p+h,w=N,A=r*y+h,j=A,C=u*x+m,S=C,T=u*v+m,R=T;if(l!==0||c!==0){const O=l*p,H=l*y,V=c*x,L=c*v;N+=V,j+=V,A+=L,w+=L,C+=O,R+=O,T+=H,S+=H}s[0]=Math.min(s[0],N,A,w,j),s[1]=Math.min(s[1],C,T,S,R),s[2]=Math.max(s[2],N,A,w,j),s[3]=Math.max(s[3],C,T,S,R)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],l=e[2],c=e[3],u=s**2+r**2,h=s*l+r*c,m=l**2+c**2,p=(u+m)/2,x=Math.sqrt(p**2-(u*m-h**2));t[0]=Math.sqrt(p+x||1),t[1]=Math.sqrt(p-x||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const l=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return l>c?null:[s,l,r,c]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,l){l[0]=Math.min(l[0],e,s),l[1]=Math.min(l[1],t,r),l[2]=Math.max(l[2],e,s),l[3]=Math.max(l[3],t,r)}static#e(e,t,s,r,l,c,u,h,m,p){if(m<=0||m>=1)return;const x=1-m,y=m*m,v=y*m,N=x*(x*(x*e+3*m*t)+3*y*s)+v*r,w=x*(x*(x*l+3*m*c)+3*y*u)+v*h;p[0]=Math.min(p[0],N),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],N),p[3]=Math.max(p[3],w)}static#t(e,t,s,r,l,c,u,h,m,p,x,y){if(Math.abs(m)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,s,r,l,c,u,h,-x/p,y);return}const v=p**2-4*x*m;if(v<0)return;const N=Math.sqrt(v),w=2*m;this.#e(e,t,s,r,l,c,u,h,(-p+N)/w,y),this.#e(e,t,s,r,l,c,u,h,(-p-N)/w,y)}static bezierBoundingBox(e,t,s,r,l,c,u,h,m){m[0]=Math.min(m[0],e,u),m[1]=Math.min(m[1],t,h),m[2]=Math.max(m[2],e,u),m[3]=Math.max(m[3],t,h),this.#t(e,s,l,u,t,r,c,h,3*(-e+3*(s-l)+u),6*(e-2*s+l),3*(s-e),m),this.#t(e,s,l,u,t,r,c,h,3*(-t+3*(r-c)+h),6*(t-2*r+c),3*(r-t),m)}}function xT(n){return decodeURIComponent(escape(n))}let hm=null,zb=null;function yT(n){return hm||(hm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zb=new Map([["","t"]])),n.replaceAll(hm,(e,t,s)=>t?t.normalize("NFKC"):zb.get(s))}function m1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),f1(n)}const Pp="pdfjs_internal_id_";function bT(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...l]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const c=l.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Ts(n,e,t){return Math.min(Math.max(n,e),t)}function p1(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(f1(n))}function vT(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Uo(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const ha="http://www.w3.org/2000/svg";class Kr{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function $o(n,e="text"){if(fo(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Vo{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:l=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=c,s*=t;const h=(e[2]+e[0])/2,m=(e[3]+e[1])/2;let p,x,y,v;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,x=0,y=0,v=1;break;case 90:p=0,x=1,y=1,v=0;break;case 270:p=0,x=-1,y=-1,v=0;break;case 0:p=1,x=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,v=-v);let N,w,A,j;p===0?(N=Math.abs(m-e[1])*s+l,w=Math.abs(h-e[0])*s+c,A=(e[3]-e[1])*s,j=(e[2]-e[0])*s):(N=Math.abs(h-e[0])*s+l,w=Math.abs(m-e[1])*s+c,A=(e[2]-e[0])*s,j=(e[3]-e[1])*s),this.transform=[p*s,x*s,y*s,v*s,N-p*s*h-y*s*m,w-x*s*h-v*s*m],this.width=A,this.height=j}get rawDims(){const e=this.viewBox;return st(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Vo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(e,t){const s=[e,t];return Me.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];Me.applyTransform(t,this.transform);const s=[e[2],e[3]];return Me.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return Me.applyInverseTransform(s,this.transform),s}}class Ip extends qi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function wu(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Bp(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function wT(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function NT(n,e="document.pdf"){if(typeof n!="string")return e;if(wu(n))return Ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(l.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const m of u)if(l.test(m))return r(m);const h=Array.from(s.searchParams.keys()).reverse();for(const m of h)if(l.test(m))return r(m)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return e}class Fb{started=Object.create(null);times=[];time(e){e in this.started&&Ve(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ve(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:l}of this.times)e.push(`${s.padEnd(t)} ${l-r}ms
`);return e.join("")}}function fo(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function _n(n){n.preventDefault()}function Xt(n){n.preventDefault(),n.stopPropagation()}function AT(n){console.log("Deprecated API usage: "+n)}class g1{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(t[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const m=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let x=parseInt(t[9],10)||0;return x=x>=0&&x<=59?x:0,m==="-"?(c+=p,u+=x):m==="+"&&(c-=p,u-=x),new Date(Date.UTC(s,r,l,c,u,h))}}function jT(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Vo({viewBox:l,userUnit:1,scale:e,rotation:t})}function Hp(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ve(`Not a valid color format: "${n}"`),[0,0,0])}function ST(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Hp(s))}e.remove()}function Mt(n){const{a:e,b:t,c:s,d:r,e:l,f:c}=n.getTransform();return[e,t,s,r,l,c]}function $n(n){const{a:e,b:t,c:s,d:r,e:l,f:c}=n.getTransform().invertSelf();return[e,t,s,r,l,c]}function Ui(n,e,t=!1,s=!0){if(e instanceof Vo){const{pageWidth:r,pageHeight:l}=e.rawDims,{style:c}=n,u=gs.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,m=`var(--total-scale-factor) * ${l}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,x=u?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!t||e.rotation%180===0?(c.width=p,c.height=x):(c.width=x,c.height=p)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Xn{constructor(){const{pixelRatio:e}=Xn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,l=-1){let c=1/0,u=1/0,h=1/0;s=Xn.capPixels(s,l),s>0&&(c=Math.sqrt(s/(e*t))),r!==-1&&(u=r/e,h=r/t);const m=Math.min(c,u,h);return this.sx>m||this.sy>m?(this.sx=m,this.sy=m,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const ep=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class xo{#e=null;#t=null;#s;#n=null;#i=null;#a=null;static#l=null;constructor(e){this.#s=e,xo.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;e.addEventListener("contextmenu",_n,{signal:t}),e.addEventListener("pointerdown",xo.#r,{signal:t});const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const r=this.#s.toolbarPosition;if(r){const{style:l}=e,c=this.#s._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#r(e){e.stopPropagation()}#u(e){this.#s._focusEventsAllowed=!1,Xt(e)}#o(e){this.#s._focusEventsAllowed=!0,Xt(e)}#h(e){const t=this.#s._uiManager._signal;e.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",_n,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",xo.#l[e]),this.#h(s),s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),this.#n.append(s)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#h(t),this.#n.append(t,this.#d),this.#i=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#h(t),this.#n.append(t,this.#d)}async addEditSignatureButton(e){const t=this.#a=await e.renderEditButton(this.#s);this.#h(t),this.#n.append(t,this.#d)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){this.#a&&(this.#a.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class ET{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",_n,{signal:this.#s._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#a(),e}#i(e,t){let s=0,r=0;for(const l of e){const c=l.y+l.height;if(c<s)continue;const u=l.x+(t?l.width:0);if(c>s){r=u,s=c;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,s]}show(e,t,s){const[r,l]=this.#i(t,s),{style:c}=this.#t||=this.#n();e.append(this.#t),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#a(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#s._signal;e.addEventListener("contextmenu",_n,{signal:s}),e.addEventListener("click",()=>{this.#s.highlightSelection("floating_button")},{signal:s}),this.#e.append(e)}}function x1(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}class _T{#e=0;get id(){return`${d1}${this.#e++}`}}class zp{#e=m1();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return st(this,"_isSVGFittingCanvas",l)}async#n(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof t=="string"?(s.url=t,r=await $o(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const l=zp._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((m,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,m()},c.onload=async()=>{const x=s.svgUrl=c.result;u.src=await l?`${x}#svgView(preserveAspectRatio(none))`:x},u.onerror=c.onerror=p});c.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){Ve(r),s=null}return this.#s.set(e,s),s&&this.#s.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:r,type:l}=e;return this.#n(`${t}_${s}_${r}_${l}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const s=await t;return this.#n(e,s)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,s),this.#s.set(s.id,s),s}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class CT{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&e(),this.#t)return;const h={cmd:e,undo:t,post:s,type:l};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(h);return}if(c&&this.#e[this.#n].type===l){u&&(h.undo=this.#e[this.#n].undo),this.#e[this.#n]=h;return}const m=this.#n+1;m===this.#s?this.#e.splice(0,1):(this.#n=m,m<this.#e.length&&this.#e.splice(m)),this.#e.push(h)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Go{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=gs.platform;for(const[s,r,l={}]of e)for(const c of s){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:c=[],checker:u=null}}=s;u&&!u(e,t)||(r.bind(e,...c,t)(),l||Xt(t))}}class Fp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ST(e),st(this,"_colors",e)}convert(e){const t=Hp(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((l,c)=>l===t[c]))return Fp._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Me.makeHexColor(...t):e}}class ti{#e=new AbortController;#t=null;#s=new Map;#n=new Map;#i=null;#a=null;#l=null;#r=new CT;#u=null;#o=null;#h=0;#d=new Set;#f=null;#m=null;#p=new Set;_editorUndoBar=null;#c=!1;#g=!1;#x=!1;#y=null;#v=null;#w=null;#N=null;#S=!1;#_=null;#T=new _T;#A=!1;#C=!1;#E=null;#R=null;#k=null;#M=null;#z=null;#j=$e.NONE;#b=new Set;#I=null;#B=null;#$=null;#V=null;#G={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#L=null;#O=null;#U=null;#X=null;#P=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ti.prototype,t=c=>c.#O.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return st(this,"_keyboardManager",new Go([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#O.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#O.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:t}]]))}constructor(e,t,s,r,l,c,u,h,m,p,x,y,v,N,w){const A=this._signal=this.#e.signal;this.#O=e,this.#U=t,this.#X=s,this.#i=r,this.#B=l,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:A}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),c._on("setpreference",this.onSetPreference.bind(this),{signal:A}),c._on("switchannotationeditorparams",j=>this.updateParams(j.type,j.value),{signal:A}),this.#ae(),this.#oe(),this.#Z(),this.#a=u.annotationStorage,this.#y=u.filterFactory,this.#$=h,this.#N=m||null,this.#c=p,this.#g=x,this.#x=y,this.#z=v||null,this.viewParameters={realScale:Kr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=N||null,this._supportsPinchToZoom=w!==!1}destroy(){this.#P?.resolve(),this.#P=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#s.clear(),this.#p.clear(),this.#M?.clear(),this.#t=null,this.#b.clear(),this.#r.destroy(),this.#i?.destroy(),this.#B?.destroy(),this.#_?.hide(),this.#_=null,this.#k?.destroy(),this.#k=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#x}get hcmFilter(){return st(this,"hcmFilter",this.#$?this.#y.addHCMFilter(this.#$.foreground,this.#$.background):"none")}get direction(){return st(this,"direction",getComputedStyle(this.#O).direction)}get highlightColors(){return st(this,"highlightColors",this.#N?new Map(this.#N.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return st(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#o=e}setMainHighlightColorPicker(e){this.#k=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#x=t;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#O.focus()}findParent(e,t){for(const s of this.#n.values()){const{x:r,y:l,width:c,height:u}=s.div.getBoundingClientRect();if(e>=r&&e<=r+c&&t>=l&&t<=l+u)return s}return null}disableUserSelect(e=!1){this.#U.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Kr.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#o?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Y({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#Q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#n.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:c}=t,u=t.toString(),m=this.#Y(t).closest(".textLayer"),p=this.getSelectionBoxes(m);if(!p)return;t.empty();const x=this.#Q(m),y=this.#j===$e.NONE,v=()=>{x?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:s,anchorOffset:r,focusNode:l,focusOffset:c,text:u}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode($e.HIGHLIGHT,v);return}v()}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Y(e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#_||=new ET(this),this.#_.show(s,r,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#X;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#ne(){const e=document.getSelection();if(!e||e.isCollapsed){this.#I&&(this.#_?.hide(),this.#I=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#I)return;const r=this.#Y(e).closest(".textLayer");if(!r){this.#I&&(this.#_?.hide(),this.#I=null,this.#D({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#I=t,this.#D({hasSelectedText:!0}),!(this.#j!==$e.HIGHLIGHT&&this.#j!==$e.NONE)&&(this.#j===$e.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#j===$e.HIGHLIGHT?this.#Q(r):null;l?.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),h=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l?.toggleDrawing(!0),m.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}}#W(e=""){this.#j===$e.HIGHLIGHT?this.highlightSelection(e):this.#c&&this.#se()}#ae(){document.addEventListener("selectionchange",this.#ne.bind(this),{signal:this._signal})}#ie(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#re(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#b)if(t.div.contains(e)){this.#R=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[e,t]=this.#R;this.#R=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#Z(){if(this.#E)return;this.#E=new AbortController;const e=this.combinedSignal(this.#E);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#le(){this.#E?.abort(),this.#E=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#J(){this.#u?.abort(),this.#u=null}#oe(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#Z(),this.#K()}removeEditListeners(){this.#le(),this.#J()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#m)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#m)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#b){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const l of t.items)for(const c of this.#m)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){Ve(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const h of s){const m=await r.deserialize(h);if(!m)return;l.push(m)}const c=()=>{for(const h of l)this.#ee(h);this.#te(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(l){Ve(`paste: "${l.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#j!==$e.NONE&&!this.isEditorHandlingKeyboard&&ti._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(e){Object.entries(e).some(([s,r])=>this.#G[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#G,e)}),this.#j===$e.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[at.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ie(),this.#K(),this.#D({isEditing:this.#j!==$e.NONE,isEmpty:this.#q(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#re(),this.#J(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#m){this.#m=e;for(const t of this.#m)this.#H(t.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#n.get(this.#h)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#n.set(e.pageIndex,e),this.#A?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1){if(this.#j!==e&&!(this.#P&&(await this.#P.promise,!this.#P))){if(this.#P=Promise.withResolvers(),this.#o?.commitOrRemove(),this.#j=e,e===$e.NONE){this.setEditingState(!1),this.#de(),this._editorUndoBar?.hide(),this.#P.resolve();return}e===$e.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ce(),this.unselectAll();for(const l of this.#n.values())l.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),this.#P.resolve();return}for(const l of this.#s.values())l.annotationElementId===t||l.id===t?(this.setSelected(l),r&&l.enterInEditMode()):l.unselect();this.#P.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#j&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#m){switch(e){case at.CREATE:this.currentLayer.addNewEditor(t);return;case at.HIGHLIGHT_DEFAULT_COLOR:this.#k?.updateColor(t);break;case at.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const s of this.#b)s.updateParams(e,t);for(const s of this.#m)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const l of this.#s.values())l.editorType===e&&l.show(t);(this.#V?.get(at.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#H([[at.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#C!==e){this.#C=e;for(const t of this.#n.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ce(){if(!this.#A){this.#A=!0;const e=[];for(const t of this.#n.values())e.push(t.enable());await Promise.all(e);for(const t of this.#s.values())t.enable()}}#de(){if(this.unselectAll(),this.#A){this.#A=!1;for(const e of this.#n.values())e.disable();for(const e of this.#s.values())e.disable()}}getEditors(e){const t=[];for(const s of this.#s.values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return this.#s.get(e)}addEditor(e){this.#s.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#s.delete(e.id),e.annotationElementId&&this.#M?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ee(e){const t=this.#n.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#H(e.propertiesToUpdate))}get#ue(){let e=null;for(e of this.#b);return e}updateUI(e){this.#ue===e&&this.#H(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#H(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#b.has(e)){this.#b.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#b.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#o?.commitOrRemove();for(const t of this.#b)t!==e&&t.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#D({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#q()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#q()})}addCommands(e){this.#r.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#q()})}cleanUndoStack(e){this.#r.cleanType(e)}#q(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const e of this.#s.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#b],s=()=>{this._editorUndoBar?.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const l of t)this.#ee(l)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#te(e){for(const t of this.#b)t.unselect();this.#b.clear();for(const t of e)t.isEmpty()||(this.#b.add(t),t.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#te(this.#s.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#j!==$e.NONE))&&!this.#o?.commitOrRemove()&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=e,this.#F[1]+=t;const[r,l]=this.#F,c=[...this.#b],u=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(r,l),h.translationDone())},undo:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(-r,-l),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#b)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let t=!1;for(const[{x:r,y:l,pageIndex:c},u]of e)u.newX=r,u.newY=l,u.newPageIndex=c,t||=r!==u.savedX||l!==u.savedY||c!==u.savedPageIndex;if(!t)return!1;const s=(r,l,c,u)=>{if(this.#s.has(r.id)){const h=this.#n.get(u);h?r._setParentAndPosition(h,l,c):(r.pageIndex=u,r.x=l,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:c,newPageIndex:u}]of e)s(r,l,c,u)},undo:()=>{for(const[r,{savedX:l,savedY:c,savedPageIndex:u}]of e)s(r,l,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#f)for(const s of this.#f.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#j}get imageManager(){return st(this,"imageManager",new zp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let m=0,p=t.rangeCount;m<p;m++)if(!e.contains(t.getRangeAt(m).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(m,p,x,y)=>({x:(p-r)/c,y:1-(m+x-s)/l,width:y/c,height:x/l});break;case"180":u=(m,p,x,y)=>({x:1-(m+x-s)/l,y:1-(p+y-r)/c,width:x/l,height:y/c});break;case"270":u=(m,p,x,y)=>({x:1-(p+y-r)/c,y:(m-s)/l,width:y/c,height:x/l});break;default:u=(m,p,x,y)=>({x:(m-s)/l,y:(p-r)/c,width:x/l,height:y/c});break}const h=[];for(let m=0,p=t.rangeCount;m<p;m++){const x=t.getRangeAt(m);if(!x.collapsed)for(const{x:y,y:v,width:N,height:w}of x.getClientRects())N===0||w===0||h.push(u(y,v,N,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#j===$e.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const r=this.#M?.get(e);r&&(r.setCanvas(t,s),this.#M.delete(e))}addMissingCanvas(e,t){(this.#M||=new Map).set(e,t)}}class qn{#e=null;#t=!1;#s=null;#n=null;#i=null;#a=null;#l=!1;#r=null;#u=null;#o=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,qn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){qn._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",qn.#f.missing),t.setAttribute("data-l10n-id",qn.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#u._uiManager._signal;e.addEventListener("contextmenu",_n,{signal:s}),e.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",l=>{l.target===e&&l.key==="Enter"&&(this.#l=!0,r(l))},{signal:s}),await this.#p(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(e){this.#e===null&&(this.#o=e,this.#h=await qn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#r?.remove(),this.#r=null;return}if(!this.#r){const t=this.#r=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#r.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#o===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#o,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(this.#o=s,this.#h=r),!(this.#e===e&&this.#t===t)&&(l||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#s&&(!e&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#s.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#i=null,this.#r?.remove(),this.#r=null}async#p(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",qn.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",qn.#f[`${this.#m}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const r=100,l=this.#u._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),e.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i?.classList.remove("show")},{signal:l})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Nu{#e;#t=!1;#s=null;#n;#i;#a;#l;#r=null;#u;#o=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:c=null,signal:u}){this.#e=e,this.#s=s,this.#n=t,this.#i=r,this.#a=l,this.#l=c,this.#h=new AbortController,this.#u=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Xn.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#r)return;const r=this.#r=new AbortController,l=AbortSignal.any([this.#u,r.signal]),c=this.#e,u={capture:!0,signal:l,passive:!1},h=m=>{m.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};c.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Xt(m),h(m))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#d){this.#d=new AbortController;const r=AbortSignal.any([this.#u,this.#d.signal]),l=this.#e,c={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#p.bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Xt,c),l.addEventListener("pointermove",Xt,c),l.addEventListener("pointercancel",Xt,c),l.addEventListener("pointerup",Xt,c),this.#i?.()}if(Xt(e),e.touches.length!==2||this.#s?.()){this.#o=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#o={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(e){if(!this.#o||e.touches.length!==2)return;Xt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:l}=t,{screenX:c,screenY:u}=s,h=this.#o,{touch0X:m,touch0Y:p,touch1X:x,touch1Y:y}=h,v=x-m,N=y-p,w=c-r,A=u-l,j=Math.hypot(w,A)||1,C=Math.hypot(v,N)||1;if(!this.#t&&Math.abs(C-j)<=Nu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=l,h.touch1X=c,h.touch1Y=u,!this.#t){this.#t=!0;return}const S=[(r+c)/2,(l+u)/2];this.#a?.(S,C,j)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#l?.()),this.#o&&(Xt(e),this.#o=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#r?.abort(),this.#r=null}}class Le{#e=null;#t=null;#s=null;#n=!1;#i=null;#a="";#l=!1;#r=null;#u=null;#o=null;#h=null;#d="";#f=!1;#m=null;#p=!1;#c=!1;#g=!1;#x=null;#y=0;#v=0;#w=null;#N=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#_=Le._zIndex++;static _borderLineWidth=-1;static _colorManager=new Fp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Le.prototype._resizeWithKeyboard,t=ti.TRANSLATE_SMALL,s=ti.TRANSLATE_BIG;return st(this,"_resizerKeyboardManager",new Go([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Le.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,c];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return st(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new TT({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Le._l10n??=e,Le._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Le._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Le._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#U(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[l,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/l,this.y=(t+r)/c,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}#T([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#T(this.parentDimensions,e,t)}translateInPage(e,t){this.#m||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#m||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,l]}=this;if(this.x+=e/r,this.y+=t/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,x,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,m]=this.getBaseTranslation();c+=h,u+=m;const{style:p}=s;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#m&&(this.#m[0]!==this.x||this.#m[1]!==this.y)}get _hasBeenResized(){return!!this.#m&&(this.#m[2]!==this.width||this.#m[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Le,r=s/e,l=s/t;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:l,y:c,width:u,height:h}=this;if(u*=s,h*=r,l*=s,c*=r,this._mustFixPosition)switch(e){case 0:l=Ts(l,0,s-u),c=Ts(c,0,r-h);break;case 90:l=Ts(l,0,s-h),c=Ts(c,u,r);break;case 180:l=Ts(l,u,s),c=Ts(c,h,r);break;case 270:l=Ts(l,h,s),c=Ts(c,0,r-u);break}this.x=l/=s,this.y=c/=r;const[m,p]=this.getBaseTranslation();l+=m,c+=p,t.left=`${(100*l).toFixed(2)}%`,t.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#A(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Le.#A(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Le.#A(e,t,360-this.parentRotation)}#C(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,r]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*e/s).toFixed(2)}%`,this.#l||(l.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,r=s.endsWith("%"),l=!this.#l&&t.endsWith("%");if(r&&l)return;const[c,u]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/c).toFixed(2)}%`),!this.#l&&!l&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#E(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");this.#r.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#R.bind(this,s),{signal:t}),r.addEventListener("contextmenu",_n,{signal:t}),r.tabIndex=-1}this.div.prepend(this.#r)}#R(e,t){t.preventDefault();const{isMac:s}=gs.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#s?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#u=[t.screenX,t.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Xt,{passive:!1,signal:c}),window.addEventListener("contextmenu",_n,{signal:c}),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#M()};window.addEventListener("pointerup",m,{signal:c}),window.addEventListener("blur",m,{signal:c})}#k(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t;const[l,c]=this.parentDimensions;this.setDims(l*s,c*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#M(){if(!this.#o)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=this.#o;this.#o=null;const l=this.x,c=this.y,u=this.width,h=this.height;l===e&&c===t&&u===s&&h===r||this.addCommands({cmd:this.#k.bind(this,l,c,u,h),undo:this.#k.bind(this,e,t,s,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#z(e,t){const[s,r]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,m=Le.MIN_SIZE/s,p=Le.MIN_SIZE/r,x=this.#C(this.rotation),y=(I,Z)=>[x[0]*I+x[2]*Z,x[1]*I+x[3]*Z],v=this.#C(360-this.rotation),N=(I,Z)=>[v[0]*I+v[2]*Z,v[1]*I+v[3]*Z];let w,A,j=!1,C=!1;switch(e){case"topLeft":j=!0,w=(I,Z)=>[0,0],A=(I,Z)=>[I,Z];break;case"topMiddle":w=(I,Z)=>[I/2,0],A=(I,Z)=>[I/2,Z];break;case"topRight":j=!0,w=(I,Z)=>[I,0],A=(I,Z)=>[0,Z];break;case"middleRight":C=!0,w=(I,Z)=>[I,Z/2],A=(I,Z)=>[0,Z/2];break;case"bottomRight":j=!0,w=(I,Z)=>[I,Z],A=(I,Z)=>[0,0];break;case"bottomMiddle":w=(I,Z)=>[I/2,Z],A=(I,Z)=>[I/2,0];break;case"bottomLeft":j=!0,w=(I,Z)=>[0,Z],A=(I,Z)=>[I,0];break;case"middleLeft":C=!0,w=(I,Z)=>[0,Z/2],A=(I,Z)=>[I,Z/2];break}const S=w(u,h),T=A(u,h);let R=y(...T);const O=Le._round(l+R[0]),H=Le._round(c+R[1]);let V=1,L=1,K,z;if(t.fromKeyboard)({deltaX:K,deltaY:z}=t);else{const{screenX:I,screenY:Z}=t,[X,P]=this.#u;[K,z]=this.screenToPageTranslation(I-X,Z-P),this.#u[0]=I,this.#u[1]=Z}if([K,z]=N(K/s,z/r),j){const I=Math.hypot(u,h);V=L=Math.max(Math.min(Math.hypot(T[0]-S[0]-K,T[1]-S[1]-z)/I,1/u,1/h),m/u,p/h)}else C?V=Ts(Math.abs(T[0]-S[0]-K),m,1)/u:L=Ts(Math.abs(T[1]-S[1]-z),p,1)/h;const G=Le._round(u*V),Y=Le._round(h*L);R=y(...A(G,Y));const de=O-R[0],be=H-R[1];this.#m||=[this.x,this.y,this.width,this.height],this.width=G,this.height=Y,this.x=de,this.y=be,this.setDims(s*G,r*Y),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new xo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#s?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(qn.initialize(Le._l10n),this.#s=new qn(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#n?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#V();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),x1(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#N||=new Nu({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#j.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#I.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#j(){this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(e,t,s){let l=.7*(s/t)+1-.7;if(l===1)return;const c=this.#C(this.rotation),u=(O,H)=>[c[0]*O+c[2]*H,c[1]*O+c[3]*H],[h,m]=this.parentDimensions,p=this.x,x=this.y,y=this.width,v=this.height,N=Le.MIN_SIZE/h,w=Le.MIN_SIZE/m;l=Math.max(Math.min(l,1/y,1/v),N/y,w/v);const A=Le._round(y*l),j=Le._round(v*l);if(A===y&&j===v)return;this.#m||=[p,x,y,v];const C=u(y/2,v/2),S=Le._round(p+C[0]),T=Le._round(x+C[1]),R=u(A/2,j/2);this.x=S-R[0],this.y=T-R[1],this.width=A,this.height=j,this.setDims(h*A,m*j),this.fixAndSetPosition(),this._onResizing()}#I(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#M()}pointerdown(e){const{isMac:t}=gs.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#$(e);return}this.#B(e)}#B(e){const{isMac:t}=gs.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#$(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:l},u=m=>{r.abort(),this.#i=null,this.#f=!1,this._uiManager.endDragSession()||this.#B(m),s&&this._onStopDragging()};t&&(this.#y=e.clientX,this.#v=e.clientY,this.#i=e.pointerId,this.#a=e.pointerType,window.addEventListener("pointermove",m=>{s||(s=!0,this._onStartDragging());const{clientX:p,clientY:x,pointerId:y}=m;if(y!==this.#i){Xt(m);return}const[v,N]=this.screenToPageTranslation(p-this.#y,x-this.#v);this.#y=p,this.#v=x,this._uiManager.dragSelectedEditors(v,N)},c),window.addEventListener("touchmove",Xt,c),window.addEventListener("pointerdown",m=>{m.pointerType===this.#a&&(this.#N||m.isPrimary)&&u(m),Xt(m)},c));const h=m=>{if(!this.#i||this.#i===m.pointerId){u(m);return}Xt(m)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.#x=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[l,c]=this.pageDimensions,[u,h]=this.pageTranslation,m=e/r,p=t/r,x=this.x*l,y=this.y*c,v=this.width*l,N=this.height*c;switch(s){case 0:return[x+m+u,c-y-p-N+h,x+m+v+u,c-y-p+h];case 90:return[x+p+u,c-y+m+h,x+p+N+u,c-y+m+v+h];case 180:return[x-m-v+u,c-y+p+h,x-m+u,c-y+p+N+h];case 270:return[x-p-N+u,c-y-m-v+h,x-p+u,c-y-m+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,l,c]=e,u=l-s,h=c-r;switch(this.rotation){case 0:return[s,t-c,u,h];case 90:return[s,t-r,h,u];case 180:return[l,t-r,u,h];case 270:return[l,t-c,h,u];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return t<c&&r>0&&e<l&&s>0}#V(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#V()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Nt("An editor must be serializable")}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[l,c]=r.pageDimensions,[u,h,m,p]=r.getRectInCurrentCoords(e.rect,c);return r.x=u/l,r.y=h/c,r.width=m/l,r.height=p/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#x&&(clearTimeout(this.#x),this.#x=null),this.#U(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#N?.destroy(),this.#N=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#E(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const c=this.#G.bind(this),u=this.#F.bind(this),h=this._uiManager._signal;for(const m of this.#t){const p=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",c,{signal:h}),m.addEventListener("blur",u,{signal:h}),m.addEventListener("focus",this.#L.bind(this,p),{signal:h}),m.setAttribute("data-l10n-id",Le._l10nResizer[p])}}const s=this.#t[0];let r=0;for(const c of t){if(c===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(l!==r){if(l<r)for(let u=0;u<r-l;u++)this.#r.append(this.#r.firstChild);else if(l>r)for(let u=0;u<l-r;u++)this.#r.firstChild.before(this.#r.lastChild);let c=0;for(const u of t){const m=this.#t[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Le._l10nResizer[m])}}this.#O(0),this.#g=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){Le._resizerKeyboardManager.exec(this,e)}#F(e){this.#g&&e.relatedTarget?.parentNode!==this.#r&&this.#U()}#L(e){this.#d=this.#g?e:""}#O(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#g&&this.#z(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#U(){this.#g=!1,this.#O(-1),this.#M()}_stopResizingWithKeyboard(){this.#U(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;const s=e/t,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:s}=e;let r=this.#w.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(s),this.#w.size===0&&(this.#w=null)},Le._telemetryTimeout),this.#w.set(s,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class TT extends Le{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ub=3285377520,pn=4294901760,Vn=65535;class y1{constructor(e){this.h1=e?e&4294967295:Ub,this.h2=e?e&4294967295:Ub}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let w=0,A=e.length;w<A;w++){const j=e.charCodeAt(w);j<=255?t[s++]=j:(t[s++]=j>>>8,t[s++]=j&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,c=new Uint32Array(t.buffer,0,r);let u=0,h=0,m=this.h1,p=this.h2;const x=3432918353,y=461845907,v=x&Vn,N=y&Vn;for(let w=0;w<r;w++)w&1?(u=c[w],u=u*x&pn|u*v&Vn,u=u<<15|u>>>17,u=u*y&pn|u*N&Vn,m^=u,m=m<<13|m>>>19,m=m*5+3864292196):(h=c[w],h=h*x&pn|h*v&Vn,h=h<<15|h>>>17,h=h*y&pn|h*N&Vn,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,l){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*x&pn|u*v&Vn,u=u<<15|u>>>17,u=u*y&pn|u*N&Vn,r&1?m^=u:p^=u}this.h1=m,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&pn|e*36045&Vn,t=t*4283543511&pn|((t<<16|e>>>16)*2950163797&pn)>>>16,e^=t>>>1,e=e*444984403&pn|e*60499&Vn,t=t*3301882366&pn|((t<<16|e>>>16)*3120437893&pn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const tp=Object.freeze({map:null,hash:"",transfer:void 0});class Up{#e=!1;#t=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#s.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#s.get(e)}remove(e){if(this.#s.delete(e),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#s.values())if(t instanceof Le)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#s.get(e);let r=!1;if(s!==void 0)for(const[l,c]of Object.entries(t))s[l]!==c&&(r=!0,s[l]=c);else r=!0,this.#s.set(e,t);r&&this.#n(),t instanceof Le&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#s.has(e)}get size(){return this.#s.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new b1(this)}get serializable(){if(this.#s.size===0)return tp;const e=new Map,t=new y1,s=[],r=Object.create(null);let l=!1;for(const[c,u]of this.#s){const h=u instanceof Le?u.serialize(!1,r):u;h&&(e.set(c,h),t.update(`${c}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const c of e.values())c.bitmap&&s.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:tp}get editorStats(){let e=null;const t=new Map;for(const s of this.#s.values()){if(!(s instanceof Le))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:l}=r;t.has(l)||t.set(l,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[u,h]of Object.entries(r)){if(u==="type")continue;let m=c.get(u);m||(m=new Map,c.set(u,m));const p=m.get(h)??0;m.set(h,p+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#s.values())!(t instanceof Le)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class b1 extends Up{#e;constructor(e){super();const{map:t,hash:s,transfer:r}=e.serializable,l=structuredClone(t,r?{transfer:r}:null);this.#e={map:l,hash:s,transfer:r}}get print(){Nt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return st(this,"modifiedIds",{ids:new Set,hash:""})}}class DT{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(Qt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:c}=e,u=new FontFace(r,l,c);this.addNativeFontFace(u);try{await u.load(),this.#e.add(r),s?.(e)}catch{Ve(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw Ve(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return st(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return st(this,"isSyncFontLoadingSupported",Cs||gs.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Qt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return st(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(T,R){return T.charCodeAt(R)<<24|T.charCodeAt(R+1)<<16|T.charCodeAt(R+2)<<8|T.charCodeAt(R+3)&255}function r(T,R,O,H){const V=T.substring(0,R),L=T.substring(R+O);return V+H+L}let l,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let m=0;function p(T,R){if(++m>30){Ve("Load test font never loaded."),R();return}if(h.font="30px "+T,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(p.bind(null,T,R))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,x.length,x);const N=16,w=1482184792;let A=s(y,N);for(l=0,c=x.length-3;l<c;l+=4)A=A-w+s(x,l)|0;l<x.length&&(A=A-w+s(x+"XXX",l)|0),y=r(y,N,4,mT(A));const j=`url(data:font/opentype;base64,${btoa(y)});`,C=`@font-face {font-family:"${x}";src:${j}}`;this.insertRule(C);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const T of[e.loadedName,x]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=T,S.append(R)}this._document.body.append(S),p(x,()=>{S.remove(),t.complete()})}}class RT{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${p1(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(c){Ve(`getPathGenerator - ignoring character: "${c}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=l}}function kT(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Cs)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function MT(n){if(Cs&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Uo(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function hd(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const sp=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,LT=n=>typeof n=="object"&&typeof n?.name=="string",OT=bT.bind(null,sp,LT);class PT{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){Ve("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);r=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#e.set(t,r)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const fd={DATA:1,ERROR:2},Yt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $b(){}function Is(n){if(n instanceof ei||n instanceof Jm||n instanceof Hb||n instanceof qd||n instanceof dm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ei(n.message);case"InvalidPDFException":return new Jm(n.message);case"PasswordException":return new Hb(n.message,n.code);case"ResponseException":return new qd(n.message,n.status,n.missing);case"UnknownErrorException":return new dm(n.message,n.details)}return new dm(n.message,n.toString())}class mo{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===fd.DATA)r.resolve(e.data);else if(e.callback===fd.ERROR)r.reject(Is(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,l=this.comObj;Promise.try(t,e.data).then(function(c){l.postMessage({sourceName:s,targetName:r,callback:fd.DATA,callbackId:e.callbackId,data:c})},function(c){l.postMessage({sourceName:s,targetName:r,callback:fd.ERROR,callbackId:e.callbackId,reason:Is(c)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(c){l.reject(c)}return l.promise}sendWithStream(e,t,s,r){const l=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:m=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:m,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:e,streamId:l,data:t,desiredSize:m.desiredSize},r),p.promise},pull:m=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:Yt.PULL,streamId:l,desiredSize:m.desiredSize}),p.promise},cancel:m=>{Qt(m instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:Yt.CANCEL,streamId:l,reason:Is(m)}),p.promise}},s)}#s(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,l=this.comObj,c=this,u=this.actionHandler[e.action],h={enqueue(m,p=1,x){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:Yt.ENQUEUE,streamId:t,chunk:m},x)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:Yt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(m){Qt(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:Yt.ERROR,streamId:t,reason:Is(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:Yt.START_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:s,targetName:r,stream:Yt.START_COMPLETE,streamId:t,reason:Is(m)})})}#n(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,l=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Yt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Is(e.reason));break;case Yt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Is(e.reason));break;case Yt.PULL:if(!u){l.postMessage({sourceName:s,targetName:r,stream:Yt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||$b).then(function(){l.postMessage({sourceName:s,targetName:r,stream:Yt.PULL_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:s,targetName:r,stream:Yt.PULL_COMPLETE,streamId:t,reason:Is(m)})});break;case Yt.ENQUEUE:if(Qt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case Yt.CLOSE:if(Qt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#i(c,t);break;case Yt.ERROR:Qt(c,"error should have stream controller"),c.controller.error(Is(e.reason)),this.#i(c,t);break;case Yt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Is(e.reason)),this.#i(c,t);break;case Yt.CANCEL:if(!u)break;const h=Is(e.reason);Promise.try(u.onCancel||$b,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:Yt.CANCEL_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:s,targetName:r,stream:Yt.CANCEL_COMPLETE,streamId:t,reason:Is(m)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class v1{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Nt("Abstract method `_createCanvas` called.")}}class IT extends v1{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class w1{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Nt("Abstract method `_fetch` called.")}}class Vb extends w1{async _fetch(e){const t=await $o(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Uo(t)}}class N1{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,l){return"none"}destroy(e=!1){}}class BT extends N1{#e;#t;#s;#n;#i;#a;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#i=t}get#r(){return this.#t||=new Map}get#u(){return this.#a||=new Map}get#o(){if(!this.#s){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#i.createElementNS(ha,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#i.createElementNS(ha,"defs"),e.append(s),s.append(this.#s),this.#i.body.append(e)}return this.#s}#h(e){if(e.length===1){const h=e[0],m=new Array(256);for(let x=0;x<256;x++)m[x]=h[x]/255;const p=m.join(",");return[p,p,p]}const[t,s,r]=e,l=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=t[h]/255,c[h]=s[h]/255,u[h]=r[h]/255;return[l.join(","),c.join(","),u.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&(wu(t)?Ve('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=h1(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#r.get(e);if(t)return t;const[s,r,l]=this.#h(e),c=e.length===1?s:`${s}${r}${l}`;if(t=this.#r.get(c),t)return this.#r.set(e,t),t;const u=`g_${this.#n}_transfer_map_${this.#l++}`,h=this.#d(u);this.#r.set(e,h),this.#r.set(c,h);const m=this.#p(u);return this.#g(s,r,l,m),h}addHCMFilter(e,t){const s=`${e}-${t}`,r="base";let l=this.#u.get(r);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#u.set(r,l)),!e||!t))return l.url;const c=this.#y(e);e=Me.makeHexColor(...c);const u=this.#y(t);if(t=Me.makeHexColor(...u),this.#o.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return l.url;const h=new Array(256);for(let v=0;v<=255;v++){const N=v/255;h[v]=N<=.03928?N/12.92:((N+.055)/1.055)**2.4}const m=h.join(","),p=`g_${this.#n}_hcm_filter`,x=l.filter=this.#p(p);this.#g(m,m,m,x),this.#m(x);const y=(v,N)=>{const w=c[v]/255,A=u[v]/255,j=new Array(N+1);for(let C=0;C<=N;C++)j[C]=w+C/N*(A-w);return j.join(",")};return this.#g(y(0,5),y(1,5),y(2,5),x),l.url=this.#d(p),l.url}addAlphaFilter(e){let t=this.#r.get(e);if(t)return t;const[s]=this.#h([e]),r=`alpha_${s}`;if(t=this.#r.get(r),t)return this.#r.set(e,t),t;const l=`g_${this.#n}_alpha_map_${this.#l++}`,c=this.#d(l);this.#r.set(e,c),this.#r.set(r,c);const u=this.#p(l);return this.#x(s,u),c}addLuminosityFilter(e){let t=this.#r.get(e||"luminosity");if(t)return t;let s,r;if(e?([s]=this.#h([e]),r=`luminosity_${s}`):r="luminosity",t=this.#r.get(r),t)return this.#r.set(e,t),t;const l=`g_${this.#n}_luminosity_map_${this.#l++}`,c=this.#d(l);this.#r.set(e,c),this.#r.set(r,c);const u=this.#p(l);return this.#f(u),e&&this.#x(s,u),c}addHighlightHCMFilter(e,t,s,r,l){const c=`${t}-${s}-${r}-${l}`;let u=this.#u.get(e);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#u.set(e,u)),!t||!s))return u.url;const[h,m]=[t,s].map(this.#y.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),x=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[y,v]=[r,l].map(this.#y.bind(this));x<p&&([p,x,y,v]=[x,p,v,y]),this.#o.style.color="";const N=(j,C,S)=>{const T=new Array(256),R=(x-p)/S,O=j/255,H=(C-j)/(255*S);let V=0;for(let L=0;L<=S;L++){const K=Math.round(p+L*R),z=O+L*H;for(let G=V;G<=K;G++)T[G]=z;V=K+1}for(let L=V;L<256;L++)T[L]=T[V-1];return T.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,A=u.filter=this.#p(w);return this.#m(A),this.#g(N(y[0],v[0],5),N(y[1],v[1],5),N(y[2],v[2],5),A),u.url=this.#d(w),u.url}destroy(e=!1){e&&this.#a?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#a?.clear(),this.#a=null,this.#l=0)}#f(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#i.createElementNS(ha,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#o.append(t),t}#c(e,t,s){const r=this.#i.createElementNS(ha,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)}#g(e,t,s,r){const l=this.#i.createElementNS(ha,"feComponentTransfer");r.append(l),this.#c(l,"feFuncR",e),this.#c(l,"feFuncG",t),this.#c(l,"feFuncB",s)}#x(e,t){const s=this.#i.createElementNS(ha,"feComponentTransfer");t.append(s),this.#c(s,"feFuncA",e)}#y(e){return this.#o.style.color=e,Hp(getComputedStyle(this.#o).getPropertyValue("color"))}}class A1{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Nt("Abstract method `_fetch` called.")}}class Gb extends A1{async _fetch(e){const t=await $o(e,"arraybuffer");return new Uint8Array(t)}}class j1{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Nt("Abstract method `_fetch` called.")}}class qb extends j1{async _fetch(e){const t=await $o(e,"arraybuffer");return new Uint8Array(t)}}Cs&&Ve("Please use the `legacy` build in Node.js environments.");async function $p(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class HT extends N1{}class zT extends v1{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class FT extends w1{async _fetch(e){return $p(e)}}class UT extends A1{async _fetch(e){return $p(e)}}class $T extends j1{async _fetch(e){return $p(e)}}const fs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function np(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class Vp{isModifyingCurrentTransform(){return!1}getPattern(){Nt("Abstract method `getPattern` called.")}}class VT extends Vp{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let l;if(r===fs.STROKE||r===fs.FILL){const c=t.current.getClippedPathBoundingBox(r,Mt(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,m=t.cachedCanvases.getCanvas("pattern",u,h),p=m.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),s=Me.transform(s,[1,0,0,1,c[0],c[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),np(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=e.createPattern(m.canvas,"no-repeat");const x=new DOMMatrix(s);l.setTransform(x)}else np(e,this._bbox),l=this._createGradient(e);return l}}function fm(n,e,t,s,r,l,c,u){const h=e.coords,m=e.colors,p=n.data,x=n.width*4;let y;h[t+1]>h[s+1]&&(y=t,t=s,s=y,y=l,l=c,c=y),h[s+1]>h[r+1]&&(y=s,s=r,r=y,y=c,c=u,u=y),h[t+1]>h[s+1]&&(y=t,t=s,s=y,y=l,l=c,c=y);const v=(h[t]+e.offsetX)*e.scaleX,N=(h[t+1]+e.offsetY)*e.scaleY,w=(h[s]+e.offsetX)*e.scaleX,A=(h[s+1]+e.offsetY)*e.scaleY,j=(h[r]+e.offsetX)*e.scaleX,C=(h[r+1]+e.offsetY)*e.scaleY;if(N>=C)return;const S=m[l],T=m[l+1],R=m[l+2],O=m[c],H=m[c+1],V=m[c+2],L=m[u],K=m[u+1],z=m[u+2],G=Math.round(N),Y=Math.round(C);let de,be,I,Z,X,P,D,M;for(let F=G;F<=Y;F++){if(F<A){const Se=F<N?0:(N-F)/(N-A);de=v-(v-w)*Se,be=S-(S-O)*Se,I=T-(T-H)*Se,Z=R-(R-V)*Se}else{let Se;F>C?Se=1:A===C?Se=0:Se=(A-F)/(A-C),de=w-(w-j)*Se,be=O-(O-L)*Se,I=H-(H-K)*Se,Z=V-(V-z)*Se}let J;F<N?J=0:F>C?J=1:J=(N-F)/(N-C),X=v-(v-j)*J,P=S-(S-L)*J,D=T-(T-K)*J,M=R-(R-z)*J;const me=Math.round(Math.min(de,X)),ce=Math.round(Math.max(de,X));let ye=x*F+me*4;for(let Se=me;Se<=ce;Se++)J=(de-Se)/(de-X),J<0?J=0:J>1&&(J=1),p[ye++]=be-(be-P)*J|0,p[ye++]=I-(I-D)*J|0,p[ye++]=Z-(Z-M)*J|0,p[ye++]=255}}function GT(n,e,t){const s=e.coords,r=e.colors;let l,c;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(s.length/u)-1,m=u-1;for(l=0;l<h;l++){let p=l*u;for(let x=0;x<m;x++,p++)fm(n,t,s[p],s[p+1],s[p+u],r[p],r[p+1],r[p+u]),fm(n,t,s[p+u+1],s[p+1],s[p+u],r[p+u+1],r[p+1],r[p+u])}break;case"triangles":for(l=0,c=s.length;l<c;l+=3)fm(n,t,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class qT extends Vp{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,x=Math.min(Math.ceil(Math.abs(m*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),v=m/x,N=p/y,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/N},A=x+4,j=y+4,C=s.getCanvas("mesh",A,j),S=C.context,T=S.createImageData(x,y);if(t){const O=T.data;for(let H=0,V=O.length;H<V;H+=4)O[H]=t[0],O[H+1]=t[1],O[H+2]=t[2],O[H+3]=255}for(const O of this._figures)GT(T,O,w);return S.putImageData(T,2,2),{canvas:C.canvas,offsetX:u-2*v,offsetY:h-2*N,scaleX:v,scaleY:N}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){np(e,this._bbox);const l=new Float32Array(2);if(r===fs.SHADING)Me.singularValueDecompose2dScale(Mt(e),l);else if(this.matrix){Me.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;Me.singularValueDecompose2dScale(t.baseTransform,l),l[0]*=u,l[1]*=h}else Me.singularValueDecompose2dScale(t.baseTransform,l);const c=this._createMeshCanvas(l,r===fs.SHADING?null:this._background,t.cachedCanvases);return r!==fs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class YT extends Vp{getPattern(){return"hotpink"}}function WT(n){switch(n[0]){case"RadialAxial":return new VT(n);case"Mesh":return new qT(n);case"Dummy":return new YT}throw new Error(`Unknown IR type: ${n[0]}`)}const Yb={COLORED:1,UNCOLORED:2};class Gp{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:r,tilingType:l,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:m}=this;h=Math.abs(h),m=Math.abs(m),vu("TilingType: "+l);const p=t[0],x=t[1],y=t[2],v=t[3],N=y-p,w=v-x,A=new Float32Array(2);Me.singularValueDecompose2dScale(this.matrix,A);const[j,C]=A;Me.singularValueDecompose2dScale(this.baseTransform,A);const S=j*A[0],T=C*A[1];let R=N,O=w,H=!1,V=!1;const L=Math.ceil(h*S),K=Math.ceil(m*T),z=Math.ceil(N*S),G=Math.ceil(w*T);L>=z?R=h:H=!0,K>=G?O=m:V=!0;const Y=this.getSizeAndScale(R,this.ctx.canvas.width,S),de=this.getSizeAndScale(O,this.ctx.canvas.height,T),be=e.cachedCanvases.getCanvas("pattern",Y.size,de.size),I=be.context,Z=u.createCanvasGraphics(I);if(Z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Z,r,c),I.translate(-Y.scale*p,-de.scale*x),Z.transform(Y.scale,0,0,de.scale,0,0),I.save(),this.clipBbox(Z,p,x,y,v),Z.baseTransform=Mt(Z.ctx),Z.executeOperatorList(s),Z.endDrawing(),I.restore(),H||V){const X=be.canvas;H&&(R=h),V&&(O=m);const P=this.getSizeAndScale(R,this.ctx.canvas.width,S),D=this.getSizeAndScale(O,this.ctx.canvas.height,T),M=P.size,F=D.size,J=e.cachedCanvases.getCanvas("pattern-workaround",M,F),me=J.context,ce=H?Math.floor(N/h):0,ye=V?Math.floor(w/m):0;for(let Se=0;Se<=ce;Se++)for(let ke=0;ke<=ye;ke++)me.drawImage(X,M*Se,F*ke,M,F,0,0,M,F);return{canvas:J.canvas,scaleX:P.scale,scaleY:D.scale,offsetX:p,offsetY:x}}return{canvas:be.canvas,scaleX:Y.scale,scaleY:de.scale,offsetX:p,offsetY:x}}getSizeAndScale(e,t,s){const r=Math.max(Gp.MAX_PATTERN_SIZE,t);let l=Math.ceil(e*s);return l>=r?l=r:s=l/e,{scale:s,size:l}}clipBbox(e,t,s,r,l){const c=r-t,u=l-s;e.ctx.rect(t,s,c,u),Me.axialAlignedBoundingBox([t,s,r,l],Mt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,l=e.current;switch(t){case Yb.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=l.fillColor=c,r.strokeStyle=l.strokeColor=u;break;case Yb.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new fT(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r){let l=s;r!==fs.SHADING&&(l=Me.transform(l,t.baseTransform),this.matrix&&(l=Me.transform(l,this.matrix)));const c=this.createPatternCanvas(t);let u=new DOMMatrix(l);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(u),h}}function XT({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const u=gs.isLittleEndian?4278190080:255,[h,m]=c?[l,u]:[u,l],p=s>>3,x=s&7,y=n.length;t=new Uint32Array(t.buffer);let v=0;for(let N=0;N<r;N++){for(const A=e+p;e<A;e++){const j=e<y?n[e]:255;t[v++]=j&128?m:h,t[v++]=j&64?m:h,t[v++]=j&32?m:h,t[v++]=j&16?m:h,t[v++]=j&8?m:h,t[v++]=j&4?m:h,t[v++]=j&2?m:h,t[v++]=j&1?m:h}if(x===0)continue;const w=e<y?n[e++]:255;for(let A=0;A<x;A++)t[v++]=w&1<<7-A?m:h}return{srcPos:e,destPos:v}}const Wb=16,Xb=100,QT=15,Qb=10,Bs=16,mm=new DOMMatrix,sn=new Float32Array(2),$r=new Float32Array([1/0,1/0,-1/0,-1/0]);function ZT(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,l,c,u){e.transform(t,s,r,l,c,u),this.__originalTransform(t,s,r,l,c,u)},n.setTransform=function(t,s,r,l,c,u){e.setTransform(t,s,r,l,c,u),this.__originalSetTransform(t,s,r,l,c,u)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,l,c,u){e.bezierCurveTo(t,s,r,l,c,u),this.__originalBezierCurveTo(t,s,r,l,c,u)},n.rect=function(t,s,r,l){e.rect(t,s,r,l),this.__originalRect(t,s,r,l)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class KT{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function md(n,e,t,s,r,l,c,u,h,m){const[p,x,y,v,N,w]=Mt(n);if(x===0&&y===0){const C=c*p+N,S=Math.round(C),T=u*v+w,R=Math.round(T),O=(c+h)*p+N,H=Math.abs(Math.round(O)-S)||1,V=(u+m)*v+w,L=Math.abs(Math.round(V)-R)||1;return n.setTransform(Math.sign(p),0,0,Math.sign(v),S,R),n.drawImage(e,t,s,r,l,0,0,H,L),n.setTransform(p,x,y,v,N,w),[H,L]}if(p===0&&v===0){const C=u*y+N,S=Math.round(C),T=c*x+w,R=Math.round(T),O=(u+m)*y+N,H=Math.abs(Math.round(O)-S)||1,V=(c+h)*x+w,L=Math.abs(Math.round(V)-R)||1;return n.setTransform(0,Math.sign(x),Math.sign(y),0,S,R),n.drawImage(e,t,s,r,l,0,0,L,H),n.setTransform(p,x,y,v,N,w),[L,H]}n.drawImage(e,t,s,r,l,c,u,h,m);const A=Math.hypot(p,x),j=Math.hypot(y,v);return[A*h,j*m]}class Zb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Km;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=vs.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t){this.clipBox=new Float32Array([0,0,e,t]),this.minMax=$r.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=fs.FILL,t=null){const s=this.minMax.slice();if(e===fs.STROKE){t||Nt("Stroke bounding box must include transform."),Me.singularValueDecompose2dScale(t,sn);const r=sn[0]*this.lineWidth/2,l=sn[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const e=Me.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set($r,0)}getClippedPathBoundingBox(e=fs.FILL,t=null){return Me.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Kb(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Bs,l=(t-r)/Bs,c=r===0?l:l+1,u=n.createImageData(s,Bs);let h=0,m;const p=e.data,x=u.data;let y,v,N,w;if(e.kind===Rd.GRAYSCALE_1BPP){const A=p.byteLength,j=new Uint32Array(x.buffer,0,x.byteLength>>2),C=j.length,S=s+7>>3,T=4294967295,R=gs.isLittleEndian?4278190080:255;for(y=0;y<c;y++){for(N=y<l?Bs:r,m=0,v=0;v<N;v++){const O=A-h;let H=0;const V=O>S?s:O*8-7,L=V&-8;let K=0,z=0;for(;H<L;H+=8)z=p[h++],j[m++]=z&128?T:R,j[m++]=z&64?T:R,j[m++]=z&32?T:R,j[m++]=z&16?T:R,j[m++]=z&8?T:R,j[m++]=z&4?T:R,j[m++]=z&2?T:R,j[m++]=z&1?T:R;for(;H<V;H++)K===0&&(z=p[h++],K=128),j[m++]=z&K?T:R,K>>=1}for(;m<C;)j[m++]=0;n.putImageData(u,0,y*Bs)}}else if(e.kind===Rd.RGBA_32BPP){for(v=0,w=s*Bs*4,y=0;y<l;y++)x.set(p.subarray(h,h+w)),h+=w,n.putImageData(u,0,v),v+=Bs;y<c&&(w=s*r*4,x.set(p.subarray(h,h+w)),n.putImageData(u,0,v))}else if(e.kind===Rd.RGB_24BPP)for(N=Bs,w=s*N,y=0;y<c;y++){for(y>=l&&(N=r,w=s*N),m=0,v=w;v--;)x[m++]=p[h++],x[m++]=p[h++],x[m++]=p[h++],x[m++]=255;n.putImageData(u,0,y*Bs)}else throw new Error(`bad image kind: ${e.kind}`)}function Jb(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Bs,l=(t-r)/Bs,c=r===0?l:l+1,u=n.createImageData(s,Bs);let h=0;const m=e.data,p=u.data;for(let x=0;x<c;x++){const y=x<l?Bs:r;({srcPos:h}=XT({src:m,srcPos:h,dest:p,width:s,height:y,nonBlackColor:0})),n.putImageData(u,0,x*Bs)}}function ro(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function pd(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function ev(n,e){if(e)return!0;Me.singularValueDecompose2dScale(n,sn);const t=Math.fround(Xn.pixelRatio*Kr.PDF_TO_CSS_UNITS);return sn[0]<=t&&sn[1]<=t}const JT=["butt","round","square"],eD=["miter","round","bevel"],tD={},tv={};class qr{constructor(e,t,s,r,l,{optionalContentConfig:c,markedContentStack:u=null},h,m){this.ctx=e,this.current=new Zb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new KT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Mt(this.compositeCtx))}this.ctx.save(),pd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Mt(this.ctx)}executeOperatorList(e,t,s,r){const l=e.argsArray,c=e.fnArray;let u=t||0;const h=l.length;if(h===u)return u;const m=h-u>Qb&&typeof s=="function",p=m?Date.now()+QT:0;let x=0;const y=this.commonObjs,v=this.objs;let N;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,s),u;if(N=c[u],N!==Gd.dependency)this[N].apply(this,l[u]);else for(const w of l[u]){const A=w.startsWith("g_")?y:v;if(!A.has(w))return A.get(w,s),u}if(u++,u===h)return u;if(m&&++x>Qb){if(Date.now()>p)return s(),u;x=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=s,h=r,m="prescale1",p,x;for(;l>2&&u>1||c>2&&h>1;){let y=u,v=h;l>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/y),c>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/v),p=this.cachedCanvases.getCanvas(m,y,v),x=p.context,x.clearRect(0,0,y,v),x.drawImage(e,0,0,u,h,0,0,y,v),e=p.canvas,u=y,h=v,m=m==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:r}=e,l=this.current.fillColor,c=this.current.patternFill,u=Mt(t);let h,m,p,x;if((e.bitmap||e.data)&&e.count>1){const L=e.bitmap||e.data.buffer;m=JSON.stringify(c?u:[u.slice(0,4),l]),h=this._cachedBitmapsMap.get(L),h||(h=new Map,this._cachedBitmapsMap.set(L,h));const K=h.get(m);if(K&&!c){const z=Math.round(Math.min(u[0],u[2])+u[4]),G=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:K,offsetX:z,offsetY:G}}p=K}p||(x=this.cachedCanvases.getCanvas("maskCanvas",s,r),Jb(x.context,e));let y=Me.transform(u,[1/s,0,0,-1/r,0,0]);y=Me.transform(y,[1,0,0,1,0,-r]);const v=$r.slice();Me.axialAlignedBoundingBox([0,0,s,r],y,v);const[N,w,A,j]=v,C=Math.round(A-N)||1,S=Math.round(j-w)||1,T=this.cachedCanvases.getCanvas("fillCanvas",C,S),R=T.context,O=N,H=w;R.translate(-O,-H),R.transform(...y),p||(p=this._scaleImage(x.canvas,$n(R)),p=p.img,h&&c&&h.set(m,p)),R.imageSmoothingEnabled=ev(Mt(R),e.interpolate),md(R,p,0,0,p.width,p.height,0,0,s,r),R.globalCompositeOperation="source-in";const V=Me.transform($n(R),[1,0,0,1,-O,-H]);return R.fillStyle=c?l.getPattern(t,this,V,fs.FILL):l,R.fillRect(0,0,s,r),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(m,T.canvas)),{canvas:T.canvas,offsetX:Math.round(O),offsetY:Math.round(H)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=JT[e]}setLineJoin(e){this.ctx.lineJoin=eD[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),ro(this.suspendedCtx,l),ZT(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ro(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const l=r[0],c=r[1],u=r[2]-l,h=r[3]-c;u===0||h===0||(this.genericComposeSMask(t.context,s,u,h,t.subtype,t.backdrop,t.transferMap,l,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,l,c,u,h,m,p,x){let y=e.canvas,v=h-p,N=m-x;if(c)if(v<0||N<0||v+s>y.width||N+r>y.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,r),j=A.context;j.drawImage(y,-v,-N),j.globalCompositeOperation="destination-atop",j.fillStyle=c,j.fillRect(0,0,s,r),j.globalCompositeOperation="source-over",y=A.canvas,v=N=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(v,N,s,r),e.clip(A),e.globalCompositeOperation="destination-atop",e.fillStyle=c,e.fillRect(v,N,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(h,m,s,r),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(y,v,N,s,r,h,m,s,r),t.restore()}save(){this.inSMaskMode&&ro(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ro(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,l,c){this.ctx.transform(e,t,s,r,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[r]=t;if(!s){r||=t[0]=new Path2D,this[e](r);return}if(!(r instanceof Path2D)){const l=t[0]=new Path2D;for(let c=0,u=r.length;c<u;)switch(r[c++]){case ud.moveTo:l.moveTo(r[c++],r[c++]);break;case ud.lineTo:l.lineTo(r[c++],r[c++]);break;case ud.curveTo:l.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case ud.closePath:l.closePath();break;default:Ve(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=l}Me.axialAlignedBoundingBox(s,Mt(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,$n(s),fs.STROKE),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(fs.STROKE,Mt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,$n(s),fs.FILL),h){const m=new Path2D;m.addPath(e,s.getTransform().invertSelf().multiplySelf(h)),e=m}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),c&&s.restore(),t&&this.consumePath(e,u)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=tD}eoClip(){this.pendingClip=tv}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,r=t.getTransform().invertSelf();for(const{transform:l,x:c,y:u,fontSize:h,path:m}of e)s.addPath(m,new DOMMatrix(l).preMultiplySelf(r).translate(c,u).scale(h,-h));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||Km,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ve("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const l=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const h=s.italic?"italic":"normal";let m=t;t<Wb?m=Wb:t>Xb&&(m=Xb),this.current.fontSizeScale=t/m,this.ctx.font=`${h} ${u} ${m}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#s(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r}paintChar(e,t,s,r,l){const c=this.ctx,u=this.current,h=u.font,m=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,x=m&vs.FILL_STROKE_MASK,y=!!(m&vs.ADD_TO_PATH_FLAG),v=u.patternFill&&!h.missingFile,N=u.patternStroke&&!h.missingFile;let w;if((h.disableFontFace||y||v||N)&&(w=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||v||N){c.save(),c.translate(t,s),c.scale(p,-p);let A;if((x===vs.FILL||x===vs.FILL_STROKE)&&(r?(A=c.getTransform(),c.setTransform(...r),c.fill(this.#s(w,A,r))):c.fill(w)),x===vs.STROKE||x===vs.FILL_STROKE)if(l){A||=c.getTransform(),c.setTransform(...l);const{a:j,b:C,c:S,d:T}=A,R=Me.inverseTransform(l),O=Me.transform([j,C,S,T,0,0],R);Me.singularValueDecompose2dScale(O,sn),c.lineWidth*=Math.max(sn[0],sn[1])/p,c.stroke(this.#s(w,A,l))}else c.lineWidth/=p,c.stroke(w);c.restore()}else(x===vs.FILL||x===vs.FILL_STROKE)&&c.fillText(e,t,s),(x===vs.STROKE||x===vs.FILL_STROKE)&&c.strokeText(e,t,s);y&&(this.pendingTextPaths||=[]).push({transform:Mt(c),x:t,y:s,fontSize:p,path:w})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return st(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const l=this.ctx,c=t.fontSizeScale,u=t.charSpacing,h=t.wordSpacing,m=t.fontDirection,p=t.textHScale*m,x=e.length,y=s.vertical,v=y?1:-1,N=s.defaultVMetrics,w=r*t.fontMatrix[0],A=t.textRenderingMode===vs.FILL&&!s.disableFontFace&&!t.patternFill;l.save(),t.textMatrix&&l.transform(...t.textMatrix),l.translate(t.x,t.y+t.textRise),m>0?l.scale(p,-1):l.scale(p,1);let j,C;if(t.patternFill){l.save();const H=t.fillColor.getPattern(l,this,$n(l),fs.FILL);j=Mt(l),l.restore(),l.fillStyle=H}if(t.patternStroke){l.save();const H=t.strokeColor.getPattern(l,this,$n(l),fs.STROKE);C=Mt(l),l.restore(),l.strokeStyle=H}let S=t.lineWidth;const T=t.textMatrixScale;if(T===0||S===0){const H=t.textRenderingMode&vs.FILL_STROKE_MASK;(H===vs.STROKE||H===vs.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=T;if(c!==1&&(l.scale(c,c),S/=c),l.lineWidth=S,s.isInvalidPDFjsFont){const H=[];let V=0;for(const L of e)H.push(L.unicode),V+=L.width;l.fillText(H.join(""),0,0),t.x+=V*w*p,l.restore(),this.compose();return}let R=0,O;for(O=0;O<x;++O){const H=e[O];if(typeof H=="number"){R+=v*H*r/1e3;continue}let V=!1;const L=(H.isSpace?h:0)+u,K=H.fontChar,z=H.accent;let G,Y,de=H.width;if(y){const I=H.vmetric||N,Z=-(H.vmetric?I[1]:de*.5)*w,X=I[2]*w;de=I?-I[0]:de,G=Z/c,Y=(R+X)/c}else G=R/c,Y=0;if(s.remeasure&&de>0){const I=l.measureText(K).width*1e3/r*c;if(de<I&&this.isFontSubpixelAAEnabled){const Z=de/I;V=!0,l.save(),l.scale(Z,1),G/=Z}else de!==I&&(G+=(de-I)/2e3*r/c)}if(this.contentVisible&&(H.isInFont||s.missingFile)){if(A&&!z)l.fillText(K,G,Y);else if(this.paintChar(K,G,Y,j,C),z){const I=G+r*z.offset.x/c,Z=Y-r*z.offset.y/c;this.paintChar(z.fontChar,I,Z,j,C)}}const be=y?de*w-L*m:de*w+L*m;R+=be,V&&l.restore()}y?t.y-=R:t.x+=R*p,l.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,r=s.font,l=s.fontSize,c=s.fontDirection,u=r.vertical?1:-1,h=s.charSpacing,m=s.wordSpacing,p=s.textHScale*c,x=s.fontMatrix||Km,y=e.length,v=s.textRenderingMode===vs.INVISIBLE;let N,w,A,j;if(!(v||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(p,c),N=0;N<y;++N){if(w=e[N],typeof w=="number"){j=u*w*l/1e3,this.ctx.translate(j,0),s.x+=j*p;continue}const C=(w.isSpace?m:0)+h,S=r.charProcOperatorList[w.operatorListId];S?this.contentVisible&&(this.save(),t.scale(l,l),t.transform(...x),this.executeOperatorList(S),this.restore()):Ve(`Type3 character "${w.operatorListId}" is not available.`);const T=[w.width,0];Me.applyTransform(T,x),A=T[0]*l+C,t.translate(A,0),s.x+=A*p}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,r,l,c){const u=new Path2D;u.rect(s,r,l-s,c-r),this.ctx.clip(u),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||Mt(this.ctx),r={createCanvasGraphics:l=>new qr(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Gp(e,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=WT(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,$n(t),fs.SHADING);const r=$n(t);if(r){const{width:l,height:c}=t.canvas,u=$r.slice();Me.axialAlignedBoundingBox([0,0,l,c],r,u);const[h,m,p,x]=u;this.ctx.fillRect(h,m,p-h,x-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Nt("Should not call beginInlineImage")}beginImageData(){Nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Mt(this.ctx),t)){Me.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,r,l,c]=t,u=new Path2D;u.rect(s,r,l-s,c-r),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||vu("TODO: Support non-isolated groups."),e.knockout&&Ve("Knockout groups not supported.");const s=Mt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=$r.slice();Me.axialAlignedBoundingBox(e.bbox,Mt(t),r);const l=[0,0,t.canvas.width,t.canvas.height];r=Me.intersect(r,l)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-c,1),m=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,m]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(p,h,m),y=x.context;y.translate(-c,-u),y.transform(...s);let v=new Path2D;const[N,w,A,j]=e.bbox;if(v.rect(N,w,A-N,j-w),e.matrix){const C=new Path2D;C.addPath(v,new DOMMatrix(e.matrix)),v=C}y.clip(v),e.smask?this.smaskStack.push({canvas:x.canvas,context:y,offsetX:c,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,u),t.save()),ro(t,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Mt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=$r.slice();Me.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,l),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,r,l){if(this.#e(),pd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],u=t[3]-t[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=u,Me.singularValueDecompose2dScale(Mt(this.ctx),sn);const{viewportScale:h}=this,m=Math.ceil(c*this.outputScaleX*h),p=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(m,p);const{canvas:x,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(sn[0],0,0,-sn[1],0,u*sn[1]),pd(this.ctx)}else{pd(this.ctx),this.endPath();const h=new Path2D;h.rect(t[0],t[1],c,u),this.ctx.clip(h)}}this.current=new Zb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,r=this._createMaskCanvas(e),l=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,r=0,l,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const h=Mt(u);u.transform(t,s,r,l,0,0);const m=this._createMaskCanvas(e);u.setTransform(1,0,0,1,m.offsetX-h[4],m.offsetY-h[5]);for(let p=0,x=c.length;p<x;p+=2){const y=Me.transform(h,[t,s,r,l,c[p],c[p+1]]);u.drawImage(m.canvas,y[4],y[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const l of e){const{data:c,width:u,height:h,transform:m}=l,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),x=p.context;x.save();const y=this.getObject(c,l);Jb(x,y),x.globalCompositeOperation="source-in",x.fillStyle=r?s.getPattern(x,this,$n(t),fs.FILL):s,x.fillRect(0,0,u,h),x.restore(),t.save(),t.transform(...m),t.scale(1,-1),md(t,p.canvas,0,0,u,h,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,r){if(!this.contentVisible)return;const l=this.getObject(e);if(!l){Ve("Dependent image isn't ready yet");return}const c=l.width,u=l.height,h=[];for(let m=0,p=r.length;m<p;m+=2)h.push({transform:[t,0,0,s,r[m],r[m+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(l,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,l=this.cachedCanvases.getCanvas("inlineImage",s,r),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",l.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,r=this.ctx;this.save();const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/t,-1/s);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",t,s).context;Kb(m,e),c=this.applyTransferMapsToCanvas(m)}const u=this._scaleImage(c,$n(r));r.imageSmoothingEnabled=ev(Mt(r),e.interpolate),md(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const l=e.width,c=e.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;Kb(h,e),r=this.applyTransferMapsToCanvas(h)}for(const l of t)s.save(),s.transform(...l.transform),s.scale(1,-1),md(s,r,l.x,l.y,l.w,l.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===tv?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Mt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:l}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const h=Math.abs(t),m=Math.abs(l);if(h===m)if(e===0)c=u=1/h;else{const p=h*e;c=u=p<1?1/p:1}else if(e===0)c=1/h,u=1/m;else{const p=h*e,x=m*e;c=p<1?1/p:1,u=x<1?1/x:1}}else{const h=Math.abs(t*l-s*r),m=Math.hypot(t,s),p=Math.hypot(r,l);if(e===0)c=p/h,u=m/h;else{const x=e*h;c=p>x?p/x:1,u=m>x?m/x:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[l,c]=this.getScaleForStroking();if(l===c){s.lineWidth=(r||1)*l,s.stroke(e);return}const u=s.getLineDash();t&&s.save(),s.scale(l,c),mm.a=1/l,mm.d=1/c;const h=new Path2D;if(h.addPath(e,mm),u.length>0){const m=Math.max(l,c);s.setLineDash(u.map(p=>p/m)),s.lineDashOffset/=m}s.lineWidth=r||1,s.stroke(h),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Gd)qr.prototype[n]!==void 0&&(qr.prototype[Gd[n]]=qr.prototype[n]);class Yr{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class sD{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Hr=Symbol("INTERNAL");class nD{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:s,usage:r,rbGroups:l}){this.#e=!!(e&tn.DISPLAY),this.#t=!!(e&tn.PRINT),this.name=t,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==Hr&&Nt("Internal method `_setVisible` called."),this.#s=s,this.#n=t}}class aD{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=tn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new nD(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(Hr,!1);for(const s of e.on)this.#t.get(s)._setVisible(Hr,!0);for(const s of e.off)this.#t.get(s)._setVisible(Hr,!1);this.#s=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const l=e[r];let c;if(Array.isArray(l))c=this.#i(l);else if(this.#t.has(l))c=this.#t.get(l).visible;else return Ve(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return vu("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ve(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ve(`Unknown optional content policy ${e.policy}.`),!0}return Ve(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const r=this.#t.get(e);if(!r){Ve(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const l of r.rbGroups)for(const c of l)c!==e&&this.#t.get(c)?._setVisible(Hr,!1,!0);r._setVisible(Hr,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=this.#t.get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!l.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new y1;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class iD{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Qt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,l?.length>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,m)=>{this._onReceiveData({begin:h,chunk:m})}),e.addProgressListener((h,m)=>{this._onProgress({loaded:h,total:m})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(l){return l._begin!==e?!1:(l._enqueue(s),!0)});Qt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new rD(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new lD(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class rD{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=Bp(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lD{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function oD(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let p=u(t);return p=unescape(p),p=h(p),p=m(p),l(p)}if(t=c(n),t){const p=m(t);return l(p)}if(t=s("filename","i").exec(n),t){t=t[1];let p=u(t);return p=m(p),l(p)}function s(p,x){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function r(p,x){if(p){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const y=new TextDecoder(p,{fatal:!0}),v=Uo(x);x=y.decode(v),e=!1}catch{}}return x}function l(p){return e&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),e&&(p=r("iso-8859-1",p))),p}function c(p){const x=[];let y;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=v.exec(p))!==null;){let[,w,A,j]=y;if(w=parseInt(w,10),w in x){if(w===0)break;continue}x[w]=[A,j]}const N=[];for(let w=0;w<x.length&&w in x;++w){let[A,j]=x[w];j=u(j),A&&(j=unescape(j),w===0&&(j=h(j))),N.push(j)}return N.join("")}function u(p){if(p.startsWith('"')){const x=p.slice(1).split('\\"');for(let y=0;y<x.length;++y){const v=x[y].indexOf('"');v!==-1&&(x[y]=x[y].slice(0,v),x.length=y+1),x[y]=x[y].replaceAll(/\\(.)/g,"$1")}p=x.join('"')}return p}function h(p){const x=p.indexOf("'");if(x===-1)return p;const y=p.slice(0,x),N=p.slice(x+1).replace(/^[^']*'/,"");return r(y,N)}function m(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,y,v,N){if(v==="q"||v==="Q")return N=N.replaceAll("_"," "),N=N.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,A){return String.fromCharCode(parseInt(A,16))}),r(y,N);try{N=atob(N)}catch{}return r(y,N)})}return""}function S1(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function Au(n){return URL.parse(n)?.origin??null}function E1({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(n.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function _1(n){const e=n.get("Content-Disposition");if(e){let t=oD(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Bp(t))return t}return null}function qo(n,e){return new qd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function C1(n){return n===200||n===206}function T1(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function D1(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ve(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class cD{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=S1(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new uD(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class dD{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,T1(s,this._withCredentials,this._abortController)).then(l=>{if(e._responseOrigin=Au(l.url),!C1(l.status))throw qo(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:u,suggestedLength:h}=E1({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=_1(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ei("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:D1(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class uD{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(e.headers);l.append("Range",`bytes=${t}-${s-1}`);const c=r.url;fetch(c,T1(l,this._withCredentials,this._abortController)).then(u=>{const h=Au(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!C1(u.status))throw qo(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:D1(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const pm=200,gm=206;function hD(n){const e=n.response;return typeof e!="string"?e:Uo(e).buffer}class fD{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=S1(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[l,c]of this.headers)t.setRequestHeader(l,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=gm):r.expectedStatus=pm,t.responseType="arraybuffer",Qt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const l=r.status||pm;if(!(l===pm&&s.expectedStatus===gm)&&l!==s.expectedStatus){s.onError(r.status);return}const u=hD(r);if(l===gm){const h=r.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);m?s.onDone({begin:parseInt(m[1],10),chunk:u}):(Ve('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class mD{constructor(e){this._source=e,this._manager=new fD(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new pD(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new gD(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class pD{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Au(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...m]=u.split(": ");return[h,m.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=E1({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=_1(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=qo(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class gD{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Au(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=qo(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const xD=/^[a-z][a-z0-9\-+.]+:/i;function yD(n){if(xD.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class bD{constructor(e){this.source=e,this.url=yD(e.url),Qt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new vD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new wD(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class vD{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=qo(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ei("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wD{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lo=Symbol("INITIAL_DATA");class R1{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:lo}}get(e,t=null){if(t){const r=this.#t(e);return r.promise.then(()=>t(r.data)),null}const s=this.#e[e];if(!s||s.data===lo)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==lo}delete(e){const t=this.#e[e];return!t||t.data===lo?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==lo&&(yield[e,t])}}}const ND=1e5,sv=30;class _s{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#i=null;#a=null;#l=0;#r=0;#u=null;#o=null;#h=0;#d=0;#f=Object.create(null);#m=[];#p=null;#c=[];#g=new WeakMap;#x=null;static#y=new Map;static#v=new Map;static#w=new WeakMap;static#N=null;static#S=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#o=t,this.#d=s.scale*Xn.pixelRatio,this.#h=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:c,pageY:u}=s.rawDims;this.#x=[1,0,0,-1,-c,u+l],this.#r=r,this.#l=l,_s.#R(),Ui(t,s),this.#e.promise.finally(()=>{_s.#S.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=gs.platform;return st(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#f,t.styles),this.#_(t.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),_s.#S.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*Xn.pixelRatio,r=e.rotation;if(r!==this.#h&&(t?.(),this.#h=r,Ui(this.#o,{rotation:r})),s!==this.#d){t?.(),this.#d=s;const l={div:null,properties:null,ctx:_s.#C(this.#i)};for(const c of this.#c)l.properties=this.#g.get(c),l.div=c,this.#A(l)}}cancel(){const e=new ei("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#m}#_(e){if(this.#s)return;this.#a.ctx??=_s.#C(this.#i);const t=this.#c,s=this.#m;for(const r of e){if(t.length>ND){Ve("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id!==null&&this.#t.setAttribute("id",`${r.id}`),l.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(r.str),this.#T(r)}}#T(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(t);const r=Me.transform(this.#x,e.transform);let l=Math.atan2(r[1],r[0]);const c=this.#f[e.fontName];c.vertical&&(l+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=_s.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),m=h*_s.#k(u,c,this.#i);let p,x;l===0?(p=r[4],x=r[5]-m):(p=r[4]+m*Math.sin(l),x=r[5]-m*Math.cos(l));const y="calc(var(--total-scale-factor) *",v=t.style;this.#t===this.#o?(v.left=`${(100*p/this.#r).toFixed(2)}%`,v.top=`${(100*x/this.#l).toFixed(2)}%`):(v.left=`${y}${p.toFixed(2)}px)`,v.top=`${y}${x.toFixed(2)}px)`),v.fontSize=`${y}${(_s.#N*h).toFixed(2)}px)`,v.fontFamily=u,s.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),l!==0&&(s.angle=l*(180/Math.PI));let N=!1;if(e.str.length>1)N=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),A=Math.abs(e.transform[3]);w!==A&&Math.max(w,A)/Math.min(w,A)>1.5&&(N=!0)}if(N&&(s.canvasWidth=c.vertical?e.height:e.width),this.#g.set(t,s),this.#a.div=t,this.#a.properties=s,this.#A(this.#a),s.hasText&&this.#t.append(t),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#A(e){const{div:t,properties:s,ctx:r}=e,{style:l}=t;let c="";if(_s.#N>1&&(c=`scale(${1/_s.#N})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=l,{canvasWidth:h,fontSize:m}=s;_s.#E(r,m*this.#d,u);const{width:p}=r.measureText(t.textContent);p>0&&(c=`scaleX(${h*this.#d/p}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(l.transform=c)}static cleanup(){if(!(this.#S.size>0)){this.#y.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#C(e=null){let t=this.#v.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#w.set(t,{size:0,family:""})}return t}static#E(e,t,s){const r=this.#w.get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)}static#R(){if(this.#N!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#N=e.getBoundingClientRect().height,e.remove()}static#k(e,t,s){const r=this.#y.get(e);if(r)return r;const l=this.#C(s);l.canvas.width=l.canvas.height=sv,this.#E(l,sv,e);const c=l.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let m=.8;return u?m=u/(u+h):(gs.platform.isFirefox&&Ve("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?m=t.ascent:t.descent&&(m=1+t.descent)),this.#y.set(e,m),m}}class _o{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(l){if(!l)return;let c=null;const u=l.name;if(u==="#text")c=l.value;else if(_o.shouldBuildText(u))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&t.push({str:c}),!!l.children)for(const h of l.children)r(h)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const AD=100;function jD(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new qp,{docId:t}=e,s=n.url?kT(n.url):null,r=n.data?MT(n.data):null,l=n.httpHeaders||null,c=n.withCredentials===!0,u=n.password??null,h=n.range instanceof k1?n.range:null,m=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let p=n.worker instanceof Co?n.worker:null;const x=n.verbosity,y=typeof n.docBaseUrl=="string"&&!wu(n.docBaseUrl)?n.docBaseUrl:null,v=hd(n.cMapUrl),N=n.cMapPacked!==!1,w=n.CMapReaderFactory||(Cs?FT:Vb),A=hd(n.iccUrl),j=hd(n.standardFontDataUrl),C=n.StandardFontDataFactory||(Cs?UT:Gb),S=hd(n.wasmUrl),T=n.WasmFactory||(Cs?$T:qb),R=n.stopAtErrors!==!0,O=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,H=n.isEvalSupported!==!1,V=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Cs,L=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Cs&&(gs.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,z=typeof n.disableFontFace=="boolean"?n.disableFontFace:Cs,G=n.fontExtraProperties===!0,Y=n.enableXfa===!0,de=n.ownerDocument||globalThis.document,be=n.disableRange===!0,I=n.disableStream===!0,Z=n.disableAutoFetch===!0,X=n.pdfBug===!0,P=n.CanvasFactory||(Cs?zT:IT),D=n.FilterFactory||(Cs?HT:BT),M=n.enableHWA===!0,F=n.useWasm!==!1,J=h?h.length:n.length??NaN,me=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Cs&&!z,ce=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(w===Vb&&C===Gb&&T===qb&&v&&j&&S&&fo(v,document.baseURI)&&fo(j,document.baseURI)&&fo(S,document.baseURI)),ye=null;dT(x);const Se={canvasFactory:new P({ownerDocument:de,enableHWA:M}),filterFactory:new D({docId:t,ownerDocument:de}),cMapReaderFactory:ce?null:new w({baseUrl:v,isCompressed:N}),standardFontDataFactory:ce?null:new C({baseUrl:j}),wasmFactory:ce?null:new T({baseUrl:S})};p||(p=Co.create({verbosity:x,port:Yr.workerPort}),e._worker=p);const ke={docId:t,apiVersion:"5.3.93",data:r,password:u,disableAutoFetch:Z,rangeChunkSize:m,length:J,docBaseUrl:y,enableXfa:Y,evaluatorOptions:{maxImageSize:O,disableFontFace:z,ignoreErrors:R,isEvalSupported:H,isOffscreenCanvasSupported:V,isImageDecoderSupported:L,canvasMaxAreaInBytes:K,fontExtraProperties:G,useSystemFonts:me,useWasm:F,useWorkerFetch:ce,cMapUrl:v,iccUrl:A,standardFontDataUrl:j,wasmUrl:S}},te={ownerDocument:de,pdfBug:X,styleElement:ye,loadingParams:{disableAutoFetch:Z,enableXfa:Y}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ue=p.messageHandler.sendWithPromise("GetDocRequest",ke,r?[r.buffer]:null);let Ge;if(h)Ge=new iD(h,{disableRange:be,disableStream:I});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const ft=fo(s)?cD:Cs?bD:mD;Ge=new ft({url:s,length:J,httpHeaders:l,withCredentials:c,rangeChunkSize:m,disableRange:be,disableStream:I})}return Ue.then(ft=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ve=new mo(t,ft,p.port),W=new _D(ve,e,Ge,te,Se);e._transport=W,ve.send("Ready",null)})}).catch(e._capability.reject),e}class qp{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${qp.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class k1{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#i=[];constructor(e,t,s=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){this.#i.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#i)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#n)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){Nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class SD{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ED{#e=!1;constructor(e,t,s,r=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new Fb:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new R1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Vo({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:r=Wa.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:m=null,printAnnotationStorage:p=null,isEditing:x=!1}){this._stats?.time("Overall");const y=this._transport.getRenderingIntent(s,r,p,x),{renderingIntent:v,cacheKey:N}=y;this.#e=!1,u||=this._transport.getOptionalContentConfig(v);let w=this._intentStates.get(N);w||(w=Object.create(null),this._intentStates.set(N,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const A=!!(v&tn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(y));const j=T=>{w.renderTasks.delete(C),A&&(this.#e=!0),this.#t(),T?(C.capability.reject(T),this._abortOperatorList({intentState:w,reason:T instanceof Error?T:new Error(T)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Vr({callback:j,params:{canvasContext:e,viewport:t,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:m});(w.renderTasks||=new Set).add(C);const S=C.task;return Promise.all([w.displayReadyCapability.promise,u]).then(([T,R])=>{if(this.destroyed){j();return}if(this._stats?.time("Rendering"),!(R.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:T,optionalContentConfig:R}),C.operatorListChanged()}).catch(j),S}getOperatorList({intent:e="display",annotationMode:t=Wa.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(e,t,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_o.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function l(){c.read().then(function({value:h,done:m}){if(m){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},r)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new Fb),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:l,modifiedIds:r},c).getReader(),m=this._intentStates.get(t);m.streamReader=h;const p=()=>{h.read().then(({value:x,done:y})=>{if(y){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(x,m),p())},x=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const y of m.renderTasks)y.operatorListChanged();this.#t()}if(m.displayReadyCapability)m.displayReadyCapability.reject(x);else if(m.opListReadCapability)m.opListReadCapability.reject(x);else throw x}})};p()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Ip){let r=AD;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new ei(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Xa,An,pa,Li,cu,Oi,Pi,Ds,kd,M1,L1,po,Qr,Md;const _t=class _t{constructor({name:e=null,port:t=null,verbosity:s=uT()}={}){zn(this,Ds);zn(this,Xa,Promise.withResolvers());zn(this,An,null);zn(this,pa,null);zn(this,Li,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(Et(_t,Pi).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Et(_t,Pi).set(t,this),Fn(this,Ds,M1).call(this,t)}else Fn(this,Ds,L1).call(this)}get promise(){return Et(this,Xa).promise}get port(){return Et(this,pa)}get messageHandler(){return Et(this,An)}destroy(){this.destroyed=!0,Et(this,Li)?.terminate(),Ps(this,Li,null),Et(_t,Pi).delete(Et(this,pa)),Ps(this,pa,null),Et(this,An)?.destroy(),Ps(this,An,null)}static create(e){const t=Et(this,Pi).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _t(e)}static get workerSrc(){if(Yr.workerSrc)return Yr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return st(this,"_setupFakeWorkerGlobal",(async()=>Et(this,Qr,Md)?Et(this,Qr,Md):(await import(this.workerSrc)).WorkerMessageHandler)())}};Xa=new WeakMap,An=new WeakMap,pa=new WeakMap,Li=new WeakMap,cu=new WeakMap,Oi=new WeakMap,Pi=new WeakMap,Ds=new WeakSet,kd=function(){Et(this,Xa).resolve(),Et(this,An).send("configure",{verbosity:this.verbosity})},M1=function(e){Ps(this,pa,e),Ps(this,An,new mo("main","worker",e)),Et(this,An).on("ready",()=>{}),Fn(this,Ds,kd).call(this)},L1=function(){if(Et(_t,Oi)||Et(_t,Qr,Md)){Fn(this,Ds,po).call(this);return}let{workerSrc:e}=_t;try{_t._isSameOrigin(window.location,e)||(e=_t._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new mo("main","worker",t),r=()=>{l.abort(),s.destroy(),t.terminate(),this.destroyed?Et(this,Xa).reject(new Error("Worker was destroyed")):Fn(this,Ds,po).call(this)},l=new AbortController;t.addEventListener("error",()=>{Et(this,Li)||r()},{signal:l.signal}),s.on("test",u=>{if(l.abort(),this.destroyed||!u){r();return}Ps(this,An,s),Ps(this,pa,t),Ps(this,Li,t),Fn(this,Ds,kd).call(this)}),s.on("ready",u=>{if(l.abort(),this.destroyed){r();return}try{c()}catch{Fn(this,Ds,po).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{vu("The worker has been disabled.")}Fn(this,Ds,po).call(this)},po=function(){Et(_t,Oi)||(Ve("Setting up fake worker."),Ps(_t,Oi,!0)),_t._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Et(this,Xa).reject(new Error("Worker was destroyed"));return}const t=new PT;Ps(this,pa,t);const s=`fake${ob(_t,cu)._++}`,r=new mo(s+"_worker",s,t);e.setup(r,t),Ps(this,An,new mo(s,s+"_worker",t)),Fn(this,Ds,kd).call(this)}).catch(e=>{Et(this,Xa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Qr=new WeakSet,Md=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},zn(_t,Qr),zn(_t,cu,0),zn(_t,Oi,!1),zn(_t,Pi,new WeakMap),Cs&&(Ps(_t,Oi,!0),Yr.workerSrc||="./pdf.worker.mjs"),_t._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},_t._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},_t.fromPort=e=>{if(AT("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _t.create(e)};let Co=_t;class _D{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#i=null;constructor(e,t,s,r,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new R1,this.fontLoader=new DT({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#a(e,t=null){const s=this.#e.get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,r),r}get annotationStorage(){return st(this,"annotationStorage",new Up)}getRenderingIntent(e,t=Wa.ENABLE,s=null,r=!1,l=!1){let c=tn.DISPLAY,u=tp;switch(e){case"any":c=tn.ANY;break;case"display":break;case"print":c=tn.PRINT;break;default:Ve(`getRenderingIntent - invalid intent: ${e}`)}const h=c&tn.PRINT&&s instanceof b1?s:this.annotationStorage;switch(t){case Wa.DISABLE:c+=tn.ANNOTATIONS_DISABLE;break;case Wa.ENABLE:break;case Wa.ENABLE_FORMS:c+=tn.ANNOTATIONS_FORMS;break;case Wa.ENABLE_STORAGE:c+=tn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Ve(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(c+=tn.IS_EDITING),l&&(c+=tn.OPLIST);const{ids:m,hash:p}=h.modifiedIds,x=[c,u.hash,p];return{renderingIntent:c,cacheKey:x.join("_"),annotationStorageSerializable:u,modifiedIds:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),_s.cleanup(),this._networkStream?.cancelAllRequests(new ei("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){r.close();return}Qt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:c}=this._fullReader;return(!r||!l)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{t.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:c}}),e.on("GetRangeReader",(s,r)=>{Qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:c,done:u}){if(u){r.close();return}Qt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{l.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new SD(s,this))}),e.on("DocException",s=>{t._capability.reject(Is(s))}),e.on("PasswordRequest",s=>{this.#i=Promise.withResolvers();try{if(!t.onPassword)throw Is(s);const r=l=>{l instanceof Error?this.#i.reject(l):this.#i.resolve({password:l})};t.onPassword(r,s.code)}catch(r){this.#i.reject(r)}return this.#i.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const m=l.error;Ve(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,p)=>globalThis.FontInspector.fontAdded(m,p):null,u=new RT(l,c);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=l;Qt(h,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,p]of m.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,l,c])=>{if(this.destroyed)return;const u=this.#t.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#s.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,e);const c=new ED(t,l,this,this._params.pdfBug);return this.#t.set(t,c),c});return this.#s.set(t,r),r}getPageIndex(e){return sp(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#a("GetOptionalContentConfig").then(t=>new aD(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new sD(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),_s.cleanup()}}cachedPageNumber(e){if(!sp(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class CD{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Vr{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:m,useRequestAnimationFrame:p=!1,pdfBug:x=!1,pageColors:y=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=m,this._pdfBug=x,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new CD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Vr.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Vr.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:r,transform:l,background:c}=this.params;this.gfx=new qr(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Vr.#t.delete(this._canvas),e||=new Ip(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Vr.#t.delete(this._canvas),this.callback())))}}const O1="5.3.93",TD="cbeef3233";function nv(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function oo(n){return Math.max(0,Math.min(255,255*n))}class av{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=oo(e),[e,e,e]}static G_HTML([e]){const t=nv(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(oo)}static RGB_HTML(e){return`#${e.map(nv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[oo(1-Math.min(1,e+r)),oo(1-Math.min(1,s+r)),oo(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,l=1-t,c=1-s,u=Math.min(r,l,c);return["CMYK",r,l,c,u]}}class DD{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Nt("Abstract method `_createSVG` called.")}}class Yd extends DD{_createSVG(e){return document.createElementNS(ha,e)}}class P1{static setupStorage(e,t,s,r,l){const c=r.getValue(t,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),l==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?e.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&e.removeAttribute("checked"),l==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),l==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,m=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(t,{value:m})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:l}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[h,m]of Object.entries(c))if(m!=null)switch(h){case"class":m.length&&e.setAttribute(h,m.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",m);break;case"style":Object.assign(e.style,m);break;case"textContent":e.textContent=m;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,m)}u&&l.addLinkAttributes(e,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(e,c.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,l=e.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:l,linkService:s});const u=l!=="richText",h=e.div;if(h.append(c),e.viewport){const x=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=x}u&&h.setAttribute("class","xfaLayer xfaFont");const m=[];if(r.children.length===0){if(r.value){const x=document.createTextNode(r.value);c.append(x),u&&_o.shouldBuildText(r.name)&&m.push(x)}return{textDivs:m}}const p=[[r,-1,c]];for(;p.length>0;){const[x,y,v]=p.at(-1);if(y+1===x.children.length){p.pop();continue}const N=x.children[++p.at(-1)[1]];if(N===null)continue;const{name:w}=N;if(w==="#text"){const j=document.createTextNode(N.value);m.push(j),v.append(j);continue}const A=N?.attributes?.xmlns?document.createElementNS(N.attributes.xmlns,w):document.createElement(w);if(v.append(A),N.attributes&&this.setAttributes({html:A,element:N,storage:t,intent:l,linkService:s}),N.children?.length>0)p.push([N,-1,A]);else if(N.value){const j=document.createTextNode(N.value);u&&_o.shouldBuildText(w)&&m.push(j),A.append(j)}}for(const x of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:m}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const RD=9,$i=new WeakSet;class iv{static create(e){switch(e.data.annotationType){case Wt.LINK:return new I1(e);case Wt.TEXT:return new kD(e);case Wt.WIDGET:switch(e.data.fieldType){case"Tx":return new MD(e);case"Btn":return e.data.radioButton?new B1(e):e.data.checkBox?new OD(e):new PD(e);case"Ch":return new ID(e);case"Sig":return new LD(e)}return new Yi(e);case Wt.POPUP:return new ap(e);case Wt.FREETEXT:return new H1(e);case Wt.LINE:return new HD(e);case Wt.SQUARE:return new zD(e);case Wt.CIRCLE:return new FD(e);case Wt.POLYLINE:return new z1(e);case Wt.CARET:return new $D(e);case Wt.INK:return new Yp(e);case Wt.POLYGON:return new UD(e);case Wt.HIGHLIGHT:return new F1(e);case Wt.UNDERLINE:return new VD(e);case Wt.SQUIGGLY:return new GD(e);case Wt.STRIKEOUT:return new qD(e);case Wt.STAMP:return new U1(e);case Wt.FILEATTACHMENT:return new YD(e);default:return new Vt(e)}}}class Vt{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Vt._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#n(t),this.#s?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-u)/l}%`,t.top=`${100*(c-e[3]+h)/c}%`,r===0?(t.width=`${100*(e[2]-e[0])/l}%`,t.height=`${100*(e[3]-e[1])/c}%`):this.setRotation(r)}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",t.id),this instanceof Yi||(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex++,t.alternativeText&&(l.title=t.alternativeText),t.noRotate&&l.classList.add("norotate"),!t.rect||this instanceof ap){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,l),l}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,A=t.borderStyle.verticalCornerRadius;if(w>0||A>0){const C=`calc(${w}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;c.borderRadius=C}else if(this instanceof B1){const C=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=C}switch(t.borderStyle.style){case Br.SOLID:c.borderStyle="solid";break;case Br.DASHED:c.borderStyle="dashed";break;case Br.BEVELED:Ve("Unimplemented border style: beveled");break;case Br.INSET:Ve("Unimplemented border style: inset");break;case Br.UNDERLINE:c.borderBottomStyle="solid";break}const j=t.borderColor||null;j?(this.#t=!0,c.borderColor=Me.makeHexColor(j[0]|0,j[1]|0,j[2]|0)):c.borderWidth=0}const m=Me.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:x,pageX:y,pageY:v}=r.rawDims;c.left=`${100*(m[0]-y)/p}%`,c.top=`${100*(m[1]-v)/x}%`;const{rotation:N}=t;return t.hasOwnCanvas||N===0?(c.width=`${100*u/p}%`,c.height=`${100*h/x}%`):this.setRotation(N,l),l}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:c}=this;e%180!==0&&([l,c]=[c,l]),t.style.width=`${100*l/s}%`,t.style.height=`${100*c/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const l=r.detail[t],c=l[0],u=l.slice(1);r.target.style[s]=av[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:av[`${c}_rgb`](u)})};return st(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail))(e[r]||s[r])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,l]of Object.entries(t)){const c=s[r];if(c){const u={detail:{[r]:l},target:e};c(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,l]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,A,j,C]=e.subarray(2,6);if(r===w&&l===A&&t===j&&s===C)return}const{style:c}=this.container;let u;if(this.#t){const{borderColor:w,borderWidth:A}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const h=r-t,m=l-s,{svgFactory:p}=this,x=p.createElement("svg");x.classList.add("quadrilateralsContainer"),x.setAttribute("width",0),x.setAttribute("height",0),x.role="none";const y=p.createElement("defs");x.append(y);const v=p.createElement("clipPath"),N=`clippath_${this.data.id}`;v.setAttribute("id",N),v.setAttribute("clipPathUnits","objectBoundingBox"),y.append(v);for(let w=2,A=e.length;w<A;w+=8){const j=e[w],C=e[w+1],S=e[w+2],T=e[w+3],R=p.createElement("rect"),O=(S-t)/h,H=(l-C)/m,V=(j-S)/h,L=(C-T)/m;R.setAttribute("x",O),R.setAttribute("y",H),R.setAttribute("width",V),R.setAttribute("height",L),v.append(R),u?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${H}" width="${V}" height="${L}"/>`)}this.#t&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(x),this.container.style.clipPath=`url(#${N})`}_createPopup(){const{data:e}=this,t=this.#s=new ap({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:l,id:c,exportValues:u}of r){if(l===-1||c===t)continue;const h=typeof u=="string"?u:null,m=document.querySelector(`[data-element-id="${c}"]`);if(m&&!$i.has(m)){Ve(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:m})}return s}for(const r of document.getElementsByName(e)){const{exportValue:l}=r,c=r.getAttribute("data-element-id");c!==t&&$i.has(r)&&s.push({id:c,exportValue:l,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class I1 extends Vt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(this.#t(s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(this.#s(s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,s=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,s),!1),this.#e()}#s(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const l=s.get(r);l&&(e[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:r,refs:l,include:c}=t,u=[];if(r.length!==0||l.length!==0){const p=new Set(l);for(const x of r){const y=this._fieldObjects[x]||[];for(const{id:v}of y)p.add(v)}for(const x of Object.values(this._fieldObjects))for(const y of x)p.has(y.id)===c&&u.push(y)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,m=[];for(const p of u){const{id:x}=p;switch(m.push(x),p.type){case"text":{const v=p.defaultValue||"";h.setValue(x,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(x,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(x,{value:v});break}default:continue}const y=document.querySelector(`[data-element-id="${x}"]`);if(y){if(!$i.has(y)){Ve(`_bindResetFormAction - element not allowed: ${x}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}}),!1}}}class kD extends Vt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Yi extends Vt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return gs.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,l){s.includes("mouse")?e.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(s,c=>{if(s==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c)}})})}_setEventListeners(e,t,s,r){for(const[l,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,l,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Me.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||RD,l=e.style;let c;const u=2,h=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(m/(cm*r))||1,x=m/p;c=Math.min(r,h(x/cm))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,h(m/cm))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=Me.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class MD extends Yi{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const l=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=s),l.setValue(c.id,{[r]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=e.getValue(t,{value:this.data.fieldValue});let l=r.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),$i.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const m=this.data.dateFormat||this.data.timeFormat;m&&(s.title=m),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(s,"value",x.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",x=>{const y=this.data.defaultFieldValue??"";s.value=h.userValue=y,h.formattedValue=null});let p=x=>{const{formattedValue:y}=h;y!=null&&(x.target.value=y),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",y=>{if(h.focused)return;const{target:v}=y;h.userValue&&(v.value=h.userValue),h.lastCommittedValue=v.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",y=>{this.showElementAndHideCanvas(y.target);const v={value(N){h.userValue=N.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),N.target.value=h.userValue},formattedValue(N){const{formattedValue:w}=N.detail;h.formattedValue=w,w!=null&&N.target!==document.activeElement&&(N.target.value=w),e.setValue(t,{formattedValue:w})},selRange(N){N.target.setSelectionRange(...N.detail.selRange)},charLimit:N=>{const{charLimit:w}=N.detail,{target:A}=N;if(w===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",w);let j=h.userValue;!j||j.length<=w||(j=j.slice(0,w),A.value=h.userValue=j,e.setValue(t,{value:j}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(v,y)}),s.addEventListener("keydown",y=>{h.commitKey=1;let v=-1;if(y.key==="Escape"?v=0:y.key==="Enter"&&!this.data.multiLine?v=2:y.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:N}=y.target;h.lastCommittedValue!==N&&(h.lastCommittedValue=N,h.userValue=N,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:v,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}))});const x=p;p=null,s.addEventListener("blur",y=>{if(!h.focused||!y.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{value:v}=y.target;h.userValue=v,h.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:y.target.selectionStart,selEnd:y.target.selectionEnd}}),x(y)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",y=>{h.lastCommittedValue=null;const{data:v,target:N}=y,{value:w,selectionStart:A,selectionEnd:j}=N;let C=A,S=j;switch(y.inputType){case"deleteWordBackward":{const T=w.substring(0,A).match(/\w*[^\w]*$/);T&&(C-=T[0].length);break}case"deleteWordForward":{const T=w.substring(A).match(/^[^\w]*\w*/);T&&(S+=T[0].length);break}case"deleteContentBackward":A===j&&(C-=1);break;case"deleteContentForward":A===j&&(S+=1);break}y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:v||"",willCommit:!1,selStart:C,selEnd:S}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],y=>y.target.value)}if(p&&s.addEventListener("blur",p),this.data.comb){const y=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${y}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class LD extends Yi{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class OD extends Yi{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return $i.add(l),l.setAttribute("data-element-id",s),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=t.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",t.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const m of this._getElementsByName(u,s)){const p=h&&m.exportValue===t.exportValue;m.domElement&&(m.domElement.checked=p),e.setValue(m.id,{value:p})}e.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class B1 extends Yi{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const c of this._getElementsByName(t.fieldName,s))e.setValue(c.id,{value:!1});const l=document.createElement("input");if($i.add(l),l.setAttribute("data-element-id",s),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=t.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const m of this._getElementsByName(u,s))e.setValue(m.id,{value:!1});e.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:m=>{const p=c===m.detail.value;for(const x of this._getElementsByName(m.target.name)){const y=p&&x.id===s;x.domElement&&(x.domElement.checked=y),e.setValue(x.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class PD extends I1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class ID extends Yi{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");$i.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const x=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===x});for(const p of this.data.options){const x=document.createElement("option");x.textContent=p.displayValue,x.value=p.exportValue,s.value.includes(p.exportValue)&&(x.setAttribute("selected",!0),l=!1),r.append(x)}let c=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),c=()=>{p.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=p=>{const x=p?"value":"textContent",{options:y,multiple:v}=r;return v?Array.prototype.filter.call(y,N=>N.selected).map(N=>N[x]):y.selectedIndex===-1?null:y[y.selectedIndex][x]};let h=u(!1);const m=p=>{const x=p.target.options;return Array.prototype.map.call(x,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const x={value(y){c?.();const v=y.detail.value,N=new Set(Array.isArray(v)?v:[v]);for(const w of r.options)w.selected=N.has(w.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const v=r.options,N=y.detail.remove;v[N].selected=!1,r.remove(N),v.length>0&&Array.prototype.findIndex.call(v,A=>A.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:u(!0),items:m(y)}),h=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(y){const{index:v,displayValue:N,exportValue:w}=y.detail.insert,A=r.children[v],j=document.createElement("option");j.textContent=N,j.value=w,A?A.before(j):r.append(j),e.setValue(t,{value:u(!0),items:m(y)}),h=u(!1)},items(y){const{items:v}=y.detail;for(;r.length!==0;)r.remove(0);for(const N of v){const{displayValue:w,exportValue:A}=N,j=document.createElement("option");j.textContent=w,j.value=A,r.append(j)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:m(y)}),h=u(!1)},indices(y){const v=new Set(y.detail.indices);for(const N of y.target.options)N.selected=v.has(N.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(x,p)}),r.addEventListener("input",p=>{const x=u(!0),y=u(!1);e.setValue(t,{value:x}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:y,changeEx:x,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ap extends Vt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Vt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new BD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Pp}${r}`).join(",")),this.container}}class BD{#e=this.#_.bind(this);#t=this.#E.bind(this);#s=this.#C.bind(this);#n=this.#A.bind(this);#i=null;#a=null;#l=null;#r=null;#u=null;#o=null;#h=null;#d=!1;#f=null;#m=null;#p=null;#c=null;#g=null;#x=null;#y=!1;constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:l,contentsObj:c,richText:u,parent:h,rect:m,parentRect:p,open:x}){this.#a=e,this.#g=r,this.#l=c,this.#c=u,this.#o=h,this.#i=t,this.#p=m,this.#h=p,this.#u=s,this.#r=g1.toDateObject(l),this.trigger=s.flatMap(y=>y.getElementsToTriggerPopup());for(const y of this.trigger)y.addEventListener("click",this.#n),y.addEventListener("mouseenter",this.#s),y.addEventListener("mouseleave",this.#t),y.classList.add("popupTriggerArea");for(const y of s)y.container?.addEventListener("keydown",this.#e);this.#a.hidden=!0,x&&this.#A()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#i){const l=e.style.outlineColor=Me.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=this.#g,e.append(t),this.#r){const l=document.createElement("time");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),l.dateTime=this.#r.toISOString(),t.append(l)}const r=this.#v;if(r)P1.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(this.#l);e.append(l)}this.#a.append(e)}get#v(){const e=this.#c,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#c.html||null}get#w(){return this.#v?.attributes?.style?.fontSize||0}get#N(){return this.#v?.attributes?.style?.color||null}#S(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:this.#N,fontSize:this.#w?`calc(${this.#w}px * var(--total-scale-factor))`:""}};for(const l of e.split(`
`))t.push({name:"span",value:l,attributes:r});return s}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let l=0,c=r.length;l<c;++l){const u=r[l];s.append(document.createTextNode(u)),l<c-1&&s.append(document.createElement("br"))}return s}#_(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#A()}updateEdited({rect:e,popupContent:t}){this.#x||={contentsObj:this.#l,richText:this.#c},e&&(this.#m=null),t&&(this.#c=this.#S(t),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#x&&({contentsObj:this.#l,richText:this.#c}=this.#x,this.#x=null,this.#f?.remove(),this.#f=null,this.#m=null)}#T(){if(this.#m!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:l}}}=this.#o;let c=!!this.#h,u=c?this.#h:this.#p;for(const N of this.#u)if(!u||Me.intersect(N.data.rect,u)!==null){u=N.data.rect,c=!0;break}const h=Me.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=c?u[2]-u[0]+5:0,x=h[0]+p,y=h[1];this.#m=[100*(x-r)/t,100*(y-l)/s];const{style:v}=this.#a;v.left=`${this.#m[0]}%`,v.top=`${this.#m[1]}%`}#A(){this.#d=!this.#d,this.#d?(this.#C(),this.#a.addEventListener("click",this.#n),this.#a.addEventListener("keydown",this.#e)):(this.#E(),this.#a.removeEventListener("click",this.#n),this.#a.removeEventListener("keydown",this.#e))}#C(){this.#f||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#E(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#a.hidden=!0)}maybeShow(){this.#y&&(this.#f||this.#C(),this.#y=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class H1 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=$e.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class HD extends Vt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,r=this.svgFactory.create(t,s,!0),l=this.#e=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class zD extends Vt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,r=this.svgFactory.create(t,s,!0),l=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",t-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class FD extends Vt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,r=this.svgFactory.create(t,s,!0),l=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",t/2),c.setAttribute("cy",s/2),c.setAttribute("rx",t/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class z1 extends Vt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:r},width:l,height:c}=this;if(!t)return this.container;const u=this.svgFactory.create(l,c,!0);let h=[];for(let p=0,x=t.length;p<x;p+=2){const y=t[p]-e[0],v=e[3]-t[p+1];h.push(`${y},${v}`)}h=h.join(" ");const m=this.#e=this.svgFactory.createElement(this.svgElementName);return m.setAttribute("points",h),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class UD extends z1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $D extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Yp extends Vt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?$e.HIGHLIGHT:$e.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:c,width:u,height:h}=this.#s(t,e),m=this.svgFactory.create(u,h,!0),p=this.#e=this.svgFactory.createElement("svg:g");m.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let x=0,y=s.length;x<y;x++){const v=this.svgFactory.createElement(this.svgElementName);this.#t.push(v),v.setAttribute("points",s[x].join(",")),p.append(v)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:r}=e,l=this.#e;if(t>=0&&l.setAttribute("stroke-width",t||1),s)for(let c=0,u=this.#t.length;c<u;c++)this.#t[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:h}=this.#s(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class F1 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=$e.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class VD extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class GD extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class qD extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class U1 extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=$e.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class YD extends Vt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:r}=gs.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Wp{#e=null;#t=null;#s=new Map;#n=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:c,structTreeLayer:u}){this.div=e,this.#e=t,this.#t=s,this.#n=u||null,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#s.size>0}async#i(e,t,s){const r=e.firstChild||e,l=r.id=`${Pp}${t}`,c=await this.#n?.getAriaAttributes(l);if(c)for(const[u,h]of c)r.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,r,!1))}async render(e){const{annotations:t}=e,s=this.div;Ui(s,this.viewport);const r=new Map,l={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Yd,annotationStorage:e.annotationStorage||new Up,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const u=c.annotationType===Wt.POPUP;if(u){const p=r.get(c.id);if(!p)continue;l.elements=p}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const h=iv.create(l);if(!h.isRenderable)continue;if(!u&&c.popupRef){const p=r.get(c.popupRef);p?p.push(h):r.set(c.popupRef,[h])}const m=h.render();c.hidden&&(m.style.visibility="hidden"),await this.#i(m,c.id,l.elements),h._isEditable&&(this.#s.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#a()}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new Yd,parent:this};for(const r of e){r.borderStyle||=Wp._defaultBorderStyle,s.data=r;const l=iv.create(s);if(!l.isRenderable)continue;const c=l.render();await this.#i(c,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Ui(t,{rotation:e.rotation}),this.#a(),t.hidden=!1}#a(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const c=this.#s.get(t);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(e){return this.#s.get(e)}static get _defaultBorderStyle(){return st(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Br.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const gd=/\r\n?|\n/g;class es extends Le{#e;#t="";#s=`${this.id}-editor`;#n=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=es.prototype,t=l=>l.isEmpty(),s=ti.TRANSLATE_SMALL,r=ti.TRANSLATE_BIG;return st(this,"_keyboardManager",new Go([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";static _editorType=$e.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||es._defaultColor||Le._defaultLineColor,this.#i=e.fontSize||es._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Le.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case at.FREETEXT_SIZE:es._defaultFontSize=t;break;case at.FREETEXT_COLOR:es._defaultColor=t;break}}updateParams(e,t){switch(e){case at.FREETEXT_SIZE:this.#a(t);break;case at.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[at.FREETEXT_SIZE,es._defaultFontSize],[at.FREETEXT_COLOR,es._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[at.FREETEXT_SIZE,this.#i],[at.FREETEXT_COLOR,this.#e]]}#a(e){const t=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#u()},s=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=r=>{this.#e=this.editorDiv.style.color=r},s=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-es._internalPadding*e,-(es._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(es.#o(s)),t=s);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,c=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#r().trimEnd();if(e===t)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){es._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[m,p]=this.pageDimensions,[x,y]=this.pageTranslation;let v,N;switch(this.rotation){case 0:v=e+(c[0]-x)/m,N=t+this.height-(c[1]-y)/p;break;case 90:v=e+(c[0]-x)/m,N=t-(c[1]-y)/p,[u,h]=[h,-u];break;case 180:v=e-this.width+(c[0]-x)/m,N=t-(c[1]-y)/p,[u,h]=[-u,-h];break;case 270:v=e+(c[0]-x-this.height*p)/m,N=t+(c[1]-y-this.width*m)/p,[u,h]=[-h,u];break}this.setAt(v*r,N*l,u,h)}else this._moveAfterPaste(e,t);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(gd,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=es.#f(t.getData("text")||"").replaceAll(gd,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=c,m=[],p=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(gd,"")),v!==this.editorDiv){let N=m;for(const w of this.editorDiv.childNodes){if(w===v){N=p;continue}N.push(es.#o(w))}}m.push(u.nodeValue.slice(0,h).replaceAll(gd,""))}else if(u===this.editorDiv){let v=m,N=0;for(const w of this.editorDiv.childNodes)N++===h&&(v=p),v.push(es.#o(w))}this.#t=`${m.join(`
`)}${r}${p.join(`
`)}`,this.#h();const x=new Range;let y=Math.sumPrecise(m.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const N=v.nodeValue.length;if(y<=N){x.setStart(v,y),x.setEnd(v,y);break}y-=N}l.removeAllRanges(),l.addRange(x)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll(""," ")}static#f(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,s){let r=null;if(e instanceof H1){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:m,id:p,popupRef:x},textContent:y,textPosition:v,parent:{page:{pageNumber:N}}}=e;if(!y||y.length===0)return null;r=e={annotationType:$e.FREETEXT,color:Array.from(u),fontSize:c,value:y.join(`
`),position:v,pageIndex:N-1,rect:h.slice(0),rotation:m,annotationElementId:p,id:p,deleted:!1,popupRef:x}}const l=await super.deserialize(e,t,s);return l.#i=e.fontSize,l.#e=Me.makeHexColor(...e.color),l.#t=es.#f(e.value),l._initialData=r,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=es._internalPadding*this.parentScale,s=this.getRect(t,t),r=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),l={annotationType:$e.FREETEXT,color:r,fontSize:this.#i,value:this.#d(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.isCopy=!0,l):this.annotationElementId&&!this.#m(l)?null:(l.id=this.annotationElementId,l)}#m(e){const{value:t,fontSize:s,color:r,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((c,u)=>c!==r[u])||e.pageIndex!==l}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:s}=t;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.#e,t.replaceChildren();for(const l of this.#t.split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),t.append(c)}const r=es._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ce{static PRECISION=1e-4;toSVGPath(){Nt("Abstract method `toSVGPath` must be implemented.")}get box(){Nt("Abstract getter `box` must be implemented.")}serialize(e,t){Nt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,l,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u]*r,c[u+1]=s+e[u+1]*l;return c}static _rescaleAndSwap(e,t,s,r,l,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u+1]*r,c[u+1]=s+e[u]*l;return c}static _translate(e,t,s,r){r||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)r[l]=t+e[l],r[l+1]=s+e[l+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,l){switch(l){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,l,c){return[(e+5*s)/6,(t+5*r)/6,(5*s+l)/6,(5*r+c)/6,(s+l)/2,(r+c)/2]}}class ki{#e;#t=[];#s;#n;#i=[];#a=new Float32Array(18);#l;#r;#u;#o;#h;#d;#f=[];static#m=8;static#p=2;static#c=ki.#m+ki.#p;constructor({x:e,y:t},s,r,l,c,u=0){this.#e=s,this.#d=l*r,this.#n=c,this.#a.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=u,this.#o=ki.#m*r,this.#u=ki.#c*r,this.#h=r,this.#f.push(e,t)}isEmpty(){return isNaN(this.#a[8])}#g(){const e=this.#a.subarray(4,6),t=this.#a.subarray(16,18),[s,r,l,c]=this.#e;return[(this.#l+(e[0]-t[0])/2-s)/l,(this.#r+(e[1]-t[1])/2-r)/c,(this.#l+(t[0]-e[0])/2-s)/l,(this.#r+(t[1]-e[1])/2-r)/c]}add({x:e,y:t}){this.#l=e,this.#r=t;const[s,r,l,c]=this.#e;let[u,h,m,p]=this.#a.subarray(8,12);const x=e-m,y=t-p,v=Math.hypot(x,y);if(v<this.#u)return!1;const N=v-this.#o,w=N/v,A=w*x,j=w*y;let C=u,S=h;u=m,h=p,m+=A,p+=j,this.#f?.push(e,t);const T=-j/N,R=A/N,O=T*this.#d,H=R*this.#d;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([m+O,p+H],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([m-O,p-H],16),isNaN(this.#a[6])?(this.#i.length===0&&(this.#a.set([u+O,h+H],2),this.#i.push(NaN,NaN,NaN,NaN,(u+O-s)/l,(h+H-r)/c),this.#a.set([u-O,h-H],14),this.#t.push(NaN,NaN,NaN,NaN,(u-O-s)/l,(h-H-r)/c)),this.#a.set([C,S,u,h,m,p],6),!this.isEmpty()):(this.#a.set([C,S,u,h,m,p],6),Math.abs(Math.atan2(S-h,C-u)-Math.atan2(j,A))<Math.PI/2?([u,h,m,p]=this.#a.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((u+m)/2-s)/l,((h+p)/2-r)/c),[u,h,C,S]=this.#a.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((C+u)/2-s)/l,((S+h)/2-r)/c),!0):([C,S,u,h,m,p]=this.#a.subarray(0,6),this.#i.push(((C+5*u)/6-s)/l,((S+5*h)/6-r)/c,((5*u+m)/6-s)/l,((5*h+p)/6-r)/c,((u+m)/2-s)/l,((h+p)/2-r)/c),[m,p,u,h,C,S]=this.#a.subarray(12,18),this.#t.push(((C+5*u)/6-s)/l,((S+5*h)/6-r)/c,((5*u+m)/6-s)/l,((5*h+p)/6-r)/c,((u+m)/2-s)/l,((h+p)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#x();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#v(s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return this.#y(s),s.join(" ")}#x(){const[e,t,s,r]=this.#e,[l,c,u,h]=this.#g();return`M${(this.#a[2]-e)/s} ${(this.#a[3]-t)/r} L${(this.#a[4]-e)/s} ${(this.#a[5]-t)/r} L${l} ${c} L${u} ${h} L${(this.#a[16]-e)/s} ${(this.#a[17]-t)/r} L${(this.#a[14]-e)/s} ${(this.#a[15]-t)/r} Z`}#y(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,s,r,l]=this.#e,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,m,p,x]=this.#g();e.push(`L${(c[0]-t)/r} ${(c[1]-s)/l} L${h} ${m} L${p} ${x} L${(u[0]-t)/r} ${(u[1]-s)/l}`)}newFreeDrawOutline(e,t,s,r,l,c){return new $1(e,t,s,r,l,c)}getOutlines(){const e=this.#i,t=this.#t,s=this.#a,[r,l,c,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let x=0,y=h.length-2;x<y;x+=2)h[x]=(this.#f[x]-r)/c,h[x+1]=(this.#f[x+1]-l)/u;if(h[h.length-2]=(this.#l-r)/c,h[h.length-1]=(this.#r-l)/u,isNaN(s[6])&&!this.isEmpty())return this.#w(h);const m=new Float32Array(this.#i.length+24+this.#t.length);let p=e.length;for(let x=0;x<p;x+=2){if(isNaN(e[x])){m[x]=m[x+1]=NaN;continue}m[x]=e[x],m[x+1]=e[x+1]}p=this.#S(m,p);for(let x=t.length-6;x>=6;x-=6)for(let y=0;y<6;y+=2){if(isNaN(t[x+y])){m[p]=m[p+1]=NaN,p+=2;continue}m[p]=t[x+y],m[p+1]=t[x+y+1],p+=2}return this.#N(m,p),this.newFreeDrawOutline(m,h,this.#e,this.#h,this.#s,this.#n)}#w(e){const t=this.#a,[s,r,l,c]=this.#e,[u,h,m,p]=this.#g(),x=new Float32Array(36);return x.set([NaN,NaN,NaN,NaN,(t[2]-s)/l,(t[3]-r)/c,NaN,NaN,NaN,NaN,(t[4]-s)/l,(t[5]-r)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,(t[16]-s)/l,(t[17]-r)/c,NaN,NaN,NaN,NaN,(t[14]-s)/l,(t[15]-r)/c],0),this.newFreeDrawOutline(x,e,this.#e,this.#h,this.#s,this.#n)}#N(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#S(e,t){const s=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[l,c,u,h]=this.#e,[m,p,x,y]=this.#g();return e.set([NaN,NaN,NaN,NaN,(s[0]-l)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,x,y,NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-c)/h],t),t+=24}}class $1 extends Ce{#e;#t=new Float32Array(4);#s;#n;#i;#a;#l;constructor(e,t,s,r,l,c){super(),this.#l=e,this.#i=t,this.#e=s,this.#a=r,this.#s=l,this.#n=c,this.lastPoint=[NaN,NaN],this.#r(c);const[u,h,m,p]=this.#t;for(let x=0,y=e.length;x<y;x+=2)e[x]=(e[x]-u)/m,e[x+1]=(e[x+1]-h)/p;for(let x=0,y=t.length;x<y;x+=2)t[x]=(t[x]-u)/m,t[x+1]=(t[x+1]-h)/p}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,s=this.#l.length;t<s;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,r],l){const c=s-e,u=r-t;let h,m;switch(l){case 0:h=Ce._rescale(this.#l,e,r,c,-u),m=Ce._rescale(this.#i,e,r,c,-u);break;case 90:h=Ce._rescaleAndSwap(this.#l,e,t,c,u),m=Ce._rescaleAndSwap(this.#i,e,t,c,u);break;case 180:h=Ce._rescale(this.#l,s,t,-c,u),m=Ce._rescale(this.#i,s,t,-c,u);break;case 270:h=Ce._rescaleAndSwap(this.#l,s,r,-c,-u),m=Ce._rescaleAndSwap(this.#i,s,r,-c,-u);break}return{outline:Array.from(h),points:[Array.from(m)]}}#r(e){const t=this.#l;let s=t[4],r=t[5];const l=[s,r,s,r];let c=s,u=r;const h=e?Math.max:Math.min;for(let p=6,x=t.length;p<x;p+=6){const y=t[p+4],v=t[p+5];if(isNaN(t[p]))Me.pointBoundingBox(y,v,l),u<v?(c=y,u=v):u===v&&(c=h(c,y));else{const N=[1/0,1/0,-1/0,-1/0];Me.bezierBoundingBox(s,r,...t.slice(p,p+6),N),Me.rectBoundingBox(...N,l),u<N[3]?(c=N[2],u=N[3]):u===N[3]&&(c=h(c,N[2]))}s=y,r=v}const m=this.#t;m[0]=l[0]-this.#s,m[1]=l[1]-this.#s,m[2]=l[2]-l[0]+2*this.#s,m[3]=l[3]-l[1]+2*this.#s,this.lastPoint=[c,u]}get box(){return this.#t}newOutliner(e,t,s,r,l,c=0){return new ki(e,t,s,r,l,c)}getNewOutline(e,t){const[s,r,l,c]=this.#t,[u,h,m,p]=this.#e,x=l*m,y=c*p,v=s*m+u,N=r*p+h,w=this.newOutliner({x:this.#i[0]*x+v,y:this.#i[1]*y+N},this.#e,this.#a,e,this.#n,t??this.#s);for(let A=2;A<this.#i.length;A+=2)w.add({x:this.#i[A]*x+v,y:this.#i[A+1]*y+N});return w.getOutlines()}}class ip{#e;#t;#s=[];#n=[];constructor(e,t=0,s=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:v,y:N,width:w,height:A}of e){const j=Math.floor((v-t)/c)*c,C=Math.ceil((v+w+t)/c)*c,S=Math.floor((N-t)/c)*c,T=Math.ceil((N+A+t)/c)*c,R=[j,S,T,!0],O=[C,S,T,!1];this.#s.push(R,O),Me.rectBoundingBox(j,S,C,T,l)}const u=l[2]-l[0]+2*s,h=l[3]-l[1]+2*s,m=l[0]-s,p=l[1]-s,x=this.#s.at(r?-1:-2),y=[x[0],x[2]];for(const v of this.#s){const[N,w,A]=v;v[0]=(N-m)/u,v[1]=(w-p)/h,v[2]=(A-p)/h}this.#e=new Float32Array([m,p,u,h]),this.#t=y}getOutlines(){this.#s.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#s)t[3]?(e.push(...this.#u(t)),this.#l(t)):(this.#r(t),e.push(...this.#u(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const c of e){const[u,h,m]=c;t.push([u,h,c],[u,m,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const h=t[c][2],m=t[c+1][2];h.push(m),m.push(h),s.add(h),s.add(m)}const r=[];let l;for(;s.size>0;){const c=s.values().next().value;let[u,h,m,p,x]=c;s.delete(c);let y=u,v=h;for(l=[u,m],r.push(l);;){let N;if(s.has(p))N=p;else if(s.has(x))N=x;else break;s.delete(N),[u,h,m,p,x]=N,y!==u&&(l.push(y,v,u,v===h?h:m),y=u),v=v===h?m:h}l.push(y,v)}return new WD(r,this.#e,this.#t)}#a(e){const t=this.#n;let s=0,r=t.length-1;for(;s<=r;){const l=s+r>>1,c=t[l][0];if(c===e)return l;c<e?s=l+1:r=l-1}return r+1}#l([,e,t]){const s=this.#a(e);this.#n.splice(s,0,[e,t])}#r([,e,t]){const s=this.#a(e);for(let r=s;r<this.#n.length;r++){const[l,c]=this.#n[r];if(l!==e)break;if(l===e&&c===t){this.#n.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,c]=this.#n[r];if(l!==e)break;if(l===e&&c===t){this.#n.splice(r,1);return}}}#u(e){const[t,s,r]=e,l=[[t,s,r]],c=this.#a(r);for(let u=0;u<c;u++){const[h,m]=this.#n[u];for(let p=0,x=l.length;p<x;p++){const[,y,v]=l[p];if(!(m<=y||v<=h)){if(y>=h){if(v>m)l[p][1]=m;else{if(x===1)return[];l.splice(p,1),p--,x--}continue}l[p][2]=h,v>m&&l.push([t,m,v])}}}return l}}class WD extends Ce{#e;#t;constructor(e,t,s){super(),this.#t=e,this.#e=t,this.lastPoint=s}toSVGPath(){const e=[];for(const t of this.#t){let[s,r]=t;e.push(`M${s} ${r}`);for(let l=2;l<t.length;l+=2){const c=t[l],u=t[l+1];c===s?(e.push(`V${u}`),r=u):u===r&&(e.push(`H${c}`),s=c)}e.push("Z")}return e.join(" ")}serialize([e,t,s,r],l){const c=[],u=s-e,h=r-t;for(const m of this.#t){const p=new Array(m.length);for(let x=0;x<m.length;x+=2)p[x]=e+m[x]*u,p[x+1]=r-m[x+1]*h;c.push(p)}return c}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class rp extends ki{newFreeDrawOutline(e,t,s,r,l,c){return new XD(e,t,s,r,l,c)}}class XD extends $1{newOutliner(e,t,s,r,l,c=0){return new rp(e,t,s,r,l,c)}}class gn{#e=null;#t=null;#s;#n=null;#i=!1;#a=!1;#l=null;#r;#u=null;#o=null;#h;static#d=null;static get _keyboardManager(){return st(this,"_keyboardManager",new Go([[["Escape","mac+Escape"],gn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],gn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],gn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],gn.prototype._moveToPrevious],[["Home","mac+Home"],gn.prototype._moveToBeginning],[["End","mac+End"],gn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#a=!1,this.#h=at.HIGHLIGHT_COLOR,this.#l=e):(this.#a=!0,this.#h=at.HIGHLIGHT_DEFAULT_COLOR),this.#o=e?._uiManager||t,this.#r=this.#o._eventBus,this.#s=e?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",gn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#l&&(e.ariaControls=`${this.#l.id}_colorpicker_dropdown`);const t=this.#o._signal;e.addEventListener("click",this.#c.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#f();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#f(){const e=document.createElement("div"),t=this.#o._signal;e.addEventListener("contextmenu",_n,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#l&&(e.id=`${this.#l.id}_colorpicker_dropdown`);for(const[s,r]of this.#o.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",gn.#d[s]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=r,l.ariaSelected=r===this.#s,l.addEventListener("click",this.#m.bind(this,r),{signal:t}),e.append(l)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#m(e,t){t.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#c(e);return}const t=e.target.getAttribute("data-color");t&&this.#m(t,e)}_moveToNext(e){if(!this.#x){this.#c(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#x&&this._hideDropdownFromKeyboard();return}this.#x||this.#c(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#x){this.#c(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#x){this.#c(e);return}this.#n.lastChild?.focus()}#p(e){gn._keyboardManager.exec(this,e)}#c(e){if(this.#x){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#o.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#f();this.#e.append(t)}#g(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#x(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#x){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#o.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Ut extends Le{#e=null;#t=0;#s;#n=null;#i=null;#a=null;#l=null;#r=0;#u=null;#o=null;#h=null;#d=!1;#f=null;#m;#p=null;#c="";#g;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=$e.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ut.prototype;return st(this,"_keyboardManager",new Go([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ut._defaultColor,this.#g=e.thickness||Ut._defaultThickness,this.#m=e.opacity||Ut._defaultOpacity,this.#s=e.boxes||null,this.#x=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#T()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#r=e.focusOffset,this.#y(),this.#T(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#y(){const e=new ip(this.#s,.001);this.#o=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const t=new ip(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#a=t.getOutlines();const{lastPoint:s}=this.#a;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#o=e;const r=1.5;if(this.#a=e.getNewOutline(this.#g/2+r,.0025),t>=0)this.#h=t,this.#n=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Ut.#A(this.#o.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Ut.#A(this.#a.box,p),path:{d:this.#a.toSVGPath()}})}const[l,c,u,h]=e.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=u,this.height=h;break;case 90:{const[p,x]=this.parentDimensions;this.x=c,this.y=1-l,this.width=u*x/p,this.height=h*p/x;break}case 180:this.x=1-l,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[p,x]=this.parentDimensions;this.x=1-c,this.y=l,this.width=u*x/p,this.height=h*p/x;break}}const{lastPoint:m}=this.#a;this.#f=[(m[0]-l)/u,(m[1]-c)/h]}static initialize(e,t){Le.initialize(e,t),Ut._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case at.HIGHLIGHT_DEFAULT_COLOR:Ut._defaultColor=t;break;case at.HIGHLIGHT_THICKNESS:Ut._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case at.HIGHLIGHT_COLOR:this.#w(t);break;case at.HIGHLIGHT_THICKNESS:this.#N(t);break}}static get defaultPropertiesToUpdate(){return[[at.HIGHLIGHT_DEFAULT_COLOR,Ut._defaultColor],[at.HIGHLIGHT_THICKNESS,Ut._defaultThickness]]}get propertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,this.color||Ut._defaultColor],[at.HIGHLIGHT_THICKNESS,this.#g||Ut._defaultThickness],[at.HIGHLIGHT_FREE,this.#d]]}#w(e){const t=(l,c)=>{this.color=l,this.#m=c,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:l,"fill-opacity":c}}),this.#i?.updateColor(l)},s=this.color,r=this.#m;this.addCommands({cmd:t.bind(this,e,Ut._defaultOpacity),undo:t.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#N(e){const t=this.#g,s=r=>{this.#g=r,this.#S(r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new gn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#R())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#_():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#S(e){if(!this.#d)return;this.#v({highlightOutlines:this.#o.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,s]=this.parentDimensions;this.setDims(this.width*t,this.height*s)}#_(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#d},path:{d:this.#o.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#A([e,t,s,r],l){switch(l){case 90:return[1-t-r,e,r,s];case 180:return[1-e-s,1-t-r,s,r];case 270:return[t,1-e-s,r,s]}return[e,t,s,r]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#d?(e=(e-this.rotation+360)%360,s=Ut.#A(this.#o.box,e)):s=Ut.#A([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:Ut.#A(this.#a.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n;const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),x1(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#C(e){Ut._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#E(!0);break;case 1:case 3:this.#E(!1);break}}#E(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#r)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#E(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#R(){return this.#d?this.rotation:0}#k(){if(this.#d)return null;const[e,t]=this.pageDimensions,[s,r]=this.pageTranslation,l=this.#s,c=new Float32Array(l.length*8);let u=0;for(const{x:h,y:m,width:p,height:x}of l){const y=h*e+s,v=(1-m)*t+r;c[u]=c[u+4]=y,c[u+1]=c[u+3]=v,c[u+2]=c[u+6]=y+p*e,c[u+5]=c[u+7]=v-x*t,u+=8}return c}#M(e){return this.#o.serialize(e,this.#R())}static startHighlighting(e,t,{target:s,x:r,y:l}){const{x:c,y:u,width:h,height:m}=s.getBoundingClientRect(),p=new AbortController,x=e.combinedSignal(p),y=v=>{p.abort(),this.#j(e,v)};window.addEventListener("blur",y,{signal:x}),window.addEventListener("pointerup",y,{signal:x}),window.addEventListener("pointerdown",Xt,{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",_n,{signal:x}),s.addEventListener("pointermove",this.#z.bind(this,e),{signal:x}),this._freeHighlight=new rp({x:r,y:l},[c,u,h,m],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#z(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let r=null;if(e instanceof F1){const{data:{quadPoints:N,rect:w,rotation:A,id:j,color:C,opacity:S,popupRef:T},parent:{page:{pageNumber:R}}}=e;r=e={annotationType:$e.HIGHLIGHT,color:Array.from(C),opacity:S,quadPoints:N,boxes:null,pageIndex:R-1,rect:w.slice(0),rotation:A,annotationElementId:j,id:j,deleted:!1,popupRef:T}}else if(e instanceof Yp){const{data:{inkLists:N,rect:w,rotation:A,id:j,color:C,borderStyle:{rawWidth:S},popupRef:T},parent:{page:{pageNumber:R}}}=e;r=e={annotationType:$e.HIGHLIGHT,color:Array.from(C),thickness:S,inkLists:N,boxes:null,pageIndex:R-1,rect:w.slice(0),rotation:A,annotationElementId:j,id:j,deleted:!1,popupRef:T}}const{color:l,quadPoints:c,inkLists:u,opacity:h}=e,m=await super.deserialize(e,t,s);m.color=Me.makeHexColor(...l),m.#m=h||1,u&&(m.#g=e.thickness),m._initialData=r;const[p,x]=m.pageDimensions,[y,v]=m.pageTranslation;if(c){const N=m.#s=[];for(let w=0;w<c.length;w+=8)N.push({x:(c[w]-y)/p,y:1-(c[w+1]-v)/x,width:(c[w+2]-c[w])/p,height:(c[w+1]-c[w+5])/x});m.#y(),m.#T(),m.rotate(m.rotation)}else if(u){m.#d=!0;const N=u[0],w={x:N[0]-y,y:x-(N[1]-v)},A=new rp(w,[0,0,p,x],1,m.#g/2,!0,.001);for(let S=0,T=N.length;S<T;S+=2)w.x=N[S]-y,w.y=x-(N[S+1]-v),A.add(w);const{id:j,clipPathId:C}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);m.#v({highlightOutlines:A.getOutlines(),highlightId:j,clipPathId:C}),m.#T(),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),s=Le._colorManager.convert(this.color),r={annotationType:$e.HIGHLIGHT,color:s,opacity:this.#m,thickness:this.#g,quadPoints:this.#k(),outlines:this.#M(t),pageIndex:this.pageIndex,rect:t,rotation:this.#R(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(r)?null:(r.id=this.annotationElementId,r)}#b(e){const{color:t}=this._initialData;return e.color.some((s,r)=>s!==t[r])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class V1{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Nt("Not implemented")}}class He extends Le{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#i=null;static#a=NaN;static#l=null;static#r=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#o(e),this.#f())}#o({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#c(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(He._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[r,l]of Object.entries(t))s.has(r)?Object.assign(e[r],l):e[r]=l;return e}static getDefaultDrawingOptions(e){Nt("Not implemented")}static get typesMap(){Nt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(He.#s.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,t[r]]);return e}_updateProperty(e,t,s){const r=this._drawingOptions,l=r[t],c=u=>{r.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#c(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#m([e,t,s,r]){const{parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[t,1-e,s*(c/l),r*(l/c)];case 180:return[1-e,1-t,s,r];case 270:return[1-t,e,s*(c/l),r*(l/c)];default:return[e,t,s,r]}}#p(){const{x:e,y:t,width:s,height:r,parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[1-t,e,s*(l/c),r*(c/l)];case 180:return[1-e,1-t,s,r];case 270:return[t,1-e,s*(l/c),r*(c/l)];default:return[e,t,s,r]}}#c(e){if([this.x,this.y,this.width,this.height]=this.#m(e),this.div){this.fixAndSetPosition();const[t,s]=this.parentDimensions;this.setDims(this.width*t,this.height*s)}this._onResized()}#g(){const{x:e,y:t,width:s,height:r,rotation:l,parentRotation:c,parentDimensions:[u,h]}=this;switch((l*4+c)/90){case 1:return[1-t-r,e,r,s];case 2:return[1-e-s,1-t-r,s,r];case 3:return[t,1-e-s,r,s];case 4:return[e,t-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-t,e,s*(u/h),r*(h/u)];case 6:return[1-e-r*(h/u),1-t,r*(h/u),s*(u/h)];case 7:return[t-s*(u/h),1-e-r*(h/u),s*(u/h),r*(h/u)];case 8:return[e-s,t-r,s,r];case 9:return[1-t,e-s,r,s];case 10:return[1-e,1-t,s,r];case 11:return[t-r,1-e,r,s];case 12:return[e-r*(h/u),t,r*(h/u),s*(u/h)];case 13:return[1-t-s*(u/h),e-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-e,1-t-s*(u/h),r*(h/u),s*(u/h)];case 15:return[t,1-e,s*(u/h),r*(h/u)];default:return[e,t,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,He._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[l,c]=this.parentDimensions;return this.setDims(this.width*l,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,r,l){Nt("Not implemented")}static startDrawing(e,t,s,r){const{target:l,offsetX:c,offsetY:u,pointerId:h,pointerType:m}=r;if(He.#l&&He.#l!==m)return;const{viewport:{rotation:p}}=e,{width:x,height:y}=l.getBoundingClientRect(),v=He.#n=new AbortController,N=e.combinedSignal(v);if(He.#a||=h,He.#l??=m,window.addEventListener("pointerup",w=>{He.#a===w.pointerId?this._endDraw(w):He.#r?.delete(w.pointerId)},{signal:N}),window.addEventListener("pointercancel",w=>{He.#a===w.pointerId?this._currentParent.endDrawingSession():He.#r?.delete(w.pointerId)},{signal:N}),window.addEventListener("pointerdown",w=>{He.#l===w.pointerType&&((He.#r||=new Set).add(w.pointerId),He.#s.isCancellable()&&(He.#s.removeLastElement(),He.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:N}),window.addEventListener("contextmenu",_n,{signal:N}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:N}),l.addEventListener("touchmove",w=>{w.timeStamp===He.#u&&Xt(w)},{signal:N}),e.toggleDrawing(),t._editorUndoBar?.hide(),He.#s){e.drawLayer.updateProperties(this._currentDrawId,He.#s.startNew(c,u,x,y,p));return}t.updateUIForDefaultProperties(this),He.#s=this.createDrawerInstance(c,u,x,y,p),He.#i=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(He.#i.toSVGProperties(),He.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(He.#u=-1,!He.#s)return;const{offsetX:t,offsetY:s,pointerId:r}=e;if(He.#a===r){if(He.#r?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,He.#s.add(t,s)),He.#u=e.timeStamp,Xt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,He.#s=null,He.#i=null,He.#l=null,He.#u=NaN),He.#n&&(He.#n.abort(),He.#n=null,He.#a=NaN,He.#r=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,He.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=He.#s,r=this._currentDrawId,l=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{t.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:at.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(at.DRAW_STEP),!He.#s.isEmpty()){const{pageDimensions:[s,r],scale:l}=t,c=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:He.#s.getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:He.#i,mustBeCommitted:!e});return this._cleanup(!0),c}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,r,l,c){Nt("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:u}}=t.viewport,h=this.deserializeDraw(c,u,r,l,this._INNER_MARGIN,e),m=await super.deserialize(e,t,s);return m.createDrawingOptions(e),m.#o({drawOutlines:h}),m.#f(),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[t,s]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#e.serialize([t,s,r,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class QD{#e=new Float64Array(6);#t;#s;#n;#i;#a;#l="";#r=0;#u=new Yo;#o;#h;constructor(e,t,s,r,l,c){this.#o=s,this.#h=r,this.#n=l,this.#i=c,[e,t]=this.#d(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t],this.#s=[{line:u,points:this.#a}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#i=t)}#d(e,t){return Ce._normalizePoint(e,t,this.#o,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#a.length<=10}add(e,t){[e,t]=this.#d(e,t);const[s,r,l,c]=this.#e.subarray(2,6),u=e-l,h=t-c;return Math.hypot(this.#o*u,this.#h*h)<=2?null:(this.#a.push(e,t),isNaN(s)?(this.#e.set([l,c,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,r,l,c,e,t],0),this.#t.push(...Ce.createBezierPoints(s,r,l,c,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,l){this.#o=s,this.#h=r,this.#n=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t];const u=this.#s.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#s.push({line:c,points:this.#a}),this.#e.set(c,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#a=e.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#u.removeLastElement();this.#s.pop(),this.#l="";for(let e=0,t=this.#s.length;e<t;e++){const{line:s,points:r}=this.#s[e];this.#t=s,this.#a=r,this.#r=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const e=Ce.svgRound(this.#t[4]),t=Ce.svgRound(this.#t[5]);if(this.#a.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#a.length<=6){const r=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,r)} M ${e} ${t}`,this.#r=6}if(this.#a.length===4){const r=Ce.svgRound(this.#t[10]),l=Ce.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${r} ${l}`,this.#r=12,this.#l}const s=[];this.#r===0&&(s.push(`M ${e} ${t}`),this.#r=6);for(let r=this.#r,l=this.#t.length;r<l;r+=6){const[c,u,h,m,p,x]=this.#t.slice(r,r+6).map(Ce.svgRound);s.push(`C${c} ${u} ${h} ${m} ${p} ${x}`)}return this.#l+=s.join(" "),this.#r=this.#t.length,this.#l}getOutlines(e,t,s,r){const l=this.#s.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#u.build(this.#s,e,t,s,this.#n,this.#i,r),this.#e=null,this.#t=null,this.#s=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Yo extends Ce{#e;#t=0;#s;#n;#i;#a;#l;#r;#u;build(e,t,s,r,l,c,u){this.#i=t,this.#a=s,this.#l=r,this.#r=l,this.#u=c,this.#s=u??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Ce.svgRound(t[4])} ${Ce.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Ce.svgRound(t[10])} ${Ce.svgRound(t[11])}`);continue}for(let s=6,r=t.length;s<r;s+=6){const[l,c,u,h,m,p]=t.subarray(s,s+6).map(Ce.svgRound);e.push(`C${l} ${c} ${u} ${h} ${m} ${p}`)}}return e.join("")}serialize([e,t,s,r],l){const c=[],u=[],[h,m,p,x]=this.#h();let y,v,N,w,A,j,C,S,T;switch(this.#r){case 0:T=Ce._rescale,y=e,v=t+r,N=s,w=-r,A=e+h*s,j=t+(1-m-x)*r,C=e+(h+p)*s,S=t+(1-m)*r;break;case 90:T=Ce._rescaleAndSwap,y=e,v=t,N=s,w=r,A=e+m*s,j=t+h*r,C=e+(m+x)*s,S=t+(h+p)*r;break;case 180:T=Ce._rescale,y=e+s,v=t,N=-s,w=r,A=e+(1-h-p)*s,j=t+m*r,C=e+(1-h)*s,S=t+(m+x)*r;break;case 270:T=Ce._rescaleAndSwap,y=e+s,v=t+r,N=-s,w=-r,A=e+(1-m-x)*s,j=t+(1-h-p)*r,C=e+(1-m)*s,S=t+(1-h)*r;break}for(const{line:R,points:O}of this.#n)c.push(T(R,y,v,N,w,l?new Array(R.length):null)),u.push(T(O,y,v,N,w,l?new Array(O.length):null));return{lines:c,points:u,rect:[A,j,C,S]}}static deserialize(e,t,s,r,l,{paths:{lines:c,points:u},rotation:h,thickness:m}){const p=[];let x,y,v,N,w;switch(h){case 0:w=Ce._rescale,x=-e/s,y=t/r+1,v=1/s,N=-1/r;break;case 90:w=Ce._rescaleAndSwap,x=-t/r,y=-e/s,v=1/r,N=1/s;break;case 180:w=Ce._rescale,x=e/s+1,y=-t/r,v=-1/s,N=1/r;break;case 270:w=Ce._rescaleAndSwap,x=t/r+1,y=e/s+1,v=-1/r,N=-1/s;break}if(!c){c=[];for(const j of u){const C=j.length;if(C===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,j[0],j[1]]));continue}if(C===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,j[0],j[1],NaN,NaN,NaN,NaN,j[2],j[3]]));continue}const S=new Float32Array(3*(C-2));c.push(S);let[T,R,O,H]=j.subarray(0,4);S.set([NaN,NaN,NaN,NaN,T,R],0);for(let V=4;V<C;V+=2){const L=j[V],K=j[V+1];S.set(Ce.createBezierPoints(T,R,O,H,L,K),(V-2)*3),[T,R,O,H]=[O,H,L,K]}}}for(let j=0,C=c.length;j<C;j++)p.push({line:w(c[j].map(S=>S??NaN),x,y,v,N),points:w(u[j].map(S=>S??NaN),x,y,v,N)});const A=new this.prototype.constructor;return A.build(p,s,r,1,h,m,l),A}#o(e=this.#u){const t=this.#s+e/2*this.#l;return this.#r%180===0?[t/this.#i,t/this.#a]:[t/this.#a,t/this.#i]}#h(){const[e,t,s,r]=this.#e,[l,c]=this.#o(0);return[e+l,t+c,s-2*l,r-2*c]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)Me.pointBoundingBox(r[u],r[u+1],e);continue}let l=r[4],c=r[5];for(let u=6,h=r.length;u<h;u+=6){const[m,p,x,y,v,N]=r.subarray(u,u+6);Me.bezierBoundingBox(l,c,m,p,x,y,v,N,e),l=v,c=N}}const[t,s]=this.#o();e[0]=Ts(e[0]-t,0,1),e[1]=Ts(e[1]-s,0,1),e[2]=Ts(e[2]+t,0,1),e[3]=Ts(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#o();this.#u=e;const[r,l]=this.#o(),[c,u]=[r-t,l-s],h=this.#e;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([e,t],s){const[r,l]=this.#o();this.#i=e,this.#a=t,this.#l=s;const[c,u]=this.#o(),h=c-r,m=u-l,p=this.#e;return p[0]-=h,p[1]-=m,p[2]+=2*h,p[3]+=2*m,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ce.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,r=0,l=0,c=0,u=0,h=0;switch(this.#t){case 90:r=t/e,l=-e/t,u=e;break;case 180:s=-1,c=-1,u=e,h=t;break;case 270:r=-t/e,l=e/t,h=t;break;default:return""}return`matrix(${s} ${r} ${l} ${c} ${Ce.svgRound(u)} ${Ce.svgRound(h)})`}getPathResizingSVGProperties([e,t,s,r]){const[l,c]=this.#o(),[u,h,m,p]=this.#e;if(Math.abs(m-l)<=Ce.PRECISION||Math.abs(p-c)<=Ce.PRECISION){const w=e+s/2-(u+m/2),A=t+r/2-(h+p/2);return{path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${A})`}}}const x=(s-2*l)/(m-2*l),y=(r-2*c)/(p-2*c),v=m/s,N=p/r;return{path:{"transform-origin":`${Ce.svgRound(u)} ${Ce.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${N}) translate(${Ce.svgRound(l)} ${Ce.svgRound(c)}) scale(${x} ${y}) translate(${Ce.svgRound(-l)} ${Ce.svgRound(-c)})`}}}getPathResizedSVGProperties([e,t,s,r]){const[l,c]=this.#o(),u=this.#e,[h,m,p,x]=u;if(u[0]=e,u[1]=t,u[2]=s,u[3]=r,Math.abs(p-l)<=Ce.PRECISION||Math.abs(x-c)<=Ce.PRECISION){const A=e+s/2-(h+p/2),j=t+r/2-(m+x/2);for(const{line:C,points:S}of this.#n)Ce._translate(C,A,j,C),Ce._translate(S,A,j,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*l)/(p-2*l),v=(r-2*c)/(x-2*c),N=-y*(h+l)+e+l,w=-v*(m+c)+t+c;if(y!==1||v!==1||N!==0||w!==0)for(const{line:A,points:j}of this.#n)Ce._rescale(A,N,w,y,v,A),Ce._rescale(j,N,w,y,v,j);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[r,l]=s,c=this.#e,u=e-c[0],h=t-c[1];if(this.#i===r&&this.#a===l)for(const{line:m,points:p}of this.#n)Ce._translate(m,u,h,m),Ce._translate(p,u,h,p);else{const m=this.#i/r,p=this.#a/l;this.#i=r,this.#a=l;for(const{line:x,points:y}of this.#n)Ce._rescale(x,u,h,m,p,x),Ce._rescale(y,u,h,m,p,y);c[2]*=m,c[3]*=p}return c[0]=e,c[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(e[0])} ${Ce.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class ju extends V1{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Le._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new ju(this._viewParameters);return e.updateAll(this),e}}class Xp extends He{static _type="ink";static _editorType=$e.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Le.initialize(e,t),this._defaultDrawingOptions=new ju(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return st(this,"typesMap",new Map([[at.INK_THICKNESS,"stroke-width"],[at.INK_COLOR,"stroke"],[at.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,r,l){return new QD(e,t,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,r,l,c){return Yo.deserialize(e,t,s,r,l,c)}static async deserialize(e,t,s){let r=null;if(e instanceof Yp){const{data:{inkLists:c,rect:u,rotation:h,id:m,color:p,opacity:x,borderStyle:{rawWidth:y},popupRef:v},parent:{page:{pageNumber:N}}}=e;r=e={annotationType:$e.INK,color:Array.from(p),thickness:y,opacity:x,paths:{points:c},boxes:null,pageIndex:N-1,rect:u.slice(0),rotation:h,annotationElementId:m,id:m,deleted:!1,popupRef:v}}const l=await super.deserialize(e,t,s);return l._initialData=r,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=Xp.getDefaultDrawingOptions({stroke:Me.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":c,"stroke-width":u}}=this,h={annotationType:$e.INK,color:Le._colorManager.convert(l),opacity:c,thickness:u,paths:{lines:t,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!this.#e(h)?null:(h.id=this.annotationElementId,h)}#e(e){const{color:t,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,u)=>c!==t[u])||e.thickness!==s||e.opacity!==r||e.pageIndex!==l}renderAnnotationElement(e){const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class lp extends Yo{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const xd=8,co=3;class zr{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,s,r,l,c,u){const h=this.#t(s,r,l,c);for(let m=0;m<8;m++){const p=(-m+h-u+16)%8,x=this.#s[2*p],y=this.#s[2*p+1];if(e[(s+x)*t+(r+y)]!==0)return p}return-1}static#i(e,t,s,r,l,c,u){const h=this.#t(s,r,l,c);for(let m=0;m<8;m++){const p=(m+h+u+16)%8,x=this.#s[2*p],y=this.#s[2*p+1];if(e[(s+x)*t+(r+y)]!==0)return p}return-1}static#a(e,t,s,r){const l=e.length,c=new Int32Array(l);for(let p=0;p<l;p++)c[p]=e[p]<=r?1:0;for(let p=1;p<s-1;p++)c[p*t]=c[p*t+t-1]=0;for(let p=0;p<t;p++)c[p]=c[t*s-1-p]=0;let u=1,h;const m=[];for(let p=1;p<s-1;p++){h=1;for(let x=1;x<t-1;x++){const y=p*t+x,v=c[y];if(v===0)continue;let N=p,w=x;if(v===1&&c[y-1]===0)u+=1,w-=1;else if(v>=1&&c[y+1]===0)u+=1,w+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const A=[x,p],j=w===x+1,C={isHole:j,points:A,id:u,parent:0};m.push(C);let S;for(const z of m)if(z.id===h){S=z;break}S?S.isHole?C.parent=j?S.parent:h:C.parent=j?h:S.parent:C.parent=j?h:0;const T=this.#n(c,t,p,x,N,w,0);if(T===-1){c[y]=-u,c[y]!==1&&(h=Math.abs(c[y]));continue}let R=this.#s[2*T],O=this.#s[2*T+1];const H=p+R,V=x+O;N=H,w=V;let L=p,K=x;for(;;){const z=this.#i(c,t,L,K,N,w,1);R=this.#s[2*z],O=this.#s[2*z+1];const G=L+R,Y=K+O;A.push(Y,G);const de=L*t+K;if(c[de+1]===0?c[de]=-u:c[de]===1&&(c[de]=u),G===p&&Y===x&&L===H&&K===V){c[y]!==1&&(h=Math.abs(c[y]));break}else N=L,w=K,L=G,K=Y}}}return m}static#l(e,t,s,r){if(s-t<=4){for(let H=t;H<s-2;H+=2)r.push(e[H],e[H+1]);return}const l=e[t],c=e[t+1],u=e[s-4]-l,h=e[s-3]-c,m=Math.hypot(u,h),p=u/m,x=h/m,y=p*c-x*l,v=h/u,N=1/m,w=Math.atan(v),A=Math.cos(w),j=Math.sin(w),C=N*(Math.abs(A)+Math.abs(j)),S=N*(1-C+C**2),T=Math.max(Math.atan(Math.abs(j+A)*S),Math.atan(Math.abs(j-A)*S));let R=0,O=t;for(let H=t+2;H<s-2;H+=2){const V=Math.abs(y-p*e[H+1]+x*e[H]);V>R&&(O=H,R=V)}R>(m*T)**2?(this.#l(e,t,O+2,r),this.#l(e,O,s,r)):r.push(l,c)}static#r(e){const t=[],s=e.length;return this.#l(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#u(e,t,s,r,l,c){const u=new Float32Array(c**2),h=-2*r**2,m=c>>1;for(let w=0;w<c;w++){const A=(w-m)**2;for(let j=0;j<c;j++)u[w*c+j]=Math.exp((A+(j-m)**2)/h)}const p=new Float32Array(256),x=-2*l**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/x);const y=e.length,v=new Uint8Array(y),N=new Uint32Array(256);for(let w=0;w<s;w++)for(let A=0;A<t;A++){const j=w*t+A,C=e[j];let S=0,T=0;for(let O=0;O<c;O++){const H=w+O-m;if(!(H<0||H>=s))for(let V=0;V<c;V++){const L=A+V-m;if(L<0||L>=t)continue;const K=e[H*t+L],z=u[O*c+V]*p[Math.abs(K-C)];S+=K*z,T+=z}}const R=v[j]=Math.round(S/T);N[R]++}return[v,N]}static#o(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,l=1/0;for(let u=0,h=s.length;u<h;u++){if(e[(u<<2)+3]===0){r=s[u]=255;continue}const p=s[u]=e[u<<2];p>r&&(r=p),p<l&&(l=p)}const c=255/(r-l);for(let u=0;u<t;u++)s[u]=(s[u]-l)*c;return s}static#d(e){let t,s=-1/0,r=-1/0;const l=e.findIndex(h=>h!==0);let c=l,u=l;for(t=l;t<256;t++){const h=e[t];h>s&&(t-c>r&&(r=t-c,u=t-1),s=h,c=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:r}=e,{maxDim:l}=this.#e;let c=s,u=r;if(s>l||r>l){let y=s,v=r,N=Math.log2(Math.max(s,r)/l);const w=Math.floor(N);N=N===w?w-1:w;for(let j=0;j<N;j++){c=Math.ceil(y/2),u=Math.ceil(v/2);const C=new OffscreenCanvas(c,u);C.getContext("2d").drawImage(e,0,0,y,v,0,0,c,u),y=c,v=u,e!==t&&e.close(),e=C.transferToImageBitmap()}const A=Math.min(l/c,l/u);c=Math.round(c*A),u=Math.round(u*A)}const m=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});m.filter="grayscale(1)",m.drawImage(e,0,0,e.width,e.height,0,0,c,u);const p=m.getImageData(0,0,c,u).data;return[this.#h(p),c,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},l,c,u,h){let m=new OffscreenCanvas(1,1),p=m.getContext("2d",{alpha:!1});const x=200,y=p.font=`${s} ${r} ${x}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:N,actualBoundingBoxAscent:w,actualBoundingBoxDescent:A,fontBoundingBoxAscent:j,fontBoundingBoxDescent:C,width:S}=p.measureText(e),T=1.5,R=Math.ceil(Math.max(Math.abs(v)+Math.abs(N)||0,S)*T),O=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||x,Math.abs(j)+Math.abs(C)||x)*T);m=new OffscreenCanvas(R,O),p=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,R,O),p.fillStyle="black",p.fillText(e,R*(T-1)/2,O*(3-T)/2);const H=this.#h(p.getImageData(0,0,R,O).data),V=this.#o(H),L=this.#d(V),K=this.#a(H,R,O,L);return this.processDrawnLines({lines:{curves:K,width:R,height:O},pageWidth:l,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,l){const[c,u,h]=this.#f(e),[m,p]=this.#u(c,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),x=this.#d(p),y=this.#a(m,u,h,x);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:t,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:c,areContours:u}){r%180!==0&&([t,s]=[s,t]);const{curves:h,width:m,height:p}=e,x=e.thickness??0,y=[],v=Math.min(t/m,s/p),N=v/t,w=v/s,A=[];for(const{points:C}of h){const S=c?this.#r(C):C;if(!S)continue;A.push(S);const T=S.length,R=new Float32Array(T),O=new Float32Array(3*(T===2?2:T-2));if(y.push({line:O,points:R}),T===2){R[0]=S[0]*N,R[1]=S[1]*w,O.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[H,V,L,K]=S;H*=N,V*=w,L*=N,K*=w,R.set([H,V,L,K],0),O.set([NaN,NaN,NaN,NaN,H,V],0);for(let z=4;z<T;z+=2){const G=R[z]=S[z]*N,Y=R[z+1]=S[z+1]*w;O.set(Ce.createBezierPoints(H,V,L,K,G,Y),(z-2)*3),[H,V,L,K]=[L,K,G,Y]}}if(y.length===0)return null;const j=u?new lp:new Yo;return j.build(y,t,s,1,r,u?0:x,l),{outline:j,newCurves:A,areContours:u,thickness:x,width:m,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:l}){let c=1/0,u=-1/0,h=0;for(const S of e){h+=S.length;for(let T=2,R=S.length;T<R;T++){const O=S[T]-S[T-2];c=Math.min(c,O),u=Math.max(u,O)}}let m;c>=-128&&u<=127?m=Int8Array:c>=-32768&&u<=32767?m=Int16Array:m=Int32Array;const p=e.length,x=xd+co*p,y=new Uint32Array(x);let v=0;y[v++]=x*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*m.BYTES_PER_ELEMENT,y[v++]=0,y[v++]=r,y[v++]=l,y[v++]=t?0:1,y[v++]=Math.max(0,Math.floor(s??0)),y[v++]=p,y[v++]=m.BYTES_PER_ELEMENT;for(const S of e)y[v++]=S.length-2,y[v++]=S[0],y[v++]=S[1];const N=new CompressionStream("deflate-raw"),w=N.writable.getWriter();await w.ready,w.write(y);const A=m.prototype.constructor;for(const S of e){const T=new A(S.length-2);for(let R=2,O=S.length;R<O;R++)T[R-2]=S[R]-S[R-2];w.write(T)}w.close();const j=await new Response(N.readable).arrayBuffer(),C=new Uint8Array(j);return p1(C)}static async decompressSignature(e){try{const t=vT(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(t).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,u=0;for await(const S of s)c||=new Uint8Array(new Uint32Array(S.buffer,0,4)[0]),c.set(S,u),u+=S.length;const h=new Uint32Array(c.buffer,0,c.length>>2),m=h[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const p=h[2],x=h[3],y=h[4]===0,v=h[5],N=h[6],w=h[7],A=[],j=(xd+co*N)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(w){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(c.buffer,j);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(c.buffer,j);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(c.buffer,j);break}u=0;for(let S=0;S<N;S++){const T=h[co*S+xd],R=new Float32Array(T+2);A.push(R);for(let O=0;O<co-1;O++)R[O]=h[co*S+xd+O+1];for(let O=0;O<T;O++)R[O+2]=R[O]+C[u++]}return{areContours:y,thickness:v,outlines:A,width:p,height:x}}catch(t){return Ve(`decompressSignature: ${t}`),null}}}class Qp extends V1{constructor(){super(),super.updateProperties({fill:Le._defaultLineColor,"stroke-width":0})}clone(){const e=new Qp;return e.updateAll(this),e}}class Zp extends ju{constructor(e){super(e),super.updateProperties({stroke:Le._defaultLineColor,"stroke-width":1})}clone(){const e=new Zp(this._viewParameters);return e.updateAll(this),e}}class Gn extends He{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=$e.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Le.initialize(e,t),this._defaultDrawingOptions=new Qp,this._defaultDrawnSignatureOptions=new Zp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return st(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:r,mustSmooth:l,areContours:c,description:u,uuid:h,heightInPage:m}=this.#s,{rawDims:{pageWidth:p,pageHeight:x},rotation:y}=this.parent.viewport,v=zr.processDrawnLines({lines:r,pageWidth:p,pageHeight:x,rotation:y,innerMargin:Gn._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(v,m,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:r,height:l}=this.#s,c=Math.max(r,l),u=zr.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:r,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,r){const{x:l,y:c}=this,{outline:u}=this.#s=e;this.#e=u instanceof lp,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let h;this.#e?h=Gn.getDefaultDrawingOptions():(h=Gn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[m,p]=this.parentDimensions,[,x]=this.pageDimensions;let y=t/x;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(m*this.width,p*this.height),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:r}=this.parent.viewport;return zr.process(e,t,s,r,Gn._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return zr.extractContoursFromText(e,t,s,r,l,Gn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:r}=this.parent.viewport;return zr.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:Gn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Gn.getDefaultDrawingOptions():(this._drawingOptions=Gn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":l}}=this,c={annotationType:$e.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:l,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(c.paths={lines:t,points:s},c.uuid=this.#n,c.isCopy=!0):c.lines=t,this.#t&&(c.accessibilityData={type:"Figure",alt:this.#t}),c}static deserializeDraw(e,t,s,r,l,c){return c.areContours?lp.deserialize(e,t,s,r,l,c):Yo.deserialize(e,t,s,r,l,c)}static async deserialize(e,t,s){const r=await super.deserialize(e,t,s);return r.#e=e.areContours,r.#t=e.accessibilityData?.alt||"",r.#n=e.uuid,r}}class ZD extends Le{#e=null;#t=null;#s=null;#n=null;#i=null;#a="";#l=null;#r=!1;#u=null;#o=!1;#h=!1;static _type="stamp";static _editorType=$e.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#i=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Le.initialize(e,t)}static isHandlingMimeForPasting(e){return ep.includes(e)}static paste(e,t){t.pasteEditor({mode:$e.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#o=e.isSvg),e.file&&(this.#a=e.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:c}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:l,height:c,channels:r.length/(l*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#d(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#d(r)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(r=>this.#d(r)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=ep.join(",");const t=this._uiManager._signal;this.#s=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(r)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#i||this.#t||this.#r)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#r||(this.#e?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,r&&(this.#e=r),this.#r=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#g()},e)}#p(){const{div:e}=this;let{width:t,height:s}=this.#e;const[r,l]=this.pageDimensions,c=.75;if(this.width)t=this.width*r,s=this.height*l;else if(t>c*r||s>c*l){const p=Math.min(c*r/t,c*l/s);t*=p,s*=p}const[u,h]=this.parentDimensions;this.setDims(t*u/r,s*h/l),this._uiManager.enableWaiting(!1);const m=this.#l=document.createElement("canvas");m.setAttribute("role","img"),this.addContainer(m),this.width=t/r,this.height=s/l,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:r,height:l}=this.#e,c=new Xn;let u=this.#e,h=r,m=l,p=null;if(t){if(r>t||l>t){const O=Math.min(t/r,t/l);h=Math.floor(r*O),m=Math.floor(l*O)}p=document.createElement("canvas");const y=p.width=Math.ceil(h*c.sx),v=p.height=Math.ceil(m*c.sy);this.#o||(u=this.#c(y,v));const N=p.getContext("2d");N.filter=this._uiManager.hcmFilter;let w="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",A="#42414d");const j=15,C=j*c.sx,S=j*c.sy,T=new OffscreenCanvas(C*2,S*2),R=T.getContext("2d");R.fillStyle=w,R.fillRect(0,0,C*2,S*2),R.fillStyle=A,R.fillRect(0,0,C,S),R.fillRect(C,S,C,S),N.fillStyle=N.createPattern(T,"repeat"),N.fillRect(0,0,y,v),N.drawImage(u,0,0,u.width,u.height,0,0,y,v)}let x=null;if(s){let y,v;if(c.symmetric&&u.width<e&&u.height<e)y=u.width,v=u.height;else if(u=this.#e,r>e||l>e){const A=Math.min(e/r,e/l);y=Math.floor(r*A),v=Math.floor(l*A),this.#o||(u=this.#c(y,v))}const w=new OffscreenCanvas(y,v).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,y,v),x={width:y,height:v,data:w.getImageData(0,0,y,v).data}}return{canvas:p,width:h,height:m,imageData:x}}#c(e,t){const{width:s,height:r}=this.#e;let l=s,c=r,u=this.#e;for(;l>2*e||c>2*t;){const h=l,m=c;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(l,c);p.getContext("2d").drawImage(u,0,0,h,m,0,0,l,c),u=p.transferToImageBitmap()}return u}#g(){const[e,t]=this.parentDimensions,{width:s,height:r}=this,l=new Xn,c=Math.ceil(s*e*l.sx),u=Math.ceil(r*t*l.sy),h=this.#l;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const m=this.#o?this.#e:this.#c(c,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(m,0,0,m.width,m.height,0,0,c,u)}#x(e){if(e){if(this.#o){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#o){const[t,s]=this.pageDimensions,r=Math.round(this.width*t*Kr.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Kr.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,l);return c.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,l),c.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let r=null,l=!1;if(e instanceof U1){const{data:{rect:w,rotation:A,id:j,structParent:C,popupRef:S},container:T,parent:{page:{pageNumber:R}},canvas:O}=e;let H,V;O?(delete e.canvas,{id:H,bitmap:V}=s.imageManager.getFromCanvas(T.id,O),O.remove()):(l=!0,e._hasNoCanvas=!0);const L=(await t._structTree.getAriaAttributes(`${Pp}${j}`))?.get("aria-label")||"";r=e={annotationType:$e.STAMP,bitmapId:H,bitmap:V,pageIndex:R-1,rect:w.slice(0),rotation:A,annotationElementId:j,id:j,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:C,popupRef:S}}const c=await super.deserialize(e,t,s),{rect:u,bitmap:h,bitmapUrl:m,bitmapId:p,isSvg:x,accessibilityData:y}=e;l?(s.addMissingCanvas(e.id,c),c.#r=!0):p&&s.imageManager.isValidId(p)?(c.#t=p,h&&(c.#e=h)):c.#n=m,c.#o=x;const[v,N]=c.pageDimensions;return c.width=(u[2]-u[0])/v,c.height=(u[3]-u[1])/N,y&&(c.altTextData=y),c._initialData=r,c.#h=!!r,c}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:$e.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=this.#x(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#y(s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,t===null)return s;t.stamps||=new Map;const c=this.#o?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:c,serialized:s}),s.bitmap=this.#x(!1);else if(this.#o){const u=t.stamps.get(this.#t);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#x(!1))}return s}#y(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===t,l=(e.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class ma{#e;#t=!1;#s=null;#n=null;#i=null;#a=new Map;#l=!1;#r=!1;#u=!1;#o=null;#h=null;#d=null;#f=null;#m=null;#p=-1;#c;static _initialized=!1;static#g=new Map([es,Xp,ZD,Ut,Gn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:c,drawLayer:u,textLayer:h,viewport:m,l10n:p}){const x=[...ma.#g.values()];if(!ma._initialized){ma._initialized=!0;for(const y of x)y.initialize(p,e)}e.registerEditorTypes(x),this.#c=e,this.pageIndex=t,this.div=s,this.#e=l,this.#s=c,this.viewport=m,this.#d=h,this.drawLayer=u,this._structTree=r,this.#c.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===$e.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#N(),e){case $e.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case $e.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case $e.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of ma.#g.values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const e=new Set;for(const s of this.#a.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#c.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!this.#s){this.#u=!1;return}const t=this.#s.getEditableAnnotations();for(const s of t){if(s.hide(),this.#c.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1}disable(){if(this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#d&&!this.#m){this.#m=new AbortController;const r=this.#c.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:h,timeStamp:m}=l,p=this.#p;if(m-p>500){this.#p=m;return}this.#p=-1;const{classList:x}=this.div;x.toggle("getElements",!0);const y=document.elementsFromPoint(u,h);if(x.toggle("getElements",!1),!this.div.contains(y[0]))return;let v;const N=new RegExp(`^${d1}[0-9]+$`);for(const A of y)if(N.test(A.id)){v=A.id;break}if(!v)return;const w=this.#a.get(v);w?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),w.dblclick())},{signal:r,capture:!0})}const e=new Map,t=new Map;for(const r of this.#a.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#s){const r=this.#s.getEditableAnnotations();for(const l of r){const{id:c}=l.data;if(this.#c.isDeletedAnnotationElement(c))continue;let u=t.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=e.get(c),u&&(this.#c.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}this.#N(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of ma.#g.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#c.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#x.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#x(e){this.#c.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:s}=gs.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Ut.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#a.set(e.id,e);const{annotationElementId:t}=e;t&&this.#c.isDeletedAnnotationElement(t)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#a.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#r&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e.annotationElementId),Le.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return this.#c.getId()}get#y(){return ma.#g.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#v(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:s,offsetY:r}=this.#w(),l=this.getNextId(),c=this.#v({parent:this,id:l,x:s,y:r,uiManager:this.#c,isCentered:!0,...t});c&&this.add(c)}async deserialize(e){return await ma.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),l=this.#v({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:t,...s});return l&&this.add(l),l}#w(){const{x:e,y:t,width:s,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+s),h=Math.min(window.innerHeight,t+r),m=(l+u)/2-e,p=(c+h)/2-t,[x,y]=this.viewport.rotation%180===0?[m,p]:[p,m];return{offsetX:x,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#w(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:t}=gs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#l||(this.#l=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#c.getMode();if(s===$e.STAMP||s===$e.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===$e.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=gs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#l=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const s=this.#c.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#o){this.#y.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#o=new AbortController;const t=this.#c.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#o?(this.#c.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,s){const r=this.#c.findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#a.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#a.clear(),this.#c.removeLayer(this)}#N(){for(const e of this.#a.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Ui(this.div,e);for(const t of this.#c.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#N();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Ui(this.div,{rotation:s}),t!==s)for(const r of this.#a.values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#c.viewParameters.realScale}}class hs{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return st(this,"_svgFactory",new Yd)}static#i(e,[t,s,r,l]){const{style:c}=e;c.top=`${100*s}%`,c.left=`${100*t}%`,c.width=`${100*r}%`,c.height=`${100*l}%`}#a(){const e=hs._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){const s=hs._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=hs._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${t}`),l.classList.add("clip"),r}#r(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)}draw(e,t=!1,s=!1){const r=hs.#n++,l=this.#a(),c=hs._svgFactory.createElement("defs");l.append(c);const u=hs._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(r,u);const m=s?this.#l(c,h):null,p=hs._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(l,e),this.#t.set(r,l),{id:r,clipPathId:`url(#${m})`}}drawOutline(e,t){const s=hs.#n++,r=this.#a(),l=hs._svgFactory.createElement("defs");r.append(l);const c=hs._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const x=hs._svgFactory.createElement("mask");l.append(x),h=`mask_p${this.pageIndex}_${s}`,x.setAttribute("id",h),x.setAttribute("maskUnits","objectBoundingBox");const y=hs._svgFactory.createElement("rect");x.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=hs._svgFactory.createElement("use");x.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const m=hs._svgFactory.createElement("use");r.append(m),m.setAttribute("href",`#${u}`),h&&m.setAttribute("mask",`url(#${h})`);const p=m.cloneNode();return r.append(p),m.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(s,r),s}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:r,rootClass:l,path:c}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(s&&this.#r(u,s),r&&hs.#i(u,r),l){const{classList:h}=u;for(const[m,p]of Object.entries(l))h.toggle(m,p)}if(c){const m=u.firstChild.firstChild;this.#r(m,c)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ip};globalThis.pdfjsLib={AbortException:ei,AnnotationEditorLayer:ma,AnnotationEditorParamsType:at,AnnotationEditorType:$e,AnnotationEditorUIManager:ti,AnnotationLayer:Wp,AnnotationMode:Wa,AnnotationType:Wt,build:TD,ColorPicker:gn,createValidAbsoluteUrl:u1,DOMSVGFactory:Yd,DrawLayer:hs,FeatureTest:gs,fetchData:$o,getDocument:jD,getFilenameFromUrl:wT,getPdfFilenameFromUrl:NT,getUuid:m1,getXfaPageViewport:jT,GlobalWorkerOptions:Yr,ImageKind:Rd,InvalidPDFException:Jm,isDataScheme:wu,isPdfFile:Bp,isValidExplicitDest:OT,MathClamp:Ts,noContextMenu:_n,normalizeUnicode:yT,OPS:Gd,OutputScale:Xn,PasswordResponses:cT,PDFDataRangeTransport:k1,PDFDateString:g1,PDFWorker:Co,PermissionFlag:oT,PixelsPerInch:Kr,RenderingCancelledException:Ip,ResponseException:qd,setLayerDimensions:Ui,shadow:st,SignatureExtractor:zr,stopEvent:Xt,SupportedImageMimeTypes:ep,TextLayer:_s,TouchManager:Nu,updateUrlHash:h1,Util:Me,VerbosityLevel:yu,version:O1,XfaLayer:P1};Yr.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${O1}/pdf.worker.min.js`;const KD=({employeeId:n,onClose:e})=>{const[t,s]=_.useState(null),[r,l]=_.useState(!0),[c,u]=_.useState({});_.useEffect(()=>{n&&(async()=>{try{l(!0);const[x,y]=await Promise.all([xe.get(`/employee/${n}`),xe.get(`/employee/bank/${n}`).catch(v=>{if(v.response?.status===404)return{data:null};throw v})]);s({...x.data.data,bankDetails:y.data})}catch(x){console.error("Error fetching employee details:",x),alert("Error loading employee details")}finally{l(!1)}})()},[n]);const h=p=>{try{return p.split("/").pop().split("?")[0]}catch{return"document.pdf"}},m=async(p,x,y)=>{u(v=>({...v,[y]:!0}));try{const v=await xe.get(p,{responseType:"blob"}),N=new Blob([v.data],{type:v.data.type}),w=window.URL.createObjectURL(N),A=document.createElement("a");A.href=w,A.download=x||p.split("/").pop(),document.body.appendChild(A),A.click(),A.remove(),window.URL.revokeObjectURL(w)}catch(v){console.error("Download failed:",v),alert("Download failed. Please try again.")}finally{u(v=>({...v,[y]:!1}))}};return r?a.jsx("div",{className:"fixed inset-0 bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full p-6",children:a.jsx("div",{className:"flex justify-center items-center h-40",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})})})}):t?a.jsx("div",{className:"fixed inset-0 bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-2",children:a.jsxs("div",{className:"bg-white rounded-md shadow-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto text-sm",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-2 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-sm font-semibold text-gray-800",children:["Employee Details - ",t.firstName," ",t.lastName]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-base",children:""})]}),a.jsxs("div",{className:"p-3 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("h3",{className:"text-xs font-semibold mb-2 text-[#104774]",children:"Personal Information"}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"ID:"}),a.jsx("span",{children:t.employeeId})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Name:"}),a.jsxs("span",{children:[t.firstName," ",t.lastName]})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Email:"}),a.jsx("span",{children:t.user?.email})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Phone:"}),a.jsx("span",{children:t.phone||"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"DOB:"}),a.jsx("span",{children:t.dob?new Date(t.dob).toLocaleDateString():"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Gender:"}),a.jsx("span",{className:"capitalize",children:t.gender||"N/A"})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx("span",{className:"font-medium w-24",children:"Address:"}),a.jsx("span",{children:t.address||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("h3",{className:"text-xs font-semibold mb-2 text-[#104774]",children:"Job Information"}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Dept:"}),a.jsx("span",{children:t.department||"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Designation:"}),a.jsx("span",{children:t.designation||"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Joining:"}),a.jsx("span",{children:t.dateOfJoining?new Date(t.dateOfJoining).toLocaleDateString():"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Type:"}),a.jsx("span",{className:"capitalize",children:t.employmentType||"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Work Mode:"}),a.jsx("span",{className:"capitalize",children:t.workMode||"N/A"})]}),t.shiftTiming?.start&&a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Shift:"}),a.jsxs("span",{children:[t.shiftTiming.start," - ",t.shiftTiming.end]})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Role:"}),a.jsx("span",{children:t.user?.role||"N/A"})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"font-medium w-24",children:"Status:"}),a.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] ${t.user?.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.user?.isActive?"Active":"Inactive"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[t.bankDetails&&a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("h3",{className:"text-xs font-semibold mb-2 text-[#104774]",children:"Bank"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"w-28",children:"Holder:"}),a.jsx("span",{children:t.bankDetails.accountHolderName})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"w-28",children:"Number:"}),a.jsx("span",{children:t.bankDetails.accountNumber})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"w-28",children:"Bank:"}),a.jsx("span",{children:t.bankDetails.bankName})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"w-28",children:"IFSC:"}),a.jsx("span",{children:t.bankDetails.ifscCode})]}),a.jsxs("div",{className:"flex",children:[a.jsx("span",{className:"w-28",children:"Type:"}),a.jsx("span",{children:t.bankDetails.accountType})]})]})]}),t.documents?.length>0&&a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("h3",{className:"text-xs font-semibold mb-2 text-[#104774]",children:"Documents"}),a.jsx("div",{className:"space-y-1",children:t.documents.map((p,x)=>a.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border text-xs",children:[a.jsx("span",{className:"truncate",children:p.name||h(p.url)}),a.jsx("button",{onClick:()=>m(p.url,p.name,x),disabled:c?.[x],className:"text-[#104774] hover:underline",children:c?.[x]?"...":"Download"})]},x))})]})]})]}),a.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-2 text-right",children:a.jsx("button",{onClick:e,className:"px-3 py-1 bg-gray-600 text-white rounded text-xs hover:bg-gray-700",children:"Close"})})]})}):a.jsx("div",{className:"fixed inset-0 bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full p-6",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-red-500",children:"Employee not found"}),a.jsx("button",{onClick:e,className:"mt-4 px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})]})})})},rv=()=>{const[n,e]=_.useState(!1),[t,s]=_.useState([]),[r,l]=_.useState(null),[c,u]=_.useState(null),[h,m]=_.useState(!1),p=async()=>{try{const A=await xe.get("/employee/all-employees");s(A.data.data||[])}catch(A){console.error("Error fetching employees:",A)}};_.useEffect(()=>{p()},[]);const x=()=>{l(null),e(!0)},y=async A=>{if(!A?._id){l(A),e(!0);return}m(!0);try{const j=await xe.get(`/employee/${A._id}`),C=j.data?.data||j.data||A;l(C),e(!0)}catch(j){console.warn("Could not fetch full employee, opening with provided object:",j),l(A),e(!0)}finally{m(!1)}},v=()=>{e(!1),l(null),p()},N=A=>{u(A._id)},w=()=>{u(null)};return a.jsxs("div",{className:"min-h-[80vh] p-3 md:p-4 lg:p-6 bg-gray-50",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4 md:mb-6",children:[a.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 text-center sm:text-left",children:"Manage Employees"}),a.jsx("button",{onClick:x,className:"px-3 py-2 md:px-4 md:py-2.5 text-white font-semibold rounded-lg hover:opacity-90 transition shadow-md hover:shadow-lg w-full sm:w-auto text-xs sm:text-sm",style:{backgroundColor:"#104774"},children:"+ New Employee"})]}),a.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[a.jsx("div",{className:"block md:hidden space-y-3 p-3",children:t.length>0?t.map((A,j)=>a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-blue-50 text-blue-600 text-xs font-bold mr-2",children:j+1}),a.jsx("span",{className:"text-xs text-slate-500",children:"Employee ID"})]}),a.jsx("p",{className:"text-xs font-mono font-semibold bg-blue-50 px-2 py-1 rounded-md text-blue-700",children:A.employeeId||"N/A"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-1",children:[A.firstName," ",A.lastName]}),a.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:A.department||"N/A"}),a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:A.designation||"N/A"})]}),a.jsxs("div",{className:"mt-2 flex items-center text-xs text-slate-600",children:[a.jsx("svg",{className:"w-3 h-3 mr-1 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),a.jsx("span",{className:"truncate",children:A.user?.email||"N/A"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>y(A),className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-xs font-medium text-white rounded-md hover:opacity-90 transition-all duration-200 shadow-sm",style:{backgroundColor:"#104774"},children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),a.jsxs("button",{onClick:()=>N(A),className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 text-xs font-medium bg-slate-700 text-white rounded-md hover:bg-slate-800 transition-all duration-200 shadow-sm",children:[a.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})]})]},A._id)):a.jsx("div",{className:"text-center p-4 bg-gradient-to-br from-slate-50 to-blue-50 rounded-lg border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsxs("div",{className:"relative mb-3",children:[a.jsx("svg",{className:"w-12 h-12 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),a.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-1",children:"No employees found"}),a.jsx("p",{className:"text-xs text-slate-500 max-w-xs mb-3",children:"Get started by adding your first employee to the system"}),a.jsx("button",{className:"px-3 py-1.5 text-xs font-medium text-white rounded-md shadow-sm hover:opacity-90 transition-all duration-200",style:{backgroundColor:"#104774"},children:"+ New Employee"})]})})}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse min-w-[600px]",children:[a.jsx("thead",{className:"bg-[#104774] text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"#"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Employee ID"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Name"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Department"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Designation"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Email"}),a.jsx("th",{className:"px-2 py-1.5 text-center text-xs font-semibold uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:t.length>0?t.map((A,j)=>a.jsxs("tr",{className:"hover:bg-slate-50 transition-colors duration-150 even:bg-slate-50/50",children:[a.jsx("td",{className:"px-2 py-1.5 font-medium text-slate-700 text-xs",children:j+1}),a.jsx("td",{className:"px-2 py-1.5 font-mono text-xs text-blue-700",children:A.employeeId||"N/A"}),a.jsxs("td",{className:"px-2 py-1.5 font-medium text-xs",children:[A.firstName," ",A.lastName]}),a.jsx("td",{className:"px-2 py-1.5",children:a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:A.department||"N/A"})}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600",children:A.designation||"N/A"}),a.jsx("td",{className:"px-2 py-1.5 text-blue-600 text-xs",children:A.user?.email||"N/A"}),a.jsxs("td",{className:"px-2 py-1.5 flex justify-center gap-1",children:[a.jsx("button",{onClick:()=>y(A),className:"px-2 py-1 text-xs font-medium text-white rounded-md hover:opacity-90 transition shadow-sm",style:{backgroundColor:"#104774"},children:"Edit"}),a.jsx("button",{onClick:()=>N(A),className:"px-2 py-1 text-xs font-medium bg-slate-600 text-white rounded-md hover:bg-slate-700 transition shadow-sm",children:"View"})]})]},A._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center p-4 text-slate-500",children:a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsx("svg",{className:"w-12 h-12 text-slate-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),a.jsx("p",{className:"text-sm font-medium",children:"No employees found"}),a.jsx("p",{className:"mt-1 text-xs",children:'Click "New Employee" to add your first employee'})]})})})})]})})]}),c&&a.jsx(KD,{employeeId:c,onClose:w}),n&&a.jsx("div",{className:"fixed inset-0  bg-opacity-40 backdrop-blur-sm z-50 flex items-center justify-center p-3 md:p-4",children:h?a.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 flex items-center justify-center max-w-xs w-full",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 md:h-6 md:w-6 border-b-2 border-[#104774] mr-2 md:mr-3"}),a.jsx("div",{className:"text-xs md:text-sm",children:"Loading employee details..."})]}):a.jsx(lT,{onClose:v,employee:r,isEditMode:!!r})})]})},xm=({children:n,allowedRoles:e})=>{const{user:t,loading:s}=os();if(s)return a.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(!t)return a.jsx(ga,{to:"/login",replace:!0});if(!e.includes(t.role)){if(t.role==="admin")return a.jsx(ga,{to:"/admin",replace:!0});if(t.role==="hr")return a.jsx(ga,{to:"/hr",replace:!0});if(t.role==="employee")return a.jsx(ga,{to:"/employee",replace:!0})}return n},JD=({isOpen:n,onClose:e,onSave:t,existingData:s})=>{const[r,l]=_.useState({accountHolderName:"",accountNumber:"",bankName:"",ifscCode:"",accountType:"savings"});_.useEffect(()=>{s&&l(s)},[s]);const c=h=>{l({...r,[h.target.name]:h.target.value})},u=async h=>{h.preventDefault(),await t(r)};return n?a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:s?"Update Bank Details":"Add Bank Details"}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Holder Name"}),a.jsx("input",{type:"text",name:"accountHolderName",value:r.accountHolderName,onChange:c,required:!0,className:"w-full p-2 border rounded"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Number"}),a.jsx("input",{type:"text",name:"accountNumber",value:r.accountNumber,onChange:c,required:!0,className:"w-full p-2 border rounded"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bank Name"}),a.jsx("input",{type:"text",name:"bankName",value:r.bankName,onChange:c,required:!0,className:"w-full p-2 border rounded"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"IFSC Code"}),a.jsx("input",{type:"text",name:"ifscCode",value:r.ifscCode,onChange:c,required:!0,className:"w-full p-2 border rounded uppercase"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Type"}),a.jsxs("select",{name:"accountType",value:r.accountType,onChange:c,className:"w-full p-2 border rounded",children:[a.jsx("option",{value:"savings",children:"Savings"}),a.jsx("option",{value:"current",children:"Current"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#104774] text-white rounded hover:bg-[#0d3a5f]",children:s?"Update":"Save"})]})]})]})}):null},ym=()=>{const[n,e]=_.useState(null),[t,s]=_.useState(null),[r,l]=_.useState(!0),[c,u]=_.useState(!1),[h,m]=_.useState(!1);_.useEffect(()=>{p(),x()},[]);const p=async()=>{try{const j=await xe.get("/employee/profile");e(j.data.data)}catch(j){console.error("Error fetching employee profile:",j)}finally{l(!1)}},x=async()=>{try{const j=await xe.get("/employee/bank/me");s(j.data||null)}catch(j){console.error("Error fetching bank details:",j)}},y=async j=>{try{await xe.post("/employee/bank",j),alert(t?"Bank details updated!":"Bank details added!"),m(!1),x()}catch(C){console.error(C),alert(C.response?.data?.message||"Failed to save bank details")}},v=async j=>{const C=j.target.files[0];if(!C)return;if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(C.type)){alert("Please select a valid image file (JPEG, PNG, GIF)");return}if(C.size>5*1024*1024){alert("Image size should be less than 5MB");return}u(!0);try{const T=new FormData;T.append("image",C);const R=await xe.patch("/employee/profile/image",T,{headers:{"Content-Type":"multipart/form-data"}});e(O=>({...O,avatarUrl:R.data.data.avatarUrl})),alert("Profile image updated successfully!")}catch(T){console.error(T),alert(T.response?.data?.message||"Failed to upload image")}finally{u(!1),j.target.value=""}},N=j=>j?`XXXX-XXXX-${j.slice(-4)}`:"N/A";function w(j){if(j===null||typeof j>"u"||j==="")return"";const C=L=>{if(!L&&L!==0)return null;if(L instanceof Date)return{hour:L.getHours(),minute:L.getMinutes()};if(typeof L=="object"){const K=Number(L.hour??L.h??L.H??L.hours??L.hours24),z=Number(L.minute??L.m??0);return Number.isNaN(K)?null:{hour:K,minute:z}}if(typeof L=="number"){const K=Math.floor(L),z=Math.round((L-K)*60);return{hour:K,minute:z}}if(typeof L=="string"){let K=L.trim();(K.startsWith('"')&&K.endsWith('"')||K.startsWith("'")&&K.endsWith("'"))&&(K=K.slice(1,-1).trim());const z=K.match(/\b(AM|PM)\b/i),G=!!z;G&&(K=K.replace(/\b(AM|PM)\b/i,"").trim());const Y=K.split(":").map(I=>I.trim());let de,be;if(Y.length===1){const I=Y[0];if(/^\d{3,4}$/.test(I)){const Z=I.padStart(4,"0");de=parseInt(Z.slice(0,2),10),be=parseInt(Z.slice(2),10)}else de=parseInt(I,10),be=0}else de=parseInt(Y[0],10),be=parseInt(Y[1],10)||0;if(Number.isNaN(de))return null;if(G){const I=z[0].toUpperCase();I==="PM"&&de!==12&&(de+=12),I==="AM"&&de===12&&(de=0)}return{hour:de,minute:be}}return null},S=({hour:L,minute:K})=>{if(L===null||typeof L>"u")return"";const z=L>=12?"PM":"AM",G=L%12===0?12:L%12,Y=String(K??0).padStart(2,"0");return`${String(G).padStart(2,"0")}:${Y} ${z}`},T=L=>{if(typeof L=="string"){const K=L.split(/||-|\bto\b/i).map(z=>z.trim()).filter(Boolean);if(K.length>=2)return K.slice(0,2);try{const z=JSON.parse(L);if(Array.isArray(z))return z;if(z&&typeof z=="object")return[z.start??z.from??z.startTime,z.end??z.to??z.endTime]}catch{}return[L]}return Array.isArray(L)?L:typeof L=="object"?[L.start??L.from??L.startTime??L[0],L.end??L.to??L.endTime??L[1]]:[String(L)]},[R,O]=T(j),H=C(R),V=C(O);return H&&V?`${S(H)}  ${S(V)}`:H?S(H):typeof j=="string"?j:Array.isArray(j)?j.join("  "):typeof j=="object"?`${R??""}${O?"  "+O:""}`:String(j)}const A=j=>j?new Date(j).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A";return r?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):n?a.jsxs("div",{className:"max-w-6xl mx-auto max-h-[80vh]",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[a.jsxs("div",{className:"flex-shrink-0 relative",children:[a.jsxs("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gray-100 flex items-center justify-center border-2 border-gray-200 relative group",children:[n.avatarUrl?a.jsx("img",{src:n.avatarUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):a.jsxs("span",{className:"text-2xl sm:text-3xl text-gray-600 font-semibold",children:[n.firstName?.charAt(0),n.lastName?.charAt(0)]}),a.jsxs("label",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[c?a.jsx(IC,{className:"w-4 h-4 text-white animate-spin"}):a.jsx(uC,{className:"w-4 h-4 text-white"}),a.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:c})]})]}),a.jsxs("div",{className:"text-center mt-2",children:[a.jsxs("label",{className:"text-xs text-[#104774] cursor-pointer hover:underline",children:["Change Photo",a.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:c})]}),c&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})]}),a.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1",children:[n.firstName," ",n.lastName]}),a.jsx("p",{className:"text-base sm:text-lg text-[#104774] font-semibold mb-2",children:n.designation||"Software Developer"}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("p",{children:["Employee ID:"," ",a.jsx("span",{className:"font-medium text-gray-800",children:n.employeeId})]}),a.jsxs("p",{children:["Date of Joining:"," ",a.jsx("span",{className:"font-medium text-gray-800",children:A(n.dateOfJoining)})]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("span",{className:`px-3 py-1 rounded-md text-xs font-semibold ${n.user?.isActive?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:n.user?.isActive?"Active":"Inactive"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-3 pb-2 border-b border-gray-100",children:"Personal Information"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Phone:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm",children:n.phone||"+91 12347 65890"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Email:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm break-all",children:n.user?.email||"anthony@gmail.com"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Date of Birth:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm",children:A(n.dob)||"28 December 1992"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Address:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm",children:n.address||"Dehradun, Uttarakhand"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Gender:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm capitalize",children:n.gender||"Male"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-3 pb-2 border-b border-gray-100",children:"Job Details"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Designation:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm",children:n.designation||"Software Developer"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Department:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm",children:n.department||"IT & Development"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Employment Type:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm capitalize",children:n.employmentType?n.employmentType.replace("-"," "):"Full Time"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Shift Timing:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm",children:w(n.shiftTiming)||"10:00 AM  07:00 PM"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("div",{className:"w-full sm:w-2/5 text-gray-600 font-medium text-sm mb-1 sm:mb-0",children:"Work Mode:"}),a.jsx("div",{className:"w-full sm:w-3/5 text-gray-900 font-medium text-sm capitalize",children:n.workMode?n.workMode.replace(/-/g," "):"Work From Home"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-3 pb-2 border-b border-gray-100",children:[a.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-2 sm:mb-0",children:"Bank Details"}),a.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-1 px-3 py-1.5 bg-[#104774] text-white text-xs rounded hover:bg-[#0d3a5f] w-full sm:w-auto justify-center",children:[t?a.jsx(Qm,{size:14}):a.jsx(Bi,{size:14}),t?"Edit":"Add"]})]}),t?a.jsxs("div",{className:"space-y-2 text-gray-700 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Account Holder:"})," ",t.accountHolderName]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Account Number:"})," ",N(t.accountNumber)]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",t.bankName]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"IFSC:"})," ",t.ifscCode]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Account Type:"})," ",t.accountType]})]}):a.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"No bank details added yet."})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsx("h2",{className:"text-base font-semibold text-gray-900 mb-3 pb-2 border-b border-gray-100",children:"Documents"}),n.documents&&n.documents.length>0?a.jsx("div",{className:"space-y-2 max-h-28 overflow-y-auto",children:n.documents.map((j,C)=>a.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[a.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-50 border border-gray-200 rounded flex items-center justify-center mr-2 flex-shrink-0",children:a.jsx("span",{className:"text-gray-500 text-xs",children:""})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:j.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded:"," ",j.uploadedAt?A(j.uploadedAt):"N/A"]})]})]}),a.jsx("a",{href:j.url,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-[#104774] hover:text-[#0d3a5f] text-xs font-medium flex-shrink-0 whitespace-nowrap",children:"View"})]},C))}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-50 border border-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx("span",{className:"text-gray-400 text-xl",children:""})}),a.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"No documents available"})]})]})]}),a.jsx(JD,{isOpen:h,onClose:()=>m(!1),onSave:y,existingData:t})]}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-red-500",children:"Employee profile not found"})})};var Su,Oe,G1,q1,Jr,Di,lv,Y1,W1,Wd={},X1=[],eR=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Qa(n,e){for(var t in e)n[t]=e[t];return n}function Q1(n){var e=n.parentNode;e&&e.removeChild(n)}function le(n,e,t){var s,r,l,c={};for(l in e)l=="key"?s=e[l]:l=="ref"?r=e[l]:c[l]=e[l];if(arguments.length>2&&(c.children=arguments.length>3?Su.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(l in n.defaultProps)c[l]===void 0&&(c[l]=n.defaultProps[l]);return Ld(n,c,s,r,null)}function Ld(n,e,t,s,r){var l={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++G1};return r==null&&Oe.vnode!=null&&Oe.vnode(l),l}function ba(){return{current:null}}function It(n){return n.children}function tR(n,e,t,s,r){var l;for(l in t)l==="children"||l==="key"||l in e||Xd(n,l,null,t[l],s);for(l in e)r&&typeof e[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||t[l]===e[l]||Xd(n,l,e[l],t[l],s)}function ov(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||eR.test(e)?t:t+"px"}function Xd(n,e,t,s,r){var l;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||ov(n.style,e,"");if(t)for(e in t)s&&t[e]===s[e]||ov(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")l=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+l]=t,t?s||n.addEventListener(e,l?dv:cv,l):n.removeEventListener(e,l?dv:cv,l);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function cv(n){Jr=!0;try{return this.l[n.type+!1](Oe.event?Oe.event(n):n)}finally{Jr=!1}}function dv(n){Jr=!0;try{return this.l[n.type+!0](Oe.event?Oe.event(n):n)}finally{Jr=!1}}function nn(n,e){this.props=n,this.context=e}function To(n,e){if(e==null)return n.__?To(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?To(n):null}function Z1(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return Z1(n)}}function sR(n){Jr?setTimeout(n):Y1(n)}function op(n){(!n.__d&&(n.__d=!0)&&Di.push(n)&&!Qd.__r++||lv!==Oe.debounceRendering)&&((lv=Oe.debounceRendering)||sR)(Qd)}function Qd(){var n,e,t,s,r,l,c,u;for(Di.sort(function(h,m){return h.__v.__b-m.__v.__b});n=Di.shift();)n.__d&&(e=Di.length,s=void 0,r=void 0,c=(l=(t=n).__v).__e,(u=t.__P)&&(s=[],(r=Qa({},l)).__v=l.__v+1,Kp(u,l,r,t.__n,u.ownerSVGElement!==void 0,l.__h!=null?[c]:null,s,c??To(l),l.__h),sN(s,l),l.__e!=c&&Z1(l)),Di.length>e&&Di.sort(function(h,m){return h.__v.__b-m.__v.__b}));Qd.__r=0}function K1(n,e,t,s,r,l,c,u,h,m){var p,x,y,v,N,w,A,j=s&&s.__k||X1,C=j.length;for(t.__k=[],p=0;p<e.length;p++)if((v=t.__k[p]=(v=e[p])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?Ld(null,v,null,null,v):Array.isArray(v)?Ld(It,{children:v},null,null,null):v.__b>0?Ld(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)!=null){if(v.__=t,v.__b=t.__b+1,(y=j[p])===null||y&&v.key==y.key&&v.type===y.type)j[p]=void 0;else for(x=0;x<C;x++){if((y=j[x])&&v.key==y.key&&v.type===y.type){j[x]=void 0;break}y=null}Kp(n,v,y=y||Wd,r,l,c,u,h,m),N=v.__e,(x=v.ref)&&y.ref!=x&&(A||(A=[]),y.ref&&A.push(y.ref,null,v),A.push(x,v.__c||N,v)),N!=null?(w==null&&(w=N),typeof v.type=="function"&&v.__k===y.__k?v.__d=h=J1(v,h,n):h=eN(n,v,y,j,N,h),typeof t.type=="function"&&(t.__d=h)):h&&y.__e==h&&h.parentNode!=n&&(h=To(y))}for(t.__e=w,p=C;p--;)j[p]!=null&&(typeof t.type=="function"&&j[p].__e!=null&&j[p].__e==t.__d&&(t.__d=tN(s).nextSibling),aN(j[p],j[p]));if(A)for(p=0;p<A.length;p++)nN(A[p],A[++p],A[++p])}function J1(n,e,t){for(var s,r=n.__k,l=0;r&&l<r.length;l++)(s=r[l])&&(s.__=n,e=typeof s.type=="function"?J1(s,e,t):eN(t,s,s,r,s.__e,e));return e}function Zd(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){Zd(t,e)}):e.push(n)),e}function eN(n,e,t,s,r,l){var c,u,h;if(e.__d!==void 0)c=e.__d,e.__d=void 0;else if(t==null||r!=l||r.parentNode==null)e:if(l==null||l.parentNode!==n)n.appendChild(r),c=null;else{for(u=l,h=0;(u=u.nextSibling)&&h<s.length;h+=1)if(u==r)break e;n.insertBefore(r,l),c=l}return c!==void 0?c:r.nextSibling}function tN(n){var e,t,s;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(s=tN(t)))return s}return null}function Kp(n,e,t,s,r,l,c,u,h){var m,p,x,y,v,N,w,A,j,C,S,T,R,O,H,V=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(h=t.__h,u=e.__e=t.__e,e.__h=null,l=[u]),(m=Oe.__b)&&m(e);try{e:if(typeof V=="function"){if(A=e.props,j=(m=V.contextType)&&s[m.__c],C=m?j?j.props.value:m.__:s,t.__c?w=(p=e.__c=t.__c).__=p.__E:("prototype"in V&&V.prototype.render?e.__c=p=new V(A,C):(e.__c=p=new nn(A,C),p.constructor=V,p.render=aR),j&&j.sub(p),p.props=A,p.state||(p.state={}),p.context=C,p.__n=s,x=p.__d=!0,p.__h=[],p._sb=[]),p.__s==null&&(p.__s=p.state),V.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Qa({},p.__s)),Qa(p.__s,V.getDerivedStateFromProps(A,p.__s))),y=p.props,v=p.state,p.__v=e,x)V.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(V.getDerivedStateFromProps==null&&A!==y&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(A,C),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(A,p.__s,C)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(p.props=A,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(L){L&&(L.__=e)}),S=0;S<p._sb.length;S++)p.__h.push(p._sb[S]);p._sb=[],p.__h.length&&c.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(A,p.__s,C),p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(y,v,N)})}if(p.context=C,p.props=A,p.__P=n,T=Oe.__r,R=0,"prototype"in V&&V.prototype.render){for(p.state=p.__s,p.__d=!1,T&&T(e),m=p.render(p.props,p.state,p.context),O=0;O<p._sb.length;O++)p.__h.push(p._sb[O]);p._sb=[]}else do p.__d=!1,T&&T(e),m=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++R<25);p.state=p.__s,p.getChildContext!=null&&(s=Qa(Qa({},s),p.getChildContext())),x||p.getSnapshotBeforeUpdate==null||(N=p.getSnapshotBeforeUpdate(y,v)),H=m!=null&&m.type===It&&m.key==null?m.props.children:m,K1(n,Array.isArray(H)?H:[H],e,t,s,r,l,c,u,h),p.base=e.__e,e.__h=null,p.__h.length&&c.push(p),w&&(p.__E=p.__=null),p.__e=!1}else l==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=nR(t.__e,e,t,s,r,l,c,h);(m=Oe.diffed)&&m(e)}catch(L){e.__v=null,(h||l!=null)&&(e.__e=u,e.__h=!!h,l[l.indexOf(u)]=null),Oe.__e(L,e,t)}}function sN(n,e){Oe.__c&&Oe.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(s){s.call(t)})}catch(s){Oe.__e(s,t.__v)}})}function nR(n,e,t,s,r,l,c,u){var h,m,p,x=t.props,y=e.props,v=e.type,N=0;if(v==="svg"&&(r=!0),l!=null){for(;N<l.length;N++)if((h=l[N])&&"setAttribute"in h==!!v&&(v?h.localName===v:h.nodeType===3)){n=h,l[N]=null;break}}if(n==null){if(v===null)return document.createTextNode(y);n=r?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,y.is&&y),l=null,u=!1}if(v===null)x===y||u&&n.data===y||(n.data=y);else{if(l=l&&Su.call(n.childNodes),m=(x=t.props||Wd).dangerouslySetInnerHTML,p=y.dangerouslySetInnerHTML,!u){if(l!=null)for(x={},N=0;N<n.attributes.length;N++)x[n.attributes[N].name]=n.attributes[N].value;(p||m)&&(p&&(m&&p.__html==m.__html||p.__html===n.innerHTML)||(n.innerHTML=p&&p.__html||""))}if(tR(n,y,x,r,u),p)e.__k=[];else if(N=e.props.children,K1(n,Array.isArray(N)?N:[N],e,t,s,r&&v!=="foreignObject",l,c,l?l[0]:t.__k&&To(t,0),u),l!=null)for(N=l.length;N--;)l[N]!=null&&Q1(l[N]);u||("value"in y&&(N=y.value)!==void 0&&(N!==n.value||v==="progress"&&!N||v==="option"&&N!==x.value)&&Xd(n,"value",N,x.value,!1),"checked"in y&&(N=y.checked)!==void 0&&N!==n.checked&&Xd(n,"checked",N,x.checked,!1))}return n}function nN(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(s){Oe.__e(s,t)}}function aN(n,e,t){var s,r;if(Oe.unmount&&Oe.unmount(n),(s=n.ref)&&(s.current&&s.current!==n.__e||nN(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){Oe.__e(l,e)}s.base=s.__P=null,n.__c=void 0}if(s=n.__k)for(r=0;r<s.length;r++)s[r]&&aN(s[r],e,t||typeof n.type!="function");t||n.__e==null||Q1(n.__e),n.__=n.__e=n.__d=void 0}function aR(n,e,t){return this.constructor(n,t)}function Do(n,e,t){var s,r,l;Oe.__&&Oe.__(n,e),r=(s=!1)?null:e.__k,l=[],Kp(e,n=e.__k=le(It,null,[n]),r||Wd,Wd,e.ownerSVGElement!==void 0,r?null:e.firstChild?Su.call(e.childNodes):null,l,r?r.__e:e.firstChild,s),sN(l,n)}function iR(n,e){var t={__c:e="__cC"+W1++,__:n,Consumer:function(s,r){return s.children(r)},Provider:function(s){var r,l;return this.getChildContext||(r=[],(l={})[e]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&r.some(function(u){u.__e=!0,op(u)})},this.sub=function(c){r.push(c);var u=c.componentWillUnmount;c.componentWillUnmount=function(){r.splice(r.indexOf(c),1),u&&u.call(c)}}),s.children}};return t.Provider.__=t.Consumer.contextType=t}Su=X1.slice,Oe={__e:function(n,e,t,s){for(var r,l,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((l=r.constructor)&&l.getDerivedStateFromError!=null&&(r.setState(l.getDerivedStateFromError(n)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(n,s||{}),c=r.__d),c)return r.__E=r}catch(u){n=u}throw n}},G1=0,q1=function(n){return n!=null&&n.constructor===void 0},Jr=!1,nn.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Qa({},this.state),typeof n=="function"&&(n=n(Qa({},t),this.props)),n&&Qa(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),op(this))},nn.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),op(this))},nn.prototype.render=It,Di=[],Y1=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qd.__r=0,W1=0;var Yn,bm,uv,iN=[],vm=[],hv=Oe.__b,fv=Oe.__r,mv=Oe.diffed,pv=Oe.__c,gv=Oe.unmount;function rR(){for(var n;n=iN.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Od),n.__H.__h.forEach(cp),n.__H.__h=[]}catch(e){n.__H.__h=[],Oe.__e(e,n.__v)}}Oe.__b=function(n){Yn=null,hv&&hv(n)},Oe.__r=function(n){fv&&fv(n);var e=(Yn=n.__c).__H;e&&(bm===Yn?(e.__h=[],Yn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=vm,t.__N=t.i=void 0})):(e.__h.forEach(Od),e.__h.forEach(cp),e.__h=[])),bm=Yn},Oe.diffed=function(n){mv&&mv(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(iN.push(e)!==1&&uv===Oe.requestAnimationFrame||((uv=Oe.requestAnimationFrame)||lR)(rR)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==vm&&(t.__=t.__V),t.i=void 0,t.__V=vm})),bm=Yn=null},Oe.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Od),t.__h=t.__h.filter(function(s){return!s.__||cp(s)})}catch(s){e.some(function(r){r.__h&&(r.__h=[])}),e=[],Oe.__e(s,t.__v)}}),pv&&pv(n,e)},Oe.unmount=function(n){gv&&gv(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{Od(s)}catch(r){e=r}}),t.__H=void 0,e&&Oe.__e(e,t.__v))};var xv=typeof requestAnimationFrame=="function";function lR(n){var e,t=function(){clearTimeout(s),xv&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(t,100);xv&&(e=requestAnimationFrame(t))}function Od(n){var e=Yn,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Yn=e}function cp(n){var e=Yn;n.__c=n.__(),Yn=e}function oR(n,e){for(var t in e)n[t]=e[t];return n}function yv(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var s in e)if(s!=="__source"&&n[s]!==e[s])return!0;return!1}function bv(n){this.props=n}(bv.prototype=new nn).isPureReactComponent=!0,bv.prototype.shouldComponentUpdate=function(n,e){return yv(this.props,n)||yv(this.state,e)};var vv=Oe.__b;Oe.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),vv&&vv(n)};var cR=Oe.__e;Oe.__e=function(n,e,t,s){if(n.then){for(var r,l=e;l=l.__;)if((r=l.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(n,e)}cR(n,e,t,s)};var wv=Oe.unmount;function rN(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),n.__c.__H=null),(n=oR({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(s){return rN(s,e,t)})),n}function lN(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(s){return lN(s,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function wm(){this.__u=0,this.t=null,this.__b=null}function oN(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function yd(){this.u=null,this.o=null}Oe.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),wv&&wv(n)},(wm.prototype=new nn).__c=function(n,e){var t=e.__c,s=this;s.t==null&&(s.t=[]),s.t.push(t);var r=oN(s.__v),l=!1,c=function(){l||(l=!0,t.__R=null,r?r(u):u())};t.__R=c;var u=function(){if(!--s.__u){if(s.state.__a){var m=s.state.__a;s.__v.__k[0]=lN(m,m.__c.__P,m.__c.__O)}var p;for(s.setState({__a:s.__b=null});p=s.t.pop();)p.forceUpdate()}},h=e.__h===!0;s.__u++||h||s.setState({__a:s.__b=s.__v.__k[0]}),n.then(c,c)},wm.prototype.componentWillUnmount=function(){this.t=[]},wm.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=rN(this.__b,t,s.__O=s.__P)}this.__b=null}var r=e.__a&&le(It,null,n.fallback);return r&&(r.__h=null),[le(It,null,e.__a?null:n.children),r]};var Nv=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function dR(n){return this.getChildContext=function(){return n.context},n.children}function uR(n){var e=this,t=n.i;e.componentWillUnmount=function(){Do(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(s){this.childNodes.push(s),e.i.appendChild(s)},insertBefore:function(s,r){this.childNodes.push(s),e.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.i.removeChild(s)}}),Do(le(dR,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function hR(n,e){var t=le(uR,{__v:n,i:e});return t.containerInfo=e,t}(yd.prototype=new nn).__a=function(n){var e=this,t=oN(e.__v),s=e.o.get(n);return s[0]++,function(r){var l=function(){e.props.revealOrder?(s.push(r),Nv(e,n,s)):r()};t?t(l):l()}},yd.prototype.render=function(n){this.u=null,this.o=new Map;var e=Zd(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},yd.prototype.componentDidUpdate=yd.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){Nv(n,t,e)})};var fR=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,mR=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pR=typeof document<"u",gR=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};nn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(nn.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Av=Oe.event;function xR(){}function yR(){return this.cancelBubble}function bR(){return this.defaultPrevented}Oe.event=function(n){return Av&&(n=Av(n)),n.persist=xR,n.isPropagationStopped=yR,n.isDefaultPrevented=bR,n.nativeEvent=n};var jv={configurable:!0,get:function(){return this.class}},Sv=Oe.vnode;Oe.vnode=function(n){var e=n.type,t=n.props,s=t;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var l in s={},t){var c=t[l];pR&&l==="children"&&e==="noscript"||l==="value"&&"defaultValue"in t&&c==null||(l==="defaultValue"&&"value"in t&&t.value==null?l="value":l==="download"&&c===!0?c="":/ondoubleclick/i.test(l)?l="ondblclick":/^onchange(textarea|input)/i.test(l+e)&&!gR(t.type)?l="oninput":/^onfocus$/i.test(l)?l="onfocusin":/^onblur$/i.test(l)?l="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(l)?l=l.toLowerCase():r&&mR.test(l)?l=l.replace(/[A-Z0-9]/g,"-$&").toLowerCase():c===null&&(c=void 0),/^oninput$/i.test(l)&&(l=l.toLowerCase(),s[l]&&(l="oninputCapture")),s[l]=c)}e=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Zd(t.children).forEach(function(u){u.props.selected=s.value.indexOf(u.props.value)!=-1})),e=="select"&&s.defaultValue!=null&&(s.value=Zd(t.children).forEach(function(u){u.props.selected=s.multiple?s.defaultValue.indexOf(u.props.value)!=-1:s.defaultValue==u.props.value})),n.props=s,t.class!=t.className&&(jv.enumerable="className"in t,t.className!=null&&(s.class=t.className),Object.defineProperty(s,"className",jv))}n.$$typeof=fR,Sv&&Sv(n)};var Ev=Oe.__r;Oe.__r=function(n){Ev&&Ev(n),n.__c};const cN=[],dp=new Map;function dN(n){cN.push(n),dp.forEach(e=>{hN(e,n)})}function vR(n){n.isConnected&&n.getRootNode&&uN(n.getRootNode())}function uN(n){let e=dp.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=NR();t&&(e.nonce=t);const s=n===document?document.head:n,r=n===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(e,r)}dp.set(n,e),wR(e)}}function wR(n){for(const e of cN)hN(n,e)}function hN(n,e){const{sheet:t}=n,s=t.cssRules.length;e.split("}").forEach((r,l)=>{r=r.trim(),r&&t.insertRule(r+"}",s+l)})}let Nm;function NR(){return Nm===void 0&&(Nm=AR()),Nm}function AR(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&uN(document);var jR=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';dN(jR);class Jp{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:s}=this;e in s&&(t?delete s[e]:(s[e]-=1,s[e]<=0&&delete s[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function eg(n){n.parentNode&&n.parentNode.removeChild(n)}function Ns(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(SR(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function SR(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function ER(n,e){let t=n instanceof HTMLElement?[n]:n,s=[];for(let r=0;r<t.length;r+=1){let l=t[r].querySelectorAll(e);for(let c=0;c<l.length;c+=1)s.push(l[c])}return s}const _R=/(top|left|right|bottom|width|height)$/i;function yo(n,e){for(let t in e)fN(n,t,e[t])}function fN(n,e,t){t==null?n.style[e]="":typeof t=="number"&&_R.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function mN(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let _v=0;function Eu(){return _v+=1,"fc-dom-"+_v}function _u(n){n.preventDefault()}function CR(n,e){return t=>{let s=Ns(t.target,n);s&&e.call(s,t,s)}}function pN(n,e,t,s){let r=CR(t,s);return n.addEventListener(e,r),()=>{n.removeEventListener(e,r)}}function TR(n,e,t,s){let r;return pN(n,"mouseover",e,(l,c)=>{if(c!==r){r=c,t(l,c);let u=h=>{r=null,s(h,c),c.removeEventListener("mouseleave",u)};c.addEventListener("mouseleave",u)}})}const Cv=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function DR(n,e){let t=s=>{e(s),Cv.forEach(r=>{n.removeEventListener(r,t)})};Cv.forEach(s=>{n.addEventListener(s,t)})}function gN(n){return Object.assign({onClick:n},xN(n))}function xN(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let Tv=0;function Wi(){return Tv+=1,String(Tv)}function tg(){document.body.classList.add("fc-not-allowed")}function sg(){document.body.classList.remove("fc-not-allowed")}function RR(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",_u)}function kR(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",_u)}function MR(n){n.addEventListener("contextmenu",_u)}function LR(n){n.removeEventListener("contextmenu",_u)}function OR(n){let e=[],t=[],s,r;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),s=0;s<t.length;s+=1)r=t[s],typeof r=="string"?e.push(r.charAt(0)==="-"?{field:r.substring(1),order:-1}:{field:r,order:1}):typeof r=="function"&&e.push({func:r});return e}function PR(n,e,t){let s,r;for(s=0;s<t.length;s+=1)if(r=IR(n,e,t[s]),r)return r;return 0}function IR(n,e,t){return t.func?t.func(n,e):BR(n[t.field],e[t.field])*(t.order||1)}function BR(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function Am(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function bo(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((s,r,l)=>s.replace("$"+l,r||""),n):t}function HR(n,e){return n-e}function jm(n){return n%1===0}function zR(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const FR=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function ht(n,e){return typeof n=="string"?UR(n):typeof n=="object"&&n?Dv(n):typeof n=="number"?Dv({[e||"milliseconds"]:n}):null}function UR(n){let e=FR.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function Dv(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function $R(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function VR(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function GR(n){return Wr(n)/365}function qR(n){return Wr(n)/30}function Wr(n){return Ro(n)/864e5}function Ro(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function up(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function si(n,e,t){if(n===e)return!0;let s=n.length,r;if(s!==e.length)return!1;for(r=0;r<s;r+=1)if(!(t?t(n[r],e[r]):n[r]===e[r]))return!1;return!0}const YR=["sun","mon","tue","wed","thu","fri","sat"];function Rv(n,e){let t=Za(n);return t[2]+=e*7,zs(t)}function ls(n,e){let t=Za(n);return t[2]+=e,zs(t)}function ni(n,e){let t=Za(n);return t[6]+=e,zs(t)}function WR(n,e){return ol(n,e)/7}function ol(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function XR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function QR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function ZR(n,e){return(e.valueOf()-n.valueOf())/1e3}function KR(n,e){let t=Ct(n),s=Ct(e);return{years:0,months:0,days:Math.round(ol(t,s)),milliseconds:e.valueOf()-s.valueOf()-(n.valueOf()-t.valueOf())}}function JR(n,e){let t=Kd(n,e);return t!==null&&t%7===0?t/7:null}function Kd(n,e){return Ka(n)===Ka(e)?Math.round(ol(n,e)):null}function Ct(n){return zs([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function ek(n){return zs([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function tk(n){return zs([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function sk(n){return zs([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function nk(n,e,t){let s=n.getUTCFullYear(),r=Sm(n,s,e,t);if(r<1)return Sm(n,s-1,e,t);let l=Sm(n,s+1,e,t);return l>=1?Math.min(r,l):r}function Sm(n,e,t,s){let r=zs([e,0,1+ak(e,t,s)]),l=Ct(n),c=Math.round(ol(r,l));return Math.floor(c/7)+1}function ak(n,e,t){let s=7+e-t;return-((7+zs([n,0,s]).getUTCDay()-e)%7)+s-1}function kv(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function Mv(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Za(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function zs(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function yN(n){return!isNaN(n.valueOf())}function Ka(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function ik(n,e,t=!1){let s=n.toISOString();return s=s.replace(".000",""),t&&(s=s.replace("T00:00:00Z","")),s.length>10&&(e==null?s=s.replace("Z",""):e!==0&&(s=s.replace("Z",ag(e,!0)))),s}function ng(n){return n.toISOString().replace(/T.*$/,"")}function rk(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function ag(n,e=!1){let t=n<0?"-":"+",s=Math.abs(n),r=Math.floor(s/60),l=Math.round(s%60);return e?`${t+Am(r,2)}:${Am(l,2)}`:`GMT${t}${r}${l?`:${Am(l,2)}`:""}`}function ct(n,e,t){let s,r;return function(...l){if(!s)r=n.apply(this,l);else if(!si(s,l)){let c=n.apply(this,l);(!e||!e(c,r))&&(r=c)}return s=l,r}}function Pd(n,e,t){let s,r;return l=>(s?Cn(s,l)||(r=n.call(this,l)):r=n.call(this,l),s=l,r)}const Em={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Jd={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},bd=/\s*([ap])\.?m\.?/i,lk=/,/g,ok=/\s+/g,ck=/\u200e/g,dk=/UTC|GMT/;class uk{constructor(e){let t={},s={},r=9;for(let l in e)l in Em?(s[l]=e[l],Em[l]<9&&(r=Math.min(Em[l],r))):(t[l]=e[l],l in Jd&&(r=Math.min(Jd[l],r)));this.standardDateProps=t,this.extendedSettings=s,this.smallestUnitNum=r,this.buildFormattingFunc=ct(Lv)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,s,r){let{standardDateProps:l,extendedSettings:c}=this,u=xk(e.marker,t.marker,s.calendarSystem);if(!u)return this.format(e,s);let h=u;h>1&&(l.year==="numeric"||l.year==="2-digit")&&(l.month==="numeric"||l.month==="2-digit")&&(l.day==="numeric"||l.day==="2-digit")&&(h=1);let m=this.format(e,s),p=this.format(t,s);if(m===p)return m;let x=yk(l,h),y=Lv(x,c,s),v=y(e),N=y(t),w=bk(m,v,p,N),A=c.separator||r||s.defaultSeparator||"";return w?w.before+v+A+N+w.after:m+A+p}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Lv(n,e,t){let s=Object.keys(n).length;return s===1&&n.timeZoneName==="short"?r=>ag(r.timeZoneOffset):s===0&&e.week?r=>gk(t.computeWeekNumber(r.marker),t.weekText,t.weekTextLong,t.locale,e.week):hk(n,e,t)}function hk(n,e,t){n=Object.assign({},n),e=Object.assign({},e),fk(n,e),n.timeZone="UTC";let s=new Intl.DateTimeFormat(t.locale.codes,n),r;if(e.omitZeroMinute){let l=Object.assign({},n);delete l.minute,r=new Intl.DateTimeFormat(t.locale.codes,l)}return l=>{let{marker:c}=l,u;r&&!c.getUTCMinutes()?u=r:u=s;let h=u.format(c);return mk(h,l,n,e,t)}}function fk(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function mk(n,e,t,s,r){return n=n.replace(ck,""),t.timeZoneName==="short"&&(n=pk(n,r.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":ag(e.timeZoneOffset))),s.omitCommas&&(n=n.replace(lk,"").trim()),s.omitZeroMinute&&(n=n.replace(":00","")),s.meridiem===!1?n=n.replace(bd,"").trim():s.meridiem==="narrow"?n=n.replace(bd,(l,c)=>c.toLocaleLowerCase()):s.meridiem==="short"?n=n.replace(bd,(l,c)=>`${c.toLocaleLowerCase()}m`):s.meridiem==="lowercase"&&(n=n.replace(bd,l=>l.toLocaleLowerCase())),n=n.replace(ok," "),n=n.trim(),n}function pk(n,e){let t=!1;return n=n.replace(dk,()=>(t=!0,e)),t||(n+=` ${e}`),n}function gk(n,e,t,s,r){let l=[];return r==="long"?l.push(t):(r==="short"||r==="narrow")&&l.push(e),(r==="long"||r==="short")&&l.push(" "),l.push(s.simpleNumberFormat.format(n)),s.options.direction==="rtl"&&l.reverse(),l.join("")}function xk(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Ka(n)!==Ka(e)?1:0}function yk(n,e){let t={};for(let s in n)(!(s in Jd)||Jd[s]<=e)&&(t[s]=n[s]);return t}function bk(n,e,t,s){let r=0;for(;r<n.length;){let l=n.indexOf(e,r);if(l===-1)break;let c=n.substr(0,l);r=l+e.length;let u=n.substr(r),h=0;for(;h<t.length;){let m=t.indexOf(s,h);if(m===-1)break;let p=t.substr(0,m);h=m+s.length;let x=t.substr(h);if(c===p&&u===x)return{before:c,after:u}}}return null}function Ov(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function eu(n,e,t,s){let r=Ov(n,t.calendarSystem),l=e?Ov(e,t.calendarSystem):null;return{date:r,start:r,end:l,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:s||t.defaultSeparator}}class vk{constructor(e){this.cmdStr=e}format(e,t,s){return t.cmdFormatter(this.cmdStr,eu(e,null,t,s))}formatRange(e,t,s,r){return s.cmdFormatter(this.cmdStr,eu(e,t,s,r))}}class wk{constructor(e){this.func=e}format(e,t,s){return this.func(eu(e,null,t,s))}formatRange(e,t,s,r){return this.func(eu(e,t,s,r))}}function rs(n){return typeof n=="object"&&n?new uk(n):typeof n=="string"?new vk(n):typeof n=="function"?new wk(n):null}const Pv={navLinkDayClick:ie,navLinkWeekClick:ie,duration:ht,bootstrapFontAwesome:ie,buttonIcons:ie,customButtons:ie,defaultAllDayEventDuration:ht,defaultTimedEventDuration:ht,nextDayThreshold:ht,scrollTime:ht,scrollTimeReset:Boolean,slotMinTime:ht,slotMaxTime:ht,dayPopoverFormat:rs,slotDuration:ht,snapDuration:ht,headerToolbar:ie,footerToolbar:ie,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:rs,dayHeaderClassNames:ie,dayHeaderContent:ie,dayHeaderDidMount:ie,dayHeaderWillUnmount:ie,dayCellClassNames:ie,dayCellContent:ie,dayCellDidMount:ie,dayCellWillUnmount:ie,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:ie,weekNumbers:Boolean,weekNumberClassNames:ie,weekNumberContent:ie,weekNumberDidMount:ie,weekNumberWillUnmount:ie,editable:Boolean,viewClassNames:ie,viewDidMount:ie,viewWillUnmount:ie,nowIndicator:Boolean,nowIndicatorSnap:ie,nowIndicatorClassNames:ie,nowIndicatorContent:ie,nowIndicatorDidMount:ie,nowIndicatorWillUnmount:ie,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:ie,locale:ie,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:ie,eventOrder:OR,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:ie,contentHeight:ie,direction:String,weekNumberFormat:rs,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:ie,initialDate:ie,now:ie,eventDataTransform:ie,stickyHeaderDates:ie,stickyFooterScrollbar:ie,viewHeight:ie,defaultAllDay:Boolean,eventSourceFailure:ie,eventSourceSuccess:ie,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:ie,eventConstraint:ie,eventAllow:ie,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:ie,eventContent:ie,eventDidMount:ie,eventWillUnmount:ie,selectConstraint:ie,selectOverlap:ie,selectAllow:ie,droppable:Boolean,unselectCancel:String,slotLabelFormat:ie,slotLaneClassNames:ie,slotLaneContent:ie,slotLaneDidMount:ie,slotLaneWillUnmount:ie,slotLabelClassNames:ie,slotLabelContent:ie,slotLabelDidMount:ie,slotLabelWillUnmount:ie,dayMaxEvents:ie,dayMaxEventRows:ie,dayMinWidth:Number,slotLabelInterval:ht,allDayText:String,allDayClassNames:ie,allDayContent:ie,allDayDidMount:ie,allDayWillUnmount:ie,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:rs,rerenderDelay:Number,moreLinkText:ie,moreLinkHint:ie,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:ie,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:ht,hiddenDays:ie,fixedWeekCount:Boolean,validRange:ie,visibleRange:ie,titleFormat:ie,eventInteractive:Boolean,noEventsText:String,viewHint:ie,navLinkHint:ie,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:ie,moreLinkClassNames:ie,moreLinkContent:ie,moreLinkDidMount:ie,moreLinkWillUnmount:ie,monthStartFormat:rs,handleCustomRendering:ie,customRenderingMetaMap:ie,customRenderingReplaces:Boolean},vo={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Iv={datesSet:ie,eventsSet:ie,eventAdd:ie,eventChange:ie,eventRemove:ie,windowResize:ie,eventClick:ie,eventMouseEnter:ie,eventMouseLeave:ie,select:ie,unselect:ie,loading:ie,_unmount:ie,_beforeprint:ie,_afterprint:ie,_noEventDrop:ie,_noEventResize:ie,_resize:ie,_scrollRequest:ie},Bv={buttonText:ie,buttonHints:ie,views:ie,plugins:ie,initialEvents:ie,events:ie,eventSources:ie},_i={headerToolbar:Ci,footerToolbar:Ci,buttonText:Ci,buttonHints:Ci,buttonIcons:Ci,dateIncrement:Ci,plugins:vd,events:vd,eventSources:vd,resources:vd};function Ci(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?Cn(n,e):n===e}function vd(n,e){return Array.isArray(n)&&Array.isArray(e)?si(n,e):n===e}const Nk={type:String,component:ie,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:ie,usesMinMaxTime:Boolean,classNames:ie,content:ie,didMount:ie,willUnmount:ie};function _m(n){return rg(n,_i)}function ig(n,e){let t={},s={};for(let r in e)r in n&&(t[r]=e[r](n[r]));for(let r in n)r in e||(s[r]=n[r]);return{refined:t,extra:s}}function ie(n){return n}const{hasOwnProperty:tu}=Object.prototype;function rg(n,e){let t={};if(e){for(let s in e)if(e[s]===Ci){let r=[];for(let l=n.length-1;l>=0;l-=1){let c=n[l][s];if(typeof c=="object"&&c)r.unshift(c);else if(c!==void 0){t[s]=c;break}}r.length&&(t[s]=rg(r))}}for(let s=n.length-1;s>=0;s-=1){let r=n[s];for(let l in r)l in t||(t[l]=r[l])}return t}function Vi(n,e){let t={};for(let s in n)e(n[s],s)&&(t[s]=n[s]);return t}function Xi(n,e){let t={};for(let s in n)t[s]=e(n[s],s);return t}function bN(n){let e={};for(let t of n)e[t]=!0;return e}function lg(n){let e=[];for(let t in n)e.push(n[t]);return e}function Cn(n,e){if(n===e)return!0;for(let t in n)if(tu.call(n,t)&&!(t in e))return!1;for(let t in e)if(tu.call(e,t)&&n[t]!==e[t])return!1;return!0}const Ak=/^on[A-Z]/;function jk(n,e){const t=Sk(n,e);for(let s of t)if(!Ak.test(s))return!1;return!0}function Sk(n,e){let t=[];for(let s in n)tu.call(n,s)&&(s in e||t.push(s));for(let s in e)tu.call(e,s)&&n[s]!==e[s]&&t.push(s);return t}function Cm(n,e,t={}){if(n===e)return!0;for(let s in e)if(!(s in n&&Ek(n[s],e[s],t[s])))return!1;for(let s in n)if(!(s in e))return!1;return!0}function Ek(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function _k(n,e=0,t,s=1){let r=[];t==null&&(t=Object.keys(n).length);for(let l=e;l<t;l+=s){let c=n[l];c!==void 0&&r.push(c)}return r}let vN={};function Ck(n,e){vN[n]=e}function Tk(n){return new vN[n]}class Dk{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return zs(e)}markerToArray(e){return Za(e)}}Ck("gregory",Dk);const Rk=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function kk(n){let e=Rk.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(yN(t)){let s=null;return e[13]&&(s=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:s}}}return null}class Mk{constructor(e){let t=this.timeZone=e.timeZone,s=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!s||this.namedTimeZoneImpl),this.calendarSystem=Tk(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):zs(kv(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=zs(e)),t===null||!yN(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=kk(e);if(t===null)return null;let{marker:s}=t,r=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-t.timeZoneOffset*60*1e3):r=t.timeZoneOffset),{marker:s,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let s=this.calendarSystem.markerToArray(e);return s[0]+=t.years,s[1]+=t.months,s[2]+=t.days,s[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(e,t){let s=this.calendarSystem.markerToArray(e);return s[0]-=t.years,s[1]-=t.months,s[2]-=t.days,s[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(e,t){let s=this.calendarSystem.markerToArray(e);return s[0]+=t,this.calendarSystem.arrayToMarker(s)}addMonths(e,t){let s=this.calendarSystem.markerToArray(e);return s[1]+=t,this.calendarSystem.arrayToMarker(s)}diffWholeYears(e,t){let{calendarSystem:s}=this;return Ka(e)===Ka(t)&&s.getMarkerDay(e)===s.getMarkerDay(t)&&s.getMarkerMonth(e)===s.getMarkerMonth(t)?s.getMarkerYear(t)-s.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:s}=this;return Ka(e)===Ka(t)&&s.getMarkerDay(e)===s.getMarkerDay(t)?s.getMarkerMonth(t)-s.getMarkerMonth(e)+(s.getMarkerYear(t)-s.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let s=this.diffWholeYears(e,t);return s!==null?{unit:"year",value:s}:(s=this.diffWholeMonths(e,t),s!==null?{unit:"month",value:s}:(s=JR(e,t),s!==null?{unit:"week",value:s}:(s=Kd(e,t),s!==null?{unit:"day",value:s}:(s=XR(e,t),jm(s)?{unit:"hour",value:s}:(s=QR(e,t),jm(s)?{unit:"minute",value:s}:(s=ZR(e,t),jm(s)?{unit:"second",value:s}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,s){let r;return s.years&&(r=this.diffWholeYears(e,t),r!==null)?r/GR(s):s.months&&(r=this.diffWholeMonths(e,t),r!==null)?r/qR(s):s.days&&(r=Kd(e,t),r!==null)?r/Wr(s):(t.valueOf()-e.valueOf())/Ro(s)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?Ct(e):t==="hour"?ek(e):t==="minute"?tk(e):t==="second"?sk(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):nk(e,this.weekDow,this.weekDoy)}format(e,t,s={}){return t.format({marker:e,timeZoneOffset:s.forcedTzo!=null?s.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,s,r={}){return r.isEndExclusive&&(t=ni(t,-1)),s.formatRange({marker:e,timeZoneOffset:r.forcedStartTzo!=null?r.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:r.forcedEndTzo!=null?r.forcedEndTzo:this.offsetForMarker(t)},this,r.defaultSeparator)}formatIso(e,t={}){let s=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?s=t.forcedTzo:s=this.offsetForMarker(e)),ik(e,s,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?zs(kv(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):zs(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Mv(Za(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Za(e)):null}toDate(e,t){return this.timeZone==="local"?Mv(Za(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Za(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Wo{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,s;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(s in e)t[s]=this.applyIconOverridePrefix(e[s]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let s;return t&&this.rtlIconClasses?s=this.rtlIconClasses[e]||this.iconClasses[e]:s=this.iconClasses[e],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Wo.prototype.classes={};Wo.prototype.iconClasses={};Wo.prototype.baseIconClass="";Wo.prototype.iconOverridePrefix="";function su(n){n();let e=Oe.debounceRendering,t=[];function s(r){t.push(r)}for(Oe.debounceRendering=s,Do(le(Lk,{}),document.createElement("div"));t.length;)t.shift()();Oe.debounceRendering=e}class Lk extends nn{render(){return le("div",{})}componentDidMount(){this.setState({})}}function wN(n){let e=iR(n),t=e.Provider;return e.Provider=function(){let s=!this.getChildContext,r=t.apply(this,arguments);if(s){let l=[];this.shouldComponentUpdate=c=>{this.props.value!==c.value&&l.forEach(u=>{u.context=c.value,u.forceUpdate()})},this.sub=c=>{l.push(c);let u=c.componentWillUnmount;c.componentWillUnmount=()=>{l.splice(l.indexOf(c),1),u&&u.call(c)}}}return r},e}class Ok{constructor(e,t,s,r){this.execFunc=e,this.emitter=t,this.scrollTime=s,this.scrollTimeReset=r,this.handleScrollRequest=l=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},l),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Qi=wN({});function Pk(n,e,t,s,r,l,c,u,h,m,p,x,y,v){return{dateEnv:r,nowManager:l,options:t,pluginHooks:u,emitter:p,dispatch:h,getCurrentData:m,calendarApi:x,viewSpec:n,viewApi:e,dateProfileGenerator:s,theme:c,isRtl:t.direction==="rtl",addResizeHandler(N){p.on("_resize",N)},removeResizeHandler(N){p.off("_resize",N)},createScrollResponder(N){return new Ok(N,p,ht(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:y,unregisterInteractiveComponent:v}}class Zi extends nn{shouldComponentUpdate(e,t){return!Cm(this.props,e,this.propEquality)||!Cm(this.state,t,this.stateEquality)}safeSetState(e){Cm(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Zi.addPropsEquality=Ik;Zi.addStateEquality=Bk;Zi.contextType=Qi;Zi.prototype.propEquality={};Zi.prototype.stateEquality={};class Lt extends Zi{}Lt.contextType=Qi;function Ik(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function Bk(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function Qn(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class og extends Lt{constructor(){super(...arguments),this.id=Wi(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:s}=this.props;(!t.customRenderingReplaces||!hp(s,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Qn(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:s}=t,{customGenerator:r,defaultGenerator:l,renderProps:c}=e,u=NN(e,[],this.handleEl);let h=!1,m,p=[],x;if(r!=null){const y=typeof r=="function"?r(c,le):r;if(y===!0)h=!0;else{const v=y&&typeof y=="object";v&&"html"in y?u.dangerouslySetInnerHTML={__html:y.html}:v&&"domNodes"in y?p=Array.prototype.slice.call(y.domNodes):(v?q1(y):typeof y!="function")?m=y:x=y}}else h=!hp(e.generatorName,s);return h&&l&&(m=l(c)),this.queuedDomNodes=p,this.currentGeneratorMeta=x,le(e.elTag,u,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:s,context:r}=this,{handleCustomRendering:l,customRenderingMetaMap:c}=r.options;if(l){const u=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:c?.[s.generatorName];u&&l(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:u},s),{elClasses:(s.elClasses||[]).filter(Hk)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,s=this.base;if(!si(e,t)){t.forEach(eg);for(let r of e)s.appendChild(r);this.currentDomNodes=e}}}og.addPropsEquality({elClasses:si,elStyle:Cn,elAttrs:jk,renderProps:Cn});function hp(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function NN(n,e,t){const s=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(s.className=(n.elClasses||[]).concat(e||[]).concat(s.className||[]).filter(Boolean).join(" ")),n.elStyle&&(s.style=n.elStyle),s}function Hk(n){return!!n}const AN=wN(0);class wa extends nn{constructor(){super(...arguments),this.InnerContent=zk.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Qn(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=Fk(e.classNameGenerator,e.renderProps);if(e.children){const s=NN(e,t,this.handleEl),r=e.children(this.InnerContent,e.renderProps,s);return e.elTag?le(e.elTag,s,r):r}else return le(og,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}wa.contextType=AN;function zk(n,e){const t=n.props;return le(og,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function Fk(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class Hv extends Lt{render(){let{props:e,context:t}=this,{options:s}=t,r={view:t.viewApi};return le(wa,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...jN(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:r,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount},()=>e.children)}}function jN(n){return[`fc-${n.type}-view`,"fc-view"]}function Uk(n,e){let t=null,s=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(s=e.createMarker(n.end)),!t&&!s||t&&s&&s<t?null:{start:t,end:s}}function zv(n,e){let t=[],{start:s}=e,r,l;for(n.sort($k),r=0;r<n.length;r+=1)l=n[r],l.start>s&&t.push({start:s,end:l.start}),l.end>s&&(s=l.end);return s<e.end&&t.push({start:s,end:e.end}),t}function $k(n,e){return n.start.valueOf()-e.start.valueOf()}function el(n,e){let{start:t,end:s}=n,r=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(s===null?s=e.end:s=new Date(Math.min(s.valueOf(),e.end.valueOf()))),(t===null||s===null||t<s)&&(r={start:t,end:s}),r}function Vk(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function cg(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function Cu(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function Ja(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function Gk(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function SN(n){let e=Math.floor(ol(n.start,n.end))||1,t=Ct(n.start),s=ls(t,e);return{start:t,end:s}}function EN(n,e=ht(0)){let t=null,s=null;if(n.end){s=Ct(n.end);let r=n.end.valueOf()-s.valueOf();r&&r>=Ro(e)&&(s=ls(s,1))}return n.start&&(t=Ct(n.start),s&&s<=t&&(s=ls(t,1))),{start:t,end:s}}function Gr(n,e,t,s){return s==="year"?ht(t.diffWholeYears(n,e),"year"):s==="month"?ht(t.diffWholeMonths(n,e),"month"):KR(n,e)}class _N{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,s){let{dateEnv:r}=this.props,l=r.subtract(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(l,-1,s)}buildNext(e,t,s){let{dateEnv:r}=this.props,l=r.add(r.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(l,1,s)}build(e,t,s=!0){let{props:r}=this,l,c,u,h,m,p;return l=this.buildValidRange(),l=this.trimHiddenDays(l),s&&(e=Gk(e,l)),c=this.buildCurrentRangeInfo(e,t),u=/^(year|month|week|day)$/.test(c.unit),h=this.buildRenderRange(this.trimHiddenDays(c.range),c.unit,u),h=this.trimHiddenDays(h),m=h,r.showNonCurrentDates||(m=el(m,c.range)),m=this.adjustActiveRange(m),m=el(m,l),p=cg(c.range,l),Ja(h,e)||(e=h.start),{currentDate:e,validRange:l,currentRange:c.range,currentRangeUnit:c.unit,isRangeAllDay:u,activeRange:m,renderRange:h,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:p,dateIncrement:this.buildDateIncrement(c.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:s}=this,r=null,l=null,c=null,u;return s.duration?(r=s.duration,l=s.durationUnit,c=this.buildRangeFromDuration(e,t,r,l)):(u=this.props.dayCount)?(l="day",c=this.buildRangeFromDayCount(e,t,u)):(c=this.buildCustomVisibleRange(e))?l=s.dateEnv.greatestWholeUnit(c.start,c.end).unit:(r=this.getFallbackDuration(),l=up(r).unit,c=this.buildRangeFromDuration(e,t,r,l)),{duration:r,unit:l,range:c}}getFallbackDuration(){return ht({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:s,slotMinTime:r,slotMaxTime:l}=this.props,{start:c,end:u}=e;return s&&(Wr(r)<0&&(c=Ct(c),c=t.add(c,r)),Wr(l)>1&&(u=Ct(u),u=ls(u,-1),u=t.add(u,l))),{start:c,end:u}}buildRangeFromDuration(e,t,s,r){let{dateEnv:l,dateAlignment:c}=this.props,u,h,m;if(!c){let{dateIncrement:x}=this.props;x&&Ro(x)<Ro(s)?c=up(x).unit:c=r}Wr(s)<=1&&this.isHiddenDay(u)&&(u=this.skipHiddenDays(u,t),u=Ct(u));function p(){u=l.startOf(e,c),h=l.add(u,s),m={start:u,end:h}}return p(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,t),p()),m}buildRangeFromDayCount(e,t,s){let{dateEnv:r,dateAlignment:l}=this.props,c=0,u=e,h;l&&(u=r.startOf(u,l)),u=Ct(u),u=this.skipHiddenDays(u,t),h=u;do h=ls(h,1),this.isHiddenDay(h)||(c+=1);while(c<s);return{start:u,end:h}}buildCustomVisibleRange(e){let{props:t}=this,s=t.visibleRangeInput,r=typeof s=="function"?s.call(t.calendarApi,t.dateEnv.toDate(e)):s,l=this.refineRange(r);return l&&(l.start==null||l.end==null)?null:l}buildRenderRange(e,t,s){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,s;return t||((s=this.props.dateAlignment)?ht(1,s):e||ht({days:1}))}refineRange(e){if(e){let t=Uk(e,this.props.dateEnv);return t&&(t=EN(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],s=0,r;for(this.props.weekends===!1&&e.push(0,6),r=0;r<7;r+=1)(t[r]=e.indexOf(r)!==-1)||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:s}=e;return t&&(t=this.skipHiddenDays(t)),s&&(s=this.skipHiddenDays(s,-1,!0)),t==null||s==null||t<s?{start:t,end:s}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,s=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(s?t:0)+7)%7];)e=ls(e,t);return e}}function dg(n,e,t,s){return{instanceId:Wi(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:s??null}}function qk(n,e,t,s){for(let r=0;r<s.length;r+=1){let l=s[r].parse(n,t);if(l){let{allDay:c}=n;return c==null&&(c=e,c==null&&(c=l.allDayGuess,c==null&&(c=!1))),{allDay:c,duration:l.duration,typeData:l.typeData,typeId:r}}}return null}function Gi(n,e,t){let{dateEnv:s,pluginHooks:r,options:l}=t,{defs:c,instances:u}=n;u=Vi(u,h=>!c[h.defId].recurringDef);for(let h in c){let m=c[h];if(m.recurringDef){let{duration:p}=m.recurringDef;p||(p=m.allDay?l.defaultAllDayEventDuration:l.defaultTimedEventDuration);let x=Yk(m,p,e,s,r.recurringTypes);for(let y of x){let v=dg(h,{start:y,end:s.add(y,p)});u[v.instanceId]=v}}}return{defs:c,instances:u}}function Yk(n,e,t,s,r){let c=r[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:s.subtract(t.start,e),end:t.end},s);return n.allDay&&(c=c.map(Ct)),c}const Id={id:String,groupId:String,title:String,url:String,interactive:Boolean},CN={start:ie,end:ie,date:ie,allDay:Boolean},Wk=Object.assign(Object.assign(Object.assign({},Id),CN),{extendedProps:ie});function TN(n,e,t,s,r=ug(t),l,c){let{refined:u,extra:h}=DN(n,t,r),m=Qk(e,t),p=qk(u,m,t.dateEnv,t.pluginHooks.recurringTypes);if(p){let y=fp(u,h,e?e.sourceId:"",p.allDay,!!p.duration,t,l);return y.recurringDef={typeId:p.typeId,typeData:p.typeData,duration:p.duration},{def:y,instance:null}}let x=Xk(u,m,t,s);if(x){let y=fp(u,h,e?e.sourceId:"",x.allDay,x.hasEnd,t,l),v=dg(y.defId,x.range,x.forcedStartTzo,x.forcedEndTzo);return c&&y.publicId&&c[y.publicId]&&(v.instanceId=c[y.publicId]),{def:y,instance:v}}return null}function DN(n,e,t=ug(e)){return ig(n,t)}function ug(n){return Object.assign(Object.assign(Object.assign({},nu),Wk),n.pluginHooks.eventRefiners)}function fp(n,e,t,s,r,l,c){let u={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(c&&n.id?c[n.id]:"")||Wi(),sourceId:t,allDay:s,hasEnd:r,interactive:n.interactive,ui:au(n,l),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let h of l.pluginHooks.eventDefMemberAdders)Object.assign(u,h(n));return Object.freeze(u.ui.classNames),Object.freeze(u.extendedProps),u}function Xk(n,e,t,s){let{allDay:r}=n,l,c=null,u=!1,h,m=null,p=n.start!=null?n.start:n.date;if(l=t.dateEnv.createMarkerMeta(p),l)c=l.marker;else if(!s)return null;return n.end!=null&&(h=t.dateEnv.createMarkerMeta(n.end)),r==null&&(e!=null?r=e:r=(!l||l.isTimeUnspecified)&&(!h||h.isTimeUnspecified)),r&&c&&(c=Ct(c)),h&&(m=h.marker,r&&(m=Ct(m)),c&&m<=c&&(m=null)),m?u=!0:s||(u=t.options.forceEventDuration||!1,m=t.dateEnv.add(c,r?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:r,hasEnd:u,range:{start:c,end:m},forcedStartTzo:l?l.forcedTzo:null,forcedEndTzo:h?h.forcedTzo:null}}function Qk(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function ko(n,e,t,s,r,l){let c=Sn(),u=ug(t);for(let h of n){let m=TN(h,e,t,s,u,r,l);m&&mp(m,c)}return c}function mp(n,e=Sn()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function hg(n,e){let t=n.instances[e];if(t){let s=n.defs[t.defId],r=Tu(n,l=>Zk(s,l));return r.defs[s.defId]=s,r.instances[t.instanceId]=t,r}return Sn()}function Zk(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function Sn(){return{defs:{},instances:{}}}function fg(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Tu(n,e){let t=Vi(n.defs,e),s=Vi(n.instances,r=>t[r.defId]);return{defs:t,instances:s}}function Kk(n,e){let{defs:t,instances:s}=n,r={},l={};for(let c in t)e.defs[c]||(r[c]=t[c]);for(let c in s)!e.instances[c]&&r[s[c].defId]&&(l[c]=s[c]);return{defs:r,instances:l}}function Jk(n,e){return Array.isArray(n)?ko(n,null,e,!0):typeof n=="object"&&n?ko([n],null,e,!0):n!=null?String(n):null}function Fv(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const nu={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:ie,overlap:ie,allow:ie,className:Fv,classNames:Fv,color:String,backgroundColor:String,borderColor:String,textColor:String},eM={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function au(n,e){let t=Jk(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function tM(n){return n.reduce(sM,eM)}function sM(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const nM={id:String,defaultAllDay:Boolean,url:String,format:String,events:ie,eventDataTransform:ie,success:ie,failure:ie};function RN(n,e,t=kN(e)){let s;if(typeof n=="string"?s={url:n}:typeof n=="function"||Array.isArray(n)?s={events:n}:typeof n=="object"&&n&&(s=n),s){let{refined:r,extra:l}=ig(s,t),c=aM(r,e);if(c)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:Wi(),sourceDefId:c.sourceDefId,meta:c.meta,ui:au(r,e),extendedProps:l}}return null}function kN(n){return Object.assign(Object.assign(Object.assign({},nu),nM),n.pluginHooks.eventSourceRefiners)}function aM(n,e){let t=e.pluginHooks.eventSourceDefs;for(let s=t.length-1;s>=0;s-=1){let l=t[s].parseMeta(n);if(l)return{sourceDefId:s,meta:l}}return null}function iM(n,e,t,s,r){switch(e.type){case"RECEIVE_EVENTS":return rM(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,r);case"RESET_RAW_EVENTS":return lM(n,t[e.sourceId],e.rawEvents,s.activeRange,r);case"ADD_EVENTS":return oM(n,e.eventStore,s?s.activeRange:null,r);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return fg(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?Gi(n,s.activeRange,r):n;case"REMOVE_EVENTS":return Kk(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return LN(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Tu(n,l=>!l.sourceId);case"REMOVE_ALL_EVENTS":return Sn();default:return n}}function rM(n,e,t,s,r,l){if(e&&t===e.latestFetchId){let c=ko(MN(r,e,l),e,l);return s&&(c=Gi(c,s,l)),fg(LN(n,e.sourceId),c)}return n}function lM(n,e,t,s,r){const{defIdMap:l,instanceIdMap:c}=dM(n);let u=ko(MN(t,e,r),e,r,!1,l,c);return Gi(u,s,r)}function MN(n,e,t){let s=t.options.eventDataTransform,r=e?e.eventDataTransform:null;return r&&(n=Uv(n,r)),s&&(n=Uv(n,s)),n}function Uv(n,e){let t;if(!e)t=n;else{t=[];for(let s of n){let r=e(s);r?t.push(r):r==null&&t.push(s)}}return t}function oM(n,e,t,s){return t&&(e=Gi(e,t,s)),fg(n,e)}function $v(n,e,t){let{defs:s}=n,r=Xi(n.instances,l=>s[l.defId].allDay?l:Object.assign(Object.assign({},l),{range:{start:t.createMarker(e.toDate(l.range.start,l.forcedStartTzo)),end:t.createMarker(e.toDate(l.range.end,l.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:l.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:l.forcedEndTzo}));return{defs:s,instances:r}}function LN(n,e){return Tu(n,t=>t.sourceId!==e)}function cM(n,e){return{defs:n.defs,instances:Vi(n.instances,t=>!e[t.instanceId])}}function dM(n){const{defs:e,instances:t}=n,s={},r={};for(let l in e){const c=e[l],{publicId:u}=c;u&&(s[u]=l)}for(let l in t){const c=t[l],u=e[c.defId],{publicId:h}=u;h&&(r[h]=l)}return{defIdMap:s,instanceIdMap:r}}class Du{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){uM(this.handlers,e,t)}off(e,t){hM(this.handlers,e,t)}trigger(e,...t){let s=this.handlers[e]||[],r=this.options&&this.options[e],l=[].concat(r||[],s);for(let c of l)c.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function uM(n,e,t){(n[e]||(n[e]=[])).push(t)}function hM(n,e,t){t?n[e]&&(n[e]=n[e].filter(s=>s!==t)):delete n[e]}const fM={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function mM(n,e){return ko(pM(n),null,e)}function pM(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},fM),t)),e}function ON(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},mg(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function gM(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function mg(n,e){let t={};for(let s of e.pluginHooks.dateSpanTransforms)Object.assign(t,s(n,e));return Object.assign(t,RM(n,e.dateEnv)),t}function Vv(n,e,t){let{dateEnv:s,options:r}=t,l=e;return n?(l=Ct(l),l=s.add(l,r.defaultAllDayEventDuration)):l=s.add(l,r.defaultTimedEventDuration),l}function pg(n,e,t,s){let r=iu(n.defs,e),l=Sn();for(let c in n.defs){let u=n.defs[c];l.defs[c]=xM(u,r[c],t,s)}for(let c in n.instances){let u=n.instances[c],h=l.defs[u.defId];l.instances[c]=yM(u,h,r[u.defId],t,s)}return l}function xM(n,e,t,s){let r=t.standardProps||{};r.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(r.hasEnd=!0);let l=Object.assign(Object.assign(Object.assign({},n),r),{ui:Object.assign(Object.assign({},n.ui),r.ui)});t.extendedProps&&(l.extendedProps=Object.assign(Object.assign({},l.extendedProps),t.extendedProps));for(let c of s.pluginHooks.eventDefMutationAppliers)c(l,t,s);return!l.hasEnd&&s.options.forceEventDuration&&(l.hasEnd=!0),l}function yM(n,e,t,s,r){let{dateEnv:l}=r,c=s.standardProps&&s.standardProps.allDay===!0,u=s.standardProps&&s.standardProps.hasEnd===!1,h=Object.assign({},n);return c&&(h.range=SN(h.range)),s.datesDelta&&t.startEditable&&(h.range={start:l.add(h.range.start,s.datesDelta),end:l.add(h.range.end,s.datesDelta)}),s.startDelta&&t.durationEditable&&(h.range={start:l.add(h.range.start,s.startDelta),end:h.range.end}),s.endDelta&&t.durationEditable&&(h.range={start:h.range.start,end:l.add(h.range.end,s.endDelta)}),u&&(h.range={start:h.range.start,end:Vv(e.allDay,h.range.start,r)}),e.allDay&&(h.range={start:Ct(h.range.start),end:Ct(h.range.end)}),h.range.end<h.range.start&&(h.range.end=Vv(e.allDay,h.range.start,r)),h}class Fr{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Tt{constructor(e,t,s){this._context=e,this._def=t,this._instance=s||null}setProp(e,t){if(e in CN)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=Id[e](t),this.mutate({standardProps:{publicId:t}});else if(e in Id)t=Id[e](t),this.mutate({standardProps:{[e]:t}});else if(e in nu){let s=nu[e](t);e==="color"?s={backgroundColor:t,borderColor:t}:e==="editable"?s={startEditable:t,durationEditable:t}:s={[e]:t},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:s}=this._context,r=s.createMarker(e);if(r&&this._instance){let l=this._instance.range,c=Gr(l.start,r,s,t.granularity);t.maintainDuration?this.mutate({datesDelta:c}):this.mutate({startDelta:c})}}setEnd(e,t={}){let{dateEnv:s}=this._context,r;if(!(e!=null&&(r=s.createMarker(e),!r))&&this._instance)if(r){let l=Gr(this._instance.range.end,r,s,t.granularity);this.mutate({endDelta:l})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,s={}){let{dateEnv:r}=this._context,l={allDay:s.allDay},c=r.createMarker(e),u;if(c&&!(t!=null&&(u=r.createMarker(t),!u))&&this._instance){let h=this._instance.range;s.allDay===!0&&(h=SN(h));let m=Gr(h.start,c,r,s.granularity);if(u){let p=Gr(h.end,u,r,s.granularity);$R(m,p)?this.mutate({datesDelta:m,standardProps:l}):this.mutate({startDelta:m,endDelta:p,standardProps:l})}else l.hasEnd=!1,this.mutate({datesDelta:m,standardProps:l})}}moveStart(e){let t=ht(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=ht(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=ht(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let s={allDay:e},{maintainDuration:r}=t;r==null&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(s.hasEnd=r),this.mutate({standardProps:s})}formatRange(e){let{dateEnv:t}=this._context,s=this._instance,r=rs(e);return this._def.hasEnd?t.formatRange(s.range.start,s.range.end,r,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):t.format(s.range.start,r,{forcedTzo:s.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let s=this._def,r=this._context,{eventStore:l}=r.getCurrentData(),c=hg(l,t.instanceId);c=pg(c,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let h=new Tt(r,s,t);this._def=c.defs[s.defId],this._instance=c.instances[t.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:c}),r.emitter.trigger("eventChange",{oldEvent:h,event:this,relatedEvents:Hi(c,r,t),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:l})}})}}remove(){let e=this._context,t=PN(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new Fr(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:s}=t,{startStr:r,endStr:l}=this,c={allDay:t.allDay};return t.title&&(c.title=t.title),r&&(c.start=r),l&&(c.end=l),t.publicId&&(c.id=t.publicId),t.groupId&&(c.groupId=t.groupId),t.url&&(c.url=t.url),s.display&&s.display!=="auto"&&(c.display=s.display),e.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?c.color=s.backgroundColor:(s.backgroundColor&&(c.backgroundColor=s.backgroundColor),s.borderColor&&(c.borderColor=s.borderColor)),s.textColor&&(c.textColor=s.textColor),s.classNames.length&&(c.classNames=s.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(c,t.extendedProps):c.extendedProps=t.extendedProps),c}toJSON(){return this.toPlainObject()}}function PN(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Hi(n,e,t){let{defs:s,instances:r}=n,l=[],c=t?t.instanceId:"";for(let u in r){let h=r[u],m=s[h.defId];h.instanceId!==c&&l.push(new Tt(e,m,h))}return l}function Gv(n,e,t,s){let r={},l={},c={},u=[],h=[],m=iu(n.defs,e);for(let p in n.defs){let x=n.defs[p];m[x.defId].display==="inverse-background"&&(x.groupId?(r[x.groupId]=[],c[x.groupId]||(c[x.groupId]=x)):l[p]=[])}for(let p in n.instances){let x=n.instances[p],y=n.defs[x.defId],v=m[y.defId],N=x.range,w=!y.allDay&&s?EN(N,s):N,A=el(w,t);A&&(v.display==="inverse-background"?y.groupId?r[y.groupId].push(A):l[x.defId].push(A):v.display!=="none"&&(v.display==="background"?u:h).push({def:y,ui:v,instance:x,range:A,isStart:w.start&&w.start.valueOf()===A.start.valueOf(),isEnd:w.end&&w.end.valueOf()===A.end.valueOf()}))}for(let p in r){let x=r[p],y=zv(x,t);for(let v of y){let N=c[p],w=m[N.defId];u.push({def:N,ui:w,instance:null,range:v,isStart:!1,isEnd:!1})}}for(let p in l){let x=l[p],y=zv(x,t);for(let v of y)u.push({def:n.defs[p],ui:m[p],instance:null,range:v,isStart:!1,isEnd:!1})}return{bg:u,fg:h}}function qv(n,e){n.fcSeg=e}function tl(n){return n.fcSeg||n.parentNode.fcSeg||null}function iu(n,e){return Xi(n,t=>IN(t,e))}function IN(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),tM(t)}function bM(n,e){let t=n.map(vM);return t.sort((s,r)=>PR(s,r,e)),t.map(s=>s._seg)}function vM(n){let{eventRange:e}=n,t=e.def,s=e.instance?e.instance.range:e.range,r=s.start?s.start.valueOf():0,l=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:r,end:l,duration:l-r,allDay:Number(t.allDay),_seg:n})}function wM(n,e){let{pluginHooks:t}=e,s=t.isDraggableTransformers,{def:r,ui:l}=n.eventRange,c=l.startEditable;for(let u of s)c=u(c,r,l,e);return c}function NM(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function AM(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function BN(n,e,t,s,r,l,c){let{dateEnv:u,options:h}=t,{displayEventTime:m,displayEventEnd:p}=h,x=n.eventRange.def,y=n.eventRange.instance;m==null&&(m=s!==!1),p==null&&(p=r!==!1);let v=y.range.start,N=y.range.end,w=n.start||n.eventRange.range.start,A=n.end||n.eventRange.range.end,j=Ct(v).valueOf()===Ct(w).valueOf(),C=Ct(ni(N,-1)).valueOf()===Ct(ni(A,-1)).valueOf();return m&&!x.allDay&&(j||C)?(w=j?v:w,A=C?N:A,p&&x.hasEnd?u.formatRange(w,A,e,{forcedStartTzo:y.forcedStartTzo,forcedEndTzo:y.forcedEndTzo}):u.format(w,e,{forcedTzo:y.forcedStartTzo})):""}function wo(n,e,t){let s=n.eventRange.range;return{isPast:s.end<=e.start,isFuture:s.start>=e.end,isToday:e&&Ja(e,s.start)}}function jM(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function SM(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function HN(n,e){let{def:t,instance:s}=n.eventRange,{url:r}=t;if(r)return{href:r};let{emitter:l,options:c}=e,{eventInteractive:u}=c;return u==null&&(u=t.interactive,u==null&&(u=!!l.hasHandlers("eventClick"))),u?xN(h=>{l.trigger("eventClick",{el:h.target,event:new Tt(e,t,s),jsEvent:h,view:e.viewApi})}):{}}const EM={start:ie,end:ie,allDay:Boolean};function _M(n,e,t){let s=CM(n,e),{range:r}=s;if(!r.start)return null;if(!r.end){if(t==null)return null;r.end=e.add(r.start,t)}return s}function CM(n,e){let{refined:t,extra:s}=ig(n,EM),r=t.start?e.createMarkerMeta(t.start):null,l=t.end?e.createMarkerMeta(t.end):null,{allDay:c}=t;return c==null&&(c=r&&r.isTimeUnspecified&&(!l||l.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:l?l.marker:null},allDay:c},s)}function TM(n,e){return Vk(n.range,e.range)&&n.allDay===e.allDay&&DM(n,e)}function DM(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function RM(n,e){return Object.assign(Object.assign({},FN(n.range,e,n.allDay)),{allDay:n.allDay})}function zN(n,e,t){return Object.assign(Object.assign({},FN(n,e,t)),{timeZone:e.timeZone})}function FN(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function kM(n,e,t){let s=DN({editable:!1},t),r=fp(s.refined,s.extra,"",n.allDay,!0,t);return{def:r,ui:IN(r,e),instance:dg(r.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function MM(n,e,t){let s=!1,r=function(u){s||(s=!0,e(u))},l=function(u){s||(s=!0,t(u))},c=n(r,l);c&&typeof c.then=="function"&&c.then(r,l)}class Yv extends Error{constructor(e,t){super(e),this.response=t}}function LM(n,e,t){n=n.toUpperCase();const s={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(s.body=new URLSearchParams(t),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,s).then(r=>{if(r.ok)return r.json().then(l=>[l,r],()=>{throw new Yv("Failure parsing JSON",r)});throw new Yv("Request failed",r)})}let Tm;function UN(){return Tm==null&&(Tm=OM()),Tm}function OM(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class PM extends Lt{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{su(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{su(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:s}=this.state,r=s||t.height==="auto"||t.contentHeight==="auto",l=!r&&t.height!=null?t.height:"",c=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return UN()||c.push("fc-liquid-hack"),e.children(c,l,r,s)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class cl{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function IM(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function gg(n){return{[n.component.uid]:n}}const pp={};class Ru extends nn{constructor(e,t){super(e,t),this.handleRefresh=()=>{let s=this.computeTiming();s.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(s.state),this.clearTimeout(),this.setTimeout(s.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,s=t.nowManager.getDateMarker(),{nowIndicatorSnap:r}=t.options;r==="auto"&&(r=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let l,c;return r?(l=t.dateEnv.startOf(s,e.unit),c=t.dateEnv.add(l,ht(1,e.unit)).valueOf()-s.valueOf()):(l=s,c=1e3*60),c=Math.min(1e3*60*60*24,c),{state:{nowDate:l,todayRange:BM(l)},waitMs:c}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Ru.contextType=Qi;function BM(n){let e=Ct(n),t=ls(e,1);return{start:e,end:t}}class HM{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[e]?s.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:s.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let s=this.getCurrentData(),r;t=t||"day",r=s.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),r?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:s}=this.getCurrentData(),r=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]),l,c;for(let u in t)r.push(u);for(l=0;l<r.length;l+=1)if(c=t[r[l]],c&&c.singleUnit===e)return c;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),s=ht(e);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,s)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(e),rs(t))}formatRange(e,t,s){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(t),rs(s),s)}formatIso(e,t){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(e),{omitTime:t})}select(e,t){let s;t==null?e.start!=null?s=e:s={start:e,end:null}:s={start:e,end:t};let r=this.getCurrentData(),l=_M(s,r.dateEnv,ht({days:1}));l&&(this.dispatch({type:"SELECT_DATES",selection:l}),ON(l,null,r))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),gM(e,t))}addEvent(e,t){if(e instanceof Tt){let c=e._def,u=e._instance;return this.getCurrentData().eventStore.defs[c.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:mp({def:c,instance:u})}),this.triggerEventAdd(e)),e}let s=this.getCurrentData(),r;if(t instanceof Fr)r=t.internalEventSource;else if(typeof t=="boolean")t&&([r]=lg(s.eventSources));else if(t!=null){let c=this.getEventSourceById(t);if(!c)return console.warn(`Could not find an event source with ID "${t}"`),null;r=c.internalEventSource}let l=TN(e,r,s,!1);if(l){let c=new Tt(s,l.def,l.def.recurringDef?null:l.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:mp(l)}),this.triggerEventAdd(c),c}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:PN(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:s,instances:r}=t.eventStore;e=String(e);for(let l in s){let c=s[l];if(c.publicId===e){if(c.recurringDef)return new Tt(t,c,null);for(let u in r){let h=r[u];if(h.defId===c.defId)return new Tt(t,c,h)}}}return null}getEvents(){let e=this.getCurrentData();return Hi(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,s=[];for(let r in t)s.push(new Fr(e,t[r]));return s}getEventSourceById(e){let t=this.getCurrentData(),s=t.eventSources;e=String(e);for(let r in s)if(s[r].publicId===e)return new Fr(t,s[r]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof Fr)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let s=RN(e,t);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Fr(t,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=ht(e);t&&this.trigger("_scrollRequest",{time:t})}}function zM(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function $N(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function FM(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function UM(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function $M(n,e){return{left:n.left-e.left,top:n.top-e.top}}function VN(n,e,t,s){return{dow:n.getUTCDay(),isDisabled:!!(s&&(!s.activeRange||!Ja(s.activeRange,n))),isOther:!!(s&&!Ja(s.currentRange,n)),isToday:!!(e&&Ja(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function xg(n,e){let t=["fc-day",`fc-day-${YR[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const VM=rs({year:"numeric",month:"long",day:"numeric"}),GM=rs({week:"long"});function gp(n,e,t="day",s=!0){const{dateEnv:r,options:l,calendarApi:c}=n;let u=r.format(e,t==="week"?GM:VM);if(l.navLinks){let h=r.toDate(e);const m=p=>{let x=t==="day"?l.navLinkDayClick:t==="week"?l.navLinkWeekClick:null;typeof x=="function"?x.call(c,r.toDate(e),p):(typeof x=="string"&&(t=x),c.zoomTo(e,t))};return Object.assign({title:bo(l.navLinkHint,[u,h],u),"data-navlink":""},s?gN(m):{onClick:m})}return{"aria-label":u}}let Dm=null;function qM(){return Dm===null&&(Dm=YM()),Dm}function YM(){let n=document.createElement("div");yo(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return eg(n),t}let Rm;function WM(){return Rm||(Rm=XM()),Rm}function XM(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=GN(n);return document.body.removeChild(n),e}function GN(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function QM(n,e=!1){let t=window.getComputedStyle(n),s=parseInt(t.borderLeftWidth,10)||0,r=parseInt(t.borderRightWidth,10)||0,l=parseInt(t.borderTopWidth,10)||0,c=parseInt(t.borderBottomWidth,10)||0,u=GN(n),h=u.y-s-r,m=u.x-l-c,p={borderLeft:s,borderRight:r,borderTop:l,borderBottom:c,scrollbarBottom:m,scrollbarLeft:0,scrollbarRight:0};return qM()&&t.direction==="rtl"?p.scrollbarLeft=h:p.scrollbarRight=h,e&&(p.paddingLeft=parseInt(t.paddingLeft,10)||0,p.paddingRight=parseInt(t.paddingRight,10)||0,p.paddingTop=parseInt(t.paddingTop,10)||0,p.paddingBottom=parseInt(t.paddingBottom,10)||0),p}function ZM(n,e=!1,t){let s=yg(n),r=QM(n,e),l={left:s.left+r.borderLeft+r.scrollbarLeft,right:s.right-r.borderRight-r.scrollbarRight,top:s.top+r.borderTop,bottom:s.bottom-r.borderBottom-r.scrollbarBottom};return e&&(l.left+=r.paddingLeft,l.right-=r.paddingRight,l.top+=r.paddingTop,l.bottom-=r.paddingBottom),l}function yg(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function KM(n){let e=qN(n),t=n.getBoundingClientRect();for(let s of e){let r=$N(t,s.getBoundingClientRect());if(r)t=r;else return null}return t}function qN(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class ru{constructor(e,t,s,r){this.els=t;let l=this.originClientRect=e.getBoundingClientRect();s&&this.buildElHorizontals(l.left),r&&this.buildElVerticals(l.top)}buildElHorizontals(e){let t=[],s=[];for(let r of this.els){let l=r.getBoundingClientRect();t.push(l.left-e),s.push(l.right-e)}this.lefts=t,this.rights=s}buildElVerticals(e){let t=[],s=[];for(let r of this.els){let l=r.getBoundingClientRect();t.push(l.top-e),s.push(l.bottom-e)}this.tops=t,this.bottoms=s}leftToIndex(e){let{lefts:t,rights:s}=this,r=t.length,l;for(l=0;l<r;l+=1)if(e>=t[l]&&e<s[l])return l}topToIndex(e){let{tops:t,bottoms:s}=this,r=t.length,l;for(l=0;l<r;l+=1)if(e>=t[l]&&e<s[l])return l}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return wd(this.tops||[],e.tops||[])&&wd(this.bottoms||[],e.bottoms||[])&&wd(this.lefts||[],e.lefts||[])&&wd(this.rights||[],e.rights||[])}}function wd(n,e){const t=n.length;if(t!==e.length)return!1;for(let s=0;s<t;s++)if(Math.round(n[s])!==Math.round(e[s]))return!1;return!0}class bg{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class JM extends bg{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class e3 extends bg{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Ki extends Lt{constructor(){super(...arguments),this.uid=Wi()}prepareHits(){}queryHit(e,t,s,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Ns(e,".fc-event-mirror")}isValidDateDownEl(e){return!Ns(e,".fc-event:not(.fc-bg-event)")&&!Ns(e,".fc-more-link")&&!Ns(e,"a[data-navlink]")&&!Ns(e,".fc-popover")}}class t3{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let s of e)this.insertEntry(s,t);return t}insertEntry(e,t){let s=this.findInsertion(e);this.isInsertionValid(s,e)?this.insertEntryAt(e,s):this.handleInvalidInsertion(s,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,s){if(this.allowReslicing&&e.touchingEntry){const r=Object.assign(Object.assign({},t),{span:YN(t.span,e.touchingEntry.span)});s.push(r),this.splitEntry(t,e.touchingEntry,s)}else s.push(t)}splitEntry(e,t,s){let r=e.span,l=t.span;r.start<l.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.start,end:l.start}},s),r.end>l.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:l.end,end:r.end}},s)}insertEntryAt(e,t){let{entriesByLevel:s,levelCoords:r}=this;t.lateral===-1?(km(r,t.level,t.levelCoord),km(s,t.level,[e])):km(s[t.level],t.lateral,e),this.stackCnts[No(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:s,strictOrder:r,stackCnts:l}=this,c=t.length,u=0,h=-1,m=-1,p=null,x=0;for(let N=0;N<c;N+=1){const w=t[N];if(!r&&w>=u+this.getEntryThickness(e))break;let A=s[N],j,C=Xv(A,e.span.start,Wv),S=C[0]+C[1];for(;(j=A[S])&&j.span.start<e.span.end;){let T=w+this.getEntryThickness(j);T>u&&(u=T,p=j,h=N,m=S),T===u&&(x=Math.max(x,l[No(j)]+1)),S+=1}}let y=0;if(p)for(y=h+1;y<c&&t[y]<u;)y+=1;let v=-1;return y<c&&t[y]===u&&(v=Xv(s[y],e.span.end,Wv)[0]),{touchingLevel:h,touchingLateral:m,touchingEntry:p,stackCnt:x,levelCoord:u,level:y,lateral:v}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,s=e.length,r=[];for(let l=0;l<s;l+=1){let c=e[l],u=t[l];for(let h of c)r.push(Object.assign(Object.assign({},h),{thickness:this.getEntryThickness(h),levelCoord:u}))}return r}}function Wv(n){return n.span.end}function No(n){return n.index+":"+n.span.start}function YN(n,e){let t=Math.max(n.start,e.start),s=Math.min(n.end,e.end);return t<s?{start:t,end:s}:null}function km(n,e,t){n.splice(e,0,t)}function Xv(n,e,t){let s=0,r=n.length;if(!r||e<t(n[s]))return[0,0];if(e>t(n[r-1]))return[r,0];for(;s<r;){let l=Math.floor(s+(r-s)/2),c=t(n[l]);if(e<c)r=l;else if(e>c)s=l+1;else return[l,1]}return[s,0]}class s3{constructor(e,t){this.emitter=new Du}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const vg={};function n3(n,e){return!n||e>10?rs({weekday:"short"}):e>1?rs({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):rs({weekday:"long"})}const WN="fc-col-header-cell";function XN(n){return n.text}class a3 extends Lt{render(){let{dateEnv:e,options:t,theme:s,viewApi:r}=this.context,{props:l}=this,{date:c,dateProfile:u}=l,h=VN(c,l.todayRange,null,u),m=[WN].concat(xg(h,s)),p=e.format(c,l.dayHeaderFormat),x=!h.isDisabled&&l.colCnt>1?gp(this.context,c):{},y=e.toDate(c);e.namedTimeZoneImpl&&(y=ni(y,36e5));let v=Object.assign(Object.assign(Object.assign({date:y,view:r},l.extraRenderProps),{text:p}),h);return le(wa,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:l.colSpan,"data-date":h.isDisabled?void 0:ng(c)},l.extraDataAttrs),renderProps:v,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:XN,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},N=>le("div",{className:"fc-scrollgrid-sync-inner"},!h.isDisabled&&le(N,{elTag:"a",elAttrs:x,elClasses:["fc-col-header-cell-cushion",l.isSticky&&"fc-sticky"]})))}}const i3=rs({weekday:"long"});class r3 extends Lt{render(){let{props:e}=this,{dateEnv:t,theme:s,viewApi:r,options:l}=this.context,c=ls(new Date(2592e5),e.dow),u={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},h=t.format(c,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:c},u),{view:r}),e.extraRenderProps),{text:h});return le(wa,{elTag:"th",elClasses:[WN,...xg(u,s),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:l.dayHeaderContent,defaultGenerator:XN,classNameGenerator:l.dayHeaderClassNames,didMount:l.dayHeaderDidMount,willUnmount:l.dayHeaderWillUnmount},p=>le("div",{className:"fc-scrollgrid-sync-inner"},le(p,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(c,i3)}})))}}class l3 extends Lt{constructor(){super(...arguments),this.createDayHeaderFormatter=ct(o3)}render(){let{context:e}=this,{dates:t,dateProfile:s,datesRepDistinctDays:r,renderIntro:l}=this.props,c=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,t.length);return le(Ru,{unit:"day"},(u,h)=>le("tr",{role:"row"},l&&l("day"),t.map(m=>r?le(a3,{key:m.toISOString(),date:m,dateProfile:s,todayRange:h,colCnt:t.length,dayHeaderFormat:c}):le(r3,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:c}))))}}function o3(n,e,t){return n||n3(e,t)}class c3{constructor(e,t){let s=e.start,{end:r}=e,l=[],c=[],u=-1;for(;s<r;)t.isHiddenDay(s)?l.push(u+.5):(u+=1,l.push(u),c.push(s)),s=ls(s,1);this.dates=c,this.indices=l,this.cnt=c.length}sliceRange(e){let t=this.getDateDayIndex(e.start),s=this.getDateDayIndex(ls(e.end,-1)),r=Math.max(0,t),l=Math.min(this.cnt-1,s);return r=Math.ceil(r),l=Math.floor(l),r<=l?{firstIndex:r,lastIndex:l,isStart:t===r,isEnd:s===l}:null}getDateDayIndex(e){let{indices:t}=this,s=Math.floor(ol(this.dates[0],e));return s<0?t[0]-1:s>=t.length?t[t.length-1]+1:t[s]}}class d3{constructor(e,t){let{dates:s}=e,r,l,c;if(t){for(l=s[0].getUTCDay(),r=1;r<s.length&&s[r].getUTCDay()!==l;r+=1);c=Math.ceil(s.length/r)}else c=1,r=s.length;this.rowCnt=c,this.colCnt=r,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let s=[];for(let r=0;r<this.colCnt;r+=1)s.push(this.buildCell(t,r));e.push(s)}return e}buildCell(e,t){let s=this.daySeries.dates[e*this.colCnt+t];return{key:s.toISOString(),date:s}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,s=this.daySeries.sliceRange(e),r=[];if(s){let{firstIndex:l,lastIndex:c}=s,u=l;for(;u<=c;){let h=Math.floor(u/t),m=Math.min((h+1)*t,c+1);r.push({row:h,firstCol:u%t,lastCol:(m-1)%t,isStart:s.isStart&&u===l,isEnd:s.isEnd&&m-1===c}),u=m}}return r}}class u3{constructor(){this.sliceBusinessHours=ct(this._sliceBusinessHours),this.sliceDateSelection=ct(this._sliceDateSpan),this.sliceEventStore=ct(this._sliceEventStore),this.sliceEventDrag=ct(this._sliceInteraction),this.sliceEventResize=ct(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,s,r,...l){let{eventUiBases:c}=e,u=this.sliceEventStore(e.eventStore,c,t,s,...l);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,s,c,r,...l),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,s,r,...l),fgEventSegs:u.fg,bgEventSegs:u.bg,eventDrag:this.sliceEventDrag(e.eventDrag,c,t,s,...l),eventResize:this.sliceEventResize(e.eventResize,c,t,s,...l),eventSelection:e.eventSelection}}sliceNowDate(e,t,s,r,...l){return this._sliceDateSpan({range:{start:e,end:ni(e,1)},allDay:!1},t,s,{},r,...l)}_sliceBusinessHours(e,t,s,r,...l){return e?this._sliceEventStore(Gi(e,Nd(t,!!s),r),{},t,s,...l).bg:[]}_sliceEventStore(e,t,s,r,...l){if(e){let c=Gv(e,t,Nd(s,!!r),r);return{bg:this.sliceEventRanges(c.bg,l),fg:this.sliceEventRanges(c.fg,l)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,s,r,...l){if(!e)return null;let c=Gv(e.mutatedEvents,t,Nd(s,!!r),r);return{segs:this.sliceEventRanges(c.fg,l),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,s,r,l,...c){if(!e)return[];let u=Nd(t,!!s),h=el(e.range,u);if(h){e=Object.assign(Object.assign({},e),{range:h});let m=kM(e,r,l),p=this.sliceRange(e.range,...c);for(let x of p)x.eventRange=m;return p}return[]}sliceEventRanges(e,t){let s=[];for(let r of e)s.push(...this.sliceEventRange(r,t));return s}sliceEventRange(e,t){let s=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(s={start:s.start,end:ls(s.start,1)});let r=this.sliceRange(s,...t);for(let l of r)l.eventRange=e,l.isStart=e.isStart&&l.isStart,l.isEnd=e.isEnd&&l.isEnd;return r}}function Nd(n,e){let t=n.activeRange;return e?t:{start:ni(t.start,n.slotMinTime.milliseconds),end:ni(t.end,n.slotMaxTime.milliseconds-864e5)}}function QN(n,e,t){let{instances:s}=n.mutatedEvents;for(let r in s)if(!Cu(e.validRange,s[r].range))return!1;return ZN({eventDrag:n},t)}function h3(n,e,t){return Cu(e.validRange,n.range)?ZN({dateSelection:n},t):!1}function ZN(n,e){let t=e.getCurrentData(),s=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||f3)(s,e)}function f3(n,e,t={},s){return!(n.eventDrag&&!m3(n,e,t,s)||n.dateSelection&&!p3(n,e,t,s))}function m3(n,e,t,s){let r=e.getCurrentData(),l=n.eventDrag,c=l.mutatedEvents,u=c.defs,h=c.instances,m=iu(u,l.isEvent?n.eventUiBases:{"":r.selectionConfig});s&&(m=Xi(m,s));let p=cM(n.eventStore,l.affectedEvents.instances),x=p.defs,y=p.instances,v=iu(x,n.eventUiBases);for(let N in h){let w=h[N],A=w.range,j=m[w.defId],C=u[w.defId];if(!KN(j.constraints,A,p,n.businessHours,e))return!1;let{eventOverlap:S}=e.options,T=typeof S=="function"?S:null;for(let O in y){let H=y[O];if(cg(A,H.range)&&(v[H.defId].overlap===!1&&l.isEvent||j.overlap===!1||T&&!T(new Tt(e,x[H.defId],H),new Tt(e,C,w))))return!1}let R=r.eventStore;for(let O of j.allows){let H=Object.assign(Object.assign({},t),{range:w.range,allDay:C.allDay}),V=R.defs[C.defId],L=R.instances[N],K;if(V?K=new Tt(e,V,L):K=new Tt(e,C),!O(mg(H,e),K))return!1}}return!0}function p3(n,e,t,s){let r=n.eventStore,l=r.defs,c=r.instances,u=n.dateSelection,h=u.range,{selectionConfig:m}=e.getCurrentData();if(s&&(m=s(m)),!KN(m.constraints,h,r,n.businessHours,e))return!1;let{selectOverlap:p}=e.options,x=typeof p=="function"?p:null;for(let y in c){let v=c[y];if(cg(h,v.range)&&(m.overlap===!1||x&&!x(new Tt(e,l[v.defId],v),null)))return!1}for(let y of m.allows){let v=Object.assign(Object.assign({},t),u);if(!y(mg(v,e),null))return!1}return!0}function KN(n,e,t,s,r){for(let l of n)if(!x3(g3(l,e,t,s,r),e))return!1;return!0}function g3(n,e,t,s,r){return n==="businessHours"?Mm(Gi(s,e,r)):typeof n=="string"?Mm(Tu(t,l=>l.groupId===n)):typeof n=="object"&&n?Mm(Gi(n,e,r)):[]}function Mm(n){let{instances:e}=n,t=[];for(let s in e)t.push(e[s].range);return t}function x3(n,e){for(let t of n)if(Cu(t,e))return!0;return!1}const Ad=/^(visible|hidden)$/;class y3 extends Lt{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Qn(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:s}=e,r=t&&s,l=["fc-scroller"];return t&&(s?l.push("fc-scroller-liquid-absolute"):l.push("fc-scroller-liquid")),le("div",{ref:this.handleEl,className:l.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Ad.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=e;for(let r=0;r<s.length;r+=1)if(s[r].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Ad.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=e;for(let r=0;r<s.length;r+=1)if(s[r].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Ad.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ad.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Mi{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,s)=>{let{depths:r,currentMap:l}=this,c=!1,u=!1;t!==null?(c=s in l,l[s]=t,r[s]=(r[s]||0)+1,u=!0):(r[s]-=1,r[s]||(delete l[s],delete this.callbackMap[s],c=!0)),this.masterCallback&&(c&&this.masterCallback(null,String(s)),u&&this.masterCallback(t,String(s)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=s=>{this.handleValue(s,String(e))}),t}collect(e,t,s){return _k(this.currentMap,e,t,s)}getAll(){return lg(this.currentMap)}}function b3(n){let e=ER(n,".fc-scrollgrid-shrink"),t=0;for(let s of e)t=Math.max(t,zR(s));return Math.ceil(t)}function JN(n,e){return n.liquid&&e.liquid}function v3(n,e){return e.maxHeight!=null||JN(n,e)}function w3(n,e,t,s){let{expandRows:r}=t;return typeof e.content=="function"?e.content(t):le("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:r?t.clientHeight:""}},t.tableColGroupNode,le(s?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function N3(n,e){return si(n,e,Cn)}function A3(n,e){let t=[];for(let s of n){let r=s.span||1;for(let l=0;l<r;l+=1)t.push(le("col",{style:{width:s.width==="shrink"?j3(e):s.width||"",minWidth:s.minWidth||""}}))}return le("colgroup",{},...t)}function j3(n){return n??4}function S3(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function E3(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function _3(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function C3(n){return le("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Qv(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function T3(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class eA extends Lt{constructor(){super(...arguments),this.processCols=ct(e=>e,N3),this.renderMicroColGroup=ct(A3),this.scrollerRefs=new Mi,this.scrollerElRefs=new Mi(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:s}=this,r=e.sections||[],l=this.processCols(e.cols),c=this.renderMicroColGroup(l,t.shrinkWidth),u=E3(e.liquid,s);e.collapsibleWidth&&u.push("fc-scrollgrid-collapsible");let h=r.length,m=0,p,x=[],y=[],v=[];for(;m<h&&(p=r[m]).type==="header";)x.push(this.renderSection(p,c,!0)),m+=1;for(;m<h&&(p=r[m]).type==="body";)y.push(this.renderSection(p,c,!1)),m+=1;for(;m<h&&(p=r[m]).type==="footer";)v.push(this.renderSection(p,c,!0)),m+=1;let N=!UN();const w={role:"rowgroup"};return le("table",{role:"grid",className:u.join(" "),style:{height:e.height}},!!(!N&&x.length)&&le("thead",w,...x),!!(!N&&y.length)&&le("tbody",w,...y),!!(!N&&v.length)&&le("tfoot",w,...v),N&&le("tbody",w,...x,...y,...v))}renderSection(e,t,s){return"outerContent"in e?le(It,{key:e.key},e.outerContent):le("tr",{key:e.key,role:"presentation",className:_3(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,s))}renderChunkTd(e,t,s,r){if("outerContent"in s)return s.outerContent;let{props:l}=this,{forceYScrollbars:c,scrollerClientWidths:u,scrollerClientHeights:h}=this.state,m=v3(l,e),p=JN(l,e),x=l.liquid?c?"scroll":m?"auto":"hidden":"visible",y=e.key,v=w3(e,s,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!l.collapsibleWidth&&u[y]!==void 0?u[y]:null,clientHeight:h[y]!==void 0?h[y]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return le(r?"th":"td",{ref:s.elRef,role:"presentation"},le("div",{className:`fc-scroller-harness${p?" fc-scroller-harness-liquid":""}`},le(y3,{ref:this.scrollerRefs.createRef(y),elRef:this.scrollerElRefs.createRef(y),overflowY:x,overflowX:l.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:p,liquidIsAbsolute:!0},v)))}_handleScrollerEl(e,t){let s=D3(this.props.sections,t);s&&Qn(s.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return S3(this.props.cols)?b3(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=WM(),{scrollerRefs:t,scrollerElRefs:s}=this,r=!1,l={},c={};for(let u in t.currentMap){let h=t.currentMap[u];if(h&&h.needsYScrolling()){r=!0;break}}for(let u of this.props.sections){let h=u.key,m=s.currentMap[h];if(m){let p=m.parentNode;l[h]=Math.floor(p.getBoundingClientRect().width-(r?e.y:0)),c[h]=Math.floor(p.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:l,scrollerClientHeights:c}}}eA.addStateEquality({scrollerClientWidths:Cn,scrollerClientHeights:Cn});function D3(n,e){for(let t of n)if(t.key===e)return t;return null}class wg extends Lt{constructor(){super(...arguments),this.buildPublicEvent=ct((e,t,s)=>new Tt(e,t,s)),this.handleEl=e=>{this.el=e,Qn(this.props.elRef,e),e&&qv(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:s}=t,{seg:r}=e,{eventRange:l}=r,{ui:c}=l,u={event:this.buildPublicEvent(t,l.def,l.instance),view:t.viewApi,timeText:e.timeText,textColor:c.textColor,backgroundColor:c.backgroundColor,borderColor:c.borderColor,isDraggable:!e.disableDragging&&wM(r,t),isStartResizable:!e.disableResizing&&NM(r,t),isEndResizable:!e.disableResizing&&AM(r),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!r.isStart,isEnd:!!r.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return le(wa,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...jM(u),...r.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:u,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&qv(this.el,this.props.seg)}}class tA extends Lt{render(){let{props:e,context:t}=this,{options:s}=t,{seg:r}=e,{ui:l}=r.eventRange,c=s.eventTimeFormat||e.defaultTimeFormat,u=BN(r,c,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return le(wg,Object.assign({},e,{elTag:"a",elStyle:{borderColor:l.borderColor,backgroundColor:l.backgroundColor},elAttrs:HN(r,t),defaultGenerator:R3,timeText:u}),(h,m)=>le(It,null,le(h,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),!!m.isStartResizable&&le("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!m.isEndResizable&&le("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}tA.addPropsEquality({seg:Cn});function R3(n){return le("div",{className:"fc-event-main-frame"},n.timeText&&le("div",{className:"fc-event-time"},n.timeText),le("div",{className:"fc-event-title-container"},le("div",{className:"fc-event-title fc-sticky"},n.event.title||le(It,null,""))))}const k3=rs({day:"numeric"});class sA extends Lt{constructor(){super(...arguments),this.refineRenderProps=Pd(M3)}render(){let{props:e,context:t}=this,{options:s}=t,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:s.monthStartFormat});return le(wa,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":ng(e.date)}),elClasses:[...xg(r,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:r,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount},e.children)}}function nA(n){return!!(n.dayCellContent||hp("dayCellContent",n))}function M3(n){let{date:e,dateEnv:t,dateProfile:s,isMonthStart:r}=n,l=VN(e,n.todayRange,null,s),c=n.showDayNumber?t.format(e,r?n.monthStartFormat:k3):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},l),{isMonthStart:r,dayNumberText:c}),n.extraRenderProps)}class L3 extends Lt{render(){let{props:e}=this,{seg:t}=e;return le(wg,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:O3,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function O3(n){let{title:e}=n.event;return e&&le("div",{className:"fc-event-title"},n.event.title)}function P3(n){return le("div",{className:`fc-${n}`})}const I3=n=>le(Qi.Consumer,null,e=>{let{dateEnv:t,options:s}=e,{date:r}=n,l=s.weekNumberFormat||n.defaultFormat,c=t.computeWeekNumber(r),u=t.format(r,l),h={num:c,text:u,date:r};return le(wa,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:h,generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:B3,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount},n.children)});function B3(n){return n.text}const Lm=10;class H3 extends Lt{constructor(){super(...arguments),this.state={titleId:Eu()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Qn(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=mN(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:s,state:r}=this,l=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return hR(le("div",Object.assign({},s.extraAttrs,{id:s.id,className:l.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),le("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},le("span",{className:"fc-popover-title",id:r.titleId},s.title),le("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),le("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:s}=this.props,{rootEl:r}=this,l=KM(t);if(l){let c=r.getBoundingClientRect(),u=s?Ns(t,".fc-scrollgrid").getBoundingClientRect().top:l.top,h=e?l.right-c.width:l.left;u=Math.max(u,Lm),h=Math.min(h,document.documentElement.clientWidth-Lm-c.width),h=Math.max(h,Lm);let m=r.offsetParent.getBoundingClientRect();yo(r,{top:u-m.top,left:h-m.left})}}}class z3 extends Ki{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:s}=this,{startDate:r,todayRange:l,dateProfile:c}=s,u=t.format(r,e.dayPopoverFormat);return le(sA,{elRef:this.handleRootEl,date:r,dateProfile:c,todayRange:l},(h,m,p)=>le(H3,{elRef:p.ref,id:s.id,title:u,extraClassNames:["fc-more-popover"].concat(p.className||[]),extraAttrs:p,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},nA(e)&&le(h,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(e,t,s,r){let{rootEl:l,props:c}=this;return e>=0&&e<s&&t>=0&&t<r?{dateProfile:c.dateProfile,dateSpan:Object.assign({allDay:!c.forceTimed,range:{start:c.startDate,end:c.endDate}},c.extraDateSpan),dayEl:l,rect:{left:0,top:0,right:s,bottom:r},layer:1}:null}}class F3 extends Lt{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Eu()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Qn(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:s}=this,{moreLinkClick:r}=s.options,l=Zv(t).start;function c(u){let{def:h,instance:m,range:p}=u.eventRange;return{event:new Tt(s,h,m),start:s.dateEnv.toDate(p.start),end:s.dateEnv.toDate(p.end),isStart:u.isStart,isEnd:u.isEnd}}typeof r=="function"&&(r=r({date:l,allDay:!!t.allDayDate,allSegs:t.allSegs.map(c),hiddenSegs:t.hiddenSegs.map(c),jsEvent:e,view:s.viewApi})),!r||r==="popover"?this.setState({isPopoverOpen:!0}):typeof r=="string"&&s.calendarApi.zoomTo(l,r)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return le(Qi.Consumer,null,s=>{let{viewApi:r,options:l,calendarApi:c}=s,{moreLinkText:u}=l,{moreCnt:h}=e,m=Zv(e),p=typeof u=="function"?u.call(c,h):`+${h} ${u}`,x=bo(l.moreLinkHint,[h],p),y={num:h,shortText:`+${h}`,text:p,view:r};return le(It,null,!!e.moreCnt&&le(wa,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),gN(this.handleClick)),{title:x,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:y,generatorName:"moreLinkContent",customGenerator:l.moreLinkContent,defaultGenerator:e.defaultGenerator||U3,classNameGenerator:l.moreLinkClassNames,didMount:l.moreLinkDidMount,willUnmount:l.moreLinkWillUnmount},e.children),t.isPopoverOpen&&le(z3,{id:t.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Ns(this.linkEl,".fc-view-harness"))}}function U3(n){return n.text}function Zv(n){if(n.allDayDate)return{start:n.allDayDate,end:ls(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:$3(e),end:G3(e)}}function $3(n){return n.reduce(V3).eventRange.range.start}function V3(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function G3(n){return n.reduce(q3).eventRange.range.end}function q3(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class Y3{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class W3 extends Y3{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let s=!1;e.isActive?(t.set(e.id,e),s=!0):t.has(e.id)&&(t.delete(e.id),s=!0),s&&this.set(t)}}const X3=[],aA={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},iA=Object.assign(Object.assign({},aA),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function Q3(n){let e=n.length>0?n[0].code:"en",t=X3.concat(n),s={en:iA};for(let r of t)s[r.code]=r;return{map:s,defaultCode:e}}function rA(n,e){return typeof n=="object"&&!Array.isArray(n)?lA(n.code,[n.code],n):Z3(n,e)}function Z3(n,e){let t=[].concat(n||[]),s=K3(t,e)||iA;return lA(n,t,s)}function K3(n,e){for(let t=0;t<n.length;t+=1){let s=n[t].toLocaleLowerCase().split("-");for(let r=s.length;r>0;r-=1){let l=s.slice(0,r).join("-");if(e[l])return e[l]}}return null}function lA(n,e,t){let s=rg([aA,t],["buttonText"]);delete s.code;let{week:r}=s;return delete s.week,{codeArg:n,codes:e,week:r,simpleNumberFormat:new Intl.NumberFormat(n),options:s}}function ii(n){return{id:Wi(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function J3(n,e){let t={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(l){for(let c of l){const u=c.name,h=t[u];h===void 0?(t[u]=c.id,r(c.deps),s=tL(s,c)):h!==c.id&&console.warn(`Duplicate plugin '${u}'`)}}return n&&r(n),r(e),s}function eL(){let n=[],e=[],t;return(s,r)=>((!t||!si(s,n)||!si(r,e))&&(t=J3(s,r)),n=s,e=r,t)}function tL(n,e){return{premiumReleaseDate:sL(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function sL(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class ri extends Wo{}ri.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};ri.prototype.baseIconClass="fc-icon";ri.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};ri.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};ri.prototype.iconOverrideOption="buttonIcons";ri.prototype.iconOverrideCustomButtonOption="icon";ri.prototype.iconOverridePrefix="fc-icon-";function nL(n,e){let t={},s;for(s in n)xp(s,t,n,e);for(s in e)xp(s,t,n,e);return t}function xp(n,e,t,s){if(e[n])return e[n];let r=aL(n,e,t,s);return r&&(e[n]=r),r}function aL(n,e,t,s){let r=t[n],l=s[n],c=p=>r&&r[p]!==null?r[p]:l&&l[p]!==null?l[p]:null,u=c("component"),h=c("superType"),m=null;if(h){if(h===n)throw new Error("Can't have a custom view type that references itself");m=xp(h,e,t,s)}return!u&&m&&(u=m.component),u?{type:n,component:u,defaults:Object.assign(Object.assign({},m?m.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),l?l.rawOptions:{})}:null}function Kv(n){return Xi(n,iL)}function iL(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=Jv(e):t&&!(t.prototype instanceof Lt)&&(t=Jv(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function Jv(n){return e=>le(Qi.Consumer,null,t=>le(wa,{elTag:"div",elClasses:jN(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function rL(n,e,t,s){let r=Kv(n),l=Kv(e.views),c=nL(r,l);return Xi(c,u=>lL(u,l,e,t,s))}function lL(n,e,t,s,r){let l=n.overrides.duration||n.defaults.duration||s.duration||t.duration,c=null,u="",h="",m={};if(l&&(c=oL(l),c)){let y=up(c);u=y.unit,y.value===1&&(h=u,m=e[u]?e[u].rawOptions:{})}let p=y=>{let v=y.buttonText||{},N=n.defaults.buttonTextKey;return N!=null&&v[N]!=null?v[N]:v[n.type]!=null?v[n.type]:v[h]!=null?v[h]:null},x=y=>{let v=y.buttonHints||{},N=n.defaults.buttonTextKey;return N!=null&&v[N]!=null?v[N]:v[n.type]!=null?v[n.type]:v[h]!=null?v[h]:null};return{type:n.type,component:n.component,duration:c,durationUnit:u,singleUnit:h,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},m),n.overrides),buttonTextOverride:p(s)||p(t)||n.overrides.buttonText,buttonTextDefault:p(r)||n.defaults.buttonText||p(vo)||n.type,buttonTitleOverride:x(s)||x(t)||n.overrides.buttonHint,buttonTitleDefault:x(r)||n.defaults.buttonHint||x(vo)}}let ew={};function oL(n){let e=JSON.stringify(n),t=ew[e];return t===void 0&&(t=ht(n),ew[e]=t),t}function cL(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function dL(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function uL(n,e,t){let s=n.initialDate;return s!=null?e.createMarker(s):t.getDateMarker()}function hL(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function fL(n,e,t,s){let r;switch(e.type){case"CHANGE_VIEW_TYPE":return s.build(e.dateMarker||t);case"CHANGE_DATE":return s.build(e.dateMarker);case"PREV":if(r=s.buildPrev(n,t),r.isValid)return r;break;case"NEXT":if(r=s.buildNext(n,t),r.isValid)return r;break}return n}function mL(n,e,t){let s=e?e.activeRange:null;return cA({},wL(n,t),s,t)}function pL(n,e,t,s){let r=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return cA(n,e.sources,r,s);case"REMOVE_EVENT_SOURCE":return xL(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?dA(n,r,s):n;case"FETCH_EVENT_SOURCES":return Ng(n,e.sourceIds?bN(e.sourceIds):uA(n,s),r,e.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return vL(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function gL(n,e,t){let s=e?e.activeRange:null;return Ng(n,uA(n,t),s,!0,t)}function oA(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function cA(n,e,t,s){let r={};for(let l of e)r[l.sourceId]=l;return t&&(r=dA(r,t,s)),Object.assign(Object.assign({},n),r)}function xL(n,e){return Vi(n,t=>t.sourceId!==e)}function dA(n,e,t){return Ng(n,Vi(n,s=>yL(s,e,t)),e,!1,t)}function yL(n,e,t){return hA(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Ng(n,e,t,s,r){let l={};for(let c in n){let u=n[c];e[c]?l[c]=bL(u,t,s,r):l[c]=u}return l}function bL(n,e,t,s){let{options:r,calendarApi:l}=s,c=s.pluginHooks.eventSourceDefs[n.sourceDefId],u=Wi();return c.fetch({eventSource:n,range:e,isRefetch:t,context:s},h=>{let{rawEvents:m}=h;r.eventSourceSuccess&&(m=r.eventSourceSuccess.call(l,m,h.response)||m),n.success&&(m=n.success.call(l,m,h.response)||m),s.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:u,fetchRange:e,rawEvents:m})},h=>{let m=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(l,h),m=!0),n.failure&&(n.failure(h),m=!0),m||console.warn(h.message,h),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:u,fetchRange:e,error:h})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:u})}function vL(n,e,t,s){let r=n[e];return r&&t===r.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:s})}):n}function uA(n,e){return Vi(n,t=>hA(t,e))}function wL(n,e){let t=kN(e),s=[].concat(n.eventSources||[]),r=[];n.initialEvents&&s.unshift(n.initialEvents),n.events&&s.unshift(n.events);for(let l of s){let c=RN(l,e,t);c&&r.push(c)}return r}function hA(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function NL(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function AL(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function jL(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function SL(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function EL(n,e,t,s,r){let l=n.headerToolbar?tw(n.headerToolbar,n,e,t,s,r):null,c=n.footerToolbar?tw(n.footerToolbar,n,e,t,s,r):null;return{header:l,footer:c}}function tw(n,e,t,s,r,l){let c={},u=[],h=!1;for(let m in n){let p=n[m],x=_L(p,e,t,s,r,l);c[m]=x.widgets,u.push(...x.viewsWithButtons),h=h||x.hasTitle}return{sectionWidgets:c,viewsWithButtons:u,hasTitle:h}}function _L(n,e,t,s,r,l){let c=e.direction==="rtl",u=e.customButtons||{},h=t.buttonText||{},m=e.buttonText||{},p=t.buttonHints||{},x=e.buttonHints||{},y=n?n.split(" "):[],v=[],N=!1;return{widgets:y.map(A=>A.split(",").map(j=>{if(j==="title")return N=!0,{buttonName:j};let C,S,T,R,O,H;if(C=u[j])T=V=>{C.click&&C.click.call(V.target,V,V.target)},(R=s.getCustomButtonIconClass(C))||(R=s.getIconClass(j,c))||(O=C.text),H=C.hint||C.text;else if(S=r[j]){v.push(j),T=()=>{l.changeView(j)},(O=S.buttonTextOverride)||(R=s.getIconClass(j,c))||(O=S.buttonTextDefault);let V=S.buttonTextOverride||S.buttonTextDefault;H=bo(S.buttonTitleOverride||S.buttonTitleDefault||e.viewHint,[V,j],V)}else if(l[j])if(T=()=>{l[j]()},(O=h[j])||(R=s.getIconClass(j,c))||(O=m[j]),j==="prevYear"||j==="nextYear"){let V=j==="prevYear"?"prev":"next";H=bo(p[V]||x[V],[m.year||"year","year"],m[j])}else H=V=>bo(p[j]||x[j],[m[V]||V,V],m[j]);return{buttonName:j,buttonClick:T,buttonIcon:R,buttonText:O,buttonHint:H}})),viewsWithButtons:v,hasTitle:N}}class CL{constructor(e,t,s){this.type=e,this.getCurrentData=t,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let TL={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const DL=ii({name:"array-event-source",eventSourceDefs:[TL]});let RL={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:s}=n.context,r=n.eventSource.meta;MM(r.bind(null,zN(n.range,s)),l=>e({rawEvents:l}),t)}};const kL=ii({name:"func-event-source",eventSourceDefs:[RL]}),ML={method:String,extraParams:ie,startParam:String,endParam:String,timeZoneParam:String};let LL={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:s}=n.eventSource,r=PL(s,n.range,n.context);LM(s.method,s.url,r).then(([l,c])=>{e({rawEvents:l,response:c})},t)}};const OL=ii({name:"json-event-source",eventSourceRefiners:ML,eventSourceDefs:[LL]});function PL(n,e,t){let{dateEnv:s,options:r}=t,l,c,u,h,m={};return l=n.startParam,l==null&&(l=r.startParam),c=n.endParam,c==null&&(c=r.endParam),u=n.timeZoneParam,u==null&&(u=r.timeZoneParam),typeof n.extraParams=="function"?h=n.extraParams():h=n.extraParams||{},Object.assign(m,h),m[l]=s.formatIso(e.start),m[c]=s.formatIso(e.end),s.timeZone!=="local"&&(m[u]=s.timeZone),m}const IL={daysOfWeek:ie,startTime:ht,endTime:ht,duration:ht,startRecur:ie,endRecur:ie};let BL={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},s;return n.duration&&(s=n.duration),!s&&n.startTime&&n.endTime&&(s=VR(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:s,typeData:t}}return null},expand(n,e,t){let s=el(e,{start:n.startRecur,end:n.endRecur});return s?zL(n.daysOfWeek,n.startTime,n.dateEnv,t,s):[]}};const HL=ii({name:"simple-recurring-event",recurringTypes:[BL],eventRefiners:IL});function zL(n,e,t,s,r){let l=n?bN(n):null,c=Ct(r.start),u=r.end,h=[];for(e&&(e.milliseconds<0?u=ls(u,1):e.milliseconds>=1e3*60*60*24&&(c=ls(c,-1)));c<u;){let m;(!l||l[c.getUTCDay()])&&(e?m=s.add(c,e):m=c,h.push(s.createMarker(t.toDate(m)))),c=ls(c,1)}return h}const FL=ii({name:"change-handler",optionChangeHandlers:{events(n,e){sw([n],e)},eventSources:sw}});function sw(n,e){let t=lg(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let s=[];for(let r of n){let l=!1;for(let c=0;c<t.length;c+=1)if(t[c]._raw===r){t.splice(c,1),l=!0;break}l||s.push(r)}for(let r of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of s)e.calendarApi.addEventSource(r)}function UL(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},zN(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function $L(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Hi(n,e))}const VL=[DL,kL,OL,HL,FL,ii({name:"misc",isLoadingFuncs:[n=>oA(n.eventSources)],propSetHandlers:{dateProfile:UL,eventStore:$L}})];class GL{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Jp(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],s;for(;s=e.shift();)this.runTask(s),t.push(s);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function qL(n,e,t){let s;return/^(year|month)$/.test(n.currentRangeUnit)?s=n.currentRange:s=n.activeRange,t.formatRange(s.start,s.end,rs(e.titleFormat||YL(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function YL(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=Kd(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class nw{constructor(){this.resetListeners=new Set}handleInput(e,t){const s=this.dateEnv;if(e!==s&&(typeof t=="function"?this.nowFn=t:s||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,s))for(const r of this.resetListeners.values())r()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class WL{constructor(e){this.computeCurrentViewData=ct(this._computeCurrentViewData),this.organizeRawLocales=ct(Q3),this.buildLocale=ct(rA),this.buildPluginHooks=eL(),this.buildDateEnv=ct(XL),this.buildTheme=ct(QL),this.parseToolbars=ct(EL),this.buildViewSpecs=ct(rL),this.buildDateProfileGenerator=Pd(ZL),this.buildViewApi=ct(KL),this.buildViewUiProps=Pd(tO),this.buildEventUiBySource=ct(JL,Cn),this.buildEventUiBases=ct(eO),this.parseContextBusinessHours=Pd(sO),this.buildTitle=ct(qL),this.nowManager=new nw,this.emitter=new Du,this.actionRunner=new GL(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=y=>{this.actionRunner.request(y)},this.props=e,this.actionRunner.pause(),this.nowManager=new nw;let t={},s=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),r=s.calendarOptions.initialView||s.pluginHooks.initialView,l=this.computeCurrentViewData(r,s,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(l.options);let c={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},u=uL(s.calendarOptions,s.dateEnv,this.nowManager),h=l.dateProfileGenerator.build(u);Ja(h.activeRange,u)||(u=h.currentRange.start);for(let y of s.pluginHooks.contextInit)y(c);let m=mL(s.calendarOptions,h,c),p={dynamicOptionOverrides:t,currentViewType:r,currentDate:u,dateProfile:h,businessHours:this.parseContextBusinessHours(c),eventSources:m,eventUiBases:{},eventStore:Sn(),renderableEventStore:Sn(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(c).selectionConfig},x=Object.assign(Object.assign({},c),p);for(let y of s.pluginHooks.reducers)Object.assign(p,y(null,null,x));Om(p,c)&&this.emitter.trigger("loading",!0),this.state=p,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:s}=this;t===void 0?s.optionOverrides=e:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:s,emitter:r}=this,l=hL(s.dynamicOptionOverrides,e),c=this.computeOptionsData(t.optionOverrides,l,t.calendarApi),u=cL(s.currentViewType,e),h=this.computeCurrentViewData(u,c,t.optionOverrides,l);t.calendarApi.currentDataManager=this,r.setThisContext(t.calendarApi),r.setOptions(h.options);let m={nowManager:this.nowManager,dateEnv:c.dateEnv,options:c.calendarOptions,pluginHooks:c.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:p,dateProfile:x}=s;this.data&&this.data.dateProfileGenerator!==h.dateProfileGenerator&&(x=h.dateProfileGenerator.build(p)),p=dL(p,e),x=fL(x,e,p,h.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Ja(x.currentRange,p))&&(p=x.currentRange.start);let y=pL(s.eventSources,e,x,m),v=iM(s.eventStore,e,y,x,m),w=oA(y)&&!h.options.progressiveEventRendering&&s.renderableEventStore||v,{eventUiSingleBase:A,selectionConfig:j}=this.buildViewUiProps(m),C=this.buildEventUiBySource(y),S=this.buildEventUiBases(w.defs,A,C),T={dynamicOptionOverrides:l,currentViewType:u,currentDate:p,dateProfile:x,eventSources:y,eventStore:v,renderableEventStore:w,selectionConfig:j,eventUiBases:S,businessHours:this.parseContextBusinessHours(m),dateSelection:NL(s.dateSelection,e),eventSelection:AL(s.eventSelection,e),eventDrag:jL(s.eventDrag,e),eventResize:SL(s.eventResize,e)},R=Object.assign(Object.assign({},m),T);for(let V of c.pluginHooks.reducers)Object.assign(T,V(s,e,R));let O=Om(s,m),H=Om(T,m);!O&&H?r.trigger("loading",!0):O&&!H&&r.trigger("loading",!1),this.state=T,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,s=this.data,r=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),l=this.computeCurrentViewData(t.currentViewType,r,e.optionOverrides,t.dynamicOptionOverrides),c=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,l.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),l),t),u=r.pluginHooks.optionChangeHandlers,h=s&&s.calendarOptions,m=r.calendarOptions;if(h&&h!==m){h.timeZone!==m.timeZone&&(t.eventSources=c.eventSources=gL(c.eventSources,t.dateProfile,c),t.eventStore=c.eventStore=$v(c.eventStore,s.dateEnv,c.dateEnv),t.renderableEventStore=c.renderableEventStore=$v(c.renderableEventStore,s.dateEnv,c.dateEnv));for(let p in u)(this.optionsForHandling.indexOf(p)!==-1||h[p]!==m[p])&&u[p](m[p],c)}this.optionsForHandling=[],e.onData&&e.onData(c)}computeOptionsData(e,t,s){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:l,localeDefaults:c,availableLocaleData:u,extra:h}=this.processRawCalendarOptions(e,t);aw(h);let m=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,l,u,r.defaultRangeSeparator),p=this.buildViewSpecs(l.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,c),x=this.buildTheme(r,l),y=this.parseToolbars(r,this.stableOptionOverrides,x,p,s);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:l,dateEnv:m,viewSpecs:p,theme:x,toolbarConfig:y,localeDefaults:c,availableRawLocales:u.map}}processRawCalendarOptions(e,t){let{locales:s,locale:r}=_m([vo,e,t]),l=this.organizeRawLocales(s),c=l.map,u=this.buildLocale(r||l.defaultCode,c).options,h=this.buildPluginHooks(e.plugins||[],VL),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Pv),Iv),Bv),h.listenerRefiners),h.optionRefiners),p={},x=_m([vo,u,e,t]),y={},v=this.currentCalendarOptionsInput,N=this.currentCalendarOptionsRefined,w=!1;for(let A in x)this.optionsForRefining.indexOf(A)===-1&&(x[A]===v[A]||_i[A]&&A in v&&_i[A](v[A],x[A]))?y[A]=N[A]:m[A]?(y[A]=m[A](x[A]),w=!0):p[A]=v[A];return w&&(this.currentCalendarOptionsInput=x,this.currentCalendarOptionsRefined=y,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:h,availableLocaleData:l,localeDefaults:u,extra:p}}_computeCurrentViewData(e,t,s,r){let l=t.viewSpecs[e];if(!l)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:c,extra:u}=this.processRawViewOptions(l,t.pluginHooks,t.localeDefaults,s,r);aw(u),this.nowManager.handleInput(t.dateEnv,c.now);let h=this.buildDateProfileGenerator({dateProfileGeneratorClass:l.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:l.duration,durationUnit:l.durationUnit,usesMinMaxTime:l.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:c.slotMinTime,slotMaxTime:c.slotMaxTime,showNonCurrentDates:c.showNonCurrentDates,dayCount:c.dayCount,dateAlignment:c.dateAlignment,dateIncrement:c.dateIncrement,hiddenDays:c.hiddenDays,weekends:c.weekends,validRangeInput:c.validRange,visibleRangeInput:c.visibleRange,fixedWeekCount:c.fixedWeekCount}),m=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:l,options:c,dateProfileGenerator:h,viewApi:m}}processRawViewOptions(e,t,s,r,l){let c=_m([vo,e.optionDefaults,s,r,e.optionOverrides,l]),u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Pv),Iv),Bv),Nk),t.listenerRefiners),t.optionRefiners),h={},m=this.currentViewOptionsInput,p=this.currentViewOptionsRefined,x=!1,y={};for(let v in c)c[v]===m[v]||_i[v]&&_i[v](c[v],m[v])?h[v]=p[v]:(c[v]===this.currentCalendarOptionsInput[v]||_i[v]&&_i[v](c[v],this.currentCalendarOptionsInput[v])?v in this.currentCalendarOptionsRefined&&(h[v]=this.currentCalendarOptionsRefined[v]):u[v]?h[v]=u[v](c[v]):y[v]=c[v],x=!0);return x&&(this.currentViewOptionsInput=c,this.currentViewOptionsRefined=h),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:y}}}function XL(n,e,t,s,r,l,c,u){let h=rA(e||c.defaultCode,c.map);return new Mk({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:l.namedTimeZonedImpl,locale:h,weekNumberCalculation:t,firstDay:s,weekText:r,cmdFormatter:l.cmdFormatter,defaultSeparator:u})}function QL(n,e){let t=e.themeClasses[n.themeSystem]||ri;return new t(n)}function ZL(n){let e=n.dateProfileGeneratorClass||_N;return new e(n)}function KL(n,e,t){return new CL(n,e,t)}function JL(n){return Xi(n,e=>e.ui)}function eO(n,e,t){let s={"":e};for(let r in n){let l=n[r];l.sourceId&&t[l.sourceId]&&(s[r]=t[l.sourceId])}return s}function tO(n){let{options:e}=n;return{eventUiSingleBase:au({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:au({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function Om(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function sO(n){return mM(n.options.businessHours,n)}function aw(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class nO extends Lt{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return le("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:s}=this.context,r=[],l=!0;for(let c of e){let{buttonName:u,buttonClick:h,buttonText:m,buttonIcon:p,buttonHint:x}=c;if(u==="title")l=!1,r.push(le("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let y=u===t.activeButton,v=!t.isTodayEnabled&&u==="today"||!t.isPrevEnabled&&u==="prev"||!t.isNextEnabled&&u==="next",N=[`fc-${u}-button`,s.getClass("button")];y&&N.push(s.getClass("buttonActive")),r.push(le("button",{type:"button",title:typeof x=="function"?x(t.navUnit):x,disabled:v,"aria-pressed":y,className:N.join(" "),onClick:h},m||(p?le("span",{className:p,role:"img"}):"")))}}if(r.length>1){let c=l&&s.getClass("buttonGroup")||"";return le("div",{className:c},...r)}return r[0]}}class iw extends Lt{render(){let{model:e,extraClassName:t}=this.props,s=!1,r,l,c=e.sectionWidgets,u=c.center;return c.left?(s=!0,r=c.left):r=c.start,c.right?(s=!0,l=c.right):l=c.end,le("div",{className:[t||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",u||[]),this.renderSection("end",l||[]))}renderSection(e,t){let{props:s}=this;return le(nO,{key:e,widgetGroups:t,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}}class aO extends Lt{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Qn(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:s}=e,r=["fc-view-harness",s||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],l="",c="";return s?t.availableWidth!==null?l=t.availableWidth/s:c=`${1/s*100}%`:l=e.height||"",le("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:l,paddingBottom:c}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class iO extends cl{constructor(e){super(e),this.handleSegClick=(t,s)=>{let{component:r}=this,{context:l}=r,c=tl(s);if(c&&r.isValidSegDownEl(t.target)){let u=Ns(t.target,".fc-event-forced-url"),h=u?u.querySelector("a[href]").href:"";l.emitter.trigger("eventClick",{el:s,event:new Tt(r.context,c.eventRange.def,c.eventRange.instance),jsEvent:t,view:l.viewApi}),h&&!t.defaultPrevented&&(window.location.href=h)}},this.destroy=pN(e.el,"click",".fc-event",this.handleSegClick)}}class rO extends cl{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,s)=>{tl(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",t,s))},this.handleSegLeave=(t,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,s))},this.removeHoverListeners=TR(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,s){let{component:r}=this,{context:l}=r,c=tl(s);(!t||r.isValidSegDownEl(t.target))&&l.emitter.trigger(e,{el:s,event:new Tt(l,c.eventRange.def,c.eventRange.instance),jsEvent:t,view:l.viewApi})}}class lO extends Zi{constructor(){super(...arguments),this.buildViewContext=ct(Pk),this.buildViewPropTransformers=ct(cO),this.buildToolbarProps=ct(oO),this.headerRef=ba(),this.footerRef=ba(),this.interactionsStore={},this.state={viewLabelId:Eu()},this.registerInteractiveComponent=(e,t)=>{let s=IM(e,t),c=[iO,rO].concat(this.props.pluginHooks.componentInteractions).map(u=>new u(s));this.interactionsStore[e.uid]=c,pp[e.uid]=s},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let s of t)s.destroy();delete this.interactionsStore[e.uid]}delete pp[e.uid]},this.resizeRunner=new Jp(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:s}=e,r=!1,l="",c;e.isHeightAuto||e.forPrint?l="":s.height!=null?r=!0:s.contentHeight!=null?l=s.contentHeight:c=Math.max(s.aspectRatio,.5);let u=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),h=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return le(Qi.Provider,{value:u},le(Ru,{unit:"day"},m=>{let p=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,m,e.viewTitle);return le(It,null,t.header&&le(iw,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:h},p)),le(aO,{liquid:r,height:l,aspectRatio:c,labeledById:h},this.renderView(e),this.buildAppendContent()),t.footer&&le(iw,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},p)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(s=>new s(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let s in t)t[s](e[s],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:s}=t.pluginHooks;for(let r in s)t[r]!==e[r]&&s[r](t[r],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(s=>s(e));return le(It,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:s}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},l=this.buildViewPropTransformers(t.viewPropsTransformers);for(let u of l)Object.assign(r,u.transform(r,e));let c=s.component;return le(c,Object.assign({},r))}}function oO(n,e,t,s,r,l){let c=t.build(r,void 0,!1),u=t.buildPrev(e,s,!1),h=t.buildNext(e,s,!1);return{title:l,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:c.isValid&&!Ja(e.currentRange,r),isPrevEnabled:u.isValid,isNextEnabled:h.isValid}}function cO(n){return n.map(e=>new e)}class dO extends HM{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;su(()=>{Do(le(PM,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(r,l,c,u)=>(this.setClassNames(r),this.setHeight(l),le(AN.Provider,{value:this.customContentRenderId},le(lO,Object.assign({isHeightAuto:c,forPrint:u},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Do(null,this.el),this.setClassNames([]),this.setHeight(""))},vR(e),this.el=e,this.renderRunner=new Jp(this.handleRenderRequest),new WL({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){su(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!si(e,this.currentClassNames)){let{classList:t}=this.el;for(let s of this.currentClassNames)t.remove(s);for(let s of e)t.add(s);this.currentClassNames=e}}setHeight(e){fN(this.el,"height",e)}}const uO=parseInt(String(Ao.version).split(".")[0]),hO=uO<18;class fA extends _.Component{constructor(){super(...arguments),this.elRef=_.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(Ao.createElement(fO,{key:t.id,customRendering:t}));return Ao.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new W3;this.handleCustomRendering=e.handle.bind(e),this.calendar=new dO(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Um.flushSync(()=>{})});let t;e.subscribe(s=>{const r=Date.now(),l=!t;(hO||l||this.isUpdating||this.isUnmounting||r-t<100?mA:Um.flushSync)(()=>{this.setState({customRenderingMap:s},()=>{t=r,l?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}fA.act=mA;class fO extends _.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,s=typeof t=="function"?t(e.renderProps):t;return Um.createPortal(s,e.containerEl)}}function mA(n){n()}class mO extends Ki{constructor(){super(...arguments),this.headerElRef=ba()}renderSimpleLayout(e,t){let{props:s,context:r}=this,l=[],c=Qv(r.options);return e&&l.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),l.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),le(Hv,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},le(eA,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:l}))}renderHScrollLayout(e,t,s,r){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{props:c,context:u}=this,h=!c.forPrint&&Qv(u.options),m=!c.forPrint&&T3(u.options),p=[];return e&&p.push({type:"header",key:"header",isSticky:h,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),p.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),m&&p.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:C3}]}),le(Hv,{elClasses:["fc-daygrid"],viewSpec:u.viewSpec},le(l,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:c.forPrint,colGroups:[{cols:[{span:s,minWidth:r}]}],sections:p}))}}function Bd(n,e){let t=[];for(let s=0;s<e;s+=1)t[s]=[];for(let s of n)t[s.row].push(s);return t}function jd(n,e){let t=[];for(let s=0;s<e;s+=1)t[s]=[];for(let s of n)t[s.firstCol].push(s);return t}function rw(n,e){let t=[];if(n){for(let s=0;s<e;s+=1)t[s]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let s of n.segs)t[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)t[s]=null;return t}const pA=rs({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function gA(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class xA extends Lt{render(){let{props:e}=this;return le(tA,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:pA,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class yA extends Lt{render(){let{props:e,context:t}=this,{options:s}=t,{seg:r}=e,l=s.eventTimeFormat||pA,c=BN(r,l,t,!0,e.defaultDisplayEventEnd);return le(wg,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:HN(e.seg,t),defaultGenerator:pO,timeText:c,isResizing:!1,isDateSelecting:!1}))}}function pO(n){return le(It,null,le("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&le("div",{className:"fc-event-time"},n.timeText),le("div",{className:"fc-event-title"},n.event.title||le(It,null,"")))}class gO extends Lt{constructor(){super(...arguments),this.compileSegs=ct(xO)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return le(F3,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return le(It,null,t.map(l=>{let c=l.eventRange.instance.instanceId;return le("div",{className:"fc-daygrid-event-harness",key:c,style:{visibility:r[c]?"hidden":""}},gA(l)?le(yA,Object.assign({seg:l,isDragging:!1,isSelected:c===e.eventSelection,defaultDisplayEventEnd:!1},wo(l,e.todayRange))):le(xA,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:c===e.eventSelection,defaultDisplayEventEnd:!1},wo(l,e.todayRange))))}))}})}}function xO(n){let e=[],t=[];for(let s of n)e.push(s.seg),s.isVisible||t.push(s.seg);return{allSegs:e,invisibleSegs:t}}const yO=rs({week:"narrow"});class bO extends Ki{constructor(){super(...arguments),this.rootElRef=ba(),this.state={dayNumberId:Eu()},this.handleRootEl=e=>{Qn(this.rootElRef,e),Qn(this.props.elRef,e)}}render(){let{context:e,props:t,state:s,rootElRef:r}=this,{options:l,dateEnv:c}=e,{date:u,dateProfile:h}=t;const m=t.showDayNumber&&wO(u,h.currentRange,c);return le(sA,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:vO,date:u,dateProfile:h,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:m,extraRenderProps:t.extraRenderProps},(p,x)=>le("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&le(I3,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:gp(e,u,"week"),date:u,defaultFormat:yO}),!x.isDisabled&&(t.showDayNumber||nA(l)||t.forceDayTop)?le("div",{className:"fc-daygrid-day-top"},le(p,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},gp(e,u)),{id:s.dayNumberId})})):t.showDayNumber?le("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},le("a",{className:"fc-daygrid-day-number"},"")):void 0,le("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,le("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},le(gO,{allDayDate:u,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),le("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function vO(n){return n.dayNumberText||le(It,null,"")}function wO(n,e,t){const{start:s,end:r}=e,l=ni(r,-1),c=t.getYear(s),u=t.getMonth(s),h=t.getYear(l),m=t.getMonth(l);return!(c===h&&u===m)&&(n.valueOf()===s.valueOf()||t.getDay(n)===1&&n.valueOf()<r.valueOf())}function bA(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function vA(n){return bA(n)+":"+n.lastCol}function NO(n,e,t,s,r,l,c){let u=new SO(j=>{let C=n[j.index].eventRange.instance.instanceId+":"+j.span.start+":"+(j.span.end-1);return r[C]||1});u.allowReslicing=!0,u.strictOrder=s,e===!0||t===!0?(u.maxCoord=l,u.hiddenConsumes=!0):typeof e=="number"?u.maxStackCnt=e:typeof t=="number"&&(u.maxStackCnt=t,u.hiddenConsumes=!0);let h=[],m=[];for(let j=0;j<n.length;j+=1){let C=n[j],S=vA(C);r[S]!=null?h.push({index:j,span:{start:C.firstCol,end:C.lastCol+1}}):m.push(C)}let p=u.addSegs(h),x=u.toRects(),{singleColPlacements:y,multiColPlacements:v,leftoverMargins:N}=AO(x,n,c),w=[],A=[];for(let j of m){v[j.firstCol].push({seg:j,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let C=j.firstCol;C<=j.lastCol;C+=1)y[C].push({seg:Xr(j,C,C+1,c),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let j=0;j<c.length;j+=1)w.push(0);for(let j of p){let C=n[j.index],S=j.span;v[S.start].push({seg:Xr(C,S.start,S.end,c),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let T=S.start;T<S.end;T+=1)w[T]+=1,y[T].push({seg:Xr(C,T,T+1,c),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let j=0;j<c.length;j+=1)A.push(N[j]);return{singleColPlacements:y,multiColPlacements:v,moreCnts:w,moreMarginTops:A}}function AO(n,e,t){let s=jO(n,t.length),r=[],l=[],c=[];for(let u=0;u<t.length;u+=1){let h=s[u],m=[],p=0,x=0;for(let v of h){let N=e[v.index];m.push({seg:Xr(N,u,u+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:v.levelCoord-p}),p=v.levelCoord+v.thickness}let y=[];p=0,x=0;for(let v of h){let N=e[v.index],w=v.span.end-v.span.start>1,A=v.span.start===u;x+=v.levelCoord-p,p=v.levelCoord+v.thickness,w?(x+=v.thickness,A&&y.push({seg:Xr(N,v.span.start,v.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:v.levelCoord,marginTop:0})):A&&(y.push({seg:Xr(N,v.span.start,v.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:x}),x=0)}r.push(m),l.push(y),c.push(x)}return{singleColPlacements:r,multiColPlacements:l,leftoverMargins:c}}function jO(n,e){let t=[];for(let s=0;s<e;s+=1)t.push([]);for(let s of n)for(let r=s.span.start;r<s.span.end;r+=1)t[r].push(s);return t}function Xr(n,e,t,s){if(n.firstCol===e&&n.lastCol===t-1)return n;let r=n.eventRange,l=r.range,c=el(l,{start:s[e].date,end:ls(s[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:c},isStart:n.isStart&&c.start.valueOf()===l.start.valueOf(),isEnd:n.isEnd&&c.end.valueOf()===l.end.valueOf()})}class SO extends t3{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:s}=this,r=l=>!this.forceHidden[No(l)];for(let l=0;l<s.length;l+=1)s[l]=s[l].filter(r);return t}handleInvalidInsertion(e,t,s){const{entriesByLevel:r,forceHidden:l}=this,{touchingEntry:c,touchingLevel:u,touchingLateral:h}=e;if(this.hiddenConsumes&&c){const m=No(c);if(!l[m])if(this.allowReslicing){const p=Object.assign(Object.assign({},c),{span:YN(c.span,t.span)}),x=No(p);l[x]=!0,r[u][h]=p,s.push(p),this.splitEntry(c,t,s)}else l[m]=!0,s.push(c)}super.handleInvalidInsertion(e,t,s)}}class wA extends Ki{constructor(){super(...arguments),this.cellElRefs=new Mi,this.frameElRefs=new Mi,this.fgElRefs=new Mi,this.segHarnessRefs=new Mi,this.rootElRef=ba(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:s}=this,{options:r}=s,l=e.cells.length,c=jd(e.businessHourSegs,l),u=jd(e.bgEventSegs,l),h=jd(this.getHighlightSegs(),l),m=jd(this.getMirrorSegs(),l),{singleColPlacements:p,multiColPlacements:x,moreCnts:y,moreMarginTops:v}=NO(bM(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),N=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return le("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((w,A)=>{let j=this.renderFgSegs(A,e.forPrint?p[A]:x[A],e.todayRange,N),C=this.renderFgSegs(A,EO(m[A],x),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return le(bO,{key:w.key,elRef:this.cellElRefs.createRef(w.key),innerElRef:this.frameElRefs.createRef(w.key),dateProfile:e.dateProfile,date:w.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&A===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:w.extraRenderProps,extraDataAttrs:w.extraDataAttrs,extraClassNames:w.extraClassNames,extraDateSpan:w.extraDateSpan,moreCnt:y[A],moreMarginTop:v[A],singlePlacements:p[A],fgContentElRef:this.fgElRefs.createRef(w.key),fgContent:le(It,null,le(It,null,j),le(It,null,C)),bgContent:le(It,null,this.renderFillSegs(h[A],"highlight"),this.renderFillSegs(c[A],"non-business"),this.renderFillSegs(u[A],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let s=this.props;this.updateSizing(!Cn(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,s,r,l,c,u){let{context:h}=this,{eventSelection:m}=this.props,{framePositions:p}=this.state,x=this.props.cells.length===1,y=l||c||u,v=[];if(p)for(let N of t){let{seg:w}=N,{instanceId:A}=w.eventRange.instance,j=N.isVisible&&!r[A],C=N.isAbsolute,S="",T="";C&&(h.isRtl?(T=0,S=p.lefts[w.lastCol]-p.lefts[w.firstCol]):(S=0,T=p.rights[w.firstCol]-p.rights[w.lastCol])),v.push(le("div",{className:"fc-daygrid-event-harness"+(C?" fc-daygrid-event-harness-abs":""),key:bA(w),ref:y?null:this.segHarnessRefs.createRef(vA(w)),style:{visibility:j?"":"hidden",marginTop:C?"":N.marginTop,top:C?N.absoluteTop:"",left:S,right:T}},gA(w)?le(yA,Object.assign({seg:w,isDragging:l,isSelected:A===m,defaultDisplayEventEnd:x},wo(w,s))):le(xA,Object.assign({seg:w,isDragging:l,isResizing:c,isDateSelecting:u,isSelected:A===m,defaultDisplayEventEnd:x},wo(w,s)))))}return v}renderFillSegs(e,t){let{isRtl:s}=this.context,{todayRange:r}=this.props,{framePositions:l}=this.state,c=[];if(l)for(let u of e){let h=s?{right:0,left:l.lefts[u.lastCol]-l.lefts[u.firstCol]}:{left:0,right:l.rights[u.firstCol]-l.rights[u.lastCol]};c.push(le("div",{key:SM(u.eventRange),className:"fc-daygrid-bg-harness",style:h},t==="bg-event"?le(L3,Object.assign({seg:u},wo(u,r))):P3(t)))}return le(It,{},...c)}updateSizing(e){let{props:t,state:s,frameElRefs:r}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let h=t.cells.map(m=>r.currentMap[m.key]);if(h.length){let m=this.rootElRef.current,p=new ru(m,h,!0,!1);(!s.framePositions||!s.framePositions.similarTo(p))&&this.setState({framePositions:new ru(m,h,!0,!1)})}}const l=this.state.segHeights,c=this.querySegHeights(),u=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},l),c),maxContentHeight:u?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let s in e){let r=Math.round(e[s].getBoundingClientRect().height);t[s]=Math.max(t[s]||0,r)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}wA.addStateEquality({segHeights:Cn});function EO(n,e){if(!n.length)return[];let t=_O(e);return n.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:t[s.eventRange.instance.instanceId],marginTop:0}))}function _O(n){let e={};for(let t of n)for(let s of t)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class CO extends Ki{constructor(){super(...arguments),this.splitBusinessHourSegs=ct(Bd),this.splitBgEventSegs=ct(TO),this.splitFgEventSegs=ct(Bd),this.splitDateSelectionSegs=ct(Bd),this.splitEventDrag=ct(rw),this.splitEventResize=ct(rw),this.rowRefs=new Mi}render(){let{props:e,context:t}=this,s=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,s),l=this.splitBgEventSegs(e.bgEventSegs,s),c=this.splitFgEventSegs(e.fgEventSegs,s),u=this.splitDateSelectionSegs(e.dateSelectionSegs,s),h=this.splitEventDrag(e.eventDrag,s),m=this.splitEventResize(e.eventResize,s),p=s>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return le(Ru,{unit:"day"},(x,y)=>le(It,null,e.cells.map((v,N)=>le(wA,{ref:this.rowRefs.createRef(N),key:v.length?v[0].date.toISOString():N,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:y,dateProfile:e.dateProfile,cells:v,renderIntro:e.renderRowIntro,businessHourSegs:r[N],eventSelection:e.eventSelection,bgEventSegs:l[N],fgEventSegs:c[N],dateSelectionSegs:u[N],eventDrag:h[N],eventResize:m[N],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:p,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ru(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new ru(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:s,rowPositions:r}=this,l=s.leftToIndex(e),c=r.topToIndex(t);if(c!=null&&l!=null){let u=this.props.cells[c][l];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(c,l),allDay:!0},u.extraDateSpan),dayEl:this.getCellEl(c,l),rect:{left:s.lefts[l],right:s.rights[l],top:r.tops[c],bottom:r.bottoms[c]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let s=this.props.cells[e][t].date,r=ls(s,1);return{start:s,end:r}}}function TO(n,e){return Bd(n.filter(DO),e)}function DO(n){return n.eventRange.def.allDay}class RO extends Ki{constructor(){super(...arguments),this.elRef=ba(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:s,expandRows:r}=e,l=s===!0||t===!0;l&&!r&&(l=!1,t=null,s=null);let c=["fc-daygrid-body",l?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return le("div",{ref:this.elRef,className:c.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},le("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,le("tbody",{role:"presentation"},le(CO,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=kO(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),s=t.closest(".fc-scroller"),r=e.getBoundingClientRect().top-t.getBoundingClientRect().top;s.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function kO(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${rk(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${ng(e.currentDate)}"]`)),t}class MO extends u3{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class LO extends Ki{constructor(){super(...arguments),this.slicer=new MO,this.tableRef=ba()}render(){let{props:e,context:t}=this;return le(RO,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class OO extends mO{constructor(){super(...arguments),this.buildDayTableModel=ct(PO),this.headerRef=ba(),this.tableRef=ba()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:s}=this,r=this.buildDayTableModel(s.dateProfile,t),l=e.dayHeaders&&le(l3,{ref:this.headerRef,dateProfile:s.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),c=u=>le(LO,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:r,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:u.tableColGroupNode,tableMinWidth:u.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:u.clientWidth,clientHeight:u.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(l,c,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(l,c)}}function PO(n,e){let t=new c3(n.renderRange,e);return new d3(t,/year|month|week/.test(n.currentRangeUnit))}class IO extends _N{buildRenderRange(e,t,s){let r=super.buildRenderRange(e,t,s),{props:l}=this;return BO({currentRange:r,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:l.fixedWeekCount,dateEnv:l.dateEnv})}}function BO(n){let{dateEnv:e,currentRange:t}=n,{start:s,end:r}=t,l;if(n.snapToWeek&&(s=e.startOfWeek(s),l=e.startOfWeek(r),l.valueOf()!==r.valueOf()&&(r=Rv(l,1))),n.fixedWeekCount){let c=e.startOfWeek(e.startOfMonth(ls(t.end,-1))),u=Math.ceil(WR(c,r));r=Rv(r,6-u)}return{start:s,end:r}}var HO=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';dN(HO);var zO=ii({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:OO,dateProfileGeneratorClass:IO},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});vg.touchMouseIgnoreWait=500;let yp=0,lu=0,bp=!1;class NA{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&FO(t)&&this.tryStart(t)){let s=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let s=this.createEventFromMouse(t);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let s=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let r=t.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let s=this.createEventFromTouch(t);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=t=>{if(this.isDragging){let s=t.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,UO()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let s=window.scrollX-this.prevScrollX+this.prevPageX,r=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:r,deltaX:s-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=e,this.emitter=new Du,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),$O()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),VO()}tryStart(e){let t=this.querySubjectEl(e),s=e.target;return t&&(!this.handleSelector||Ns(s,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){bp=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Ns(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return yp||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(bp=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let s=0,r=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(s=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:s,deltaY:r}}createEventFromTouch(e,t){let s=e.touches,r,l,c=0,u=0;return s&&s.length?(r=s[0].pageX,l=s[0].pageY):(r=e.pageX,l=e.pageY),t?(this.origPageX=r,this.origPageY=l):(c=r-this.origPageX,u=l-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:l,deltaX:c,deltaY:u}}}function FO(n){return n.button===0&&!n.ctrlKey}function UO(){yp+=1,setTimeout(()=>{yp-=1},vg.touchMouseIgnoreWait)}function $O(){lu+=1,lu===1&&window.addEventListener("touchmove",AA,{passive:!1})}function VO(){lu-=1,lu||window.removeEventListener("touchmove",AA,{passive:!1})}function AA(n){bp&&n.preventDefault()}class GO{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,s){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=s-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let s=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(e,t){let s=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();s.style.transition="top "+t+"ms,left "+t+"ms",yo(s,{left:r.left,top:r.top}),DR(s,()=>{s.style.transition="",e()})}cleanup(){this.mirrorEl&&(eg(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&yo(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),yo(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class jA extends bg{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class SA extends jA{constructor(e,t){super(new JM(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return ZM(this.scrollController.el)}}class qO extends jA{constructor(e){super(new e3,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const lw=typeof performance=="function"?performance.now:Date.now;class YO{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=lw();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let s=e-window.scrollX,r=t-window.scrollY,l=this.pointerScreenY===null?0:r-this.pointerScreenY,c=this.pointerScreenX===null?0:s-this.pointerScreenX;l<0?this.everMovedUp=!0:l>0&&(this.everMovedDown=!0),c<0?this.everMovedLeft=!0:c>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(lw()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:s}=e,{edgeThreshold:r}=this,l=r-e.distance,c=l*l/(r*r)*this.maxVelocity*t,u=1;switch(e.name){case"left":u=-1;case"right":s.setScrollLeft(s.getScrollLeft()+c*u);break;case"top":u=-1;case"bottom":s.setScrollTop(s.getScrollTop()+c*u);break}}computeBestEdge(e,t){let{edgeThreshold:s}=this,r=null,l=this.scrollCaches||[];for(let c of l){let u=c.clientRect,h=e-u.left,m=u.right-e,p=t-u.top,x=u.bottom-t;h>=0&&m>=0&&p>=0&&x>=0&&(p<=s&&this.everMovedUp&&c.canScrollUp()&&(!r||r.distance>p)&&(r={scrollCache:c,name:"top",distance:p}),x<=s&&this.everMovedDown&&c.canScrollDown()&&(!r||r.distance>x)&&(r={scrollCache:c,name:"bottom",distance:x}),h<=s&&this.everMovedLeft&&c.canScrollLeft()&&(!r||r.distance>h)&&(r={scrollCache:c,name:"left",distance:h}),m<=s&&this.everMovedRight&&c.canScrollRight()&&(!r||r.distance>m)&&(r={scrollCache:c,name:"right",distance:m}))}return r}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new qO(!1):new SA(t,!1))}queryScrollEls(e){let t=[];for(let s of this.scrollQuery)typeof s=="object"?t.push(s):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(s)));return t}}class Xo extends s3{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,RR(document.body),MR(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let l=this.minDistance,c,{deltaX:u,deltaY:h}=r;c=u*u+h*h,c>=l*l&&this.handleDistanceSurpassed(r)}this.isDragging&&(r.origEvent.type!=="scroll"&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,kR(document.body),LR(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new NA(e);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),t&&(s.selector=t),this.mirror=new GO,this.autoScroller=new YO}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class WO{constructor(e){this.el=e,this.origRect=yg(e),this.scrollCaches=qN(e).map(t=>new SA(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let s={left:e,top:t};for(let r of this.scrollCaches)if(!XO(r.getEventTarget())&&!zM(s,r.clientRect))return!1;return!0}}function XO(n){let e=n.tagName;return e==="HTML"||e==="BODY"}class ku{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):r.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Du}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},s=t,r=e.subjectEl,l;r instanceof HTMLElement&&(l=yg(r),s=FM(s,l));let c=this.initialHit=this.queryHitForOffset(s.left,s.top);if(c){if(this.useSubjectCenter&&l){let u=$N(l,c.rect);u&&(s=UM(u))}this.coordAdjust=$M(s,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let s=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!Mu(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,e))}prepareHits(){this.offsetTrackers=Xi(this.droppableStore,e=>(e.component.prepareHits(),new WO(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:s,offsetTrackers:r}=this,l=null;for(let c in s){let u=s[c].component,h=r[c];if(h&&h.isWithinClipping(e,t)){let m=h.computeLeft(),p=h.computeTop(),x=e-m,y=t-p,{origRect:v}=h,N=v.right-v.left,w=v.bottom-v.top;if(x>=0&&x<N&&y>=0&&y<w){let A=u.queryHit(x,y,N,w);A&&Cu(A.dateProfile.activeRange,A.dateSpan.range)&&(this.disablePointCheck||h.el.contains(h.el.getRootNode().elementFromPoint(x+m-window.scrollX,y+p-window.scrollY)))&&(!l||A.layer>l.layer)&&(A.componentId=c,A.context=u.context,A.rect.left+=m,A.rect.right+=m,A.rect.top+=p,A.rect.bottom+=p,l=A)}}}return l}}function Mu(n,e){return!n&&!e?!0:!!n!=!!e?!1:TM(n.dateSpan,e.dateSpan)}function EA(n,e){let t={};for(let s of e.pluginHooks.datePointTransforms)Object.assign(t,s(n,e));return Object.assign(t,QO(n,e.dateEnv)),t}function QO(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class ZO extends cl{constructor(e){super(e),this.handlePointerDown=s=>{let{dragging:r}=this,l=s.origEvent.target;r.setIgnoreMove(!this.component.isValidDateDownEl(l))},this.handleDragEnd=s=>{let{component:r}=this,{pointer:l}=this.dragging;if(!l.wasTouchScroll){let{initialHit:c,finalHit:u}=this.hitDragging;if(c&&u&&Mu(c,u)){let{context:h}=r,m=Object.assign(Object.assign({},EA(c.dateSpan,h)),{dayEl:c.dayEl,jsEvent:s.origEvent,view:h.viewApi||h.calendarApi.view});h.emitter.trigger("dateClick",m)}}},this.dragging=new Xo(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new ku(this.dragging,gg(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class KO extends cl{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=c=>{let{component:u,dragging:h}=this,{options:m}=u.context,p=m.selectable&&u.isValidDateDownEl(c.origEvent.target);h.setIgnoreMove(!p),h.delay=c.isTouch?JO(u):null},this.handleDragStart=c=>{this.component.context.calendarApi.unselect(c)},this.handleHitUpdate=(c,u)=>{let{context:h}=this.component,m=null,p=!1;if(c){let x=this.hitDragging.initialHit;c.componentId===x.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(x,c)||(m=e4(x,c,h.pluginHooks.dateSelectionTransformers)),(!m||!h3(m,c.dateProfile,h))&&(p=!0,m=null)}m?h.dispatch({type:"SELECT_DATES",selection:m}):u||h.dispatch({type:"UNSELECT_DATES"}),p?tg():sg(),u||(this.dragSelection=m)},this.handlePointerUp=c=>{this.dragSelection&&(ON(this.dragSelection,c,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:s}=t.context,r=this.dragging=new Xo(e.el);r.touchScrollAllowed=!1,r.minDistance=s.selectMinDistance||0,r.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new ku(this.dragging,gg(e));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function JO(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function e4(n,e,t){let s=n.dateSpan,r=e.dateSpan,l=[s.range.start,s.range.end,r.range.start,r.range.end];l.sort(HR);let c={};for(let u of t){let h=u(n,e);if(h===!1)return null;h&&Object.assign(c,h)}return c.range={start:l[0],end:l[3]},c.allDay=s.allDay,c}class Qo extends cl{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=c=>{let u=c.origEvent.target,{component:h,dragging:m}=this,{mirror:p}=m,{options:x}=h.context,y=h.context;this.subjectEl=c.subjectEl;let v=this.subjectSeg=tl(c.subjectEl),w=(this.eventRange=v.eventRange).instance.instanceId;this.relevantEvents=hg(y.getCurrentData().eventStore,w),m.minDistance=c.isTouch?0:x.eventDragMinDistance,m.delay=c.isTouch&&w!==h.props.eventSelection?s4(h):null,x.fixedMirrorParent?p.parentNode=x.fixedMirrorParent:p.parentNode=Ns(u,".fc"),p.revertDuration=x.dragRevertDuration;let A=h.isValidSegDownEl(u)&&!Ns(u,".fc-event-resizer");m.setIgnoreMove(!A),this.isDragging=A&&c.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=c=>{let u=this.component.context,h=this.eventRange,m=h.instance.instanceId;c.isTouch?m!==this.component.props.eventSelection&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:m}):u.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(u.calendarApi.unselect(c),u.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Tt(u,h.def,h.instance),jsEvent:c.origEvent,view:u.viewApi}))},this.handleHitUpdate=(c,u)=>{if(!this.isDragging)return;let h=this.relevantEvents,m=this.hitDragging.initialHit,p=this.component.context,x=null,y=null,v=null,N=!1,w={affectedEvents:h,mutatedEvents:Sn(),isEvent:!0};if(c){x=c.context;let A=x.options;p===x||A.editable&&A.droppable?(y=t4(m,c,this.eventRange.instance.range.start,x.getCurrentData().pluginHooks.eventDragMutationMassagers),y&&(v=pg(h,x.getCurrentData().eventUiBases,y,x),w.mutatedEvents=v,QN(w,c.dateProfile,x)||(N=!0,y=null,v=null,w.mutatedEvents=Sn()))):x=null}this.displayDrag(x,w),N?tg():sg(),u||(p===x&&Mu(m,c)&&(y=null),this.dragging.setMirrorNeedsRevert(!y),this.dragging.setMirrorIsVisible(!c||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=x,this.validMutation=y,this.mutatedRelevantEvents=v)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=c=>{if(this.isDragging){let u=this.component.context,h=u.viewApi,{receivingContext:m,validMutation:p}=this,x=this.eventRange.def,y=this.eventRange.instance,v=new Tt(u,x,y),N=this.relevantEvents,w=this.mutatedRelevantEvents,{finalHit:A}=this.hitDragging;if(this.clearDrag(),u.emitter.trigger("eventDragStop",{el:this.subjectEl,event:v,jsEvent:c.origEvent,view:h}),p){if(m===u){let j=new Tt(u,w.defs[x.defId],y?w.instances[y.instanceId]:null);u.dispatch({type:"MERGE_EVENTS",eventStore:w});let C={oldEvent:v,event:j,relatedEvents:Hi(w,u,y),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:N})}},S={};for(let T of u.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(S,T(p,u));u.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},C),S),{el:c.subjectEl,delta:p.datesDelta,jsEvent:c.origEvent,view:h})),u.emitter.trigger("eventChange",C)}else if(m){let j={event:v,relatedEvents:Hi(N,u,y),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:N})}};u.emitter.trigger("eventLeave",Object.assign(Object.assign({},j),{draggedEl:c.subjectEl,view:h})),u.dispatch({type:"REMOVE_EVENTS",eventStore:N}),u.emitter.trigger("eventRemove",j);let C=w.defs[x.defId],S=w.instances[y.instanceId],T=new Tt(m,C,S);m.dispatch({type:"MERGE_EVENTS",eventStore:w});let R={event:T,relatedEvents:Hi(w,m,S),revert(){m.dispatch({type:"REMOVE_EVENTS",eventStore:w})}};m.emitter.trigger("eventAdd",R),c.isTouch&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:y.instanceId}),m.emitter.trigger("drop",Object.assign(Object.assign({},EA(A.dateSpan,m)),{draggedEl:c.subjectEl,jsEvent:c.origEvent,view:A.context.viewApi})),m.emitter.trigger("eventReceive",Object.assign(Object.assign({},R),{draggedEl:c.subjectEl,view:A.context.viewApi}))}}else u.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:s}=t.context,r=this.dragging=new Xo(e.el);r.pointer.selector=Qo.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new ku(this.dragging,pp);l.useSubjectCenter=e.useEventCenter,l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let s=this.component.context,r=this.receivingContext;r&&r!==e&&(r===s?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:Sn(),isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Qo.SELECTOR=".fc-event-draggable, .fc-event-resizable";function t4(n,e,t,s){let r=n.dateSpan,l=e.dateSpan,c=r.range.start,u=l.range.start,h={};r.allDay!==l.allDay&&(h.allDay=l.allDay,h.hasEnd=e.context.options.allDayMaintainDuration,l.allDay?c=Ct(t):c=t);let m=Gr(c,u,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);m.milliseconds&&(h.allDay=!1);let p={datesDelta:m,standardProps:h};for(let x of s)x(p,n,e);return p}function s4(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class n4 extends cl{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let{component:c}=this,u=this.querySegEl(l),h=tl(u),m=this.eventRange=h.eventRange;this.dragging.minDistance=c.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(l.origEvent.target)||l.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=l=>{let{context:c}=this.component,u=this.eventRange;this.relevantEvents=hg(c.getCurrentData().eventStore,this.eventRange.instance.instanceId);let h=this.querySegEl(l);this.draggingSegEl=h,this.draggingSeg=tl(h),c.calendarApi.unselect(),c.emitter.trigger("eventResizeStart",{el:h,event:new Tt(c,u.def,u.instance),jsEvent:l.origEvent,view:c.viewApi})},this.handleHitUpdate=(l,c,u)=>{let{context:h}=this.component,m=this.relevantEvents,p=this.hitDragging.initialHit,x=this.eventRange.instance,y=null,v=null,N=!1,w={affectedEvents:m,mutatedEvents:Sn(),isEvent:!0};l&&(l.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,l)||(y=a4(p,l,u.subjectEl.classList.contains("fc-event-resizer-start"),x.range))),y&&(v=pg(m,h.getCurrentData().eventUiBases,y,h),w.mutatedEvents=v,QN(w,l.dateProfile,h)||(N=!0,y=null,v=null,w.mutatedEvents=null)),v?h.dispatch({type:"SET_EVENT_RESIZE",state:w}):h.dispatch({type:"UNSET_EVENT_RESIZE"}),N?tg():sg(),c||(y&&Mu(p,l)&&(y=null),this.validMutation=y,this.mutatedRelevantEvents=v)},this.handleDragEnd=l=>{let{context:c}=this.component,u=this.eventRange.def,h=this.eventRange.instance,m=new Tt(c,u,h),p=this.relevantEvents,x=this.mutatedRelevantEvents;if(c.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:l.origEvent,view:c.viewApi}),this.validMutation){let y=new Tt(c,x.defs[u.defId],h?x.instances[h.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:x});let v={oldEvent:m,event:y,relatedEvents:Hi(x,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:p})}};c.emitter.trigger("eventResize",Object.assign(Object.assign({},v),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||ht(0),endDelta:this.validMutation.endDelta||ht(0),jsEvent:l.origEvent,view:c.viewApi})),c.emitter.trigger("eventChange",v)}else c.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,s=this.dragging=new Xo(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=t.context.options.dragScroll;let r=this.hitDragging=new ku(this.dragging,gg(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Ns(e.subjectEl,".fc-event")}}function a4(n,e,t,s){let r=n.context.dateEnv,l=n.dateSpan.range.start,c=e.dateSpan.range.start,u=Gr(l,c,r,n.largeUnit);if(t){if(r.add(s.start,u)<s.end)return{startDelta:u}}else if(r.add(s.end,u)>s.start)return{endDelta:u};return null}class i4{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let r=this.context.options.unselectCancel,l=mN(s.origEvent);this.matchesCancel=!!Ns(l,r),this.matchesEvent=!!Ns(l,Qo.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:r}=this,{documentPointer:l}=this,c=r.getCurrentData();if(!l.wasTouchScroll){if(c.dateSelection&&!this.isRecentPointerDateSelect){let u=r.options.unselectAuto;u&&(!u||!this.matchesCancel)&&r.calendarApi.unselect(s)}c.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new NA(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const r4={fixedMirrorParent:ie},l4={dateClick:ie,eventDragStart:ie,eventDragStop:ie,eventDrop:ie,eventResizeStart:ie,eventResizeStop:ie,eventResize:ie,drop:ie,eventReceive:ie,eventLeave:ie};vg.dataAttrPrefix="";var o4=ii({name:"@fullcalendar/interaction",componentInteractions:[ZO,KO,Qo,n4],calendarInteractions:[i4],elementDraggingImpl:Xo,optionRefiners:r4,listenerRefiners:l4});const Sd="/events";function Pm(){const{user:n,token:e}=os(),[t,s]=_.useState([]),[r,l]=_.useState([]),[c,u]=_.useState({}),[h,m]=_.useState(!1),[p,x]=_.useState(null),[y,v]=_.useState({title:"",description:"",startDate:"",endDate:"",category:"meeting"}),[N,w]=_.useState(new Date),[A,j]=_.useState(new Date),[C,S]=_.useState([]),[T,R]=_.useState(!1),O=_.useRef(null),H=`:root { --primary-color: #104774; --primary-hover: #0d3a61; --sunday-bg-color: #fff5f5; --sunday-text-color: #e53e3e; --holiday-bg-color: #fff5f5; --holiday-text-color: #e53e3e; }
  .fc .fc-toolbar-title{font-size:1.25rem;font-weight:600;color:#104774}
  .fc .fc-button{background-color:#104774;border-color:#104774}
  .fc .fc-button:hover{background-color:#0d3a61;border-color:#0d3a61}
  .fc .fc-daygrid-day.fc-day-today{background-color:#f0f9ff}
  .fc .fc-day-sun,.fc .fc-day-holiday{background-color:var(--holiday-bg-color)}
  .fc .fc-day-sun .fc-daygrid-day-number,.fc .fc-day-holiday .fc-daygrid-day-number{color:var(--holiday-text-color);font-weight:600}
  .fc-event{border-radius:4px;border:none;padding:2px 4px;font-size:0.8rem;cursor:pointer}
  .fc-daygrid-day-frame{cursor:pointer;max-height:150px!important}
  .fc-event-title{font-weight:500}
  .fc-event-description{font-size:0.7rem;opacity:0.8;margin-top:2px}
  `,V=W=>{const he=new Date(W),ge=he.getFullYear(),Ee=String(he.getMonth()+1).padStart(2,"0"),Xe=String(he.getDate()).padStart(2,"0");return`${ge}-${Ee}-${Xe}`},L=W=>new Date(W).getDay()===0,K=W=>{const he=V(W);return{id:`sunday-${he}`,title:"Sunday Holiday",start:he,extendedProps:{description:"Weekly holiday",category:"holiday",isSundayHoliday:!0},color:z("holiday"),display:"auto",allDay:!0}},z=W=>{switch(W){case"meeting":return"#104774";case"deadline":return"#ef4444";case"event":return"#8b5cf6";case"leave":return"#f97316";case"holiday":return"#10b981";default:return"#6b7280"}},G=W=>{switch(W){case"meeting":return"bg-blue-50 border-blue-200";case"deadline":return"bg-red-50 border-red-200";case"event":return"bg-purple-50 border-purple-200";case"leave":return"bg-orange-50 border-orange-200";case"holiday":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}},Y=_.useCallback(W=>(W||[]).map(he=>{let ge=he.endDate;if(he.endDate&&he.endDate!==he.startDate){const Ee=new Date(he.endDate);Ee.setDate(Ee.getDate()+1),ge=V(Ee)}return{id:he._id.toString(),title:he.title,start:V(he.startDate),end:ge||void 0,extendedProps:{description:he.description,category:he.category||"meeting",originalEndDate:he.endDate||null,isSundayHoliday:!1,isHoliday:!!he.isHoliday,source:he.source||"backend",externalId:he.externalId||void 0},color:z(he.category||"meeting"),display:"auto",allDay:!0}}),[]),de=W=>{const he=W.end.date?W.end.date:W.end.dateTime;return{id:`holiday-${W.id}`,title:W.summary,start:V(W.start.date||W.start.dateTime),end:he?V(he):void 0,extendedProps:{description:W.description||W.summary,category:"holiday",isHoliday:!0,source:"google",externalId:W.id},color:z("holiday"),display:"auto",allDay:!0}},be=()=>{const W=t||[],he=[...W];return r.forEach(ge=>{const Ee=ge.extendedProps?.externalId,Xe=V(ge.start),$=(ge.title||"").toLowerCase();W.some(De=>!!(Ee&&De.extendedProps?.externalId&&De.extendedProps.externalId===Ee||V(De.start)===Xe&&(De.title||"").toLowerCase()===$))||he.push(ge)}),he},I=_.useCallback(async()=>{R(!0);try{const W=await xe.get(Sd,{headers:{Authorization:`Bearer ${e}`}}),he=Y(W.data.events||[]);s(he);const ge=[...he,...r];P(A,ge)}catch(W){console.error(W.response?.data||W.message)}finally{R(!1)}},[e,Y,r,A]);_.useEffect(()=>{I(),X(N.getFullYear())},[]),_.useEffect(()=>{P(A)},[t,r,A]);const Z=W=>{const he=(W.summary||"").toLowerCase(),ge=["public holiday","national holiday","gazetted holiday","bank holiday","independence day","republic day","gandhi jayanti","guru nanak jayanti","diwali","holi","eid","christmas","good friday","mahatma gandhi","republic","independence","janmashtami","dussehra","ram navami","maha shivratri"],Ee=["observance","observances","festival","festivals","optional holiday","restricted holiday","eve","beginning","ends","monthly","week","daylight saving","season","solstice","equinox","fasting","vrat","puja","parva"],Xe=ge.some(Ne=>he.includes(Ne)),$=Ee.some(Ne=>he.includes(Ne));return Xe&&!$},X=async W=>{if(c[W])return;const he="AIzaSyBG-v7rJFHD3hgzTW802GaGTa-gA_n3J3A",ge="en.indian%23holiday%40group.v.calendar.google.com",Ee=`${W}-01-01T00:00:00Z`,Xe=`${W}-12-31T23:59:59Z`,$=`https://www.googleapis.com/calendar/v3/calendars/${ge}/events?key=${he}&timeMin=${Ee}&timeMax=${Xe}&singleEvents=true`,Ne=new AbortController,De=setTimeout(()=>Ne.abort(),1e4);try{const qe=await fetch($,{signal:Ne.signal,headers:{Accept:"application/json"}});if(clearTimeout(De),!qe.ok)throw new Error(`HTTP ${qe.status} - ${qe.statusText}`);const xt=await qe.json(),Ae=(Array.isArray(xt.items)?xt.items:[]).filter(Z).map(de);l(je=>{const Fe=new Set(je.map(Ht=>Ht.id)),lt=Ae.filter(Ht=>!Fe.has(Ht.id));return[...je,...lt]}),u(je=>({...je,[W]:!0}))}catch(qe){qe.name==="AbortError"?console.warn("Holiday fetch aborted"):console.error("Holiday fetch error:",qe.message||qe)}finally{clearTimeout(De)}},P=(W,he=null)=>{const ge=he||be(),Ee=V(W),Xe=L(W),$=ge.filter(qe=>{const xt=V(qe.start);if(qe.end){const Bt=V(qe.end);return Ee>=xt&&Ee<Bt}return Ee===xt});Xe&&($.some(xt=>xt.extendedProps?.isSundayHoliday||xt.extendedProps?.isHoliday)||$.push(K(W)));const Ne=new Set,De=[];$.forEach(qe=>{const xt=qe.extendedProps?.externalId||qe.id||`${(qe.title||"").toLowerCase()}|${V(qe.start)}`;Ne.has(xt)||(Ne.add(xt),De.push(qe))}),S(De)},D=W=>{const he=new Date(W.view.currentStart);w(he),X(he.getFullYear())},M=W=>{const he=new Date(W.dateStr);j(he),P(he)},F=W=>{if(n.role==="employee")return;const he=W.event;if(he.extendedProps?.isSundayHoliday||he.extendedProps?.isHoliday)return;const ge=he.extendedProps?.originalEndDate||he.endStr||he.startStr,Ee=he.startStr?he.startStr.slice(0,10):V(he.start),Xe=ge?ge.slice?ge.slice(0,10):V(ge):Ee;x({id:he.id}),v({title:he.title||"",description:he.extendedProps?.description||"",startDate:Ee,endDate:Xe,category:he.extendedProps?.category||"meeting"}),m(!0)},J=()=>{x(null),v({title:"",description:"",startDate:V(A),endDate:V(A),category:"meeting"}),m(!0)},me=W=>new Date(W).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),ce=async()=>{R(!0);try{const W={title:y.title,description:y.description,startDate:y.startDate,endDate:y.endDate&&y.endDate!==y.startDate?y.endDate:void 0,category:y.category};if(p){const he=await xe.put(`${Sd}/${p.id}`,W,{headers:{Authorization:`Bearer ${e}`}}),ge=Y([he.data.event])[0];s(Ee=>Ee.map(Xe=>Xe.id===ge.id?ge:Xe))}else{const he=await xe.post(Sd,W,{headers:{Authorization:`Bearer ${e}`}}),ge=Y([he.data.event])[0];s(Ee=>{if(new Set(Ee.map(Ne=>Ne.id)).has(ge.id))return Ee;const $=[...Ee,ge];return P(A,[...$,...r]),$})}m(!1)}catch(W){console.error(W.response?.data||W.message)}finally{R(!1)}},ye=async()=>{if(p){R(!0);try{await xe.delete(`${Sd}/${p.id}`,{headers:{Authorization:`Bearer ${e}`}}),s(W=>W.filter(he=>he.id!==p.id)),m(!1)}catch(W){console.error(W.response?.data||W.message)}finally{R(!1)}}},Se=()=>{if(O.current){const W=O.current.getApi();W.prev(),w(new Date(W.getDate()))}},ke=()=>{if(O.current){const W=O.current.getApi();W.next(),w(new Date(W.getDate()))}},te=W=>{const he=V(W);return be().some(Ee=>{const Xe=V(Ee.start);if(Ee.end){const $=V(Ee.end);return he>=Xe&&he<$&&!!Ee.extendedProps?.isHoliday}return he===Xe&&!!Ee.extendedProps?.isHoliday})},Ue=W=>W.event.extendedProps?.isSundayHoliday?null:a.jsxs("div",{className:"fc-event-content",children:[a.jsx("div",{className:"fc-event-title",children:W.event.title}),W.event.extendedProps.description&&a.jsx("div",{className:"fc-event-description",children:W.event.extendedProps.description.length>20?`${W.event.extendedProps.description.substring(0,20)}...`:W.event.extendedProps.description})]}),Ge=W=>{const he=new Date(W.date),ge=L(he),Ee=te(he);return a.jsx("div",{className:"fc-daygrid-day-frame",children:a.jsx("div",{className:"fc-daygrid-day-top",children:a.jsx("div",{className:`fc-daygrid-day-number ${ge||Ee?"text-red-600 font-bold":""}`,children:W.dayNumberText})})})},ft=W=>{const he=new Date(W.date),ge=L(he),Ee=te(he);return ge||Ee?"fc-day-holiday":""},ve=be();return a.jsxs("div",{className:"max-h-[80vh] bg-gray-50 space-y-4 md:space-y-6",children:[a.jsx("style",{children:H}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800",children:"Company Calendar"}),a.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mt-1",children:"Manage company events and schedules"})]}),n.role!=="employee"&&a.jsxs("button",{onClick:J,className:"flex items-center justify-center bg-[#104774] text-white px-3 py-2 rounded-md hover:bg-[#0d3a61] transition-all duration-200 text-xs sm:text-sm",children:[a.jsx(Bi,{size:14,className:"mr-2"}),a.jsx("span",{children:"Add Event"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[a.jsx("div",{className:"bg-[#104774] p-3 md:p-4 text-white",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("button",{onClick:Se,className:"p-1.5 hover:bg-[#0d3a61] rounded-md transition-colors",children:a.jsx(gC,{size:18})}),a.jsxs("div",{className:"text-center px-2",children:[a.jsx("h2",{className:"text-sm md:text-base font-semibold",children:N.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("p",{className:"text-blue-100 text-xs hidden sm:block",children:"Click on any date to view events"})]}),a.jsx("button",{onClick:ke,className:"p-1.5 hover:bg-[#0d3a61] rounded-md transition-colors",children:a.jsx(yC,{size:18})})]})}),a.jsx("div",{className:"calendar-container",children:a.jsx(fA,{ref:O,plugins:[zO,o4],initialView:"dayGridMonth",events:ve,dateClick:M,eventClick:F,height:"auto",headerToolbar:!1,initialDate:N,datesSet:D,eventContent:Ue,dayCellContent:Ge,dayCellClassNames:ft,dayMaxEvents:1,fixedWeekCount:!1})})]})}),a.jsx("div",{className:"space-y-4 md:space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-3 md:p-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 gap-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx($s,{size:18,className:"text-[#104774] mr-2"}),a.jsxs("h3",{className:"text-sm md:text-base font-semibold text-gray-800",children:[me(A),(L(A)||C.some(W=>W.extendedProps?.isHoliday))&&a.jsx("span",{className:"ml-2 text-red-600 text-xs font-normal",children:"(Holiday)"})]})]}),n.role!=="employee"&&C.length>0&&a.jsx("button",{onClick:J,className:"text-[#104774] text-xs hover:text-[#0d3a61] self-start sm:self-center",children:"+ Add Event"})]}),C.length>0?a.jsx("div",{className:"space-y-2",children:C.map((W,he)=>{const ge=new Date(W.start),Ee=W.end?new Date(W.end):null;return a.jsxs("div",{className:`p-3 rounded-md border ${G(W.extendedProps?.category||"meeting")} ${n.role!=="employee"&&!W.extendedProps?.isSundayHoliday&&!W.extendedProps?.isHoliday?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>{n.role!=="employee"&&!W.extendedProps?.isSundayHoliday&&!W.extendedProps?.isHoliday&&(x(W),v({title:W.title,description:W.extendedProps?.description||"",startDate:W.start,endDate:W.extendedProps?.originalEndDate||W.start,category:W.extendedProps?.category||"meeting"}),m(!0))},children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 text-xs md:text-sm truncate",children:[W.title,(W.extendedProps?.isSundayHoliday||W.extendedProps?.isHoliday)&&a.jsx("span",{className:"ml-2 text-green-600 text-xs font-normal"})]}),W.extendedProps?.description&&a.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:W.extendedProps.description}),a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[ge.toLocaleDateString(),Ee&&Ee>ge&&` to ${Ee.toLocaleDateString()}`]})]}),a.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:z(W.extendedProps?.category||"meeting")}})]}),n.role!=="employee"&&!W.extendedProps?.isSundayHoliday&&!W.extendedProps?.isHoliday&&a.jsx("div",{className:"text-xs text-[#104774] mt-2 hidden sm:block",children:"Click to edit"})]},he)})}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx($s,{size:32,className:"text-gray-300 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 text-xs",children:"No events scheduled"}),n.role!=="employee"&&a.jsx("button",{onClick:J,className:"text-[#104774] text-xs mt-2 hover:text-[#0d3a61]",children:"+ Add Event"})]})]})})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-3",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-sm max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[a.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-800",children:p?"Edit Event":"Add Event"}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 p-1",children:a.jsx(Fo,{size:16})})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Event Title"}),a.jsx("input",{type:"text",placeholder:"Enter event title",value:y.title,onChange:W=>v({...y,title:W.target.value}),className:"w-full border border-slate-300 rounded-md p-2 text-xs md:text-sm focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{placeholder:"Enter event description",value:y.description,onChange:W=>v({...y,description:W.target.value}),rows:3,className:"w-full border border-slate-300 rounded-md p-2 text-xs md:text-sm focus:ring-2 focus:ring-[#104774] focus:border-transparent resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Category"}),a.jsxs("select",{value:y.category,onChange:W=>v({...y,category:W.target.value}),className:"w-full border border-slate-300 rounded-md p-2 text-xs md:text-sm focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[a.jsx("option",{value:"meeting",children:"Meeting"}),a.jsx("option",{value:"deadline",children:"Deadline"}),a.jsx("option",{value:"event",children:"Company Event"}),a.jsx("option",{value:"leave",children:"Leave Day"}),a.jsx("option",{value:"holiday",children:"Holiday"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:y.startDate?y.startDate.slice(0,10):"",onChange:W=>v({...y,startDate:W.target.value}),className:"w-full border border-slate-300 rounded-md p-2 text-xs md:text-sm focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"End Date (optional)"}),a.jsx("input",{type:"date",value:y.endDate?y.endDate.slice(0,10):"",onChange:W=>v({...y,endDate:W.target.value}),className:"w-full border border-slate-300 rounded-md p-2 text-xs md:text-sm focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 p-4 border-t",children:[a.jsx("button",{onClick:()=>m(!1),className:"px-3 py-2 border border-slate-300 text-slate-700 rounded-md hover:bg-slate-50 text-xs sm:text-sm order-2 sm:order-1",children:"Cancel"}),p&&a.jsx("button",{onClick:ye,className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-xs sm:text-sm order-3 sm:order-2",children:"Delete"}),a.jsx("button",{onClick:ce,className:"px-3 py-2 bg-[#104774] text-white rounded-md hover:bg-[#0d3a61] text-xs sm:text-sm order-1 sm:order-3",children:p?"Update":"Save"})]})]})})]})}function c4(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}c4(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Ag=n=>typeof n=="number"&&!isNaN(n),Mo=n=>typeof n=="string",_A=n=>typeof n=="function",d4=n=>Mo(n)||Ag(n),u4=n=>_.isValidElement(n)||Mo(n)||_A(n)||Ag(n),h4=1,CA=()=>`${h4++}`,Wn=new Map,vp=[],ow=new Set,TA=()=>Wn.size>0,f4=(n,{containerId:e})=>{var t;return(t=Wn.get(e||1))==null?void 0:t.toasts.get(n)};function m4(n,e){var t;if(e)return!!((t=Wn.get(e))!=null&&t.isToastActive(n));let s=!1;return Wn.forEach(r=>{r.isToastActive(n)&&(s=!0)}),s}function p4(n){if(!TA()){vp=vp.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||d4(n))Wn.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Wn.get(n.containerId);e?e.removeToast(n.id):Wn.forEach(t=>{t.removeToast(n.id)})}}var g4=(n={})=>{Wn.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function x4(n,e){u4(n)&&(TA()||vp.push({content:n,options:e}),Wn.forEach(t=>{t.buildToast(n,e)}))}function DA(n,e){Wn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function y4(n){return ow.add(n),()=>{ow.delete(n)}}function b4(n){return n&&(Mo(n.toastId)||Ag(n.toastId))?n.toastId:CA()}function Zo(n,e){return x4(n,e),e.toastId}function Lu(n,e){return{...e,type:e&&e.type||n,toastId:b4(e)}}function Ou(n){return(e,t)=>Zo(e,Lu(n,t))}function Qe(n,e){return Zo(n,Lu("default",e))}Qe.loading=(n,e)=>Zo(n,Lu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function v4(n,{pending:e,error:t,success:s},r){let l;e&&(l=Mo(e)?Qe.loading(e,r):Qe.loading(e.render,{...r,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(m,p,x)=>{if(p==null){Qe.dismiss(l);return}let y={type:m,...c,...r,data:x},v=Mo(p)?{render:p}:p;return l?Qe.update(l,{...y,...v}):Qe(v.render,{...y,...v}),x},h=_A(n)?n():n;return h.then(m=>u("success",s,m)).catch(m=>u("error",t,m)),h}Qe.promise=v4;Qe.success=Ou("success");Qe.info=Ou("info");Qe.error=Ou("error");Qe.warning=Ou("warning");Qe.warn=Qe.warning;Qe.dark=(n,e)=>Zo(n,Lu("default",{theme:"dark",...e}));function w4(n){p4(n)}Qe.dismiss=w4;Qe.clearWaitingQueue=g4;Qe.isActive=m4;Qe.update=(n,e={})=>{let t=f4(n,e);if(t){let{props:s,content:r}=t,l={delay:100,...s,...e,toastId:e.toastId||n,updateId:CA()};l.toastId!==n&&(l.staleId=n);let c=l.render||r;delete l.render,Zo(c,l)}};Qe.done=n=>{Qe.update(n,{progress:1})};Qe.onChange=y4;Qe.play=n=>DA(!0,n);Qe.pause=n=>DA(!1,n);function N4(){const{user:n,token:e}=os(),[t,s]=_.useState({}),[r,l]=_.useState([]),[c,u]=_.useState([]),[h,m]=_.useState([]),[p,x]=_.useState(!0),[y,v]=_.useState(!1),[N,w]=_.useState(!1),[A,j]=_.useState(!1),[C,S]=_.useState(!1),[T,R]=_.useState(""),[O,H]=_.useState("all"),[V,L]=_.useState("all"),[K,z]=_.useState(1),[G]=_.useState(5),[Y,de]=_.useState({leaveType:"",fromDate:"",toDate:"",reason:""}),[be,I]=_.useState({}),[Z,X]=_.useState([]),P=_.useRef(new Set),D=_.useRef(new Set),[M,F]=_.useState(!1),[J,me]=_.useState(null),ce=re=>re.toString().padStart(2,"0"),ye=re=>`${re.getFullYear()}-${ce(re.getMonth()+1)}-${ce(re.getDate())}`,Se=async re=>{try{const lt=(await(await fetch(`https://www.googleapis.com/calendar/v3/calendars/en.indian%23holiday@group.v.calendar.google.com/events?key=AIzaSyBG-v7rJFHD3hgzTW802GaGTa-gA_n3J3A&timeMin=${re}-01-01T00:00:00Z&timeMax=${re}-12-31T23:59:59Z`)).json()).items||[],Ht=["republic day","independence day","gandhi","mahatma gandhi","gandhi jayanti","diwali","deepavali","dussehra","dashera","holi","christmas","new year's","new year","good friday","eid","bakrid","ramzan","guru nanak","janmashtami","mahavir","pongal","makar sankranti","dussehra","dussehra","mahatma gandhi jayanti","mahatma gandhi","mahatma"];return lt.map(Rt=>{const an=Rt.start||{};let Vs=null;if(an.date)Vs=an.date;else if(an.dateTime){const qs=new Date(an.dateTime);Vs=`${qs.getFullYear()}-${ce(qs.getMonth()+1)}-${ce(qs.getDate())}`}const As=(Rt.summary||"").toString(),xn=(Rt.description||"").toString();let Gs=!1;const Na=xn.toLowerCase(),li=As.toLowerCase();if(Na.includes("public holiday")||Na.includes("public"))Gs=!0;else if(Na.includes("observance"))Gs=!1;else if(li.includes("holiday"))Gs=!0;else for(const qs of Ht)if(li.includes(qs)){Gs=!0;break}return{id:Rt.id,title:As,date:Vs,description:xn,htmlLink:Rt.htmlLink,isOfficial:Gs}}).filter(Rt=>Rt.date)}catch(Ae){return console.error("Error fetching holidays:",Ae),[]}},ke=async(re=[])=>{const Ae=re.filter(Fe=>!D.current.has(Fe));if(Ae.length===0)return;const je=[];for(const Fe of Ae){const Ht=(await Se(Fe)).filter(Mn=>Mn.isOfficial);je.push(...Ht),D.current.add(Fe)}if(je.length>0){const Fe=new Set(P.current),lt=[...Z];for(const Ht of je)Ht.date&&!Fe.has(Ht.date)&&(Fe.add(Ht.date),lt.push(Ht));P.current=Fe,X(lt)}},te=async(re,Ae)=>{if(!re||!Ae)return 0;F(!0);try{const je=new Date(re),Fe=new Date(Ae);if(isNaN(je)||isNaN(Fe)||je>Fe)return 0;const lt=new Set([je.getFullYear(),Fe.getFullYear()]);await ke(Array.from(lt));const Ht=P.current;let Mn=0;const Rt=new Date(je);for(;Rt<=Fe;){const Vs=Rt.getDay()===0,As=ye(Rt),xn=Ht.has(As);!Vs&&!xn&&Mn++,Rt.setDate(Rt.getDate()+1)}return Mn}catch(je){return console.error("Error calculating working days:",je),0}finally{F(!1)}},Ue=async()=>{if(n)try{const re=await xe.get("/leave/balance",{headers:{Authorization:`Bearer ${e}`}});s(re.data.balance||{})}catch(re){console.error("Error fetching leave balance:",re),Qe.error("Failed to fetch leave balance")}},Ge=async()=>{try{const Ae=((await xe.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${e}`}})).data||[]).filter(je=>je.isActive);m(Ae),Ae.length>0&&!Y.leaveType&&de(je=>({...je,leaveType:Ae[0].name}))}catch(re){console.error("Error fetching leave types:",re),Qe.error("Failed to fetch leave types")}},ft=async()=>{if(n)try{const re=await xe.get("/leave/my-requests",{headers:{Authorization:`Bearer ${e}`}});l(re.data||[]),u(re.data||[])}catch(re){console.error("Error fetching leave requests:",re),Qe.error("Failed to fetch leave requests")}finally{x(!1)}};_.useEffect(()=>{if(n){Ue(),Ge(),ft();const re=new Date().getFullYear();ke([re]).catch(Ae=>console.error(Ae))}},[n]),_.useEffect(()=>{let re=!1;return(async()=>{if(Y.fromDate&&Y.toDate){F(!0);const je=await te(Y.fromDate,Y.toDate);re||me(je),F(!1)}else me(null)})(),()=>{re=!0}},[Y.fromDate,Y.toDate]),_.useEffect(()=>{let re=r;O!=="all"&&(re=re.filter(Ae=>Ae.status===O)),V!=="all"&&(re=re.filter(Ae=>Ae.leaveType===V)),T&&(re=re.filter(Ae=>(Ae.reason||"").toLowerCase().includes(T.toLowerCase())||(Ae.leaveType||"").toLowerCase().includes(T.toLowerCase())||(Ae.status||"").toLowerCase().includes(T.toLowerCase()))),u(re),z(1)},[T,O,V,r]);const ve=K*G,W=ve-G,he=c.slice(W,ve),ge=Math.ceil(c.length/G),Ee=re=>{const{name:Ae,value:je}=re.target;de(Fe=>({...Fe,[Ae]:je})),be[Ae]&&I(Fe=>({...Fe,[Ae]:""}))},Xe=async()=>{const re={},Ae=new Date;Ae.setHours(0,0,0,0);const je=new Date(Y.fromDate);if(je.setHours(0,0,0,0),Y.leaveType||(re.leaveType="Leave type is required"),Y.fromDate||(re.fromDate="From date is required"),Y.toDate||(re.toDate="To date is required"),Y.fromDate&&Y.toDate){new Date(Y.fromDate)>new Date(Y.toDate)&&(re.toDate="To date cannot be before from date"),je<Ae&&(re.fromDate="Cannot apply for backdated leaves");const Fe=await te(Y.fromDate,Y.toDate),lt=t[Y.leaveType]??0;lt<Fe&&(re.leaveType=`Insufficient ${Y.leaveType} leave balance! You have ${lt} days left.`)}return Y.reason.trim()||(re.reason="Reason is required"),Y.reason.length>500&&(re.reason="Reason cannot exceed 500 characters"),I(re),Object.keys(re).length===0},$=re=>{const{name:Ae,value:je}=re.target;de(Fe=>({...Fe,[Ae]:je})),be[Ae]&&I(Fe=>({...Fe,[Ae]:""}))},Ne=async re=>{if(re.preventDefault(),!y&&await Xe()){v(!0);try{const Ae=await te(Y.fromDate,Y.toDate),je={...Y,totalDays:Ae};await xe.post("/leave/create",je,{headers:{Authorization:`Bearer ${e}`}}),Qe.success("Leave applied successfully!"),j(!1),de({leaveType:h[0]?.name||"",fromDate:"",toDate:"",reason:""}),Ue(),ft()}catch(Ae){console.error("Error applying leave:",Ae);const je=Ae.response?.data?.message||"Error applying leave. Please try again.";Qe.error(je)}finally{v(!1)}}},De=async re=>{if(!N){w(!0);try{await xe.put(`/leave/requests/${re}/cancel`,{},{headers:{Authorization:`Bearer ${e}`}}),Qe.success("Leave cancelled successfully!"),ft()}catch(Ae){console.error("Error cancelling leave:",Ae),Qe.error(Ae.response?.data?.message||"Error cancelling leave")}finally{w(!1)}}},qe=()=>{R(""),H("all"),L("all"),u(r)},xt=re=>{switch(re){case"sick":return a.jsx($d,{size:16,className:"text-red-400 mr-2"});case"casual":return a.jsx(Ud,{size:16,className:"text-purple-400 mr-2"});case"paid":return a.jsx(ps,{size:16,className:"text-green-400 mr-2"});default:return a.jsx($s,{size:16,className:"text-blue-400 mr-2"})}},Bt=re=>re.replace(/_/g," ").replace(/\b\w/g,Ae=>Ae.toUpperCase());return p?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):a.jsxs("div",{className:"p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6 bg-gray-50 max-h-screen text-sm",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800",children:"Leave Management"}),a.jsxs("button",{onClick:()=>j(!0),className:"flex items-center bg-[#104774] text-white px-3 sm:px-4 py-2 rounded-lg font-medium hover:bg-[#0d3a61] transition-all duration-200 w-full sm:w-auto justify-center text-xs sm:text-sm",children:[a.jsx(Bi,{size:16,className:"mr-1 sm:mr-2"}),"Apply For Leave"]})]}),a.jsx("div",{className:"grid grid-cols-1 xs:grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-4",children:Object.entries(t).map(([re,Ae])=>a.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${re==="sick"?"bg-red-300":re==="casual"?"bg-purple-300":"bg-green-400"}`}),a.jsx("span",{className:"text-xs font-medium text-gray-700 capitalize",children:Bt(re)})]}),re==="sick"?a.jsx($d,{size:14,className:"text-red-300"}):re==="casual"?a.jsx(Ud,{size:14,className:"text-purple-300"}):a.jsx(ps,{size:14,className:"text-green-400"})]}),a.jsxs("div",{className:"text-base font-bold text-gray-800 mb-1",children:[Ae," ",a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"days left"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full ${re==="sick"?"bg-red-300":re==="casual"?"bg-purple-300":"bg-green-400"}`,style:{width:`${Math.min(Ae/10*100,100)}%`}})})]},re))}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-gray-100 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx($s,{size:18,className:"text-[#104774] mr-2"}),a.jsx("h3",{className:"text-base font-semibold text-gray-800",children:"Leave Application History"})]})}),C&&a.jsxs("div",{className:"p-3 border-b border-gray-100 bg-gray-50",children:[a.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1",children:"Status"}),a.jsxs("select",{value:O,onChange:re=>H(re.target.value),className:"w-full border rounded p-1.5 text-xs",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1",children:"Leave Type"}),a.jsxs("select",{value:V,onChange:re=>L(re.target.value),className:"w-full border rounded p-1.5 text-xs",children:[a.jsx("option",{value:"all",children:"All Types"}),h.map(re=>a.jsx("option",{value:re.name,children:Bt(re.name)},re._id))]})]})]}),a.jsx("div",{className:"flex justify-end mt-2",children:a.jsx("button",{onClick:qe,className:"px-2 py-1 border border-gray-300 rounded hover:bg-gray-100 text-xs",children:"Reset Filters"})})]}),a.jsx("div",{className:"block sm:hidden",children:a.jsx("div",{className:"max-h-[400px] overflow-y-auto p-2",children:he.length>0?he.map((re,Ae)=>{const je=Fe=>new Date(Fe).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-3 mb-2 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsx("div",{className:"font-medium",children:"Date Range:"}),a.jsx("div",{children:`${je(re.fromDate)}  ${je(re.toDate)}`}),a.jsx("div",{className:"font-medium",children:"Type:"}),a.jsxs("div",{className:"flex items-center",children:[xt(re.leaveType),a.jsx("span",{className:"ml-1 capitalize",children:Bt(re.leaveType)})]}),a.jsx("div",{className:"font-medium",children:"Days:"}),a.jsxs("div",{children:[re.totalDays," ",re.totalDays===1?"day":"days"]}),a.jsx("div",{className:"font-medium",children:"Status:"}),a.jsx("div",{children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs ${re.status==="approved"?"bg-green-100 text-green-700":re.status==="pending"?"bg-yellow-100 text-yellow-700":re.status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:re.status.charAt(0).toUpperCase()+re.status.slice(1)})}),a.jsx("div",{className:"font-medium",children:"Applied On:"}),a.jsx("div",{children:je(re.appliedAt)}),re.reason&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"font-medium",children:"Reason:"}),a.jsx("div",{className:"truncate",title:re.reason,children:re.reason})]})]}),re.status==="pending"&&a.jsx("div",{className:"flex justify-end mt-2",children:a.jsxs("button",{onClick:()=>De(re._id),disabled:N,className:"flex items-center text-red-600 hover:text-red-800 text-xs font-medium disabled:opacity-50",children:[a.jsx(Eo,{size:10,className:"mr-1"}),N?"...":"Cancel"]})})]},Ae)}):a.jsx("div",{className:"text-center text-gray-500 p-4 text-xs",children:r.length===0?"No leave applications found.":"No leaves match your filters."})})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx("div",{className:"max-h-[400px] overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Date Range"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Type"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Days"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Reason"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Status"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Applied On"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Actions"})]})}),a.jsx("tbody",{children:he.length>0?he.map((re,Ae)=>{const je=Fe=>new Date(Fe).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return a.jsxs("tr",{className:`transition-colors ${Ae%2===0?"bg-white hover:bg-gray-50":"bg-gray-100 hover:bg-gray-200"}`,children:[a.jsx("td",{className:"p-2 font-medium text-gray-800 text-xs",children:`${je(re.fromDate)}  ${je(re.toDate)}`}),a.jsx("td",{className:"p-2",children:a.jsxs("div",{className:"flex items-center gap-1",children:[xt(re.leaveType),a.jsx("span",{className:"text-gray-700 capitalize text-xs",children:Bt(re.leaveType)})]})}),a.jsxs("td",{className:"p-2 text-xs",children:[re.totalDays," ",re.totalDays===1?"day":"days"]}),a.jsx("td",{className:"p-2 text-gray-600 text-xs max-w-[120px] truncate",title:re.reason,children:re.reason||"-"}),a.jsx("td",{className:"p-2",children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs ${re.status==="approved"?"bg-green-100 text-green-700":re.status==="pending"?"bg-yellow-100 text-yellow-700":re.status==="rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:re.status.charAt(0).toUpperCase()+re.status.slice(1)})}),a.jsx("td",{className:"p-2 text-gray-600 text-xs",children:je(re.appliedAt)}),a.jsx("td",{className:"p-2",children:re.status==="pending"&&a.jsxs("button",{onClick:()=>De(re._id),disabled:N,className:"flex items-center text-red-600 hover:text-red-800 text-xs font-medium disabled:opacity-50",children:[a.jsx(Eo,{size:10,className:"mr-1"}),N?"...":"Cancel"]})})]},Ae)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"p-4 text-center text-gray-500 text-xs",children:r.length===0?"No leave applications found.":"No leaves match your filters."})})})]})})}),ge>1&&a.jsxs("div",{className:"p-3 border-t border-gray-100 flex flex-col xs:flex-row justify-between items-center gap-2",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",W+1," to ",Math.min(ve,c.length)," of ",c.length," entries"]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>z(re=>Math.max(re-1,1)),disabled:K===1,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 text-xs",children:"Prev"}),Array.from({length:Math.min(5,ge)},(re,Ae)=>{let je;return ge<=5||K<=3?je=Ae+1:K>=ge-2?je=ge-4+Ae:je=K-2+Ae,a.jsx("button",{onClick:()=>z(je),className:`px-2 py-1 rounded border text-xs ${K===je?"bg-[#104774] text-white":"border-gray-300"}`,children:je},je)}),a.jsx("button",{onClick:()=>z(re=>Math.min(re+1,ge)),disabled:K===ge,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 text-xs",children:"Next"})]})]})]}),A&&a.jsx("div",{className:"fixed inset-0 backdrop-blur-sm  bg-opacity-30 flex items-center justify-center z-50 p-3",children:a.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-sm relative max-h-[85vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>j(!1),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:a.jsx(Fo,{size:18})}),a.jsx("h2",{className:"text-lg font-bold mb-3",children:"Apply for Leave"}),Y.leaveType&&t[Y.leaveType]!==void 0&&a.jsx("div",{className:"bg-blue-50 p-2 rounded mb-3",children:a.jsxs("p",{className:"text-blue-800 font-medium text-xs",children:["Available ",Bt(Y.leaveType)," leave: ",t[Y.leaveType]," days"]})}),a.jsxs("form",{onSubmit:Ne,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"Leave Type"}),a.jsxs("select",{name:"leaveType",value:Y.leaveType,onChange:Ee,className:"w-full border rounded p-2 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",required:!0,children:[a.jsx("option",{value:"",children:"Select Leave Type"}),h.map(re=>a.jsxs("option",{value:re.name,children:[Bt(re.name)," (",t[re.name]??0," left)"]},re._id))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"From Date"}),a.jsx("input",{type:"date",name:"fromDate",value:Y.fromDate,onChange:$,min:new Date().toISOString().split("T")[0],className:"w-full border rounded p-2 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"To Date"}),a.jsx("input",{type:"date",name:"toDate",value:Y.toDate,onChange:$,min:Y.fromDate||new Date().toISOString().split("T")[0],className:"w-full border rounded p-2 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",required:!0})]})]}),Y.fromDate&&Y.toDate&&a.jsx("div",{className:"bg-gray-50 p-2 rounded",children:a.jsx("p",{className:"text-gray-700 font-medium text-xs",children:M?"Calculating...":`Working Days: ${J??0}`})}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"Reason"}),a.jsx("textarea",{name:"reason",value:Y.reason,onChange:Ee,rows:2,className:"w-full border rounded p-2 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",placeholder:"Reason for leave",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-3 py-1.5 rounded border border-gray-300 hover:bg-gray-50 text-xs",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:y,className:"px-3 py-1.5 rounded bg-[#104774] text-white hover:bg-[#0d3a61] disabled:opacity-50 text-xs",children:y?"Submitting...":"Submit"})]})]})]})})]})}const A4=()=>{const{token:n,user:e}=os(),[t,s]=_.useState("employeeLeaves"),[r,l]=_.useState([]),[c,u]=_.useState([]),[h,m]=_.useState([]),[p,x]=_.useState({}),[y,v]=_.useState([]),[N,w]=_.useState(null),[A,j]=_.useState(""),[C,S]=_.useState(!1),[T,R]=_.useState(!1),[O,H]=_.useState(""),[V,L]=_.useState(!1),[K,z]=_.useState(!1),[G,Y]=_.useState(!1),[de,be]=_.useState(""),[I,Z]=_.useState("pending"),[X,P]=_.useState("all"),[D,M]=_.useState(null),[F,J]=_.useState(1),[me]=_.useState(10),[ce,ye]=_.useState({key:null,direction:"ascending"}),[Se,ke]=_.useState({}),[te,Ue]=_.useState(!1),[Ge,ft]=_.useState(!1),[ve,W]=_.useState(null),he=_.useRef(0),[ge,Ee]=_.useState({leaveType:"",fromDate:"",toDate:"",reason:""}),[Xe,$]=_.useState({}),Ne=U=>(U instanceof Date||(U=new Date(U)),Number.isNaN(U.getTime())?null:U.toISOString().slice(0,10)),De=U=>{if(!U||!U.start)return null;const we=U.start,_e=we.date||we.dateTime||we?.dateTime;if(!_e)return null;const Ie=new Date(_e);return Number.isNaN(Ie.getTime())?null:Ne(Ie)},qe=async U=>{if(Se[U])return Se[U];try{const we="AIzaSyBG-v7rJFHD3hgzTW802GaGTa-gA_n3J3A",_e=`${U}-01-01T00:00:00Z`,Ie=`${U}-12-31T23:59:59Z`,dt=`https://www.googleapis.com/calendar/v3/calendars/en.indian%23holiday%40group.v.calendar.google.com/events?key=${we}&timeMin=${_e}&timeMax=${Ie}&maxResults=500`,Zt=((await(await fetch(dt)).json()).items||[]).filter(Ys=>{const Rs=(Ys.summary||"").toLowerCase(),yn=(Ys.description||"").toLowerCase(),xs=(Ys.visibility||"").toLowerCase();return!!(yn.includes("public holiday")||Rs.includes("holiday")||xs==="public"&&!yn.includes("observance"))}),Ss=new Set;return Zt.forEach(Ys=>{const Rs=De(Ys);Rs&&Ss.add(Rs)}),ke(Ys=>({...Ys,[U]:Ss})),Ss}catch(we){return console.error("Error fetching Indian holidays for year",U,we),ke(_e=>({..._e,[U]:new Set})),new Set}},xt=async(U,we)=>{Ue(!0);const _e=++he.current;try{const Ie=new Date(U),dt=new Date(we);if(Number.isNaN(Ie.getTime())||Number.isNaN(dt.getTime())||Ie>dt)return 0;const it=new Set,Ze=Ie.getFullYear(),ts=dt.getFullYear();for(let xs=Ze;xs<=ts;xs++)it.add(xs);const Zt={};for(const xs of it)Zt[xs]=await qe(xs);const Ss=xs=>{const bn=Ne(xs);if(!bn)return!1;const Ln=new Date(xs).getFullYear(),ja=Zt[Ln];return ja?ja.has(bn):!1};let Ys=0;const Rs=new Date(Ie);Rs.setHours(0,0,0,0);const yn=new Date(dt);for(yn.setHours(0,0,0,0);Rs<=yn;){const bn=Rs.getDay()===0,Ln=Ss(Rs);!bn&&!Ln&&Ys++,Rs.setDate(Rs.getDate()+1)}return _e===he.current&&W(Ys),Ys}catch(Ie){return console.error("Error calculating working days:",Ie),_e===he.current&&W(null),0}finally{Ue(!1)}},Bt=async()=>{try{const we=(await xe.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${n}`}})).data.filter(_e=>_e.isActive);v(we),we.length>0&&!ge.leaveType&&Ee(_e=>({..._e,leaveType:we[0].name}))}catch(U){console.error("Error fetching leave types:",U),Qe.error("Failed to fetch leave types")}},re=async()=>{L(!0);try{const we=(await xe.get("/leave/requests",{headers:{Authorization:`Bearer ${n}`}})).data.filter(_e=>_e.employee?.role==="employee");l(we),m(we)}catch(U){console.error("Error fetching employee leave requests:",U),Qe.error("Failed to fetch employee leave requests")}finally{L(!1)}},Ae=async()=>{try{const U=await xe.get("/leave/my-requests",{headers:{Authorization:`Bearer ${n}`}});u(U.data)}catch(U){console.error("Error fetching my leave requests:",U),Qe.error("Failed to fetch your leave requests")}},je=async()=>{try{const U=await xe.get("/leave/balance",{headers:{Authorization:`Bearer ${n}`}});x(U.data.balance||{})}catch(U){console.error("Error fetching leave balance:",U),Qe.error("Failed to fetch leave balance")}};_.useEffect(()=>{n&&(Bt(),je(),t==="employeeLeaves"?re():Ae(),qe(new Date().getFullYear()).then(()=>{}))},[n,t]),_.useEffect(()=>{if(t!=="employeeLeaves")return;let U=r;if(de){const we=de.toLowerCase();U=U.filter(_e=>_e.employee?.email?.toLowerCase().includes(we)||_e.leaveType?.toLowerCase().includes(we)||_e.reason?.toLowerCase().includes(we))}I!=="all"&&(U=U.filter(we=>we.status===I)),X!=="all"&&(U=U.filter(we=>we.leaveType===X)),m(U),J(1)},[de,I,X,r,t]);const Fe=U=>{let we="ascending";ce.key===U&&ce.direction==="ascending"&&(we="descending"),ye({key:U,direction:we});const _e=[...h].sort((Ie,dt)=>{let it,Ze;if(U.includes(".")){const ts=U.split(".");it=ts.reduce((Zt,Ss)=>Zt&&Zt[Ss],Ie),Ze=ts.reduce((Zt,Ss)=>Zt&&Zt[Ss],dt)}else it=Ie[U],Ze=dt[U];return it==null?1:Ze==null?-1:it<Ze?we==="ascending"?-1:1:it>Ze?we==="ascending"?1:-1:0});m(_e)},lt=F*me,Ht=lt-me,Mn=h.slice(Ht,lt),Rt=Math.ceil(h.length/me),an=async()=>{const U={},we=new Date().setHours(0,0,0,0),_e=new Date(ge.fromDate).setHours(0,0,0,0);if(ge.leaveType||(U.leaveType="Leave type is required"),ge.fromDate||(U.fromDate="From date is required"),ge.toDate||(U.toDate="To date is required"),ge.fromDate&&ge.toDate){new Date(ge.fromDate)>new Date(ge.toDate)&&(U.toDate="To date cannot be before from date"),_e<we&&(U.fromDate="Cannot apply for backdated leaves");const Ie=await xt(ge.fromDate,ge.toDate),dt=p[ge.leaveType]??0;dt<Ie&&(U.leaveType=`Insufficient ${ge.leaveType} leave balance! You have ${dt} days left.`)}return ge.reason?.trim()||(U.reason="Reason is required"),ge.reason?.length>500&&(U.reason="Reason cannot exceed 500 characters"),$(U),Object.keys(U).length===0},Vs=U=>{const{name:we,value:_e}=U.target;Ee(Ie=>({...Ie,[we]:_e})),Xe[we]&&$(Ie=>({...Ie,[we]:""}))};_.useEffect(()=>((async()=>{ge.fromDate&&ge.toDate?(W(null),await xt(ge.fromDate,ge.toDate)):W(null)})(),()=>{}),[ge.fromDate,ge.toDate]);const As=U=>{const{name:we,value:_e}=U.target;Ee(Ie=>({...Ie,[we]:_e})),Xe[we]&&$(Ie=>({...Ie,[we]:""}))},xn=async U=>{if(U.preventDefault(),!K&&await an()){z(!0);try{const we=await xt(ge.fromDate,ge.toDate),_e={...ge,totalDays:we};await xe.post("/leave/create",_e,{headers:{Authorization:`Bearer ${n}`}}),Qe.success("Leave applied successfully!"),S(!1),Ee({leaveType:y[0]?.name||"",fromDate:"",toDate:"",reason:""}),$({}),je(),Ae()}catch(we){console.error("Error applying for leave:",we);const _e=we.response?.data?.message||"Error applying leave. Please try again.";Qe.error(_e)}finally{z(!1)}}},Gs=async(U,we)=>{try{await xe.post(`/leave/${U}/review`,{action:we,reason:A||`${we}ed by HR`},{headers:{Authorization:`Bearer ${n}`}}),w(null),j(""),R(!1),re(),je(),Qe.success(`Leave ${we}ed successfully!`)}catch(_e){console.error("Error updating leave:",_e);const Ie=_e.response?.data?.message||"Error processing leave request.";Qe.error(Ie)}},Na=async U=>{if(!G){Y(!0);try{await xe.put(`/leave/requests/${U}/cancel`,{},{headers:{Authorization:`Bearer ${n}`}}),Qe.success("Leave cancelled successfully!"),Ae(),je()}catch(we){console.error("Error cancelling leave:",we),Qe.error(we.response?.data?.message||"Error cancelling leave")}finally{Y(!1)}}},li=()=>{be(""),Z("all"),P("all"),m(r)},qs=({status:U})=>{const we={approved:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",icon:ps},pending:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",icon:jn},rejected:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",icon:Hs},cancelled:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-200",icon:Hs}},_e=we[U]||we.pending,Ie=_e.icon;return a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${_e.bg} ${_e.text} ${_e.border}`,children:[a.jsx(Ie,{size:12,className:"mr-1"}),U]})},Aa=U=>{switch(U){case"sick":return a.jsx($d,{size:16,className:"text-red-400 mr-2"});case"casual":return a.jsx(Ud,{size:16,className:"text-purple-400 mr-2"});case"paid":return a.jsx(ps,{size:16,className:"text-green-400 mr-2"});default:return a.jsx($s,{size:16,className:"text-blue-400 mr-2"})}},js=U=>U.replace(/_/g," ").replace(/\b\w/g,we=>we.toUpperCase()),er=({title:U,value:we,subtitle:_e,icon:Ie,color:dt})=>a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:we}),a.jsx("p",{className:"text-sm font-medium text-gray-600",children:U}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_e})]}),a.jsx("div",{className:`p-3 rounded-full ${dt}`,children:a.jsx(Ie,{size:24,className:"text-white"})})]})}),oi=(()=>{const U=new Date().getMonth(),we=new Date().getFullYear(),_e=r.filter(Ie=>{const dt=new Date(Ie.fromDate);return dt.getMonth()===U&&dt.getFullYear()===we});return{total:_e.length,pending:_e.filter(Ie=>Ie.status==="pending").length,approved:_e.filter(Ie=>Ie.status==="approved").length,rejected:_e.filter(Ie=>Ie.status==="rejected").length}})();return a.jsxs("div",{className:" space-y-4 bg-gray-50 max-h-screen",children:[a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-800",children:"HR Leave Management"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:a.jsxs("button",{className:"flex items-center bg-green-600 text-white px-3 py-1.5 rounded-lg font-medium hover:bg-green-700 transition-all duration-200 text-xs md:text-sm",onClick:()=>{je(),t==="employeeLeaves"?re():Ae()},children:[a.jsx(Fi,{size:14,className:"mr-1"})," Refresh"]})})]}),a.jsx("div",{className:"bg-white rounded-lg p-1 shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("button",{className:`flex-1 py-2 px-3 text-center font-medium rounded-md transition-all duration-200 text-xs md:text-sm ${t==="employeeLeaves"?"bg-[#104774] text-white shadow":"text-gray-600 hover:text-[#104774]"}`,onClick:()=>s("employeeLeaves"),children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Vd,{size:14,className:"mr-1"}),"Employee Leaves"]})}),a.jsx("button",{className:`flex-1 py-2 px-3 text-center font-medium rounded-md transition-all duration-200 text-xs md:text-sm ${t==="myLeaves"?"bg-[#104774] text-white shadow":"text-gray-600 hover:text-[#104774]"}`,onClick:()=>s("myLeaves"),children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(go,{size:14,className:"mr-1"}),"My Leaves"]})})]})}),t==="employeeLeaves"&&a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-3",children:[a.jsx(er,{title:"Total Requests",value:oi.total,subtitle:"This Month",icon:$s,color:"bg-blue-500",compact:!0}),a.jsx(er,{title:"Pending",value:oi.pending,subtitle:"Require Action",icon:jn,color:"bg-yellow-500",compact:!0}),a.jsx(er,{title:"Approved",value:oi.approved,subtitle:"This month",icon:ps,color:"bg-green-500",compact:!0}),a.jsx(er,{title:"Rejected",value:oi.rejected,subtitle:"Leaves",icon:Hs,color:"bg-red-500",compact:!0})]}),t==="myLeaves"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.entries(p).map(([U,we])=>a.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${U==="sick"?"bg-red-300":U==="casual"?"bg-purple-300":"bg-green-400"}`}),a.jsx("span",{className:"text-xs font-medium text-gray-700 capitalize",children:js(U)})]}),U==="sick"?a.jsx($d,{size:14,className:"text-red-300"}):U==="casual"?a.jsx(Ud,{size:14,className:"text-purple-300"}):a.jsx(ps,{size:14,className:"text-green-400"})]}),a.jsxs("div",{className:"text-lg font-bold text-gray-800 mb-1",children:[we," ",a.jsx("span",{className:"text-xs font-medium text-gray-500",children:"days left"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-1",children:a.jsx("div",{className:`h-1.5 rounded-full ${U==="sick"?"bg-red-300":U==="casual"?"bg-purple-300":"bg-green-400"}`,style:{width:`${Math.min(we/10*100,100)}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500",children:["As of ",new Date().toLocaleDateString()]})]},U))}),t==="employeeLeaves"&&a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(c1,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:14}),a.jsx("input",{type:"text",placeholder:"Search by employee, type, or reason...",value:de,onChange:U=>be(U.target.value),className:"w-full pl-8 pr-3 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs md:text-sm"})]}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[a.jsxs("button",{onClick:()=>ft(!Ge),className:"flex items-center px-2 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50 md:hidden text-xs",children:[a.jsx(kC,{size:12,className:"mr-1"}),"Filters"]}),a.jsxs("div",{className:`${Ge?"flex":"hidden"} md:flex flex-col md:flex-row gap-1 w-full md:w-auto`,children:[a.jsxs("select",{value:I,onChange:U=>Z(U.target.value),className:"px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs md:text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.jsxs("select",{value:X,onChange:U=>P(U.target.value),className:"px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs md:text-sm",children:[a.jsx("option",{value:"all",children:"All Types"}),y.map(U=>a.jsx("option",{value:U.name,children:js(U.name)},U._id))]}),a.jsx("button",{onClick:li,className:"px-2 py-1.5 border border-gray-300 rounded-md hover:bg-gray-50 text-xs md:text-sm",children:"Reset"})]})]})]}),a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Showing ",h.length," of ",r.length," ","requests"]})]}),t==="employeeLeaves"?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-3 border-b border-gray-200 flex items-center space-x-2",children:[a.jsx(Vd,{size:18,className:"text-[#104774]"}),a.jsx("h3",{className:"text-base font-semibold text-gray-800",children:"Employee Leave Requests"})]}),V?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(Fi,{className:"animate-spin mx-auto text-[#104774]",size:24}),a.jsx("p",{className:"mt-2 text-gray-500 text-sm",children:"Loading employee leave requests..."})]}):h.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No employee leave requests found"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 rounded-lg shadow-sm",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase cursor-pointer select-none",onClick:()=>Fe("employee.email"),children:a.jsxs("div",{className:"flex items-center",children:["Employee",ce.key==="employee.email"&&(ce.direction==="ascending"?a.jsx(dd,{size:10,className:"ml-1"}):a.jsx(cd,{size:10,className:"ml-1"}))]})}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase cursor-pointer select-none",onClick:()=>Fe("leaveType"),children:a.jsxs("div",{className:"flex items-center",children:["Type",ce.key==="leaveType"&&(ce.direction==="ascending"?a.jsx(dd,{size:10,className:"ml-1"}):a.jsx(cd,{size:10,className:"ml-1"}))]})}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase cursor-pointer select-none",onClick:()=>Fe("fromDate"),children:a.jsxs("div",{className:"flex items-center",children:["From",ce.key==="fromDate"&&(ce.direction==="ascending"?a.jsx(dd,{size:10,className:"ml-1"}):a.jsx(cd,{size:10,className:"ml-1"}))]})}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase cursor-pointer select-none",onClick:()=>Fe("toDate"),children:a.jsxs("div",{className:"flex items-center",children:["To",ce.key==="toDate"&&(ce.direction==="ascending"?a.jsx(dd,{size:10,className:"ml-1"}):a.jsx(cd,{size:10,className:"ml-1"}))]})}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase",children:"Days"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Mn.map((U,we)=>{const _e=U.currentRemaining?.[U.leaveType]>=U.totalDays;return a.jsxs(Ao.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-3 py-2 text-xs",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-gray-200 rounded-full p-1 mr-1",children:a.jsx(Zm,{size:10,className:"text-gray-600"})}),a.jsx("span",{className:"truncate max-w-[120px]",children:U.employee?.email||"N/A"})]})}),a.jsx("td",{className:"px-3 py-2 text-xs",children:a.jsxs("div",{className:"flex items-center gap-1",children:[Aa(U.leaveType),a.jsx("span",{className:"capitalize",children:js(U.leaveType)})]})}),a.jsx("td",{className:"px-3 py-2 text-xs",children:new Date(U.fromDate).toLocaleDateString()}),a.jsx("td",{className:"px-3 py-2 text-xs",children:new Date(U.toDate).toLocaleDateString()}),a.jsx("td",{className:"px-3 py-2 text-xs",children:U.totalDays}),a.jsx("td",{className:"px-3 py-2",children:a.jsx(qs,{status:U.status,compact:!0})}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex space-x-1 items-center",children:[a.jsx("button",{className:"text-[#104774] hover:text-[#0d3a61] p-0.5 rounded",onClick:()=>M(D===U._id?null:U._id),title:"View Details",children:a.jsx(Zr,{size:12})}),U.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"text-green-600 hover:text-green-800 p-0.5 rounded",onClick:()=>{w(U),H("approve"),R(!0)},title:"Approve",children:a.jsx(ps,{size:12})}),a.jsx("button",{className:"text-red-600 hover:text-red-800 p-0.5 rounded",onClick:()=>{w(U),H("reject"),R(!0)},title:"Reject",children:a.jsx(Hs,{size:12})})]})]})})]}),D===U._id&&a.jsx("tr",{className:"bg-gray-50",children:a.jsx("td",{colSpan:7,className:"p-3",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-1",children:"Request Details"}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Reason:"})," ",U.reason||"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Applied On:"})," ",new Date(U.appliedAt).toLocaleString()]}),U.processedBy&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Processed By:"})," ",U.processedBy?.email||"Admin"]}),U.processedAt&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Processed At:"})," ",new Date(U.processedAt).toLocaleString()]}),U.remarks&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Remarks:"})," ",U.remarks]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-1",children:"Balance Information"}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Remaining at request:"})," ",U.balanceSnapshot?.remaining?.[U.leaveType]??"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Current remaining:"})," ",U.currentRemaining?.[U.leaveType]??"-"]}),!_e&&a.jsxs("p",{className:"text-red-600 font-medium mt-1 flex items-center",children:[a.jsx(ms,{size:10,className:"inline mr-1"}),"Insufficient balance"]})]})]})})})]},U._id)})})]})})}),a.jsx("div",{className:"md:hidden space-y-3 p-3",children:Mn.map((U,we)=>{const _e=U.currentRemaining?.[U.leaveType]>=U.totalDays,Ie=Ze=>Ze?new Date(Ze).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):"-",dt=(Ze,ts)=>{const Zt=new Date(Ze),Ss=new Date(ts);return Zt.getMonth()===Ss.getMonth()&&Zt.getFullYear()===Ss.getFullYear()?`${Zt.getDate()} - ${Ss.getDate()} ${Zt.toLocaleDateString("en-GB",{month:"short"})}`:`${Ie(Ze)} - ${Ie(ts)}`},it=Ze=>{if(!Ze)return"N/A";const ts=Ze.indexOf("@");return ts>0?Ze.substring(0,ts):Ze};return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-white shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-gray-100 rounded-full p-1.5",children:a.jsx(Zm,{size:14,className:"text-gray-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 text-sm truncate max-w-[140px]",children:it(U.employee?.email)}),a.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[140px]",children:U.employee?.email||"N/A"})]})]}),a.jsx(qs,{status:U.status,compact:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[a.jsxs("div",{className:"bg-gray-50 p-2 rounded border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Leave Type"}),a.jsxs("div",{className:"flex items-center gap-1",children:[Aa(U.leaveType),a.jsx("span",{className:"font-medium text-sm capitalize",children:js(U.leaveType)})]})]}),a.jsxs("div",{className:"bg-gray-50 p-2 rounded border",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Duration"}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("span",{className:"font-medium text-sm",children:[U.totalDays," day(s)"]})})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Date Range"}),a.jsxs("div",{className:"flex items-center justify-between bg-blue-50 p-2 rounded border border-blue-100",children:[a.jsx("span",{className:"font-medium text-sm text-blue-700",children:dt(U.fromDate,U.toDate)}),a.jsx($s,{size:14,className:"text-blue-500"})]})]}),U.reason&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reason"}),a.jsxs("div",{className:"bg-gray-50 p-2 rounded border text-sm",children:[a.jsx("p",{className:"line-clamp-2 text-gray-700",children:U.reason}),U.reason.length>80&&a.jsx("button",{onClick:()=>{alert(U.reason)},className:"text-blue-600 text-xs mt-1 hover:text-blue-800 font-medium",children:"View Full Reason"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Balance Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-gray-50 p-2 rounded border text-center",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"At Request"}),a.jsx("p",{className:"font-semibold text-sm",children:U.balanceSnapshot?.remaining?.[U.leaveType]??"-"})]}),a.jsxs("div",{className:"bg-gray-50 p-2 rounded border text-center",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Current"}),a.jsx("p",{className:"font-semibold text-sm",children:U.currentRemaining?.[U.leaveType]??"-"})]})]}),!_e&&a.jsxs("div",{className:"mt-2 flex items-center justify-center gap-1 bg-red-50 p-2 rounded border border-red-100",children:[a.jsx(ms,{size:12,className:"text-red-600"}),a.jsx("p",{className:"text-red-600 font-medium text-xs",children:"Insufficient balance for this request"})]})]}),a.jsx("div",{className:"flex gap-2 pt-2 border-t border-gray-100",children:U.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"flex-1 flex items-center justify-center gap-1 text-green-600 hover:text-green-800 text-xs font-medium py-2 border border-green-300 rounded hover:bg-green-50 transition-colors",onClick:()=>{w(U),H("approve"),R(!0)},children:[a.jsx(ps,{size:12}),"Approve"]}),a.jsxs("button",{className:"flex-1 flex items-center justify-center gap-1 text-red-600 hover:text-red-800 text-xs font-medium py-2 border border-red-300 rounded hover:bg-red-50 transition-colors",onClick:()=>{w(U),H("reject"),R(!0)},children:[a.jsx(Hs,{size:12}),"Reject"]})]})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2 pt-2 border-t border-gray-100",children:[a.jsxs("span",{children:["Applied: ",Ie(U.appliedAt)]}),a.jsxs("span",{children:["ID: ",U._id.slice(-6)]})]})]},U._id)})}),Rt>1&&a.jsxs("div",{className:"p-3 border-t border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-2",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",Ht+1," to"," ",Math.min(lt,h.length)," of"," ",h.length," entries"]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>J(U=>Math.max(U-1,1)),disabled:F===1,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:"Prev"}),Array.from({length:Math.min(5,Rt)},(U,we)=>{let _e;return Rt<=5||F<=3?_e=we+1:F>=Rt-2?_e=Rt-4+we:_e=F-2+we,a.jsx("button",{onClick:()=>J(_e),className:`px-2 py-1 rounded border text-xs ${F===_e?"bg-[#104774] text-white border-[#104774]":"border-gray-300"}`,children:_e},_e)}),a.jsx("button",{onClick:()=>J(U=>Math.min(U+1,Rt)),disabled:F===Rt,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:"Next"})]})]})]})]}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-3 border-b border-gray-200 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(go,{size:18,className:"text-[#104774]"}),a.jsx("h3",{className:"text-base font-semibold text-gray-800",children:"My Leave Requests"})]}),a.jsxs("button",{className:"flex items-center bg-[#104774] text-white px-3 py-1.5 rounded-lg font-medium hover:bg-[#0d3a61] transition-all duration-200 text-xs md:text-sm",onClick:()=>S(!0),children:[a.jsx(Bi,{size:14,className:"mr-1"})," Apply"]})]}),c.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No leave requests found. Apply for your first leave!"})}):a.jsxs("div",{children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{className:"bg-[#104774] text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Date Range"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Type"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Days"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Reason"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Status"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Applied On"}),a.jsx("th",{className:"p-2 text-left font-medium text-xs",children:"Actions"})]})}),a.jsx("tbody",{children:c.map(U=>{U.currentRemaining&&U.currentRemaining[U.leaveType]>=U.totalDays;const we=_e=>_e?new Date(_e).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):"-";return a.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"p-2 font-medium text-gray-800 text-xs",children:`${we(U.fromDate)} - ${we(U.toDate)}`}),a.jsx("td",{className:"p-2 text-xs",children:a.jsxs("div",{className:"flex items-center gap-1",children:[Aa(U.leaveType),a.jsx("span",{className:"capitalize",children:js(U.leaveType)})]})}),a.jsx("td",{className:"p-2 text-xs",children:U.totalDays}),a.jsxs("td",{className:"p-2 text-gray-600 text-xs max-w-[100px] truncate cursor-pointer relative group",title:U.reason,children:[U.reason||"-",U.reason&&a.jsx("div",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 w-48 z-20 -top-1 left-1/2 -translate-x-1/2 shadow-lg",children:U.reason})]}),a.jsx("td",{className:"p-2",children:a.jsx(qs,{status:U.status,compact:!0})}),a.jsx("td",{className:"p-2 text-gray-600 text-xs",children:new Date(U.appliedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),a.jsx("td",{className:"p-2",children:U.status==="pending"&&a.jsxs("button",{onClick:()=>Na(U._id),disabled:G,className:"flex items-center text-red-600 hover:text-red-800 text-xs font-medium disabled:opacity-50",children:[a.jsx(Eo,{size:10,className:"mr-0.5"}),G?"...":"Cancel"]})})]},U._id)})})]})}),a.jsx("div",{className:"md:hidden space-y-3 p-3",children:c.map(U=>{const we=Ie=>Ie?new Date(Ie).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",_e=(Ie,dt)=>{const it=new Date(Ie),Ze=new Date(dt);return it.getMonth()===Ze.getMonth()&&it.getFullYear()===Ze.getFullYear()?`${it.getDate()} - ${Ze.getDate()} ${it.toLocaleDateString("en-GB",{month:"short"})}`:`${we(Ie)} - ${we(dt)}`};return a.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white shadow-sm",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:_e(U.fromDate,U.toDate)}),a.jsxs("p",{className:"text-xs text-gray-500",children:[U.totalDays," day(s)"]})]}),a.jsx(qs,{status:U.status,compact:!0})]}),a.jsxs("div",{className:"flex justify-between items-center text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 text-gray-700",children:[Aa(U.leaveType),a.jsx("span",{className:"capitalize",children:js(U.leaveType)})]}),a.jsxs("span",{className:"text-gray-500",children:["Applied:"," ",new Date(U.appliedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short"})]})]}),U.reason&&a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Reason:"}),a.jsx("div",{className:"text-gray-600 bg-gray-50 p-2 rounded border line-clamp-2",children:U.reason}),U.reason.length>80&&a.jsx("button",{onClick:()=>alert(U.reason),className:"text-blue-600 text-xs mt-1 hover:text-blue-800",children:"View Full Reason"})]}),U.status==="pending"&&a.jsx("div",{className:"pt-2 border-t border-gray-100",children:a.jsxs("button",{onClick:()=>Na(U._id),disabled:G,className:"flex items-center justify-center w-full text-red-600 hover:text-red-800 text-xs font-medium disabled:opacity-50 py-1 border border-red-200 rounded hover:bg-red-50 transition-colors",children:[a.jsx(Eo,{size:10,className:"mr-1"}),G?"Cancelling...":"Cancel Leave Request"]})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 pt-1",children:[a.jsxs("span",{children:["ID: ",U._id.slice(-6)]}),a.jsx("span",{children:U.status==="pending"?"Under Review":U.status})]})]})},U._id)})})]})]}),C&&a.jsx("div",{className:"fixed inset-0  bg-opacity-40 backdrop-blur-xs flex items-center justify-center z-50 p-3",children:a.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-md relative max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:()=>{S(!1),$({})},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:a.jsx(Fo,{size:18})}),a.jsx("h2",{className:"text-lg font-bold mb-3",children:"Apply for Leave"}),ge.leaveType&&p[ge.leaveType]!==void 0&&a.jsx("div",{className:"bg-blue-50 p-2 rounded-md mb-3",children:a.jsxs("p",{className:"text-blue-800 font-medium text-xs",children:["Available ",js(ge.leaveType)," leave:"," ",p[ge.leaveType]," days"]})}),a.jsxs("form",{onSubmit:xn,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"Leave Type"}),a.jsxs("select",{name:"leaveType",value:ge.leaveType,onChange:Vs,className:"w-full border rounded-md p-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",required:!0,children:[a.jsx("option",{value:"",children:"Select Leave Type"}),y.map(U=>a.jsx("option",{value:U.name,children:js(U.name)},U._id))]}),Xe.leaveType&&a.jsxs("p",{className:"text-red-500 text-xs mt-0.5 flex items-center",children:[a.jsx(ms,{size:10,className:"mr-0.5"})," ",Xe.leaveType]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"From Date"}),a.jsx("input",{type:"date",name:"fromDate",value:ge.fromDate,onChange:As,min:new Date().toISOString().split("T")[0],className:"w-full border rounded-md p-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",required:!0}),Xe.fromDate&&a.jsxs("p",{className:"text-red-500 text-xs mt-0.5 flex items-center",children:[a.jsx(ms,{size:10,className:"mr-0.5"})," ",Xe.fromDate]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"To Date"}),a.jsx("input",{type:"date",name:"toDate",value:ge.toDate,onChange:As,min:ge.fromDate||new Date().toISOString().split("T")[0],className:"w-full border rounded-md p-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",required:!0}),Xe.toDate&&a.jsxs("p",{className:"text-red-500 text-xs mt-0.5 flex items-center",children:[a.jsx(ms,{size:10,className:"mr-0.5"})," ",Xe.toDate]})]})]}),ge.fromDate&&ge.toDate&&a.jsxs("div",{className:"bg-gray-50 p-2 rounded-md",children:[a.jsx("p",{className:"text-gray-700 font-medium text-xs",children:te?"Calculating...":`Working Days: ${ve??0}`}),a.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:"(Excludes Sundays and Indian public holidays)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-1 font-medium text-xs",children:"Reason"}),a.jsx("textarea",{name:"reason",value:ge.reason,onChange:Vs,rows:2,className:"w-full border rounded-md p-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",placeholder:"Please provide a reason for your leave",required:!0}),a.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[ge.reason.length,"/500 characters"]}),Xe.reason&&a.jsxs("p",{className:"text-red-500 text-xs mt-0.5 flex items-center",children:[a.jsx(ms,{size:10,className:"mr-0.5"})," ",Xe.reason]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-3",children:[a.jsx("button",{type:"button",onClick:()=>{S(!1),$({})},className:"px-2 py-1 rounded-md border border-gray-300 hover:bg-gray-50 text-xs",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:K,className:"px-2 py-1 rounded-md bg-[#104774] text-white hover:bg-[#0d3a61] disabled:opacity-50 text-xs",children:K?"Submitting...":"Submit"})]})]})]})}),T&&N&&a.jsx("div",{className:"fixed inset-0 backdrop-blur-xs  bg-opacity-40 flex items-center justify-center z-50 p-3",children:a.jsxs("div",{className:"bg-white p-3 rounded-lg w-full max-w-md",children:[a.jsxs("h3",{className:"text-base font-semibold mb-3",children:[O==="approve"?"Approve":"Reject"," Leave Request"]}),a.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded-md",children:[a.jsxs("p",{className:"text-xs",children:[a.jsx("strong",{children:"Employee:"})," ",N.employee?.email]}),a.jsxs("p",{className:"text-xs",children:[a.jsx("strong",{children:"Type:"})," ",js(N.leaveType)]}),a.jsxs("p",{className:"text-xs",children:[a.jsx("strong",{children:"Duration:"})," ",N.totalDays," days"]}),a.jsxs("p",{className:"text-xs",children:[a.jsx("strong",{children:"Reason:"})," ",N.reason||"-"]}),N.currentRemaining&&a.jsxs("p",{className:`text-xs mt-1 ${N.currentRemaining[N.leaveType]<N.totalDays?"text-red-600 font-medium":""}`,children:[a.jsx("strong",{children:"Remaining Balance:"})," ",N.currentRemaining[N.leaveType],"/",N.balanceSnapshot?.remaining[N.leaveType],N.currentRemaining[N.leaveType]<N.totalDays&&a.jsx("span",{className:"ml-0.5",children:"(Insufficient balance)"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-xs font-medium mb-1",children:"Remarks (Optional)"}),a.jsx("textarea",{value:A,onChange:U=>j(U.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",rows:"2",placeholder:"Add remarks for this action..."})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{className:"px-2 py-1 rounded-md bg-gray-300 hover:bg-gray-400 transition-colors text-xs",onClick:()=>{R(!1),j("")},children:"Cancel"}),a.jsx("button",{className:`px-2 py-1 rounded-md text-white transition-colors text-xs ${O==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,onClick:()=>Gs(N._id,O),children:O==="approve"?"Approve":"Reject"})]})]})})]})},RA=6048e5,j4=864e5,cw=Symbol.for("constructDateFrom");function ai(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&cw in n?n[cw](e):n instanceof Date?new n.constructor(e):new Date(e)}function kn(n,e){return ai(e||n,n)}let S4={};function Pu(){return S4}function Lo(n,e){const t=Pu(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=kn(n,e?.in),l=r.getDay(),c=(l<s?7:0)+l-s;return r.setDate(r.getDate()-c),r.setHours(0,0,0,0),r}function ou(n,e){return Lo(n,{...e,weekStartsOn:1})}function kA(n,e){const t=kn(n,e?.in),s=t.getFullYear(),r=ai(t,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const l=ou(r),c=ai(t,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const u=ou(c);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function dw(n){const e=kn(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function E4(n,...e){const t=ai.bind(null,e.find(s=>typeof s=="object"));return e.map(t)}function uw(n,e){const t=kn(n,e?.in);return t.setHours(0,0,0,0),t}function _4(n,e,t){const[s,r]=E4(t?.in,n,e),l=uw(s),c=uw(r),u=+l-dw(l),h=+c-dw(c);return Math.round((u-h)/j4)}function C4(n,e){const t=kA(n,e),s=ai(n,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),ou(s)}function T4(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function D4(n){return!(!T4(n)&&typeof n!="number"||isNaN(+kn(n)))}function R4(n,e){const t=kn(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const k4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M4=(n,e,t)=>{let s;const r=k4[n];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Im(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const L4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},P4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},I4={date:Im({formats:L4,defaultWidth:"full"}),time:Im({formats:O4,defaultWidth:"full"}),dateTime:Im({formats:P4,defaultWidth:"full"})},B4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},H4=(n,e,t,s)=>B4[n];function uo(n){return(e,t)=>{const s=t?.context?String(t.context):"standalone";let r;if(s==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,u=t?.width?String(t.width):c;r=n.formattingValues[u]||n.formattingValues[c]}else{const c=n.defaultWidth,u=t?.width?String(t.width):n.defaultWidth;r=n.values[u]||n.values[c]}const l=n.argumentCallback?n.argumentCallback(e):e;return r[l]}}const z4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},G4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},q4=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Y4={ordinalNumber:q4,era:uo({values:z4,defaultWidth:"wide"}),quarter:uo({values:F4,defaultWidth:"wide",argumentCallback:n=>n-1}),month:uo({values:U4,defaultWidth:"wide"}),day:uo({values:$4,defaultWidth:"wide"}),dayPeriod:uo({values:V4,defaultWidth:"wide",formattingValues:G4,defaultFormattingWidth:"wide"})};function ho(n){return(e,t={})=>{const s=t.width,r=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],l=e.match(r);if(!l)return null;const c=l[0],u=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(u)?X4(u,x=>x.test(c)):W4(u,x=>x.test(c));let m;m=n.valueCallback?n.valueCallback(h):h,m=t.valueCallback?t.valueCallback(m):m;const p=e.slice(c.length);return{value:m,rest:p}}}function W4(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function X4(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Q4(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const r=s[0],l=e.match(n.parsePattern);if(!l)return null;let c=n.valueCallback?n.valueCallback(l[0]):l[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(r.length);return{value:c,rest:u}}}const Z4=/^(\d+)(th|st|nd|rd)?/i,K4=/\d+/i,J4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eP={any:[/^b/i,/^(a|c)/i]},tP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sP={any:[/1/i,/2/i,/3/i,/4/i]},nP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cP={ordinalNumber:Q4({matchPattern:Z4,parsePattern:K4,valueCallback:n=>parseInt(n,10)}),era:ho({matchPatterns:J4,defaultMatchWidth:"wide",parsePatterns:eP,defaultParseWidth:"any"}),quarter:ho({matchPatterns:tP,defaultMatchWidth:"wide",parsePatterns:sP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ho({matchPatterns:nP,defaultMatchWidth:"wide",parsePatterns:aP,defaultParseWidth:"any"}),day:ho({matchPatterns:iP,defaultMatchWidth:"wide",parsePatterns:rP,defaultParseWidth:"any"}),dayPeriod:ho({matchPatterns:lP,defaultMatchWidth:"any",parsePatterns:oP,defaultParseWidth:"any"})},dP={code:"en-US",formatDistance:M4,formatLong:I4,formatRelative:H4,localize:Y4,match:cP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uP(n,e){const t=kn(n,e?.in);return _4(t,R4(t))+1}function hP(n,e){const t=kn(n,e?.in),s=+ou(t)-+C4(t);return Math.round(s/RA)+1}function MA(n,e){const t=kn(n,e?.in),s=t.getFullYear(),r=Pu(),l=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,c=ai(e?.in||n,0);c.setFullYear(s+1,0,l),c.setHours(0,0,0,0);const u=Lo(c,e),h=ai(e?.in||n,0);h.setFullYear(s,0,l),h.setHours(0,0,0,0);const m=Lo(h,e);return+t>=+u?s+1:+t>=+m?s:s-1}function fP(n,e){const t=Pu(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=MA(n,e),l=ai(e?.in||n,0);return l.setFullYear(r,0,s),l.setHours(0,0,0,0),Lo(l,e)}function mP(n,e){const t=kn(n,e?.in),s=+Lo(t,e)-+fP(t,e);return Math.round(s/RA)+1}function gt(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const Ya={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return gt(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):gt(t+1,2)},d(n,e){return gt(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return gt(n.getHours()%12||12,e.length)},H(n,e){return gt(n.getHours(),e.length)},m(n,e){return gt(n.getMinutes(),e.length)},s(n,e){return gt(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),r=Math.trunc(s*Math.pow(10,t-3));return gt(r,e.length)}},Ir={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hw={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),r=s>0?s:1-s;return t.ordinalNumber(r,{unit:"year"})}return Ya.y(n,e)},Y:function(n,e,t,s){const r=MA(n,s),l=r>0?r:1-r;if(e==="YY"){const c=l%100;return gt(c,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):gt(l,e.length)},R:function(n,e){const t=kA(n);return gt(t,e.length)},u:function(n,e){const t=n.getFullYear();return gt(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return gt(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return gt(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return Ya.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return gt(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const r=mP(n,s);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):gt(r,e.length)},I:function(n,e,t){const s=hP(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):gt(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ya.d(n,e)},D:function(n,e,t){const s=uP(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):gt(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const r=n.getDay(),l=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return gt(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const r=n.getDay(),l=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return gt(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return gt(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let r;switch(s===12?r=Ir.noon:s===0?r=Ir.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let r;switch(s>=17?r=Ir.evening:s>=12?r=Ir.afternoon:s>=4?r=Ir.morning:r=Ir.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Ya.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ya.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):gt(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):gt(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ya.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ya.s(n,e)},S:function(n,e){return Ya.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return mw(s);case"XXXX":case"XX":return Ti(s);case"XXXXX":case"XXX":default:return Ti(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return mw(s);case"xxxx":case"xx":return Ti(s);case"xxxxx":case"xxx":default:return Ti(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+fw(s,":");case"OOOO":default:return"GMT"+Ti(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+fw(s,":");case"zzzz":default:return"GMT"+Ti(s,":")}},t:function(n,e,t){const s=Math.trunc(+n/1e3);return gt(s,e.length)},T:function(n,e,t){return gt(+n,e.length)}};function fw(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Math.trunc(s/60),l=s%60;return l===0?t+String(r):t+String(r)+e+gt(l,2)}function mw(n,e){return n%60===0?(n>0?"-":"+")+gt(Math.abs(n)/60,2):Ti(n,e)}function Ti(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=gt(Math.trunc(s/60),2),l=gt(s%60,2);return t+r+e+l}const pw=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LA=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pP=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],r=t[2];if(!r)return pw(n,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",pw(s,e)).replace("{{time}}",LA(r,e))},gP={p:LA,P:pP},xP=/^D+$/,yP=/^Y+$/,bP=["D","DD","YY","YYYY"];function vP(n){return xP.test(n)}function wP(n){return yP.test(n)}function NP(n,e,t){const s=AP(n,e,t);if(console.warn(s),bP.includes(n))throw new RangeError(s)}function AP(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,SP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EP=/^'([^]*?)'?$/,_P=/''/g,CP=/[a-zA-Z]/;function fa(n,e,t){const s=Pu(),r=s.locale??dP,l=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,u=kn(n,t?.in);if(!D4(u))throw new RangeError("Invalid time value");let h=e.match(SP).map(p=>{const x=p[0];if(x==="p"||x==="P"){const y=gP[x];return y(p,r.formatLong)}return p}).join("").match(jP).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const x=p[0];if(x==="'")return{isToken:!1,value:TP(p)};if(hw[x])return{isToken:!0,value:p};if(x.match(CP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:p}});r.localize.preprocessor&&(h=r.localize.preprocessor(u,h));const m={firstWeekContainsDate:l,weekStartsOn:c,locale:r};return h.map(p=>{if(!p.isToken)return p.value;const x=p.value;(wP(x)||vP(x))&&NP(x,e,String(n));const y=hw[x[0]];return y(u,x,r.localize,m)}).join("")}function TP(n){const e=n.match(EP);return e?e[1].replace(_P,"'"):n}const DP=()=>{const{token:n}=os(),[e,t]=_.useState([]),[s,r]=_.useState([]),[l,c]=_.useState([]),[u,h]=_.useState([]),[m,p]=_.useState({total:0,pending:0,approved:0,rejected:0}),[x,y]=_.useState({role:"employee",year:new Date().getFullYear(),leaves:{}}),[v,N]=_.useState({name:"",isActive:!0}),[w,A]=_.useState(null),[j,C]=_.useState(null),[S,T]=_.useState(null),[R,O]=_.useState(""),[H,V]=_.useState(!1),[L,K]=_.useState(""),[z,G]=_.useState("pending"),[Y,de]=_.useState("all"),[be,I]=_.useState(null),[Z,X]=_.useState(1),[P]=_.useState(10),[D,M]=_.useState({key:null,direction:"ascending"}),[F,J]=_.useState(!1),me=async()=>{V(!0);try{const[$,Ne,De]=await Promise.all([xe.get("/leave/requests",{headers:{Authorization:`Bearer ${n}`}}),xe.get("/leave/policies",{headers:{Authorization:`Bearer ${n}`}}),xe.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${n}`}})]);t($.data),r($.data),c(Ne.data),h(De.data);const qe=new Date().getMonth(),xt=new Date().getFullYear(),Bt=$.data.filter(re=>{const Ae=new Date(re.fromDate);return Ae.getMonth()===qe&&Ae.getFullYear()===xt});p({total:Bt.length,pending:Bt.filter(re=>re.status==="pending").length,approved:Bt.filter(re=>re.status==="approved").length,rejected:Bt.filter(re=>re.status==="rejected").length})}catch($){console.error("Error fetching data:",$)}finally{V(!1)}};_.useEffect(()=>{n&&me()},[n]),_.useEffect(()=>{let $=e;L&&($=$.filter(Ne=>Ne.employee?.email?.toLowerCase().includes(L.toLowerCase())||Ne.leaveType?.toLowerCase().includes(L.toLowerCase())||Ne.reason?.toLowerCase().includes(L.toLowerCase()))),z!=="all"&&($=$.filter(Ne=>Ne.status===z)),Y!=="all"&&($=$.filter(Ne=>Ne.leaveType===Y)),r($),X(1)},[L,z,Y,e]);const ce=Z*P,ye=ce-P,Se=s.slice(ye,ce),ke=Math.ceil(s.length/P),te=async($,Ne)=>{try{await xe.post(`/leave/${$}/review`,{action:Ne,reason:R||`${Ne}ed by admin`},{headers:{Authorization:`Bearer ${n}`}}),A(null),O(""),me(),document.getElementById("actionModal").classList.add("hidden")}catch(De){console.error("Error updating leave:",De)}},Ue=async $=>{$.preventDefault();try{await xe.post("/leave/create-leave-policy",x,{headers:{Authorization:`Bearer ${n}`}}),me(),y({role:"employee",year:new Date().getFullYear(),leaves:{}}),document.getElementById("policyModal").classList.add("hidden")}catch(Ne){console.error("Error setting leave policy:",Ne)}},Ge=$=>{C($);const Ne={};$.leaves instanceof Map?$.leaves.forEach((De,qe)=>{Ne[qe]=De}):Object.assign(Ne,$.leaves),y({role:$.role,year:$.year,leaves:Ne}),document.getElementById("policyModal").classList.remove("hidden")},ft=async $=>{$.preventDefault();try{S?await xe.put(`/leave/update-leaveType/${S._id}`,{name:v.name},{headers:{Authorization:`Bearer ${n}`}}):await xe.post("/leave/create-leaveType",{name:v.name},{headers:{Authorization:`Bearer ${n}`}}),N({name:"",isActive:!0}),T(null),me(),document.getElementById("leaveTypeModal").classList.add("hidden")}catch(Ne){console.error("Error creating/updating leave type:",Ne)}},ve=async $=>{try{await xe.delete(`/leave/delete-leaveType/${$}`,{headers:{Authorization:`Bearer ${n}`}}),me()}catch(Ne){console.error("Error deleting leave type:",Ne)}},W=async $=>{try{await xe.patch(`/leave/toggle-leaveType-status/${$}`,{},{headers:{Authorization:`Bearer ${n}`}}),me()}catch(Ne){console.error("Error toggling leave type status:",Ne)}},he=$=>{T($),N({name:$.name,isActive:$.isActive}),document.getElementById("leaveTypeModal").classList.remove("hidden")},ge=({status:$})=>{const Ne={approved:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",icon:ps},pending:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",icon:jn},rejected:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",icon:Hs},cancelled:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-200",icon:Hs}},De=Ne[$]||Ne.pending,qe=De.icon;return a.jsxs("span",{className:`flex items-center px-3 py-1 rounded-full text-xs font-medium ${De.bg} ${De.text} ${De.border}`,children:[a.jsx(qe,{size:12,className:"mr-1"}),$]})},Ee=({title:$,value:Ne,subtitle:De,icon:qe,color:xt})=>a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Ne}),a.jsx("p",{className:"text-sm font-medium text-gray-600",children:$}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:De})]}),a.jsx("div",{className:`p-3 rounded-full ${xt}`,children:a.jsx(qe,{size:24,className:"text-white"})})]})}),Xe=u.filter($=>$.isActive);return a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 p-2 bg-gray-50 max-h-[80vh] text-[13px]",children:[a.jsxs("div",{className:"md:hidden flex justify-between items-center p-2 bg-white rounded shadow-sm mb-2",children:[a.jsx("h1",{className:"text-sm font-semibold text-gray-800",children:"Admin Leave Management"}),a.jsx("button",{onClick:()=>J(!F),className:"p-1 rounded bg-[#104774] text-white",children:F?a.jsx(Fo,{size:16}):a.jsx(o1,{size:16})})]}),a.jsxs("div",{className:"flex-1 space-y-3",children:[a.jsxs("div",{className:"hidden md:flex items-center justify-between bg-white p-3 rounded shadow-sm",children:[a.jsx("h1",{className:"text-base font-semibold text-gray-800",children:"Admin Leave Management"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{className:"flex items-center bg-[#104774] text-white px-3 py-1.5 rounded text-xs hover:bg-[#0d3a61]",onClick:()=>{C(null),document.getElementById("policyModal").classList.remove("hidden")},children:[a.jsx(Bi,{size:13,className:"mr-1"})," Set Policy"]}),a.jsxs("button",{className:"flex items-center bg-green-600 text-white px-3 py-1.5 rounded text-xs hover:bg-green-700",onClick:me,children:[a.jsx(Fi,{size:13,className:"mr-1"})," Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2",children:[a.jsx(Ee,{title:"Total Requests",value:m.total,subtitle:"This Month",icon:$s,color:"bg-blue-500"}),a.jsx(Ee,{title:"Pending",value:m.pending,subtitle:"Require Action",icon:jn,color:"bg-yellow-500"}),a.jsx(Ee,{title:"Approved",value:m.approved,subtitle:"This Month",icon:ps,color:"bg-green-500"}),a.jsx(Ee,{title:"Rejected",value:m.rejected,subtitle:"Leaves",icon:Hs,color:"bg-red-500"})]}),a.jsxs("div",{className:"bg-white rounded p-2.5 shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(c1,{className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400",size:13}),a.jsx("input",{type:"text",placeholder:"Search by employee, type, or reason...",value:L,onChange:$=>K($.target.value),className:"w-full pl-7 pr-2 py-1.5 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-[#104774]"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("select",{value:z,onChange:$=>G($.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-[#104774]",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]}),a.jsxs("select",{value:Y,onChange:$=>de($.target.value),className:"px-2 py-1.5 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-[#104774]",children:[a.jsx("option",{value:"all",children:"All Types"}),Xe.map($=>a.jsx("option",{value:$.name,children:$.name.replace(/_/g," ").replace(/\b\w/g,Ne=>Ne.toUpperCase())},$._id))]})]})]}),a.jsxs("p",{className:"mt-1 text-[11px] text-gray-500",children:["Showing ",s.length," of ",e.length," requests"]})]}),a.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-2 border-b border-gray-200 flex items-center space-x-2",children:[a.jsx($s,{size:16,className:"text-[#104774]"}),a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"All Leave Requests"})]}),H?a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(Fi,{className:"animate-spin mx-auto text-[#104774]",size:20}),a.jsx("p",{className:"mt-1 text-gray-500 text-xs",children:"Loading leave requests..."})]}):s.length===0?a.jsx("div",{className:"p-4 text-center",children:a.jsx("p",{className:"text-gray-500 text-xs",children:"No leave requests found"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden space-y-3",children:Se.sort(($,Ne)=>new Date(Ne.appliedAt)-new Date($.appliedAt)).map(($,Ne)=>{const De=$.currentRemaining&&$.currentRemaining[$.leaveType]>=$.totalDays;return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"p-3 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-sm text-gray-800",title:$.employee?.email||"N/A",children:$.employee?.email?$.employee.email.length>25?$.employee.email.slice(0,22)+"...":$.employee.email:"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:$.leaveType.replace(/_/g," ")})]}),a.jsx(ge,{status:$.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"From:"}),a.jsx("p",{className:"font-medium",children:fa(new Date($.fromDate),"dd MMM yyyy")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"To:"}),a.jsx("p",{className:"font-medium",children:fa(new Date($.toDate),"dd MMM yyyy")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Days:"}),a.jsx("p",{className:"font-medium",children:$.totalDays})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Balance:"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:De?"text-green-600 font-medium":"text-red-600 font-medium",children:$.currentRemaining?$.currentRemaining[$.leaveType]:"N/A"}),!De&&$.currentRemaining&&a.jsx(ms,{size:12,className:"text-red-500 ml-1"})]})]})]})]}),a.jsx("div",{className:"p-3 bg-gray-50",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("button",{className:"flex items-center gap-1 text-xs text-blue-600 font-medium",onClick:()=>I(be===$._id?null:$._id),children:[a.jsx(Zr,{size:14}),be===$._id?"Hide Details":"View Details"]}),$.status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{className:"p-2 rounded-full bg-green-100 text-green-600 hover:bg-green-200 transition-colors",onClick:()=>{A($),document.getElementById("actionModal").classList.remove("hidden")},title:"Approve",children:a.jsx(ps,{size:14})}),a.jsx("button",{className:"p-2 rounded-full bg-red-100 text-red-600 hover:bg-red-200 transition-colors",onClick:()=>{A($),document.getElementById("actionModal").classList.remove("hidden")},title:"Reject",children:a.jsx(Hs,{size:14})})]})]})}),be===$._id&&a.jsx("div",{className:"p-3 border-t border-gray-100 bg-white",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-blue-50 p-2 rounded-lg",children:[a.jsxs("h4",{className:"text-[#104774] font-semibold text-xs mb-2 flex items-center gap-1",children:[a.jsx(OC,{size:12}),"Request Details"]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Reason:"}),a.jsx("span",{className:"font-medium",children:$.reason||"-"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Applied On:"}),a.jsx("span",{className:"font-medium",children:fa(new Date($.appliedAt),"dd MMM yyyy, hh:mm a")})]}),$.processedBy&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Processed By:"}),a.jsx("span",{className:"font-medium",children:$.processedBy?.email||"Admin"})]}),$.processedAt&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Processed At:"}),a.jsx("span",{className:"font-medium",children:fa(new Date($.processedAt),"dd MMM yyyy, hh:mm a")})]}),$.remarks&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Remarks:"}),a.jsx("span",{className:"font-medium",children:$.remarks})]})]})]}),a.jsxs("div",{className:"bg-green-50 p-2 rounded-lg",children:[a.jsxs("h4",{className:"text-[#104774] font-semibold text-xs mb-2 flex items-center gap-1",children:[a.jsx(r1,{size:12}),"Balance Information"]}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Remaining at request:"}),a.jsx("span",{className:"font-medium",children:$.balanceSnapshot?.remaining?.[$.leaveType]??"-"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Current remaining:"}),a.jsx("span",{className:"font-medium",children:$.currentRemaining?.[$.leaveType]??"-"})]}),!De&&a.jsx("div",{className:"flex items-center justify-between text-red-600 font-medium mt-1",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ms,{size:12}),"Insufficient balance"]})})]})]})]})})]},$._id)})}),a.jsx("div",{className:"hidden md:block",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsx("div",{className:"min-w-[700px] md:min-w-full max-h-[350px] md:max-h-[400px] overflow-y-auto",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"Employee"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"Type"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"From"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"To"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"Days"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"Balance"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"Status"}),a.jsx("th",{className:"p-1.5 text-left text-xs font-medium whitespace-nowrap",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:Se.sort(($,Ne)=>new Date(Ne.appliedAt)-new Date($.appliedAt)).map(($,Ne)=>{const De=$.currentRemaining&&$.currentRemaining[$.leaveType]>=$.totalDays;return a.jsxs(Ao.Fragment,{children:[a.jsxs("tr",{className:`${Ne%2===0?"bg-white":"bg-gray-50"} hover:bg-gray-100 transition-colors`,children:[a.jsx("td",{className:"p-1.5 text-xs whitespace-nowrap",children:a.jsx("div",{className:"truncate max-w-[100px] md:max-w-none",children:$.employee?.email||"N/A"})}),a.jsx("td",{className:"p-1.5 text-xs capitalize whitespace-nowrap",children:$.leaveType.replace(/_/g," ")}),a.jsx("td",{className:"p-1.5 text-xs whitespace-nowrap",children:fa(new Date($.fromDate),"dd MMM yyyy")}),a.jsx("td",{className:"p-1.5 text-xs whitespace-nowrap",children:fa(new Date($.toDate),"dd MMM yyyy")}),a.jsx("td",{className:"p-1.5 text-xs whitespace-nowrap",children:$.totalDays}),a.jsx("td",{className:"p-1.5 text-xs whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:$.currentRemaining?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:De?"text-green-600 font-medium":"text-red-600 font-medium",children:[$.currentRemaining[$.leaveType],"/",$.balanceSnapshot?.remaining[$.leaveType]]}),!De&&a.jsx(ms,{size:12,className:"text-red-500 ml-1"})]}):a.jsx("span",{className:"text-gray-400",children:"N/A"})})}),a.jsx("td",{className:"p-1.5",children:a.jsx(ge,{status:$.status})}),a.jsx("td",{className:"p-1.5",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{className:"p-1 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200",onClick:()=>I(be===$._id?null:$._id),title:"View Details",children:a.jsx(Zr,{size:12})}),$.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"p-1 rounded-full bg-green-100 text-green-600 hover:bg-green-200",onClick:()=>{A($),document.getElementById("actionModal").classList.remove("hidden")},title:"Approve",children:a.jsx(ps,{size:12})}),a.jsx("button",{className:"p-1 rounded-full bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>{A($),document.getElementById("actionModal").classList.remove("hidden")},title:"Reject",children:a.jsx(Hs,{size:12})})]})]})})]}),be===$._id&&a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"p-2 bg-gray-50",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-white p-2 rounded shadow-sm border",children:[a.jsx("h4",{className:"text-[#104774] font-semibold text-xs mb-1",children:"Request Details"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Reason:"})," ",$.reason||"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Applied On:"})," ",fa(new Date($.appliedAt),"dd MMM yyyy, hh:mm a")]}),$.processedBy&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Processed By:"})," ",$.processedBy?.email||"Admin"]}),$.processedAt&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Processed At:"})," ",fa(new Date($.processedAt),"dd MMM yyyy, hh:mm a")]}),$.remarks&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Remarks:"})," ",$.remarks]})]})]}),a.jsxs("div",{className:"bg-white p-2 rounded shadow-sm border",children:[a.jsx("h4",{className:"text-[#104774] font-semibold text-xs mb-1",children:"Balance Information"}),a.jsxs("div",{className:"space-y-1 text-xs",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Remaining at request:"})," ",$.balanceSnapshot?.remaining?.[$.leaveType]??"-"]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Current remaining:"})," ",$.currentRemaining?.[$.leaveType]??"-"]}),!De&&a.jsxs("p",{className:"text-red-600 font-medium flex items-center mt-1",children:[a.jsx(ms,{size:12,className:"mr-1"}),"Insufficient balance"]})]})]})]})})})]},$._id)})})]})})})}),ke>1&&a.jsx("div",{className:"p-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["Showing ",ye+1," to"," ",Math.min(ce,s.length)," of"," ",s.length," entries"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2",children:[a.jsxs("button",{onClick:()=>X($=>Math.max($-1,1)),disabled:Z===1,className:"px-3 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs hover:bg-gray-100 flex items-center gap-1 w-full sm:w-auto justify-center",children:[a.jsx(ChevronLeft,{size:14}),"Previous"]}),a.jsx("div",{className:"flex items-center gap-1 overflow-x-auto py-1",children:Array.from({length:Math.min(5,ke)},($,Ne)=>{let De;return ke<=5||Z<=3?De=Ne+1:Z>=ke-2?De=ke-4+Ne:De=Z-2+Ne,a.jsx("button",{onClick:()=>X(De),className:`min-w-[32px] h-8 rounded-lg border text-xs transition ${Z===De?"bg-[#104774] text-white border-[#104774]":"hover:bg-gray-100 border-gray-300"}`,children:De},De)})}),a.jsxs("button",{onClick:()=>X($=>Math.min($+1,ke)),disabled:Z===ke,className:"px-3 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-xs hover:bg-gray-100 flex items-center gap-1 w-full sm:w-auto justify-center",children:["Next",a.jsx(ChevronRight,{size:14})]})]})]})})]})]})]}),a.jsxs("div",{className:`w-full md:w-56 space-y-3 ${F?"block":"hidden"} md:block`,children:[a.jsxs("div",{className:"bg-white rounded p-2.5 shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-semibold",children:"Leave Policies"}),a.jsx("button",{className:"text-[#104774] hover:text-[#0d3a61]",onClick:()=>{C(null),document.getElementById("policyModal").classList.remove("hidden")},children:a.jsx(Bi,{size:14})})]}),l.length===0?a.jsx("p",{className:"text-gray-500 text-center py-2 text-xs",children:"No policies set yet"}):a.jsx("div",{className:"space-y-1.5 max-h-70 overflow-y-auto",children:l.map($=>{const Ne=$.leaves instanceof Map?Object.fromEntries($.leaves):$.leaves;return a.jsxs("div",{className:"border border-gray-200 rounded p-1.5 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("h4",{className:"font-medium text-[#104774] text-xs",children:[$.role.charAt(0).toUpperCase()+$.role.slice(1)," -"," ",$.year]}),a.jsx("button",{onClick:()=>Ge($),className:"text-gray-500 hover:text-[#104774]",children:a.jsx(Qm,{size:12})})]}),a.jsx("div",{className:"space-y-0.5 text-xs",children:Object.entries(Ne).map(([De,qe])=>a.jsxs("p",{className:"flex justify-between",children:[a.jsxs("span",{className:"capitalize",children:[De.replace(/_/g," "),":"]})," ",a.jsx("span",{className:"font-medium",children:qe})]},De))})]},$._id)})})]}),a.jsxs("div",{className:"bg-white rounded p-2.5 shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-semibold",children:"Leave Types"}),a.jsx("button",{className:"text-[#104774] hover:text-[#0d3a61]",onClick:()=>{T(null),N({name:"",isActive:!0}),document.getElementById("leaveTypeModal").classList.remove("hidden")},children:a.jsx(Bi,{size:14})})]}),u.length===0?a.jsx("p",{className:"text-gray-500 text-center py-2 text-xs",children:"No leave types set yet"}):a.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:u.map($=>a.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-gray-100 last:border-0",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:`text-xs ${$.isActive?"text-gray-800":"text-gray-400 line-through"}`,children:$.name.replace(/_/g," ").replace(/\b\w/g,Ne=>Ne.toUpperCase())}),!$.isActive&&a.jsx("span",{className:"ml-1 text-xs text-gray-400",children:"(Inactive)"})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{onClick:()=>he($),className:"text-gray-500 hover:text-[#104774] p-0.5",children:a.jsx(Qm,{size:10})}),a.jsx("button",{onClick:()=>W($._id),className:`p-0.5 text-xs ${$.isActive?"text-yellow-500 hover:text-yellow-700":"text-green-500 hover:text-green-700"}`,children:$.isActive?"Disable":"Enable"}),a.jsx("button",{onClick:()=>ve($._id),className:"text-gray-500 hover:text-red-600 p-0.5",children:a.jsx(Eo,{size:10})})]})]},$._id))})]})]}),a.jsx("div",{id:"policyModal",className:"fixed inset-0 backdrop-blur-sm  bg-opacity-40 flex items-center justify-center hidden z-50 p-2",children:a.jsxs("div",{className:"bg-white p-3 rounded w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2",children:j?"Edit Leave Policy":"Create Leave Policy"}),a.jsxs("form",{onSubmit:Ue,className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Role"}),a.jsxs("select",{value:x.role,onChange:$=>y({...x,role:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",children:[a.jsx("option",{value:"employee",children:"Employee"}),a.jsx("option",{value:"hr",children:"HR"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Year"}),a.jsx("input",{type:"number",min:"2000",max:"2100",value:x.year,onChange:$=>y({...x,year:parseInt($.target.value)||new Date().getFullYear()}),className:"w-full border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Leave Types"}),a.jsx("div",{className:"space-y-1.5",children:u.filter($=>$.isActive).map($=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium mb-0.5 capitalize",children:[$.name.replace(/_/g," ")," Leaves"]}),a.jsx("input",{type:"number",min:"0",value:x.leaves[$.name]||0,onChange:Ne=>y({...x,leaves:{...x.leaves,[$.name]:parseInt(Ne.target.value)||0}}),className:"w-full border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs"})]},$._id))})]}),a.jsxs("div",{className:"flex justify-end space-x-1 pt-2",children:[a.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-300 hover:bg-gray-400 transition-colors text-xs",onClick:()=>document.getElementById("policyModal").classList.add("hidden"),children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-2 py-1 rounded bg-[#104774] text-white hover:bg-[#0d3a61] transition-colors text-xs",children:j?"Update Policy":"Save Policy"})]})]})]})}),a.jsx("div",{id:"leaveTypeModal",className:"fixed inset-0 backdrop-blur-sm  bg-opacity-40 flex items-center justify-center hidden z-50 p-2",children:a.jsxs("div",{className:"bg-white p-3 rounded w-full max-w-md border border-gray-200 shadow-2xl",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2",children:S?"Edit Leave Type":"Add Leave Type"}),a.jsxs("form",{onSubmit:ft,className:"space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Leave Type Name"}),a.jsx("input",{type:"text",value:v.name,onChange:$=>N({...v,name:$.target.value}),className:"w-full border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",placeholder:"e.g., Work From Home",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:'Use underscores for spaces (e.g., "work_from_home")'})]}),a.jsxs("div",{className:"flex justify-end space-x-1 pt-1",children:[a.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-gray-300 hover:bg-gray-400 transition-colors text-xs",onClick:()=>{document.getElementById("leaveTypeModal").classList.add("hidden"),T(null)},children:"Cancel"}),a.jsxs("button",{type:"submit",className:"px-2 py-1 rounded bg-[#104774] text-white hover:bg-[#0d3a61] transition-colors text-xs",children:[S?"Update":"Add"," Leave Type"]})]})]})]})}),a.jsx("div",{id:"actionModal",className:"fixed inset-0 backdrop-blur-sm  bg-opacity-40 flex items-center justify-center hidden z-50 p-2",children:a.jsxs("div",{className:"bg-white p-3 rounded w-full max-w-md mx-2 border border-gray-200 shadow-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Process Leave Request"}),w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-2 p-2 bg-gray-50 rounded",children:[a.jsxs("p",{className:"text-xs break-words",children:[a.jsx("strong",{children:"Employee:"})," ",w.employee?.email]}),a.jsxs("p",{className:"text-xs",children:[a.jsx("strong",{children:"Type:"})," ",w.leaveType]}),a.jsxs("p",{className:"text-xs",children:[a.jsx("strong",{children:"Duration:"})," ",w.totalDays," days"]}),a.jsxs("p",{className:"text-xs break-words",children:[a.jsx("strong",{children:"Reason:"})," ",w.reason||"-"]}),w.currentRemaining&&a.jsxs("p",{className:`mt-1 text-xs break-words ${w.currentRemaining[w.leaveType]<w.totalDays?"text-red-600 font-medium":""}`,children:[a.jsx("strong",{children:"Remaining Balance:"})," ",w.currentRemaining[w.leaveType],"/",w.balanceSnapshot?.remaining[w.leaveType],w.currentRemaining[w.leaveType]<w.totalDays&&a.jsx("span",{className:"ml-0.5",children:"(Insufficient balance)"})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Remarks (Optional)"}),a.jsx("textarea",{value:R,onChange:$=>O($.target.value),className:"w-full border border-gray-300 rounded px-2 py-1.5 focus:outline-none focus:ring-1 focus:ring-[#104774] text-xs",rows:"3",placeholder:"Add remarks for this action..."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-1",children:[a.jsx("button",{className:"px-2 py-1 rounded bg-gray-300 hover:bg-gray-400 transition-colors text-xs order-2 sm:order-1",onClick:()=>{document.getElementById("actionModal").classList.add("hidden"),O("")},children:"Cancel"}),a.jsxs("div",{className:"flex space-x-1 order-1 sm:order-2",children:[a.jsx("button",{className:"px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 transition-colors text-xs flex-1",onClick:()=>te(w._id,"reject"),children:"Reject"}),a.jsx("button",{className:"px-2 py-1 rounded bg-green-600 text-white hover:bg-green-700 transition-colors text-xs flex-1",onClick:()=>te(w._id,"approve"),children:"Approve"})]})]})]})]})})]})},Iu=({isOpen:n,onClose:e,onSuccess:t,token:s,addNotification:r,basePath:l="/attendance"})=>{const[c,u]=_.useState(""),[h,m]=_.useState("Planned"),[p,x]=_.useState(""),[y,v]=_.useState(""),[N,w]=_.useState(!1),[A,j]=_.useState(!1),[C,S]=_.useState(!1),[T,R]=_.useState(null),[O,H]=_.useState(null);_.useEffect(()=>{n||(u(""),m("Planned"),x(""),v(""),w(!1),j(!1),R(null))},[n]),_.useEffect(()=>{n&&s&&V()},[n,s]);const V=async()=>{try{const z=await xe.get("/profile/my-profile",{headers:{Authorization:`Bearer ${s}`}});z.data?.shiftTiming&&(H(z.data.shiftTiming),L(z.data.shiftTiming))}catch(z){console.error("Error fetching shift timing:",z),r("Error fetching shift information","error")}},L=z=>{if(!z?.start)return;const G=new Date,Y=G.getHours()*60+G.getMinutes(),[de,be]=z.start.split(" "),[I,Z]=de.split(":").map(Number);let X=I*60+Z;be==="PM"&&I!==12&&(X+=720),be==="AM"&&I===12&&(X-=720),Y<X?(w(!0),R(`You are logging in before your shift start time (${z.start}). Please provide a reason for early login.`)):Y>X+60&&(j(!0),R(`You are logging in after 1 hour from your shift start time (${z.start}). Please provide a reason for late login.`))},K=async z=>{if(z.preventDefault(),!c.trim()){R("Task description is required");return}if(N&&!p.trim()){R("Early login reason is required");return}if(A&&!y.trim()){R("Late login reason is required");return}S(!0),R(null);try{const G={taskDescription:c,workProgress:h,...N&&{earlyLoginReason:p},...A&&{lateLoginReason:y}},Y=await xe.post(`${l}/login`,G,{headers:{Authorization:`Bearer ${s}`}});Y.data?.message&&r(Y.data.message,"success");const de=Y.data?.attendance||Y.data;de&&t(de),e()}catch(G){console.error("Error submitting attendance:",G);const Y=G?.response?.data?.message||"Error submitting attendance";R(Y),r(Y,"error")}finally{S(!1)}};return n?a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Mark Attendance"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),O&&a.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:a.jsxs("p",{className:"text-sm text-blue-800",children:["Your shift timing: ",a.jsxs("strong",{children:[O.start," - ",O.end]})]})}),T&&a.jsx("div",{className:`mb-4 p-3 rounded text-sm ${T.includes("Error")||T.includes("required")?"bg-red-50 text-red-800 border border-red-100":"bg-blue-50 text-blue-800 border border-blue-100"}`,children:T}),a.jsxs("form",{onSubmit:K,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Description *"}),a.jsx("textarea",{value:c,onChange:z=>u(z.target.value),rows:4,required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what you'll be working on today..."})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Progress"}),a.jsxs("select",{value:h,onChange:z=>m(z.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Completed",children:"Completed"})]})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:N,onChange:z=>{w(z.target.checked),z.target.checked&&j(!1)},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Logging in early"})]})}),N&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for early login *"}),a.jsx("textarea",{value:p,onChange:z=>x(z.target.value),rows:3,required:N,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please provide reason for logging in early..."})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:A,onChange:z=>{j(z.target.checked),z.target.checked&&w(!1)},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Logging in late"})]})}),A&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for late login *"}),a.jsx("textarea",{value:y,onChange:z=>v(z.target.value),rows:3,required:A,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please provide reason for logging in late..."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:C,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"px-4 py-2 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#104774"},onMouseEnter:z=>z.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:z=>z.currentTarget.style.backgroundColor="#104774",children:C?"Submitting...":"Submit Attendance"})]})]})]})}):null},Bu=({isOpen:n,onClose:e,onSuccess:t,attendanceData:s,token:r,addNotification:l,basePath:c="/attendance"})=>{const[u,h]=_.useState(""),[m,p]=_.useState(""),[x,y]=_.useState(!1),[v,N]=_.useState(!1),[w,A]=_.useState(null),j=async C=>{if(C.preventDefault(),!u.trim()){A("Logout description is required");return}if(x&&!m.trim()){A("Early logout reason is required");return}N(!0),A(null);try{if(!s||!s._id)throw new Error("Attendance record id is missing.");const S=await xe.post(`${c}/logout/${s._id}`,{logoutDescription:u,earlyLogoutReason:x?m:void 0},{headers:{Authorization:`Bearer ${r}`}});S.data?.message?(l(S.data.message,"success"),A(S.data.message)):l("Logout recorded successfully","success");const T=S.data?.attendance||S.data;T&&T._id?t(T):t({...s,checkOut:new Date().toISOString(),logoutDescription:u,earlyLogoutReason:x?m:void 0}),h(""),p(""),y(!1)}catch(S){console.error("Error recording logout:",S);const T=S?.response?.data?.message||S.message||"Error recording logout";A(T),l(T,"error")}finally{N(!1)}};return n?a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Log Out"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w&&a.jsx("div",{className:`mb-4 p-3 rounded text-sm ${w.includes("Error")||w.includes("required")?"bg-red-50 text-red-800 border border-red-100":"bg-green-50 text-green-800 border border-green-100"}`,children:w}),a.jsxs("form",{onSubmit:j,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logout Description *"}),a.jsx("textarea",{value:u,onChange:C=>h(C.target.value),rows:4,required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what you completed today..."})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:x,onChange:C=>y(C.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Logging out early"})]})}),x&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for early logout *"}),a.jsx("textarea",{value:m,onChange:C=>p(C.target.value),rows:3,required:x,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please provide reason for early logout..."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:v,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#104774"},onMouseEnter:C=>C.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:C=>C.currentTarget.style.backgroundColor="#104774",children:v?"Logging Out...":"Confirm Logout"})]})]})]})}):null},RP=({isOpen:n,onClose:e,onSuccess:t,token:s,addNotification:r,employeeId:l})=>{const[c,u]=_.useState(""),[h,m]=_.useState(""),[p,x]=_.useState(""),[y,v]=_.useState(""),[N,w]=_.useState(!1),[A,j]=_.useState(null),C=async S=>{if(S.preventDefault(),!c||!y.trim()){j("Date and reason are required");return}w(!0),j(null);try{const T=await xe.post("/attendance/regularization",{date:c,checkIn:h||void 0,checkOut:p||void 0,reason:y},{headers:{Authorization:`Bearer ${s}`}});T.data?.message?(r(T.data.message,"success"),j(T.data.message)):r("Regularization request submitted","success"),t(),u(""),m(""),x(""),v("")}catch(T){console.error("Error submitting regularization:",T);const R=T?.response?.data?.message||"Error submitting regularization request";j(R),r(R,"error")}finally{w(!1)}};return n?a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Request Regularization"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A&&a.jsx("div",{className:`mb-4 p-3 rounded text-sm ${A.includes("Error")||A.includes("required")?"bg-red-50 text-red-800 border border-red-100":"bg-green-50 text-green-800 border border-green-100"}`,children:A}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:c,onChange:S=>u(S.target.value),required:!0,max:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in Time"}),a.jsx("input",{type:"time",value:h,onChange:S=>m(S.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out Time"}),a.jsx("input",{type:"time",value:p,onChange:S=>x(S.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Regularization *"}),a.jsx("textarea",{value:y,onChange:S=>v(S.target.value),rows:4,required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Explain why you need regularization for this date..."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:N,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:N,className:"px-4 py-2 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#104774"},onMouseEnter:S=>S.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:S=>S.currentTarget.style.backgroundColor="#104774",children:N?"Submitting...":"Submit Request"})]})]})]})}):null},Ji=({notifications:n})=>{const e=s=>{switch(s){case"success":return"bg-green-50 text-green-800 border border-green-100";case"error":return"bg-red-50 text-red-800 border border-red-100";case"warning":return"bg-yellow-50 text-yellow-800 border border-yellow-100";default:return"bg-white text-gray-800 border border-gray-200"}},t=s=>{switch(s){case"success":return a.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return a.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return a.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});default:return a.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}};return a.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:n.map(s=>a.jsxs("div",{className:`max-w-sm w-full px-4 py-3 rounded-lg shadow-lg flex items-start gap-3 transform transition-all duration-300 animate-in slide-in-from-right-10 ${e(s.type)}`,children:[a.jsx("div",{className:"flex-shrink-0",children:t(s.type)}),a.jsx("div",{className:"flex-1",children:a.jsx("p",{className:"text-sm font-medium",children:s.message})})]},s.id))})},kP="#0d3a61",MP=()=>{const{token:n,user:e}=os(),[t,s]=_.useState(null),[r,l]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[p,x]=_.useState([]),[y,v]=_.useState([]),[N,w]=_.useState(!1);_.useEffect(()=>{n&&(j(),C())},[n]);const A=(G,Y="info",de=4e3)=>{const be=Date.now()+Math.random();v(I=>[...I,{id:be,message:G,type:Y}]),setTimeout(()=>v(I=>I.filter(Z=>Z.id!==be)),de)},j=async()=>{try{const G=await xe.get("/attendance/today",{headers:{Authorization:`Bearer ${n}`}});s(G.data||null)}catch(G){console.error("Error fetching today attendance:",G),s(null),A(G?.response?.data?.message||"Could not fetch today attendance","error")}},C=async()=>{try{const G=await xe.get("/attendance/history",{headers:{Authorization:`Bearer ${n}`}});x(G.data||[])}catch(G){console.error("Error fetching attendance history:",G),x([]),A(G?.response?.data?.message||"Could not fetch attendance history","error")}},S=async G=>{try{return(await xe.get(`/attendance/check-holiday/${G}`,{headers:{Authorization:`Bearer ${n}`}})).data.isHoliday}catch(Y){return console.error("Error checking holiday:",Y),!1}},T=G=>{s(G),l(!1),A("Attendance submitted successfully","success"),j(),C()},R=G=>{s(G),u(!1),A("Logout recorded successfully","success"),j(),C()},O=()=>{m(!1),A("Regularization request submitted","success"),C()},H=G=>{if(!G)return"-";try{return new Date(G).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},V=G=>{if(!G)return"-";try{return new Date(G).toLocaleDateString()}catch{return"-"}},L=G=>{const Y={pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Y[G]||"bg-gray-100 text-gray-800"}`,children:G})},K=!t,z=t&&t.status==="accepted"&&!t.checkOut;return a.jsxs("div",{className:"max-h-screen p-3 text-sm",children:[a.jsx("style",{children:`
        .primary-btn:hover { background: ${kP} !important }
        @media (max-width: 768px) {
          table { font-size: 11px; }
        }
      `}),a.jsx(Ji,{notifications:y}),a.jsxs("header",{className:"p-2 mb-3",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"My Attendance"}),a.jsx("p",{className:"text-xs text-gray-600",children:"Manage your daily attendance and view history"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow border border-slate-200 w-full max-w-[300px] mb-3",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("h3",{className:"font-semibold text-slate-800 text-sm",children:["Today's Attendance",a.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-1",children:["(",new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),")"]})]})}),a.jsx("div",{className:"mb-2",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-500",children:"Status:"}),a.jsx("span",{className:`font-medium ${t?.status==="accepted"?"text-green-500":t?.status==="pending"?"text-yellow-500":t?.status==="rejected"?"text-red-500":"text-gray-400"}`,children:t?.status||"Not Logged In"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-500",children:"Login:"}),a.jsx("span",{className:"font-medium text-slate-900",children:t?.checkIn?H(t.checkIn):"-"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-500",children:"Logout:"}),a.jsx("span",{className:"font-medium text-slate-900",children:t?.checkOut?H(t.checkOut):"Pending"})]}),t?.taskDescription&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-500",children:"Task:"}),a.jsx("span",{className:"font-medium text-slate-900 truncate max-w-[80px]",title:t.taskDescription,children:t.taskDescription})]}),t?.logoutDescription&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-slate-500",children:"Note:"}),a.jsx("span",{className:"font-medium text-slate-900 truncate max-w-[60px]",title:t.logoutDescription,children:t.logoutDescription})]}),t?.earlyLogoutReason&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-red-500",children:"Early:"}),a.jsx("span",{className:"font-medium text-red-700 truncate max-w-[60px]",title:t.earlyLogoutReason,children:t.earlyLogoutReason})]})]})}),a.jsxs("div",{className:"flex gap-2",children:[K&&a.jsx("button",{onClick:async()=>{const G=new Date().toISOString().split("T")[0];if(await S(G)){A("Today is a holiday. Cannot mark attendance.","warning");return}l(!0)},className:"flex-1 bg-[#104774] hover:bg-[#0d3a61] text-white py-1.5 text-xs rounded font-medium transition-all",children:"Mark Attendance"}),z&&a.jsx("button",{onClick:()=>u(!0),className:"flex-1 bg-[#104774] hover:bg-[#0d3a61] text-white py-1.5 text-xs rounded font-medium transition-all",children:"Log Out"})]})]}),a.jsxs("section",{className:"bg-white shadow rounded p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Attendance History"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Last 30 days"}),a.jsx("button",{onClick:C,className:"p-1 text-gray-500 hover:text-gray-700",title:"Refresh",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),a.jsx("div",{className:"hidden sm:block overflow-x-auto rounded border border-gray-200",children:a.jsx("div",{className:"max-h-[350px] overflow-y-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[a.jsx("thead",{className:"bg-[#104774] text-white sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Date"}),a.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Login"}),a.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Logout"}),a.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Status"}),a.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Work Progress"}),a.jsx("th",{className:"px-2 py-1.5 text-left font-medium",children:"Task"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:p.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-2 py-4 text-center text-gray-500 text-xs",children:"No attendance records found"})}):p.map(G=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-gray-700",children:V(G.date)}),a.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-gray-700",children:G.checkIn?H(G.checkIn):"-"}),a.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-gray-700",children:G.checkOut?H(G.checkOut):"-"}),a.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap",children:L(G.status)}),a.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-gray-700",children:G.workProgress||"-"}),a.jsxs("td",{className:"px-2 py-1.5 text-gray-700 relative group",children:[a.jsx("div",{className:"max-w-[100px] truncate cursor-pointer",children:G.taskDescription||"-"}),G.taskDescription&&a.jsx("div",{className:"absolute left-1/2 top-full mt-1 hidden group-hover:flex -translate-x-1/2 z-20",children:a.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded px-2 py-1 max-w-[150px] whitespace-normal relative",children:[G.taskDescription,a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-800 rotate-45"})]})})]})]},G._id))})]})})}),a.jsx("div",{className:"sm:hidden space-y-2",children:p.length===0?a.jsx("div",{className:"text-center text-gray-500 p-4 text-xs",children:"No attendance records found"}):p.map(G=>a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("div",{className:"font-medium text-gray-800 text-xs",children:V(G.date)}),a.jsx("div",{className:"flex items-center gap-1",children:L(G.status)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Login"}),a.jsx("div",{className:"text-xs font-medium text-gray-700",children:G.checkIn?H(G.checkIn):"-"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Logout"}),a.jsx("div",{className:"text-xs font-medium text-gray-700",children:G.checkOut?H(G.checkOut):"-"})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Work Progress"}),a.jsx("div",{className:"text-xs font-medium text-gray-700",children:G.workProgress||"-"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Task"}),a.jsx("div",{className:"text-xs font-medium text-gray-700 break-words",children:G.taskDescription||"-"})]})]},G._id))})]}),a.jsx(Iu,{isOpen:r,onClose:()=>l(!1),onSuccess:T,token:n,addNotification:A}),a.jsx(Bu,{isOpen:c,onClose:()=>u(!1),onSuccess:R,attendanceData:t,token:n,addNotification:A}),a.jsx(RP,{isOpen:h,onClose:()=>m(!1),onSuccess:O,token:n,addNotification:A,employeeId:e?._id})]})},OA=({isOpen:n,onClose:e,onReject:t,remarks:s,setRemarks:r})=>n?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Reject Attendance"}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Rejection *"}),a.jsx("textarea",{value:s,onChange:l=>r(l.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",placeholder:"Please provide specific reason for rejecting this attendance...",required:!0})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>t(s),disabled:!s.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Reject"})]})]})}):null,LP=({token:n,addNotification:e,user:t})=>{const[s,r]=_.useState(null),[l,c]=_.useState(!1),[u,h]=_.useState(!1),[m,p]=_.useState([]),[x,y]=_.useState(!1);_.useEffect(()=>{v()},[n]);const v=async()=>{try{y(!0);const[T,R]=await Promise.all([xe.get("/attendance/hr/today",{headers:{Authorization:`Bearer ${n}`}}),xe.get("/attendance/hr/history",{headers:{Authorization:`Bearer ${n}`}})]);r(T.data),p(R.data||[])}catch(T){console.error("Error fetching HR attendance data:",T),e("Error loading attendance data","error")}finally{y(!1)}},N=T=>{r(T),c(!1),e("Attendance submitted successfully","success"),v()},w=T=>{r(T),h(!1),e("Logout recorded successfully","success"),v()},A=T=>{if(!T)return"-";try{return new Date(T).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},j=T=>{if(!T)return"-";try{return new Date(T).toLocaleDateString()}catch{return"-"}},C=!s,S=s?.status==="accepted"&&!s.checkOut;return a.jsxs("div",{children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg shadow-sm h-[300px] overflow-y-auto  overflow-x-hidden p-3 sm:p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"font-semibold",children:"My Attendance"}),a.jsx("button",{onClick:v,className:"p-1.5 text-gray-500 hover:text-gray-700",title:"Refresh",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsx("h3",{className:"text-base font-semibold mb-2",children:"Today's Attendance"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mb-3",children:[a.jsxs("div",{className:"p-2 bg-white rounded border flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Status"}),a.jsx("span",{className:`text-sm font-semibold mt-1 capitalize ${s?.status==="accepted"?"text-green-600":s?.status==="pending"?"text-yellow-600":"text-red-600"}`,children:s?.status||"Not Logged In"})]}),a.jsxs("div",{className:"p-2 bg-white rounded border flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Login Time"}),a.jsx("span",{className:"text-sm font-semibold mt-1",children:s?.checkIn?A(s.checkIn):"-"})]}),a.jsxs("div",{className:"p-2 bg-white rounded border flex flex-col",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Logout Time"}),a.jsx("span",{className:"text-sm font-semibold mt-1",children:s?.checkOut?A(s.checkOut):"Pending"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[C&&a.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 bg-[#104774] text-white rounded text-xs hover:bg-[#0f3453]",children:"Mark Attendance"}),S&&a.jsx("button",{onClick:()=>h(!0),className:"px-3 py-1.5 bg-[#104774] text-white rounded text-xs hover:bg-[#104774]",children:"Log Out"})]})]}),a.jsxs("div",{className:"",children:[a.jsx("div",{className:"hidden sm:block ",children:a.jsxs("div",{className:"",children:[" ",a.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",children:[a.jsx("thead",{className:"bg-[#104774]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Login"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Logout"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Task"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((T,R)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:j(T.date)}),a.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:T.checkIn?A(T.checkIn):"-"}),a.jsx("td",{className:"px-2 py-2 text-gray-700 whitespace-nowrap",children:T.checkOut?A(T.checkOut):"-"}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${T.status==="accepted"?"bg-green-100 text-green-800":T.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.status})}),a.jsx("td",{className:"px-2 py-2 max-w-[150px]",children:a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"truncate cursor-help",title:T.taskDescription,children:T.taskDescription||"-"}),T.taskDescription&&a.jsxs("div",{className:"absolute left-0 mt-1 w-48 bg-gray-900 text-white text-xs rounded p-2 shadow-lg z-10 invisible opacity-0 group-hover:visible group-hover:opacity-100 break-words",children:[T.taskDescription,a.jsx("div",{className:"absolute top-0 left-3 -mt-1 w-2 h-2 bg-gray-900 rotate-45"})]})]})})]},T._id))})]})]})}),a.jsx("div",{className:"sm:hidden space-y-3",children:m.map((T,R)=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white shadow-sm",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-900 text-sm",children:j(T.date)}),a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${T.status==="accepted"?"bg-green-100 text-green-800":T.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:T.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700 block",children:"Login Time"}),a.jsx("span",{className:"text-gray-600",children:T.checkIn?A(T.checkIn):"-"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700 block",children:"Logout Time"}),a.jsx("span",{className:"text-gray-600",children:T.checkOut?A(T.checkOut):"-"})]})]}),a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Task Description"}),T.taskDescription?a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"text-gray-600 line-clamp-2 bg-gray-50 p-2 rounded border",children:T.taskDescription}),T.taskDescription.length>100&&a.jsx("button",{onClick:O=>{O.stopPropagation(),alert(T.taskDescription)},className:"text-blue-600 text-xs mt-1 hover:text-blue-800",children:"View Full Task"})]}):a.jsx("span",{className:"text-gray-400",children:"-"})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 pt-1 border-t",children:[a.jsxs("span",{children:["Record #",R+1]}),a.jsx("span",{children:T.checkIn&&T.checkOut?"Completed":"In Progress"})]})]})},T._id))})]})]}),a.jsx(Iu,{isOpen:l,onClose:()=>c(!1),onSuccess:N,token:n,addNotification:e,basePath:"/attendance/hr"}),a.jsx(Bu,{isOpen:u,onClose:()=>h(!1),onSuccess:w,attendanceData:s,token:n,addNotification:e,basePath:"/attendance/hr"})]})},gw="#104774",OP="#0d3a61",PP=()=>{const{token:n,user:e}=os(),[t,s]=_.useState([]),[r,l]=_.useState([]),[c,u]=_.useState(null),[h,m]=_.useState(!1),[p,x]=_.useState(""),[y,v]=_.useState("pending"),[N,w]=_.useState({totalEmployees:0,present:0,absent:0,pending:0}),[A,j]=_.useState([]),[C,S]=_.useState(!1),T=new Date().toISOString().split("T")[0],[R,O]=_.useState({employee:"",date:T,status:""});_.useEffect(()=>{n&&(V(),L(),K())},[n]);const H=(M,F="info",J=3500)=>{const me=Date.now()+Math.random();j(ce=>[...ce,{id:me,message:M,type:F}]),setTimeout(()=>j(ce=>ce.filter(ye=>ye.id!==me)),J)},V=async()=>{try{S(!0);const M=await xe.get("/attendance/pending",{headers:{Authorization:`Bearer ${n}`}});s(M.data||[])}catch(M){console.error("Error fetching pending attendances:",M),H(M.response?.data?.message||"Could not load pending requests","error")}finally{S(!1)}},L=async()=>{try{S(!0);const M=await xe.get("/attendance/all",{headers:{Authorization:`Bearer ${n}`}});l(M.data||[])}catch(M){console.error("Error fetching all attendances:",M),H(M.response?.data?.message||"Could not load records","error")}finally{S(!1)}},K=async()=>{try{const M=await xe.get("/attendance/stats",{headers:{Authorization:`Bearer ${n}`}});w(M.data||{})}catch(M){console.error("Error fetching stats:",M),H("Error loading statistics","error")}},z=M=>{!M||!M._id||(l(F=>{const J=F.findIndex(ce=>ce._id===M._id);if(J===-1)return[M,...F];const me=[...F];return me[J]={...me[J],...M},me}),s(F=>F.filter(J=>J._id!==M._id)))},G=async M=>{try{const F=await xe.patch(`/attendance/${M}/approve`,{},{headers:{Authorization:`Bearer ${n}`}}),J=F.data?.attendance||F.data;J&&J._id?z(J):(s(me=>me.filter(ce=>ce._id!==M)),L()),F.data?.stats?w(F.data.stats):K(),H(F.data?.message||"Attendance approved","success")}catch(F){console.error("Error approving attendance:",F),H(F.response?.data?.message||"Error approving attendance","error")}},Y=async M=>{if(c)try{const F=await xe.patch(`/attendance/${c}/reject`,{remarks:M},{headers:{Authorization:`Bearer ${n}`}}),J=F.data?.attendance||F.data;J&&J._id?z(J):(s(me=>me.filter(ce=>ce._id!==c)),L()),F.data?.stats?w(F.data.stats):K(),H(F.data?.message||"Attendance rejected","success"),m(!1),x(""),u(null)}catch(F){console.error("Error rejecting attendance:",F),H(F.response?.data?.message||"Error rejecting attendance","error")}},de=M=>{u(M),m(!0)},be=M=>{const{name:F,value:J}=M.target;O(me=>({...me,[F]:J}))},I=()=>{O({employee:"",date:"",status:""})},Z=M=>{if(!M)return"-";try{return new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},X=M=>{if(!M)return"-";try{return new Date(M).toLocaleDateString()}catch{return"-"}},P=r.filter(M=>{const F=R.employee?`${M.employee?.profileRef?.firstName} ${M.employee?.profileRef?.lastName}`.toLowerCase().includes(R.employee.toLowerCase())||M.employee?.email?.toLowerCase().includes(R.employee.toLowerCase()):!0,J=R.date?X(M.date)===X(R.date):!0,me=R.status?M.status===R.status:!0;return F&&J&&me}),D=t.filter(M=>{const F=R.employee?`${M.employee?.profileRef?.firstName} ${M.employee?.profileRef?.lastName}`.toLowerCase().includes(R.employee.toLowerCase())||M.employee?.email?.toLowerCase().includes(R.employee.toLowerCase()):!0,J=R.date?X(M.date)===X(R.date):!0;return F&&J});return a.jsxs("div",{className:"max-h-80vh bg-gray-50 ",children:[a.jsx("style",{children:`
      .primary-btn:hover { background: ${OP} !important }
      .primary-border-active { border-bottom-color: ${gw} !important; color: ${gw} !important }
    `}),a.jsx(Ji,{notifications:A}),a.jsxs("header",{className:"mb-3 sm:mb-4",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"Attendance Management"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Manage employee attendance approvals and records"})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 mb-4 sm:mb-5",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-100 via-blue-100 to-blue-200 rounded-2xl p-3 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs text-blue-700 font-medium mb-1",children:"Total Employees"}),a.jsx("p",{className:"text-base sm:text-lg font-bold text-blue-900",children:N.totalEmployees??0})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-100 via-green-100 to-green-200 rounded-2xl p-3 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs text-green-700 font-medium mb-1",children:"Present Today"}),a.jsx("p",{className:"text-base sm:text-lg font-bold text-green-900",children:N.present??0})]}),a.jsxs("div",{className:"bg-gradient-to-r from-red-100 via-red-100 to-red-200 rounded-2xl p-3 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs text-red-700 font-medium mb-1",children:"Absent Today"}),a.jsx("p",{className:"text-base sm:text-lg font-bold text-red-900",children:Math.max(0,N?.absent??0)})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 via-yellow-100 to-yellow-200 rounded-2xl p-3 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs text-yellow-700 font-medium mb-1",children:"Pending Approval"}),a.jsx("p",{className:"text-base sm:text-lg font-bold text-yellow-900",children:N.pending??0})]})]}),a.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex overflow-x-auto scrollbar-hide",children:[a.jsxs("button",{onClick:()=>v("pending"),className:`flex-shrink-0 py-2 px-3 sm:py-3 sm:px-4 text-center border-b-2 font-medium text-xs ${y==="pending"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Pending Approvals",t.length>0&&a.jsx("span",{className:"ml-1 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:t.length})]}),a.jsx("button",{onClick:()=>v("all"),className:`flex-shrink-0 py-2 px-3 sm:py-3 sm:px-4 text-center border-b-2 font-medium text-xs ${y==="all"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"All Records"}),a.jsx("button",{onClick:()=>v("hr"),className:`flex-shrink-0 py-2 px-3 sm:py-3 sm:px-4 text-center border-b-2 font-medium text-xs ${y==="hr"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"My Attendance"})]})}),a.jsxs("div",{className:"p-3 sm:p-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 mb-3 sm:mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search Employee"}),a.jsx("input",{type:"text",name:"employee",value:R.employee,onChange:be,placeholder:"Name or email",className:"w-full p-2 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",name:"date",value:R.date,onChange:be,className:"w-full p-2 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),y==="all"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:R.status,onChange:be,className:"w-full p-2 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:I,className:"w-full px-3 py-2 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 border border-gray-300",children:"Clear Filters"})})]}),y==="pending"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-3",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-800",children:"Pending Approvals"}),a.jsx("button",{onClick:V,className:"p-1.5 text-gray-500 hover:text-gray-700 self-end sm:self-auto",title:"Refresh",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),C?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading pending requests..."})]}):D.length===0?a.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[a.jsx("svg",{className:"w-8 h-8 text-gray-300 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-xs text-gray-500",children:"No pending approvals"})]}):a.jsxs("div",{children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsx("div",{className:"min-w-[800px]",children:a.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",children:[a.jsx("thead",{className:"bg-[#104774]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Login Time"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Task"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Work Progress"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(M=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-2 py-2 whitespace-nowrap",children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[M.employee?.profileRef?.firstName," ",M.employee?.profileRef?.lastName]}),a.jsx("div",{className:"text-gray-500 truncate max-w-[100px]",children:M.employee?.email})]}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-700",children:X(M.date)}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-700",children:M.checkIn?Z(M.checkIn):"-"}),a.jsx("td",{className:"px-2 py-2 max-w-[120px]",children:a.jsxs("div",{className:"space-y-1",children:[M.taskDescription&&a.jsx("div",{className:"truncate",title:M.taskDescription,children:M.taskDescription}),M.earlyLoginReason&&a.jsxs("div",{className:"text-orange-600 truncate text-xs",title:M.earlyLoginReason,children:["Early: ",M.earlyLoginReason]}),M.lateLoginReason&&a.jsxs("div",{className:"text-red-600 truncate text-xs",title:M.lateLoginReason,children:["Late: ",M.lateLoginReason]})]})}),a.jsx("td",{className:"px-2 py-2 text-gray-700",children:M.workProgress||"-"}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>G(M._id),className:"px-2 py-1 rounded text-white bg-blue-600 hover:bg-blue-700 text-xs",children:"Approve"}),a.jsx("button",{onClick:()=>de(M._id),className:"px-2 py-1 rounded text-white bg-red-600 hover:bg-red-700 text-xs",children:"Reject"})]})})]},M._id))})]})})}),a.jsx("div",{className:"sm:hidden space-y-3",children:D.map(M=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white shadow-sm",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900",children:[M.employee?.profileRef?.firstName," ",M.employee?.profileRef?.lastName]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:M.employee?.email})]}),a.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:X(M.date)})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[a.jsx("span",{className:"font-medium mr-1",children:"Login:"}),M.checkIn?Z(M.checkIn):"-"]}),M.taskDescription&&a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Task:"}),a.jsx("p",{className:"text-gray-600 mt-1 line-clamp-2",children:M.taskDescription})]}),M.workProgress&&a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Progress:"}),a.jsx("p",{className:"text-gray-600",children:M.workProgress})]}),a.jsxs("div",{className:"space-y-1",children:[M.earlyLoginReason&&a.jsxs("div",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded",children:[a.jsx("span",{className:"font-medium",children:"Early Login:"})," ",M.earlyLoginReason]}),M.lateLoginReason&&a.jsxs("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:[a.jsx("span",{className:"font-medium",children:"Late Login:"})," ",M.lateLoginReason]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{onClick:()=>G(M._id),className:"flex-1 px-3 py-2 rounded text-white bg-blue-600 hover:bg-blue-700 text-xs font-medium",children:"Approve"}),a.jsx("button",{onClick:()=>de(M._id),className:"flex-1 px-3 py-2 rounded text-white bg-red-600 hover:bg-red-700 text-xs font-medium",children:"Reject"})]})]})},M._id))})]})]}),y==="all"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-3",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-800",children:"All Attendance Records"}),a.jsxs("div",{className:"flex items-center gap-2 self-end sm:self-auto",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:[P.length," of ",r.length," ","records"]}),a.jsx("button",{onClick:L,className:"p-1.5 text-gray-500 hover:text-gray-700",title:"Refresh",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),C?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading records..."})]}):P.length===0?a.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[a.jsx("svg",{className:"w-8 h-8 text-gray-300 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-xs text-gray-500",children:"No records found"})]}):a.jsxs("div",{children:[a.jsx("div",{className:"hidden sm:block overflow-x-auto",children:a.jsx("div",{className:"max-h-[200px] overflow-y-auto border border-gray-200 rounded-lg",children:a.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",children:[a.jsx("thead",{className:"bg-[#104774] sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Date"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Login"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Logout"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Work Progress"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Task"}),a.jsx("th",{className:"px-2 py-2 text-left font-medium text-white uppercase tracking-wider",children:"Logout Note"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(M=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-2 py-2 whitespace-nowrap",children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[M.employee?.profileRef?.firstName," ",M.employee?.profileRef?.lastName]}),a.jsx("div",{className:"text-gray-500 truncate max-w-[100px]",children:M.employee?.email})]}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-700",children:X(M.date)}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-700",children:Z(M.checkIn)}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-700",children:Z(M.checkOut)||"-"}),a.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${M.status==="accepted"?"bg-green-100 text-green-800":M.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:M.status})}),a.jsx("td",{className:"px-2 py-2 text-gray-700",children:M.workProgress||"-"}),a.jsx("td",{className:"px-2 py-2 max-w-[120px]",children:a.jsxs("div",{className:"space-y-1",children:[M.taskDescription&&a.jsx("div",{className:"truncate",title:M.taskDescription,children:M.taskDescription}),M.earlyLoginReason&&a.jsxs("div",{className:"text-orange-600 truncate text-xs",title:M.earlyLoginReason,children:["Early: ",M.earlyLoginReason]}),M.lateLoginReason&&a.jsxs("div",{className:"text-red-600 truncate text-xs",title:M.lateLoginReason,children:["Late: ",M.lateLoginReason]})]})}),a.jsx("td",{className:"px-2 py-2 max-w-[120px]",children:M.logoutDescription?a.jsx("div",{className:"truncate",title:M.logoutDescription,children:M.logoutDescription}):"-"})]},M._id))})]})})}),a.jsx("div",{className:"sm:hidden space-y-3",children:P.map(M=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-white shadow-sm",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900",children:[M.employee?.profileRef?.firstName," ",M.employee?.profileRef?.lastName]}),a.jsx("p",{className:"text-xs text-gray-500",children:M.employee?.email})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${M.status==="accepted"?"bg-green-100 text-green-800":M.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:M.status})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Date:"}),a.jsx("p",{className:"text-gray-600",children:X(M.date)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Login:"}),a.jsx("p",{className:"text-gray-600",children:Z(M.checkIn)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Logout:"}),a.jsx("p",{className:"text-gray-600",children:Z(M.checkOut)||"-"})]})]}),M.workProgress&&a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Progress:"}),a.jsx("p",{className:"text-gray-600",children:M.workProgress})]}),M.taskDescription&&a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Task:"}),a.jsx("p",{className:"text-gray-600 mt-1 line-clamp-2",children:M.taskDescription})]}),a.jsxs("div",{className:"space-y-1",children:[M.earlyLoginReason&&a.jsxs("div",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded",children:[a.jsx("span",{className:"font-medium",children:"Early Login:"})," ",M.earlyLoginReason]}),M.lateLoginReason&&a.jsxs("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:[a.jsx("span",{className:"font-medium",children:"Late Login:"})," ",M.lateLoginReason]})]}),M.logoutDescription&&a.jsxs("div",{className:"text-xs",children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Logout Note:"}),a.jsx("p",{className:"text-gray-600 mt-1 line-clamp-2",children:M.logoutDescription})]})]})},M._id))})]})]}),y==="hr"&&a.jsx(LP,{token:n,addNotification:H,user:e})]})]}),a.jsx(OA,{isOpen:h,onClose:()=>{m(!1),x(""),u(null)},onReject:Y,remarks:p,setRemarks:x})]})},IP=({token:n,addNotification:e})=>{const[t,s]=_.useState([]),[r,l]=_.useState(!1),[c,u]=_.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),department:""}),[h,m]=_.useState([]);_.useEffect(()=>{p(),x()},[c]);const p=async()=>{try{const w=await xe.get("/attendance/departments",{headers:{Authorization:`Bearer ${n}`}});m(w.data||[])}catch(w){console.error("Error fetching departments:",w),m(["HR","IT","Finance","Operations","Sales","Marketing"])}},x=async()=>{l(!0);try{const w=new URLSearchParams;c.month&&w.append("month",c.month),c.year&&w.append("year",c.year),c.department&&w.append("department",c.department);const A=await xe.get(`/attendance/reports/monthly?${w}`,{headers:{Authorization:`Bearer ${n}`}});s(A.data||[])}catch(w){console.error("Error generating reports:",w),e(w.response?.data?.message||"Error generating reports","error"),s([])}finally{l(!1)}},y=w=>{const{name:A,value:j}=w.target;u(C=>({...C,[A]:j}))},v=new Date().getFullYear(),N=Array.from({length:5},(w,A)=>v-A);return a.jsxs("div",{className:"",children:[a.jsx("div",{className:"flex flex-col mb-4 md:mb-6 gap-3",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg sm:text-xl  font-bold text-gray-800",children:"Monthly Attendance Reports"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Track and analyze employee attendance patterns"})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-3 md:p-4 mb-4 md:mb-6",children:[a.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-800 mb-3",children:"Filter Reports"}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:a.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-4 md:gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Month"}),a.jsxs("select",{name:"month",value:c.month,onChange:y,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Months"}),Array.from({length:12},(w,A)=>a.jsx("option",{value:A+1,children:new Date(2023,A).toLocaleString("default",{month:"long"})},A+1))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Year"}),a.jsxs("select",{name:"year",value:c.year,onChange:y,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Years"}),N.map(w=>a.jsx("option",{value:w,children:w},w))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsxs("select",{name:"department",value:c.department,onChange:y,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Departments"}),h.map(w=>a.jsx("option",{value:w,children:w},w))]})]}),a.jsx("div",{className:"flex items-end pt-1",children:a.jsx("button",{onClick:x,className:"w-full px-3 py-2 text-white font-medium text-xs rounded-md transition-all duration-200 shadow-sm",style:{backgroundColor:"#104774"},children:r?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Refreshing..."]}):a.jsxs("span",{className:"flex items-center justify-center gap-1",children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Report"]})})})]})})]}),r?a.jsxs("div",{className:"text-center py-6 bg-white rounded-lg shadow-sm border border-slate-200",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Generating reports..."}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please wait while we process your data"})]}):t.length===0?a.jsxs("div",{className:"text-center py-8 bg-white rounded-lg shadow-sm border border-slate-200",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-1",children:"No report data available"}),a.jsx("p",{className:"text-xs text-gray-500 max-w-md mx-auto px-2",children:"Try adjusting your filters or select a different date range to generate attendance reports."})]}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[a.jsx("div",{className:"block lg:hidden space-y-3 p-3",children:t.map((w,A)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-3 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"flex items-start justify-between mb-2",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-xs truncate",children:w.employeeName||"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:w.employeeEmail||"N/A"}),a.jsxs("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",w.employeeId||"N/A"]}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs",children:w.department||"N/A"})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[a.jsxs("div",{className:"text-center p-1.5 bg-green-50 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Present"}),a.jsx("p",{className:"font-semibold text-green-600 text-xs",children:w.present||0})]}),a.jsxs("div",{className:"text-center p-1.5 bg-red-50 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Absent"}),a.jsx("p",{className:"font-semibold text-red-600 text-xs",children:w.absent||0})]}),a.jsxs("div",{className:"text-center p-1.5 bg-yellow-50 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Pending"}),a.jsx("p",{className:"font-semibold text-yellow-600 text-xs",children:w.pending||0})]}),a.jsxs("div",{className:"text-center p-1.5 bg-red-50 rounded",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Rejected"}),a.jsx("p",{className:"font-semibold text-red-600 text-xs",children:w.rejected||0})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-100",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Total Days"}),a.jsx("p",{className:"font-semibold text-gray-800 text-xs",children:w.totalDays||0})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Attendance"}),a.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${(w.attendancePercentage||0)>=90?"bg-green-100 text-green-800":(w.attendancePercentage||0)>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[w.attendancePercentage?Math.round(w.attendancePercentage):0,"%"]})]})]})]},A))}),a.jsx("div",{className:"hidden lg:block overflow-x-auto",children:a.jsx("div",{className:"max-h-[180px] overflow-y-auto",children:a.jsxs("table",{className:"w-full border-collapse min-w-[800px]",children:[a.jsx("thead",{className:"bg-[#104774] text-white sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Employee"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Employee ID"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Department"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Present"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Absent"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Pending"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Rejected"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Total Days"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Attendance %"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map((w,A)=>a.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("div",{className:"font-medium text-gray-900 text-xs",children:w.employeeName||"N/A"}),a.jsx("div",{className:"text-xs text-gray-500",children:w.employeeEmail||"N/A"})]}),a.jsx("td",{className:"px-3 py-2 text-xs text-gray-700",children:w.employeeId||"N/A"}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:w.department||"N/A"})}),a.jsx("td",{className:"px-3 py-2 text-green-600 font-semibold text-xs",children:w.present||0}),a.jsx("td",{className:"px-3 py-2 text-red-600 font-semibold text-xs",children:w.absent||0}),a.jsx("td",{className:"px-3 py-2 text-yellow-600 font-semibold text-xs",children:w.pending||0}),a.jsx("td",{className:"px-3 py-2 text-red-600 font-semibold text-xs",children:w.rejected||0}),a.jsx("td",{className:"px-3 py-2 font-semibold text-gray-700 text-xs",children:w.totalDays||0}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${(w.attendancePercentage||0)>=90?"bg-green-100 text-green-800":(w.attendancePercentage||0)>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[w.attendancePercentage?Math.round(w.attendancePercentage):0,"%"]})})]},A))})]})})}),a.jsx("div",{className:"border-t border-slate-200 px-3 py-2 bg-slate-50",children:a.jsxs("p",{className:"text-xs text-gray-600",children:["Showing ",a.jsx("span",{className:"font-semibold",children:t.length})," employee records"]})})]})]})},Ei="#104774",BP="#0d3a61",HP=()=>{const{token:n}=os(),[e,t]=_.useState([]),[s,r]=_.useState([]),[l,c]=_.useState(!0),u=new Date().toISOString().split("T")[0],[h,m]=_.useState({employee:"",date:u,status:"pending",department:"",role:""}),[p,x]=_.useState({totalEmployees:0,present:0,absent:0,pending:0}),[y,v]=_.useState([]),[N,w]=_.useState(null),[A,j]=_.useState(!1),[C,S]=_.useState(""),[T,R]=_.useState("records"),[O,H]=_.useState([]);_.useEffect(()=>{n&&(L(),K(),z())},[n]),_.useEffect(()=>{G()},[h,e]);const V=(P,D="info",M=3500)=>{const F=Date.now()+Math.random();v(J=>[...J,{id:F,message:P,type:D}]),setTimeout(()=>v(J=>J.filter(me=>me.id!==F)),M)},L=async()=>{c(!0);try{const P=await xe.get("/attendance/all",{headers:{Authorization:`Bearer ${n}`}});t(P.data||[])}catch(P){console.error("Error fetching all attendances:",P),V(P.response?.data?.message||"Could not fetch attendance records","error"),t([])}finally{c(!1)}},K=async()=>{try{const P=await xe.get("/attendance/stats",{headers:{Authorization:`Bearer ${n}`}});x(P.data||{})}catch(P){console.error("Error fetching stats:",P),V("Error loading statistics","error")}},z=async()=>{try{const P=await xe.get("/departments");P.data.success&&H(P.data.data)}catch(P){console.error("Error fetching departments:",P)}},G=()=>{let P=[...e];h.employee&&(P=P.filter(D=>`${D.employee?.profileRef?.firstName||""} ${D.employee?.profileRef?.lastName||""}`.trim().toLowerCase().includes(h.employee.toLowerCase())||(D.employee?.email||"").toLowerCase().includes(h.employee.toLowerCase()))),h.date&&(P=P.filter(D=>D.date?new Date(D.date).toLocaleDateString()===new Date(h.date).toLocaleDateString():!1)),h.status&&(P=P.filter(D=>D.status===h.status)),h.department&&(P=P.filter(D=>D.employee?.profileRef?.department===h.department)),h.role&&(P=P.filter(D=>D.employee?.role===h.role)),r(P)},Y=P=>{const{name:D,value:M}=P.target;m(F=>({...F,[D]:M}))},de=()=>{m({employee:"",date:"",status:"",department:"",role:""})},be=async P=>{if(N)try{const D=await xe.patch(`/attendance/${N}/admin-reject`,{remarks:P},{headers:{Authorization:`Bearer ${n}`}});D.data?.attendance?t(M=>M.map(F=>F._id===N?D.data.attendance:F)):L(),K(),V(D.data?.message||"Attendance rejected","success"),j(!1),S(""),w(null)}catch(D){console.error("Error rejecting attendance:",D),V(D.response?.data?.message||"Error rejecting attendance","error")}},I=P=>{if(!P)return"-";try{return new Date(P).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},Z=P=>{if(!P)return"-";try{return new Date(P).toLocaleDateString()}catch{return"-"}},X=P=>{const D={pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${D[P]||"bg-gray-100 text-gray-800"}`,children:P})};return l&&e.length===0?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:Ei,borderLeftColor:"transparent"},role:"status"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading attendance records..."})]})}):a.jsxs("div",{className:"max-h-[80vh] bg-gray-50",children:[a.jsx("style",{children:`
      .primary-btn:hover { background: ${BP} !important }
      .primary-border-active { border-bottom-color: ${Ei} !important; color: ${Ei} !important }
    `}),a.jsx(Ji,{notifications:y}),a.jsxs("header",{className:"p-3 mb-4 md:mb-6",children:[a.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800 text-center sm:text-left",children:"Admin Attendance Management"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 text-center sm:text-left",children:"Manage all employee and HR attendance records"})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg p-3 md:p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs md:text-sm text-blue-700 font-semibold mb-1",children:"Total Employees"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-blue-900",children:p.totalEmployees??0})]}),a.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-green-200 rounded-lg p-3 md:p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs md:text-sm text-green-700 font-semibold mb-1",children:"Present Today"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-green-900",children:p.present??0})]}),a.jsxs("div",{className:"bg-gradient-to-r from-red-100 to-red-200 rounded-lg p-3 md:p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs md:text-sm text-red-700 font-semibold mb-1",children:"Absent Today"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-red-900",children:Math.max(0,p?.absent??0)})]}),a.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 to-yellow-200 rounded-lg p-3 md:p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer text-center",children:[a.jsx("h3",{className:"text-xs md:text-sm text-yellow-700 font-semibold mb-1",children:"Pending Approval"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-yellow-900",children:p.pending??0})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 mb-6",children:[a.jsx("div",{className:"border-b border-slate-200",children:a.jsxs("nav",{className:"flex overflow-x-auto",children:[a.jsx("button",{onClick:()=>R("records"),className:`py-2 md:py-3 px-3 md:px-4 text-center border-b-2 font-medium text-xs md:text-sm min-w-max ${T==="records"?"primary-border-active":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,style:T==="records"?{borderBottomColor:Ei,color:Ei}:{},children:"Attendance Records"}),a.jsx("button",{onClick:()=>R("reports"),className:`py-2 md:py-3 px-3 md:px-4 text-center border-b-2 font-medium text-xs md:text-sm min-w-max ${T==="reports"?"primary-border-active":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,style:T==="reports"?{borderBottomColor:Ei,color:Ei}:{},children:"Reports & Analytics"})]})}),a.jsxs("div",{className:"p-3 md:p-4",children:[T==="records"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3 md:gap-4 mb-4 md:mb-6",children:[a.jsxs("div",{className:"sm:col-span-2 lg:col-span-1",children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 mb-1",children:"Employee Name/Email"}),a.jsx("input",{type:"text",name:"employee",value:h.employee,onChange:Y,className:"w-full p-2 text-xs border border-slate-300 rounded-md",placeholder:"Search employee..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",name:"date",value:h.date,onChange:Y,className:"w-full p-2 text-xs border border-slate-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:h.status,onChange:Y,className:"w-full p-2 text-xs border border-slate-300 rounded-md",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsx("div",{className:"flex items-end gap-2",children:a.jsx("button",{onClick:de,className:"px-3 py-2 text-xs bg-slate-200 text-slate-700 rounded-md hover:bg-slate-300 w-full",children:"Clear Filters"})})]}),a.jsxs("div",{className:"bg-white rounded-lg",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 md:mb-4 gap-2",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-center sm:text-left",children:"Attendance Records"}),a.jsx("div",{className:"flex gap-2 justify-center sm:justify-start",children:a.jsx("button",{onClick:L,className:"p-2 text-slate-500 hover:text-slate-700 border rounded-md",title:"Refresh",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]}),a.jsxs("div",{className:"block md:hidden space-y-3",children:[s.map((P,D)=>a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200 shadow-sm hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 truncate",children:[P.employee?.profileRef?.firstName," ",P.employee?.profileRef?.lastName]}),a.jsx("p",{className:"text-xs text-slate-500 truncate mt-0.5",children:P.employee?.email})]}),a.jsx("div",{className:"text-right ml-2 flex-shrink-0",children:a.jsx("span",{className:"inline-block py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-full whitespace-nowrap",children:Z(P.date)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[a.jsxs("div",{className:"bg-slate-50 p-2 rounded",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("svg",{className:"w-3 h-3 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{className:"text-xs font-medium text-slate-500 truncate",children:"Login"})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-800 truncate",children:I(P.checkIn)})]}),a.jsxs("div",{className:"bg-slate-50 p-2 rounded",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[a.jsx("svg",{className:"w-3 h-3 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("p",{className:"text-xs font-medium text-slate-500 truncate",children:"Logout"})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-800 truncate",children:I(P.checkOut)||"-"})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Status"}),a.jsx("div",{className:"transform scale-90 origin-left",children:X(P.status)})]}),a.jsxs("div",{className:"space-y-2 mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center py-1 border-b border-slate-100",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500 truncate",children:"Work Progress"}),a.jsx("span",{className:"text-xs text-slate-800 font-medium truncate ml-1",children:P.workProgress||"-"})]}),a.jsxs("div",{className:"py-1 border-b border-slate-100",children:[a.jsx("p",{className:"text-xs font-medium text-slate-500 mb-0.5",children:"Task"}),a.jsx("p",{className:"text-xs text-slate-800 line-clamp-2 break-words",children:P.taskDescription||"No task description"})]}),a.jsxs("div",{className:"py-1",children:[a.jsx("p",{className:"text-xs font-medium text-slate-500 mb-0.5",children:"Logout Note"}),a.jsx("p",{className:"text-xs text-slate-800 line-clamp-2 break-words",children:P.logoutDescription||"No logout note"})]})]}),(P.earlyLoginReason||P.lateLoginReason||P.earlyLogoutReason)&&a.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-2 rounded mb-1",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-1.5",children:[a.jsx("svg",{className:"w-3 h-3 text-amber-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("p",{className:"text-xs font-semibold text-amber-800 truncate",children:"Attendance Notes"})]}),a.jsxs("div",{className:"space-y-1",children:[P.earlyLoginReason&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-800 mt-0.5 flex-shrink-0",children:"Early"}),a.jsx("p",{className:"text-[10px] text-amber-700 flex-1 break-words",children:P.earlyLoginReason})]}),P.lateLoginReason&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-800 mt-0.5 flex-shrink-0",children:"Late"}),a.jsx("p",{className:"text-[10px] text-amber-700 flex-1 break-words",children:P.lateLoginReason})]}),P.earlyLogoutReason&&a.jsxs("div",{className:"flex items-start gap-1.5",children:[a.jsx("span",{className:"inline-flex items-center px-1 py-0.5 rounded text-[10px] font-medium bg-amber-100 text-amber-800 mt-0.5 flex-shrink-0",children:"Early Out"}),a.jsx("p",{className:"text-[10px] text-amber-700 flex-1 break-words",children:P.earlyLogoutReason})]})]})]})]},P._id)),s.length===0&&a.jsx("div",{className:"text-center p-4 bg-gradient-to-br from-slate-50 to-blue-50 rounded-lg border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsx("svg",{className:"w-10 h-10 text-slate-300 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-1",children:"No attendance records found"}),a.jsx("p",{className:"text-xs text-slate-500 px-2",children:"Try adjusting your filters or date range"})]})})]}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsx("div",{className:"max-h-[280px] overflow-y-auto border border-slate-200 rounded-lg shadow-sm",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Employee"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Date"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Login Time"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Logout Time"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Work Progress"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Task"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase",children:"Logout Note"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:s.map((P,D)=>a.jsxs("tr",{className:`${D%2===0?"bg-white":"bg-slate-50"} transition`,children:[a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[a.jsxs("div",{className:"font-medium text-slate-800 text-xs",children:[P.employee?.profileRef?.firstName," ",P.employee?.profileRef?.lastName]}),a.jsx("div",{className:"text-xs text-slate-500",children:P.employee?.email}),a.jsx("div",{className:"text-xs text-slate-400 mt-1",children:P.employee?.profileRef?.employeeId})]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-slate-700",children:Z(P.date)}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-slate-700",children:I(P.checkIn)}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-slate-700",children:I(P.checkOut)||"-"}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:X(P.status)}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-slate-700 max-w-[120px] truncate",children:P.workProgress||"-"}),a.jsx("td",{className:"px-3 py-2 text-xs text-slate-700 max-w-[150px]",children:a.jsxs("div",{className:"space-y-1",children:[P.taskDescription?a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"truncate cursor-pointer font-medium hover:text-blue-600",children:P.taskDescription}),a.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-64 bg-slate-900 text-white text-xs rounded-lg p-2 shadow-lg z-50 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 break-words",children:[P.taskDescription,a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -mt-1 w-2 h-2 bg-slate-900 rotate-45"})]})]}):a.jsx("span",{className:"text-slate-400 italic",children:"-"}),P.earlyLoginReason&&a.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:[a.jsx("span",{className:"font-medium",children:"Early Login:"})," ",P.earlyLoginReason]}),P.lateLoginReason&&a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[a.jsx("span",{className:"font-medium",children:"Late Login:"})," ",P.lateLoginReason]})]})}),a.jsx("td",{className:"px-3 py-2 text-xs max-w-[120px]",children:P.logoutDescription?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"font-medium truncate",children:P.logoutDescription}),P.earlyLogoutReason&&a.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[a.jsx("span",{className:"font-medium",children:"Early Logout:"})," ",P.earlyLogoutReason]})]}):"-"})]},P._id))})]})})})]})]}),T==="reports"&&a.jsx(IP,{token:n,addNotification:V,attendanceRecords:e})]})]}),a.jsx(OA,{isOpen:A,onClose:()=>{j(!1),S(""),w(null)},onReject:be,remarks:C,setRemarks:S})]})},Bm="#104774",zP="#0d3a61",FP=()=>{const{token:n,user:e}=os(),[t,s]=_.useState([]),[r,l]=_.useState(!0),[c,u]=_.useState(new Date().getFullYear()),[h,m]=_.useState(new Date().getMonth()+1),[p,x]=_.useState([]),[y,v]=_.useState(null),[N,w]=_.useState(!1);_.useEffect(()=>{j()},[c,h]);const A=(L,K="info",z=3500)=>{const G=Date.now()+Math.random();x(Y=>[...Y,{id:G,message:L,type:K}]),setTimeout(()=>x(Y=>Y.filter(de=>de.id!==G)),z)},j=async()=>{try{l(!0);const L=await xe.get(`/payroll/employee/my-payrolls?year=${c}&month=${h}`,{headers:{Authorization:`Bearer ${n}`}});s(L.data.data||[])}catch(L){console.error("Error fetching payrolls:",L),A(L.response?.data?.message||"Could not fetch payroll records","error"),s([])}finally{l(!1)}},C=async L=>{try{const K=await xe.get(`/payroll/payslip/${L}`,{headers:{Authorization:`Bearer ${n}`},responseType:"blob"}),z=new Blob([K.data],{type:"application/pdf"}),G=window.URL.createObjectURL(z),Y=document.createElement("a");Y.href=G,Y.download=`payslip-${L}.pdf`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(G),A("Payslip downloaded successfully","success")}catch(K){console.error("Error downloading payslip:",K),K.response?.status===404?K.response?.data?.message==="Payslip not generated yet"?A("Payslip not ready yet. Please try again later.","error"):A("Payslip file missing. Contact HR.","error"):A(K.response?.data?.message||"Error downloading payslip","error")}},S=L=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(L),T=L=>new Date(L).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}),R=L=>{const K={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${K[L]||"bg-gray-100 text-gray-800"}`,children:L.replace("_"," ").toUpperCase()})},O=["January","February","March","April","May","June","July","August","September","October","November","December"],H=new Date().getFullYear(),V=Array.from({length:5},(L,K)=>H-K);return r?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:Bm,borderLeftColor:"transparent"},role:"status"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading payroll records..."})]})}):a.jsxs("div",{className:"min-h-[80vh] p-4 sm:p-6 max-w-[1200px] mx-auto",children:[a.jsx("style",{children:`
      .primary-btn:hover { background: ${zP} !important }
    `}),a.jsx(Ji,{notifications:p}),a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 md:mb-6 gap-3 md:gap-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-gray-800",children:"My Payroll & Payslips"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"View and download your salary slips"})]}),a.jsxs("div",{className:"mt-2 md:mt-0 flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 bg-white shadow rounded-lg p-2 sm:p-3",children:[a.jsxs("div",{className:"w-full sm:w-24",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Year"}),a.jsx("select",{value:c,onChange:L=>u(parseInt(L.target.value)),className:"w-full p-1 border border-gray-300 rounded-md text-xs sm:text-sm focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:V.map(L=>a.jsx("option",{value:L,children:L},L))})]}),a.jsxs("div",{className:"w-full sm:w-28",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Month"}),a.jsxs("select",{value:h,onChange:L=>m(parseInt(L.target.value)),className:"w-full p-1 border border-gray-300 rounded-md text-xs sm:text-sm focus:ring-1 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All"}),O.map((L,K)=>a.jsx("option",{value:K+1,children:L},K+1))]})]})]})]}),a.jsx("div",{className:"bg-white shadow rounded-lg",children:t.length===0?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No payroll records found"})}):a.jsxs("div",{className:"overflow-x-auto sm:overflow-x-hidden",children:[a.jsxs("table",{className:"min-w-full border-collapse text-xs sm:text-sm md:text-base hidden sm:table",children:[a.jsx("thead",{className:"bg-[#104774]",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-white font-semibold",children:"Month"}),a.jsx("th",{className:"px-3 py-2 text-left text-white font-semibold",children:"Generated On"}),a.jsx("th",{className:"px-3 py-2 text-right text-white font-semibold",children:"Net Salary"}),a.jsx("th",{className:"px-3 py-2 text-center text-white font-semibold",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-center text-white font-semibold",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:t.sort((L,K)=>new Date(K.year+"-"+K.month)-new Date(L.year+"-"+L.month)).map(L=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-3 py-2",children:[O[parseInt(L.month.split("-")[1])-1]," ",L.year]}),a.jsx("td",{className:"px-3 py-2",children:T(L.approvedAt)}),a.jsx("td",{className:"px-3 py-2 text-right text-green-600 font-semibold",children:S(L.netPay)}),a.jsx("td",{className:"px-3 py-2 text-center",children:R(L.status)}),a.jsxs("td",{className:"px-3 py-2 text-center space-x-1 flex justify-center",children:[a.jsx("button",{onClick:()=>{v(L),w(!0)},className:"px-2 py-1 border border-gray-300 rounded-md text-gray-700 text-xs sm:text-sm hover:bg-gray-50",children:"View"}),L.status==="approved"&&a.jsx("button",{onClick:()=>C(L._id),className:"px-2 py-1 rounded-md text-white text-xs sm:text-sm primary-btn",style:{backgroundColor:Bm},children:"Download"})]})]},L._id))})]}),a.jsx("div",{className:"sm:hidden space-y-3",children:t.sort((L,K)=>new Date(K.year+"-"+K.month)-new Date(L.year+"-"+L.month)).map(L=>a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:"font-medium",children:[O[parseInt(L.month.split("-")[1])-1]," ",L.year]}),a.jsx("span",{className:"text-green-600 font-semibold",children:S(L.netPay)})]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Generated: ",T(L.approvedAt)]}),a.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:["Status: ",R(L.status)]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{v(L),w(!0)},className:"flex-1 px-2 py-1 border border-gray-300 rounded-md text-gray-700 text-xs hover:bg-gray-50",children:"View"}),L.status==="approved"&&a.jsx("button",{onClick:()=>C(L._id),className:"flex-1 px-2 py-1 rounded-md text-white text-xs primary-btn",style:{backgroundColor:Bm},children:"Download"})]})]},L._id))})]})}),N&&y&&a.jsx(UP,{payroll:y,onClose:()=>w(!1),formatCurrency:S})]})},UP=({payroll:n,onClose:e,formatCurrency:t})=>a.jsx("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-40 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-200 shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Salary Details - ",n.month]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-4",children:"Earnings"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Basic Salary:"}),a.jsx("span",{className:"font-semibold",children:t(n.basic)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"House Rent Allowance (HRA):"}),a.jsx("span",{className:"font-semibold",children:t(n.hra)})]}),n.allowances&&n.allowances.map((s,r)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:[s.title,":"]}),a.jsx("span",{className:"font-semibold",children:t(s.amount)})]},r)),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[a.jsx("span",{children:"Total Earnings:"}),a.jsx("span",{className:"text-green-600",children:t(n.totalEarnings)})]})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:"Deductions"}),a.jsxs("div",{className:"space-y-3",children:[n.absentDeduction>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Absent Days Deduction (",n.absentDays," days):"]}),a.jsxs("span",{className:"font-semibold text-red-600",children:["-",t(n.absentDeduction)]})]}),n.deductions&&n.deductions.map((s,r)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:[s.title,":"]}),a.jsxs("span",{className:"font-semibold text-red-600",children:["-",t(s.amount)]})]},r)),n.tax>0&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Tax:"}),a.jsxs("span",{className:"font-semibold text-red-600",children:["-",t(n.tax)]})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[a.jsx("span",{children:"Total Deductions:"}),a.jsxs("span",{className:"text-red-600",children:["-",t(n.totalDeductions)]})]})})]})]})]}),a.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Net Salary"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(n.netPay)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.status==="approved"?"bg-green-100 text-green-800":n.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.status.replace("_"," ").toUpperCase()})]})]})}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})}),$P="#104774",VP=({isOpen:n,onClose:e,onCreate:t,token:s,addNotification:r})=>{const[l,c]=_.useState(!1),[u,h]=_.useState([]),[m,p]=_.useState([]),[x,y]=_.useState([]),[v,N]=_.useState(""),[w,A]=_.useState(!1),[j,C]=_.useState([]),[S,T]=_.useState({employeeId:"",month:new Date().getMonth()+1,year:new Date().getFullYear(),basic:0,hra:0,allowances:[],deductions:[],tax:0,taxPercentage:0}),[R,O]=_.useState({title:"",amount:0}),[H,V]=_.useState({title:"",amount:0}),[L,K]=_.useState(null),[z,G]=_.useState(null),[Y,de]=_.useState(null);_.useEffect(()=>{n&&(be(),T(ve=>({...ve,month:new Date().getMonth()+1,year:new Date().getFullYear()})),K(null),G(null),de(null),N(""),p([]),y([]))},[n]),_.useEffect(()=>{v?I(v):(p([]),y([]))},[v]),_.useEffect(()=>{x.length>0&&Z()},[S.month,S.year,x]),_.useEffect(()=>{S.employeeId?(X(S.employeeId),P(S.employeeId,S.month,S.year)):(K(null),G(null),de(null))},[S.employeeId,S.month,S.year]),_.useEffect(()=>{if(S.taxPercentage>0&&S.basic>0){const ve=Math.round(S.basic*S.taxPercentage/100);T(W=>({...W,tax:ve}))}else S.taxPercentage===0&&T(ve=>({...ve,tax:0}))},[S.taxPercentage,S.basic]);const be=async()=>{try{const ve=await xe.get("/departments",{headers:{Authorization:`Bearer ${s}`}});h(ve.data.data||[])}catch(ve){console.error(ve),r("Failed to fetch departments","error")}},I=async ve=>{try{const W=await xe.get(`/departments/${ve}/employees`,{headers:{Authorization:`Bearer ${s}`}});y(W.data.data||[])}catch(W){console.error(W),r("Failed to fetch employees","error")}},Z=async()=>{A(!0);try{const W=(await Promise.all(x.map(async he=>{try{const ge=await xe.get(`/payroll/employee/${he._id}/exists?month=${S.month}&year=${S.year}`,{headers:{Authorization:`Bearer ${s}`}});return{emp:he,hasPayroll:!!ge.data.exists}}catch{return{emp:he,hasPayroll:!1}}}))).filter(he=>!he.hasPayroll).map(he=>he.emp);p(W),S.employeeId&&!W.some(he=>he._id===S.employeeId)&&T(he=>({...he,employeeId:""}))}catch(ve){console.error(ve),p(x)}finally{A(!1)}},X=async ve=>{try{const he=(await xe.get(`/payroll/employee/${ve}/latest`,{headers:{Authorization:`Bearer ${s}`}})).data?.data||null;if(G(he),he&&typeof he.basic=="number")T(ge=>({...ge,basic:he.basic,hra:he.hra??ge.hra}));else try{const Ee=(await xe.get(`/profiles/${ve}`,{headers:{Authorization:`Bearer ${s}`}})).data?.data?.basicSalary??prev.basic;T(Xe=>({...Xe,basic:Ee}))}catch{}}catch(W){console.error("Error fetching latest payroll:",W)}},P=async(ve,W,he)=>{try{const ge=await xe.get(`/payroll/preview?employeeId=${ve}&month=${W}&year=${he}&basic=${S.basic||0}&hra=${S.hra||0}&allowances=${JSON.stringify(S.allowances)}&deductions=${JSON.stringify(S.deductions)}&taxPercentage=${S.taxPercentage||0}`,{headers:{Authorization:`Bearer ${s}`}});de(ge.data)}catch(ge){console.error("Error fetching payroll preview:",ge),de(null),M()}},D=ve=>Array.isArray(ve)?ve.reduce((W,he)=>W+(Number(he.amount)||0),0):0,M=()=>{if(!S.employeeId){r("Select employee to preview","error");return}const ve=Number(S.basic||0),W=Number(S.hra||0),he=D(S.allowances),ge=D(S.deductions),Ee=Number(S.tax||0),Xe=ve/31;let $=0,Ne=0,De=0,qe=0;if(Y)$=Y.absent||0,Ne=Y.workingDays||0,De=Y.approvedLeaves||0,qe=Y.absentDeduction||0;else if(L){const je=Number(L.present||0),Fe=Number(L.leave||0),lt=Number(L.holidays||0),Ht=Number(L.sundays||0);Ne=Number(L.totalWorkingDays||31-(lt+Ht)),$=Number(L.absent??Ne-(je+Fe)),$<0&&($=0),qe=Math.round(Xe*$),De=Fe}const xt=Math.round(ve+W+he),Bt=Math.round(ge+Ee+qe),re=Math.round(xt-Bt),Ae={basic:ve,hra:W,allowancesSum:he,deductionsSum:ge,tax:Ee,dailyRate:+Xe.toFixed(2),workingDays:Ne,presentDays:Ne-$-De,leaveDays:De,absent:$,absentDeduction:qe,totalEarnings:xt,totalDeductions:Bt,netPay:re};return de(Ae),Ae},F=async ve=>{if(ve.preventDefault(),!S.employeeId)return r("Please select an employee","error");c(!0);try{const W={employeeId:S.employeeId,month:S.month,year:S.year,basic:Number(S.basic||0),hra:Number(S.hra||0),allowances:S.allowances||[],deductions:S.deductions||[],taxPercentage:S.taxPercentage||0},he=await xe.post("/payroll/monthly",W,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});window.location.reload(),r(he.data?.message||"Payroll created","success"),T({employeeId:"",month:new Date().getMonth()+1,year:new Date().getFullYear(),basic:0,hra:0,allowances:[],deductions:[],tax:0,taxPercentage:0}),K(null),de(null),N(""),t&&t(he.data.data),e()}catch(W){console.error("Error creating payroll:",W)}finally{c(!1)}},J=()=>{!R.title||!R.amount||(T(ve=>({...ve,allowances:[...ve.allowances,{title:R.title,amount:Number(R.amount)}]})),O({title:"",amount:0}))},me=ve=>T(W=>({...W,allowances:W.allowances.filter((he,ge)=>ge!==ve)})),ce=()=>{!H.title||!H.amount||(T(ve=>({...ve,deductions:[...ve.deductions,{title:H.title,amount:Number(H.amount)}]})),V({title:"",amount:0}))},ye=ve=>T(W=>({...W,deductions:W.deductions.filter((he,ge)=>ge!==ve)})),Se=ve=>{const{name:W,value:he}=ve.target;["basic","hra","tax","taxPercentage"].includes(W)?T(ge=>({...ge,[W]:Number(he)})):T(ge=>({...ge,[W]:he}))},ke=ve=>{N(ve.target.value),T(W=>({...W,employeeId:""}))};if(!n)return null;const te=D(S.allowances),Ue=D(S.deductions)+Number(S.tax||0),Ge=Math.round(Number(S.basic||0)+Number(S.hra||0)+te);Y?Y.netPay:Math.round(Ge-Ue);const ft=["January","February","March","April","May","June","July","August","September","October","November","December"];return new Date().getFullYear(),a.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-opacity-40 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 md:gap-4",children:[a.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800",children:"Create New Payroll"}),a.jsxs("span",{className:"text-sm md:text-base text-gray-600 bg-gray-100 px-3 py-1 rounded-md",children:[ft[S.month-1]," ",S.year]})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-lg md:text-xl",children:""})]}),a.jsxs("form",{onSubmit:F,className:"space-y-4 md:space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"Department *"}),a.jsxs("select",{value:v,onChange:ke,required:!0,className:"w-full p-2 md:p-3 border border-gray-300 rounded-md text-sm md:text-base",children:[a.jsx("option",{value:"",children:"Select Department"}),u.map(ve=>a.jsx("option",{value:ve,children:ve},ve))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"Employee *"}),a.jsxs("select",{name:"employeeId",value:S.employeeId,onChange:Se,required:!0,disabled:!v||w,className:"w-full p-2 md:p-3 border border-gray-300 rounded-md text-sm md:text-base",children:[a.jsx("option",{value:"",children:"Select Employee"}),w?a.jsx("option",{disabled:!0,children:"Checking payroll status..."}):m.length===0&&v?a.jsx("option",{disabled:!0,children:"All employees already have payroll for this period"}):m.map(ve=>a.jsxs("option",{value:ve._id,children:[ve.firstName," ",ve.lastName," (",ve.employeeId,")"]},ve._id))]})]})]}),a.jsx("input",{type:"hidden",name:"month",value:S.month}),a.jsx("input",{type:"hidden",name:"year",value:S.year}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"Basic Salary *"}),a.jsx("input",{name:"basic",type:"number",value:S.basic,onChange:Se,required:!0,min:0,className:"w-full p-2 md:p-3 border border-gray-300 rounded-md text-sm md:text-base"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"HRA"}),a.jsx("input",{name:"hra",type:"number",value:S.hra,onChange:Se,min:0,className:"w-full p-2 md:p-3 border border-gray-300 rounded-md text-sm md:text-base"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"Tax (%)"}),a.jsx("input",{name:"taxPercentage",type:"number",value:S.taxPercentage,onChange:Se,min:0,max:100,step:.1,className:"w-full p-2 md:p-3 border border-gray-300 rounded-md text-sm md:text-base"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1 md:mb-2",children:"Tax Amount"}),a.jsx("input",{name:"tax",type:"number",value:S.tax,onChange:Se,readOnly:!0,className:"w-full p-2 md:p-3 border border-gray-300 rounded-md bg-gray-100 text-sm md:text-base"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowances"}),a.jsxs("div",{className:"space-y-2 md:space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{placeholder:"Title",value:R.title,onChange:ve=>O(W=>({...W,title:ve.target.value})),className:"flex-1 p-2 border rounded text-sm md:text-base"}),a.jsx("input",{placeholder:"Amount",type:"number",value:R.amount,onChange:ve=>O(W=>({...W,amount:Number(ve.target.value)})),className:"w-full sm:w-28 p-2 border rounded text-sm md:text-base"}),a.jsx("button",{type:"button",onClick:J,className:"px-3 py-2 bg-green-600 text-white rounded text-sm md:text-base",children:"Add"})]}),S.allowances.map((ve,W)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm md:text-base",children:[a.jsxs("span",{className:"truncate mr-2",children:[ve.title,": ",(ve.amount||0).toLocaleString()]}),a.jsx("button",{type:"button",onClick:()=>me(W),className:"text-red-600 text-sm whitespace-nowrap",children:"Remove"})]},W))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deductions"}),a.jsxs("div",{className:"space-y-2 md:space-y-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{placeholder:"Title",value:H.title,onChange:ve=>V(W=>({...W,title:ve.target.value})),className:"flex-1 p-2 border rounded text-sm md:text-base"}),a.jsx("input",{placeholder:"Amount",type:"number",value:H.amount,onChange:ve=>V(W=>({...W,amount:Number(ve.target.value)})),className:"w-full sm:w-28 p-2 border rounded text-sm md:text-base"}),a.jsx("button",{type:"button",onClick:ce,className:"px-3 py-2 bg-green-600 text-white rounded text-sm md:text-base",children:"Add"})]}),S.deductions.map((ve,W)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm md:text-base",children:[a.jsxs("span",{className:"truncate mr-2",children:[ve.title,": ",(ve.amount||0).toLocaleString()]}),a.jsx("button",{type:"button",onClick:()=>ye(W),className:"text-red-600 text-sm whitespace-nowrap",children:"Remove"})]},W))]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 md:p-4 rounded-lg",children:[a.jsx("h3",{className:"text-base md:text-lg font-semibold mb-2 md:mb-3",children:"Salary Breakdown"}),a.jsxs("div",{className:"space-y-1 md:space-y-2 text-sm md:text-base",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Basic Salary:"}),a.jsxs("span",{children:["",Number(S.basic||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"HRA:"}),a.jsxs("span",{children:["",Number(S.hra||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Allowances:"}),a.jsxs("span",{children:["",te.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-green-600 font-medium",children:[a.jsx("span",{children:"Total Earnings:"}),a.jsxs("span",{children:["",(Number(S.basic||0)+Number(S.hra||0)+te).toLocaleString()]})]}),a.jsx("hr",{className:"my-1 md:my-2"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Deductions:"}),a.jsxs("span",{className:"text-red-600",children:["-",D(S.deductions).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["Tax (",S.taxPercentage||0,"%):"]}),a.jsxs("span",{className:"text-red-600",children:["-",Number(S.tax||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-red-600 font-medium",children:[a.jsx("span",{children:"Total Deductions:"}),a.jsxs("span",{children:["-",(D(S.deductions)+Number(S.tax||0)).toLocaleString()]})]}),a.jsx("hr",{className:"my-1 md:my-2"}),a.jsxs("div",{className:"flex justify-between text-base md:text-lg font-bold pt-1 md:pt-2",children:[a.jsx("span",{children:"Net Pay:"}),a.jsxs("span",{className:"text-green-600",children:["",(Number(S.basic||0)+Number(S.hra||0)+te-(D(S.deductions)+Number(S.tax||0))).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"px-3 md:px-4 py-2 border rounded text-sm md:text-base order-2 sm:order-1",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:l||!S.employeeId,className:"px-3 md:px-4 py-2 rounded text-white text-sm md:text-base order-1 sm:order-2",style:{backgroundColor:$P},children:l?"Creating...":"Create Payroll"})]})]})]})})},PA=({isOpen:n,onClose:e,payroll:t,onUpdate:s,onApproveReject:r,actionLoading:l,formatCurrency:c,isHR:u=!1})=>{const[h,m]=_.useState(!1),[p,x]=_.useState({...t}),[y,v]=_.useState(""),[N,w]=_.useState("summary"),A=G=>{const{name:Y,value:de}=G.target;x(be=>({...be,[Y]:Y==="basic"||Y==="hra"||Y==="tax"?Number(de):de}))},j=(G,Y,de)=>{const be=[...p.allowances||[]];be[G][Y]=Y==="amount"?Number(de):de,x(I=>({...I,allowances:be}))},C=(G,Y,de)=>{const be=[...p.deductions||[]];be[G][Y]=Y==="amount"?Number(de):de,x(I=>({...I,deductions:be}))},S=()=>{x(G=>({...G,allowances:[...G.allowances||[],{title:"",amount:0}]}))},T=G=>{x(Y=>({...Y,allowances:(Y.allowances||[]).filter((de,be)=>be!==G)}))},R=()=>{x(G=>({...G,deductions:[...G.deductions||[],{title:"",amount:0}]}))},O=G=>{x(Y=>({...Y,deductions:(Y.deductions||[]).filter((de,be)=>be!==G)}))},H=G=>(G||[]).reduce((Y,de)=>Y+(de.amount||0),0),V=H(p.allowances),L=H(p.deductions)+(p.tax||0),K=(p.basic||0)+(p.hra||0)+V,z=K-L;return t.basic/(t.workingDays||22),t.absentDeduction/(t.absentDays||1),n?a.jsx("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-40 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Payroll Details - ",t.employeeProfile?.firstName," ",t.employeeProfile?.lastName]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"flex border-b border-gray-200 mb-4",children:a.jsx("button",{className:`py-2 px-4 text-sm font-medium ${N==="summary"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,onClick:()=>w("summary"),children:"Summary"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Employee ID"}),a.jsx("p",{className:"font-medium text-sm",children:t.employeeProfile?.employeeId})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Period"}),a.jsxs("p",{className:"font-medium text-sm",children:[t.month," ",t.year]})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Status"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="approved"?"bg-green-100 text-green-800":t.status==="rejected"?"bg-red-100 text-red-800":t.status==="pending_approval"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status.replace("_"," ").toUpperCase()})]})]}),N==="summary"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-base font-semibold text-green-700 mb-3",children:"Earnings"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{children:"Basic Salary:"}),h?a.jsx("input",{type:"number",name:"basic",value:p.basic||0,onChange:A,className:"w-28 p-1 text-sm border border-gray-300 rounded-md"}):a.jsx("span",{className:"font-medium",children:c(t.basic||0)})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{children:"House Rent Allowance (HRA):"}),h?a.jsx("input",{type:"number",name:"hra",value:p.hra||0,onChange:A,className:"w-28 p-1 text-sm border border-gray-300 rounded-md"}):a.jsx("span",{className:"font-medium",children:c(t.hra||0)})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:"Allowances:"}),h&&a.jsx("button",{onClick:S,className:"px-2 py-1 bg-green-600 text-white rounded text-xs",children:"+ Add"})]}),a.jsx("div",{className:"space-y-1",children:(p.allowances||[]).map((G,Y)=>a.jsx("div",{className:"flex justify-between items-center text-sm",children:h?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",value:G.title||"",onChange:de=>j(Y,"title",de.target.value),placeholder:"Allowance title",className:"flex-1 p-1 text-sm border border-gray-300 rounded-md mr-2"}),a.jsx("input",{type:"number",value:G.amount||0,onChange:de=>j(Y,"amount",de.target.value),className:"w-20 p-1 text-sm border border-gray-300 rounded-md mr-2"}),a.jsx("button",{onClick:()=>T(Y),className:"text-red-600 hover:text-red-800",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("span",{children:[G.title||"Allowance",":"]}),a.jsx("span",{className:"font-medium",children:c(G.amount||0)})]})},Y))})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between text-base font-semibold",children:[a.jsx("span",{children:"Total Earnings:"}),a.jsx("span",{className:"text-green-600",children:c(K)})]})})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-base font-semibold text-red-700 mb-3",children:"Deductions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{children:"Tax:"}),h?a.jsx("input",{type:"number",name:"tax",value:p.tax||0,onChange:A,className:"w-28 p-1 text-sm border border-gray-300 rounded-md"}):a.jsxs("span",{className:"font-medium text-red-600",children:["-",c(t.tax||0)]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"font-medium text-sm",children:"Other Deductions:"}),h&&a.jsx("button",{onClick:R,className:"px-2 py-1 bg-green-600 text-white rounded text-xs",children:"+ Add"})]}),a.jsx("div",{className:"space-y-1",children:(p.deductions||[]).map((G,Y)=>a.jsx("div",{className:"flex justify-between items-center text-sm",children:h?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",value:G.title||"",onChange:de=>C(Y,"title",de.target.value),placeholder:"Deduction title",className:"flex-1 p-1 text-sm border border-gray-300 rounded-md mr-2"}),a.jsx("input",{type:"number",value:G.amount||0,onChange:de=>C(Y,"amount",de.target.value),className:"w-20 p-1 text-sm border border-gray-300 rounded-md mr-2"}),a.jsx("button",{onClick:()=>O(Y),className:"text-red-600 hover:text-red-800",children:a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("span",{children:[G.title||"Deduction",":"]}),a.jsxs("span",{className:"font-medium text-red-600",children:["-",c(G.amount||0)]})]})},Y))})]}),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between text-base font-semibold",children:[a.jsx("span",{children:"Total Deductions:"}),a.jsxs("span",{className:"text-red-600",children:["-",c(L)]})]})})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 rounded-lg mb-4",children:a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600",children:"Net Salary"}),a.jsx("p",{className:"text-xl font-bold text-green-600",children:c(z)})]})})})]}),t.status==="rejected"&&t.rejectionReason&&a.jsxs("div",{className:"bg-red-50 p-3 rounded-lg mb-4",children:[a.jsx("h4",{className:"text-xs font-semibold text-red-800 mb-1",children:"Rejection Reason:"}),a.jsx("p",{className:"text-xs text-red-700",children:t.rejectionReason})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[u&&t.status==="draft"&&a.jsx(a.Fragment,{children:h?a.jsx(a.Fragment,{children:a.jsx("button",{onClick:()=>m(!1),className:"px-3 py-1 text-sm border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})}):a.jsx(a.Fragment,{})}),a.jsx("button",{onClick:e,className:"px-3 py-1 text-sm border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Close"})]})]})}):null},xw="#104774",GP="#0d3a61",qP=()=>{const{token:n,user:e}=os(),[t,s]=_.useState([]),[r,l]=_.useState([]),[c,u]=_.useState(!0),[h,m]=_.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""}),[p,x]=_.useState([]),[y,v]=_.useState(!1),[N,w]=_.useState(null),[A,j]=_.useState(!1),[C,S]=_.useState(null);_.useEffect(()=>{R(),O()},[h]);const T=(X,P="info",D=3500)=>{const M=Date.now()+Math.random();x(F=>[...F,{id:M,message:X,type:P}]),setTimeout(()=>x(F=>F.filter(J=>J.id!==M)),D)},R=async()=>{try{u(!0);const X=new URLSearchParams;h.year&&X.append("year",h.year),h.month&&X.append("month",h.month),h.status&&X.append("status",h.status),h.employee&&X.append("employee",h.employee);const P=await xe.get(`/payroll?${X}`,{headers:{Authorization:`Bearer ${n}`}});s(P.data.data||[])}catch(X){console.error("Error fetching payrolls:",X),T(X.response?.data?.message||"Could not fetch payroll records","error"),s([])}finally{u(!1)}},O=async()=>{try{const X=await xe.get("/employee/all-employees",{headers:{Authorization:`Bearer ${n}`}});l(X.data.data||[])}catch(X){console.error("Error fetching employees:",X),T("Error fetching employees","error")}},H=async X=>{try{const P=await xe.post("/payroll/monthly",X,{headers:{Authorization:`Bearer ${n}`}});T("Payroll created successfully","success"),v(!1),window.location.reload(),R()}catch(P){console.error("Error creating payroll:",P)}},V=async(X,P)=>{try{S(X);const D=await xe.put(`/payroll/${X}`,P,{headers:{Authorization:`Bearer ${n}`}});T("Payroll updated successfully","success"),j(!1),R()}catch(D){console.error("Error updating payroll:",D),T(D.response?.data?.message||"Error updating payroll","error")}finally{S(null)}},L=async X=>{try{S(X);const P=await xe.patch(`/payroll/${X}/submit`,{},{headers:{Authorization:`Bearer ${n}`}});T("Payroll submitted for approval","success"),R()}catch(P){console.error("Error submitting payroll:",P),T(P.response?.data?.message||"Error submitting payroll","error")}finally{S(null)}},K=X=>{const{name:P,value:D}=X.target;m(M=>({...M,[P]:D}))},z=()=>{m({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""})},G=X=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(X),Y=X=>new Date(X).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),de=X=>{const P={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${P[X]||"bg-gray-100 text-gray-800"}`,children:X.replace("_"," ").toUpperCase()})},be=["January","February","March","April","May","June","July","August","September","October","November","December"],I=new Date().getFullYear(),Z=Array.from({length:3},(X,P)=>I+P);return c&&t.length===0?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:xw,borderLeftColor:"transparent"},role:"status"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading payroll records..."})]})}):a.jsxs("div",{className:"min-h-[80vh] p-2 sm:p-3",children:[" ",a.jsx("style",{children:`
      .primary-btn:hover { background: ${GP} !important }
      
      /* Scale down everything for laptop view */
      @media (min-width: 769px) {
        .text-xl { font-size: 1.1rem !important; }
        .text-2xl { font-size: 1.3rem !important; }
        .text-lg { font-size: 1rem !important; }
        .text-base { font-size: 0.9rem !important; }
        .text-sm { font-size: 0.8rem !important; }
        .text-xs { font-size: 0.7rem !important; }
        
        .p-4 { padding: 0.75rem !important; }
        .p-6 { padding: 1rem !important; }
        .px-6 { padding-left: 1rem !important; padding-right: 1rem !important; }
        .py-4 { padding-top: 0.75rem !important; padding-bottom: 0.75rem !important; }
        .py-3 { padding-top: 0.5rem !important; padding-bottom: 0.5rem !important; }
        
        .mb-6 { margin-bottom: 1rem !important; }
        .mb-4 { margin-bottom: 0.75rem !important; }
        .gap-4 { gap: 0.75rem !important; }
        
        .min-w-[12.5rem] { min-width: 10rem !important; }
        .h-10 { height: 2rem !important; }
        .w-10 { width: 2rem !important; }
        .h-8 { height: 1.5rem !important; }
        .w-8 { width: 1.5rem !important; }
      }

      /* Mobile table styles */
      @media (max-width: 768px) {
        .mobile-table-card {
          display: block;
          background: white;
          border: 1px solid #e5e7eb;
          border-radius: 0.5rem;
          margin-bottom: 1rem;
          padding: 1rem;
          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .mobile-table-card .mobile-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 0.75rem;
          padding-bottom: 0.75rem;
          border-bottom: 1px solid #f3f4f6;
        }
        
        .mobile-table-card .mobile-row:last-child {
          margin-bottom: 0;
          padding-bottom: 0;
          border-bottom: none;
        }
        
        .mobile-label {
          font-weight: 500;
          color: #6b7280;
          font-size: 0.875rem;
          min-width: 100px;
        }
        
        .mobile-value {
          font-weight: 600;
          color: #111827;
          font-size: 0.875rem;
          text-align: right;
          max-width: 60%;
          word-wrap: break-word;
        }

        .mobile-value .mobile-btn {
          padding: 0.25rem 0.5rem;
          font-size: 0.75rem;
          border-radius: 0.25rem;
          margin-left: 0.25rem;
        }
      }
    `}),a.jsx(Ji,{notifications:p}),a.jsx("header",{className:"mb-3 sm:mb-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-800",children:"Payroll Management"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Create and manage employee payrolls"})]}),a.jsxs("button",{onClick:()=>v(!0),className:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-white primary-btn text-xs sm:text-sm",style:{backgroundColor:xw},children:[a.jsx("span",{className:"hidden sm:inline",children:"Create New Payroll"}),a.jsx("span",{className:"sm:hidden",children:"New Payroll"})]})]})}),a.jsxs("div",{className:"flex flex-col xl:flex-row gap-3 sm:gap-4 mb-3 sm:mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"stats-grid grid grid-cols-2 xl:grid-cols-4 gap-2 sm:gap-3",id:"stats-cards",children:[a.jsxs("div",{className:"stat-card bg-white p-2 sm:p-3 rounded-lg shadow border-l-4 border-blue-500 text-center min-w-[10rem]",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Total Payrolls"}),a.jsx("p",{className:"text-lg sm:text-xl font-bold",children:t.length})]}),a.jsxs("div",{className:"stat-card bg-white p-2 sm:p-3 rounded-lg shadow border-l-4 border-yellow-500 text-center min-w-[10rem]",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Draft"}),a.jsx("p",{className:"text-lg sm:text-xl font-bold text-yellow-600",children:t.filter(X=>X.status==="draft").length})]}),a.jsxs("div",{className:"stat-card bg-white p-2 sm:p-3 rounded-lg shadow border-l-4 border-blue-500 text-center min-w-[10rem]",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Pending Approval"}),a.jsx("p",{className:"text-lg sm:text-xl font-bold text-blue-600",children:t.filter(X=>X.status==="pending_approval").length})]}),a.jsxs("div",{className:"stat-card bg-white p-2 sm:p-3 rounded-lg shadow border-l-4 border-green-500 text-center min-w-[10rem]",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Approved"}),a.jsx("p",{className:"text-lg sm:text-xl font-bold text-green-600",children:t.filter(X=>X.status==="approved").length})]})]})}),a.jsx("div",{className:"flex-1 bg-white shadow rounded-lg border-l-4 border-blue-500 flex flex-col",style:{minHeight:"70px"},children:a.jsx("div",{className:"flex-1 p-2 sm:p-3",children:a.jsxs("div",{className:"filters-grid grid grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-1.5 sm:gap-2 h-full items-center",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Year"}),a.jsx("select",{name:"year",value:h.year,onChange:K,className:"w-full p-1 text-xs border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Z.map(X=>a.jsx("option",{value:X,children:X},X))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Month"}),a.jsxs("select",{name:"month",value:h.month,onChange:K,className:"w-full p-1 text-xs border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Months"}),be.map((X,P)=>a.jsx("option",{value:P+1,children:X},P+1))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:h.status,onChange:K,className:"w-full p-1 text-xs border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"pending_approval",children:"Pending Approval"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Employee"}),a.jsxs("select",{name:"employee",value:h.employee,onChange:K,className:"w-full p-1 text-xs border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Employees"}),r.map(X=>a.jsxs("option",{value:X._id,children:[X.firstName," ",X.lastName," (",X.employeeId,")"]},X._id))]})]}),a.jsx("div",{className:"filter-buttons flex gap-1 justify-center mt-1 sm:mt-2",children:a.jsxs("button",{onClick:z,className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1 border",title:"Clear Filters",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})})]})})})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[a.jsx("div",{className:"px-3 sm:px-4 py-2 sm:py-3 border-b border-gray-200",children:a.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:"Payroll Records"})}),t.length===0?a.jsxs("div",{className:"text-center py-6 sm:py-8",children:[a.jsx("svg",{className:"w-10 sm:w-12 h-10 sm:h-12 text-gray-300 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:"No payroll records found"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Try adjusting your filters or create a new payroll"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),a.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),a.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-3 sm:px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(X=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-6 w-6 sm:h-8 sm:w-8",children:a.jsx("img",{className:"h-6 w-6 sm:h-8 sm:w-8 rounded-full object-cover",src:X.employee?.avatarUrl||"/default-avatar.png",alt:""})}),a.jsxs("div",{className:"ml-2 sm:ml-3",children:[a.jsxs("div",{className:"text-xs font-medium text-gray-900",children:[X.employeeProfile?.firstName," ",X.employeeProfile?.lastName]}),a.jsx("div",{className:"text-xs text-gray-500",children:X.employeeProfile?.employeeId})]})]})}),a.jsxs("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap",children:[a.jsxs("div",{className:"text-xs text-gray-900",children:[be[parseInt(X.month.split("-")[1])-1]," ",X.year]}),a.jsx("div",{className:"text-xs text-gray-500",children:Y(X.generatedAt)})]}),a.jsx("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap text-xs text-gray-900",children:G(X.basic)}),a.jsx("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap",children:de(X.status)}),a.jsx("td",{className:"px-3 sm:px-4 py-2 whitespace-nowrap text-xs font-medium",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>{w(X),j(!0)},className:"text-blue-600 hover:text-blue-900",children:"View"}),X.status==="draft"&&a.jsx("button",{onClick:()=>L(X._id),disabled:C===X._id,className:"text-green-600 hover:text-green-900 disabled:opacity-50",children:C===X._id?"Processing...":"Submit"}),X.status==="rejected"&&a.jsx("button",{onClick:()=>{w(X),j(!0)},className:"text-yellow-600 hover:text-yellow-900",children:"Edit & Resubmit"})]})})]},X._id))})]})}),a.jsx("div",{className:"md:hidden p-3",children:t.map(X=>a.jsx("div",{className:"mobile-table-card",children:a.jsxs("div",{className:"mobile-row",children:[a.jsx("span",{className:"mobile-label",children:"Employee"}),a.jsxs("div",{className:"mobile-value flex items-center gap-2 justify-end",children:[a.jsx("img",{className:"h-6 w-6 rounded-full object-cover",src:X.employee?.avatarUrl||"/default-avatar.png",alt:""}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-medium text-gray-900 text-xs",children:[X.employeeProfile?.firstName," ",X.employeeProfile?.lastName]}),a.jsx("div",{className:"text-gray-500 text-xs",children:X.employeeProfile?.employeeId})]})]})]})},X._id))})]})]}),y&&a.jsx(VP,{isOpen:y,onClose:()=>v(!1),onCreate:H,token:n,addNotification:T}),A&&N&&a.jsx(PA,{isOpen:A,onClose:()=>j(!1),payroll:N,onUpdate:V,onSubmitForApproval:L,actionLoading:C,formatCurrency:G,isHR:!0})]})},Hm="#104774",YP="#0d3a61",WP=()=>{const{token:n}=os(),[e,t]=_.useState([]),[s,r]=_.useState(!0),[l,c]=_.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""}),[u,h]=_.useState([]),[m,p]=_.useState([]),[x,y]=_.useState(null),[v,N]=_.useState(!1),[w,A]=_.useState(null),[j,C]=_.useState({total:0,pending:0,approved:0,rejected:0}),[S,T]=_.useState(new Set),[R,O]=_.useState(""),[H,V]=_.useState(""),[L,K]=_.useState(!1),z=e.filter(te=>te.status!=="approved").map(te=>te._id),G=z.length;_.useEffect(()=>{de(),be()},[l]);const Y=(te,Ue="info",Ge=3500)=>{const ft=Date.now()+Math.random();p(ve=>[...ve,{id:ft,message:te,type:Ue}]),setTimeout(()=>p(ve=>ve.filter(W=>W.id!==ft)),Ge)},de=async()=>{try{r(!0);const te=new URLSearchParams;l.year&&te.append("year",l.year),l.month&&te.append("month",l.month),l.status&&te.append("status",l.status),l.employee&&te.append("employee",l.employee),te.append("fullData","true");const Ue=await xe.get(`/payroll?${te}`,{headers:{Authorization:`Bearer ${n}`}});t(Ue.data.data||[]),I(Ue.data.data||[])}catch(te){console.error("Error fetching payrolls:",te),Y(te.response?.data?.message||"Could not fetch payroll records","error"),t([])}finally{r(!1)}},be=async()=>{try{const te=await xe.get("/employee/all-employees",{headers:{Authorization:`Bearer ${n}`}});h(te.data.data||[])}catch(te){console.error("Error fetching employees:",te),Y("Error fetching employees","error")}},I=te=>{const Ue={total:te.length,pending:te.filter(Ge=>Ge.status==="pending_approval").length,approved:te.filter(Ge=>Ge.status==="approved").length,rejected:te.filter(Ge=>Ge.status==="rejected").length};C(Ue)},Z=async(te,Ue,Ge="")=>{try{A(te);const ft=await xe.patch(`/payroll/${te}/approve`,{action:Ue,rejectionReason:Ge},{headers:{Authorization:`Bearer ${n}`}}),ve=Ue==="approve"?"Payroll rolled out successfully":Ue==="reject"?"Payroll rejected successfully":`Payroll ${Ue}ed successfully`;Y(ve,"success"),N(!1),de()}catch(ft){console.error("Error processing payroll:",ft),Y(ft.response?.data?.message||`Error ${Ue}ing payroll`,"error")}finally{A(null)}},X=async()=>{if(!R){Y("Please select an action first","error");return}if(R==="reject"&&!H.trim()){Y("Please provide a rejection reason","error");return}if(S.size===0){Y("Please select at least one payroll","error");return}try{A("bulk");const te=Array.from(S).map(Ge=>xe.patch(`/payroll/${Ge}/approve`,{action:R,rejectionReason:R==="reject"?H:""},{headers:{Authorization:`Bearer ${n}`}}));await Promise.all(te);const Ue=R==="approve"?"rolled out":R==="reject"?"rejected":`${R}ed`;Y(`${S.size} payrolls ${Ue} successfully`,"success"),T(new Set),O(""),V(""),K(!1),de()}catch(te){console.error("Error processing bulk action:",te),Y(te.response?.data?.message||"Error processing bulk action","error")}finally{A(null)}},P=te=>{if(e.find(ft=>ft._id===te)?.status==="approved")return;const Ge=new Set(S);Ge.has(te)?Ge.delete(te):Ge.add(te),T(Ge)},D=()=>{S.size===G?T(new Set):T(new Set(z))},M=te=>{const{name:Ue,value:Ge}=te.target;c(ft=>({...ft,[Ue]:Ge}))},F=()=>{c({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""})},J=te=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(te),me=te=>new Date(te).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),ce=te=>{const Ue={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},Ge=te==="approved"?"ROLLED OUT":te==="pending_approval"?"PENDING ROLLED OUT":te.replace("_"," ").toUpperCase();return a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Ue[te]||"bg-gray-100 text-gray-800"}`,children:Ge})},ye=["January","February","March","April","May","June","July","August","September","October","November","December"],Se=new Date().getFullYear(),ke=[Se-1,Se,Se+1];return s&&e.length===0?a.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:Hm,borderLeftColor:"transparent"},role:"status"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Loading payroll records..."})]})}):a.jsxs("div",{className:"max-h-screen bg-gray-50",children:[a.jsx("style",{children:`
      .primary-btn:hover { background: ${YP} !important }
    `}),a.jsx(Ji,{notifications:m}),a.jsxs("div",{className:"md:hidden",children:[a.jsx("header",{className:"mb-4 p-4 bg-white shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Payroll Approval"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Review employee payrolls"})]}),a.jsxs("button",{onClick:de,className:"px-3 py-2 text-xs rounded-lg text-white primary-btn flex items-center gap-1",style:{backgroundColor:Hm},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:"Refresh"})]})]})}),a.jsx("div",{className:"px-4 mb-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border-l-4 border-blue-500 text-center",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("p",{className:"text-lg font-bold",children:j.total})]}),a.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border-l-4 border-yellow-500 text-center",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Pending"}),a.jsx("p",{className:"text-lg font-bold text-yellow-600",children:j.pending})]}),a.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border-l-4 border-green-500 text-center",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Approved"}),a.jsx("p",{className:"text-lg font-bold text-green-600",children:j.approved})]}),a.jsxs("div",{className:"bg-white p-3 rounded-lg shadow border-l-4 border-red-500 text-center",children:[a.jsx("h3",{className:"text-xs text-gray-500",children:"Rejected"}),a.jsx("p",{className:"text-lg font-bold text-red-600",children:j.rejected})]})]})}),a.jsx("div",{className:"px-4 mb-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"p-3 border-b",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Filters"}),a.jsxs("button",{onClick:F,className:"text-xs text-red-500 flex items-center gap-1",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})]})}),a.jsxs("div",{className:"p-3 space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Year"}),a.jsx("select",{name:"year",value:l.year,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md",children:ke.map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Month"}),a.jsxs("select",{name:"month",value:l.month,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md",children:[a.jsx("option",{value:"",children:"All Months"}),ye.map((te,Ue)=>a.jsx("option",{value:Ue+1,children:te},Ue+1))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:l.status,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending_approval",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Employee"}),a.jsxs("select",{name:"employee",value:l.employee,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md",children:[a.jsx("option",{value:"",children:"All Employees"}),u.map(te=>a.jsxs("option",{value:te._id,children:[te.firstName," ",te.lastName]},te._id))]})]})]})]})}),e.length>0&&a.jsx("div",{className:"px-4 mb-4",children:a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-2",children:"Bulk Actions"}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("input",{type:"checkbox",checked:S.size===G,onChange:D,className:"h-4 w-4 text-blue-600 rounded"}),a.jsxs("span",{className:"text-xs text-slate-700",children:["Select all (",S.size,")"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{value:R,onChange:te=>{O(te.target.value),K(te.target.value==="reject")},className:"w-full p-2 border border-slate-300 rounded-md text-xs",children:[a.jsx("option",{value:"",children:"Select Action"}),a.jsx("option",{value:"approve",children:"Roll Out Selected"}),a.jsx("option",{value:"reject",children:"Reject Selected"})]}),L&&a.jsx("input",{type:"text",value:H,onChange:te=>V(te.target.value),placeholder:"Reason for rejection",className:"w-full p-2 border border-slate-300 rounded-md text-xs"}),a.jsx("button",{onClick:X,disabled:w==="bulk"||!R,className:"w-full px-3 py-2 bg-[#104774] text-white rounded-md disabled:opacity-50 flex items-center justify-center gap-2 text-xs",children:w==="bulk"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):"Apply to Selected"})]})]})}),a.jsxs("div",{className:"px-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsxs("h2",{className:"text-sm font-semibold",children:["Payroll Records (",e.length,")"]}),a.jsx("span",{className:"text-xs text-slate-500",children:l.status==="pending_approval"?"Pending":l.status==="approved"?"Approved":l.status==="rejected"?"Rejected":"All"})]}),e.length===0?a.jsxs("div",{className:"text-center py-8 bg-white rounded-lg shadow",children:[a.jsx("svg",{className:"w-12 h-12 text-slate-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No payroll records found"})]}):a.jsx("div",{className:"space-y-3",children:e.map(te=>a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:S.has(te._id),onChange:()=>P(te._id),className:"h-4 w-4 text-blue-600 rounded",disabled:te.status==="approved"}),a.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:te.employee?.avatarUrl||"/default-avatar.png",alt:te.employee?.firstName}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-semibold",children:[te.employee?.firstName," ",te.employee?.lastName]}),a.jsx("div",{className:"text-xs text-slate-500",children:te.employee?.employeeId})]})]}),ce(te.status)]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs mb-3",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-500",children:"Period:"}),a.jsxs("div",{className:"font-medium",children:[ye[parseInt(te.month.split("-")[1],10)-1]," ",te.year]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-500",children:"Net Pay:"}),a.jsx("div",{className:"font-semibold text-green-600",children:J(te.basic)})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-slate-500",children:"Generated By:"}),a.jsx("div",{className:"font-medium",children:te.generatedBy||""})]})]}),a.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:[a.jsxs("button",{onClick:()=>{y(te),N(!0)},className:"flex-1 py-2 text-xs bg-blue-50 text-blue-600 rounded-md flex items-center justify-center gap-1",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Details"]}),te.status==="pending_approval"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>Z(te._id,"approve"),disabled:w===te._id,className:"flex-1 py-2 text-xs bg-green-50 text-green-600 rounded-md disabled:opacity-50 flex items-center justify-center gap-1",children:w===te._id?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-green-600"}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Roll Out"]})}),a.jsxs("button",{onClick:()=>{y(te),N(!0)},className:"flex-1 py-2 text-xs bg-red-50 text-red-600 rounded-md flex items-center justify-center gap-1",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]})]})]},te._id))})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsx("header",{className:"mb-4 md:mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800",children:"Payroll Approval"}),a.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Review and approve employee payrolls"})]}),a.jsxs("button",{onClick:de,className:"px-3 py-2 text-xs sm:text-sm rounded-md text-white primary-btn flex items-center gap-2 justify-center",style:{backgroundColor:Hm},children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:"Refresh"})]})]})}),a.jsxs("div",{className:"flex flex-col xl:flex-row gap-4 md:gap-6 mb-4 md:mb-6",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"grid grid-cols-2 xl:grid-cols-4 gap-3 md:gap-4",id:"stats-cards",children:[a.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg shadow border-l-4 border-blue-500 text-center min-w-[120px]",children:[a.jsx("h3",{className:"text-xs md:text-sm text-gray-500",children:"Total Payrolls"}),a.jsx("p",{className:"text-base md:text-lg font-bold",children:j.total})]}),a.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg shadow border-l-4 border-yellow-500 text-center min-w-[120px]",children:[a.jsx("h3",{className:"text-xs md:text-sm text-gray-500",children:"Pending Approval"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-yellow-600",children:j.pending})]}),a.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg shadow border-l-4 border-green-500 text-center min-w-[120px]",children:[a.jsx("h3",{className:"text-xs md:text-sm text-gray-500",children:"Approved"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-green-600",children:j.approved})]}),a.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg shadow border-l-4 border-red-500 text-center min-w-[120px]",children:[a.jsx("h3",{className:"text-xs md:text-sm text-gray-500",children:"Rejected"}),a.jsx("p",{className:"text-base md:text-lg font-bold text-red-600",children:j.rejected})]})]})}),a.jsx("div",{className:"flex-1 bg-white shadow rounded-lg border-l-4 border-blue-500",children:a.jsx("div",{className:"p-3 md:p-4",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Year"}),a.jsx("select",{name:"year",value:l.year,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ke.map(te=>a.jsx("option",{value:te,children:te},te))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Month"}),a.jsxs("select",{name:"month",value:l.month,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Months"}),ye.map((te,Ue)=>a.jsx("option",{value:Ue+1,children:te},Ue+1))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),a.jsxs("select",{name:"status",value:l.status,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending_approval",children:"Pending Approval"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Employee"}),a.jsxs("select",{name:"employee",value:l.employee,onChange:M,className:"w-full p-2 text-xs border border-slate-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Employees"}),u.map(te=>a.jsxs("option",{value:te._id,children:[te.firstName," ",te.lastName]},te._id))]})]}),a.jsx("div",{className:"flex justify-center sm:justify-start",children:a.jsxs("button",{onClick:F,className:"px-3 py-2 text-xs bg-slate-100 text-slate-600 rounded-md hover:bg-slate-200 transition-colors flex items-center gap-1 border",title:"Clear Filters",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})})]})})})]}),e.length>0&&a.jsxs("div",{className:"mb-4 md:mb-6 bg-blue-50 p-3 md:p-4 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"text-sm md:text-base font-semibold text-blue-800 mb-3",children:"Bulk Actions"}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:S.size===G,onChange:D,className:"h-4 w-4 text-blue-600 rounded"}),a.jsxs("span",{className:"text-xs md:text-sm text-slate-700",children:["Select all (",S.size," selected)"]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsxs("select",{value:R,onChange:te=>{O(te.target.value),K(te.target.value==="reject")},className:"p-2 border border-slate-300 rounded-md text-xs",children:[a.jsx("option",{value:"",children:"Select Action"}),a.jsx("option",{value:"approve",children:"Roll Out Selected"}),a.jsx("option",{value:"reject",children:"Reject Selected"})]}),L&&a.jsx("input",{type:"text",value:H,onChange:te=>V(te.target.value),placeholder:"Reason for rejection",className:"p-2 border border-slate-300 rounded-md flex-1 text-xs"}),a.jsx("button",{onClick:X,disabled:w==="bulk"||!R,className:"px-3 py-2 bg-[#104774] text-white rounded-md hover:bg-[#002442] disabled:opacity-50 flex items-center justify-center gap-2 text-xs",children:w==="bulk"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):"Apply to Selected"})]})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"px-3 md:px-4 py-3 border-b border-slate-200 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[a.jsxs("h2",{className:"text-sm md:text-base font-semibold text-gray-800",children:["Payroll Records (",e.length,")"]}),a.jsx("span",{className:"text-xs text-slate-500",children:l.status==="pending_approval"?"Pending Approval":l.status==="approved"?"Approved":l.status==="rejected"?"Rejected":"All Records"})]}),e.length===0?a.jsxs("div",{className:"text-center py-6 px-4",children:[a.jsx("svg",{className:"w-12 h-12 text-slate-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No payroll records found"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:l.status==="pending_approval"?"No payrolls pending approval":"Try adjusting your filters"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[a.jsx("thead",{className:"bg-slate-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:a.jsx("input",{type:"checkbox",checked:S.size===G,onChange:D,className:"h-4 w-4 text-blue-600 rounded"})}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase min-w-[150px]",children:"Employee"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase min-w-[100px]",children:"Period"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase min-w-[80px]",children:"Net Pay"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase min-w-[100px]",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase min-w-[100px]",children:"Generated By"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase min-w-[150px]",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:e.map(te=>a.jsxs("tr",{className:"hover:bg-slate-50",children:[a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("input",{type:"checkbox",checked:S.has(te._id),onChange:()=>P(te._id),className:"h-4 w-4 text-blue-600 rounded",disabled:te.status==="approved",title:te.status==="approved"?"Already Rolled Out":void 0})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-6 w-6 md:h-8 md:w-8",children:a.jsx("img",{className:"h-6 w-6 md:h-8 md:w-8 rounded-full object-cover",src:te.employee?.avatarUrl||"/default-avatar.png",alt:te.employee?.firstName})}),a.jsxs("div",{className:"ml-2",children:[a.jsxs("div",{className:"text-xs md:text-sm font-medium text-slate-900",children:[te.employee?.firstName," ",te.employee?.lastName]}),a.jsx("div",{className:"text-xs text-slate-400",children:te.employee?.email||""}),a.jsx("div",{className:"text-xs text-slate-500",children:te.employee?.employeeId})]})]})}),a.jsxs("td",{className:"px-3 py-2 whitespace-nowrap",children:[a.jsxs("div",{className:"text-xs md:text-sm text-slate-900",children:[ye[parseInt(te.month.split("-")[1],10)-1]," ",te.year]}),te.generatedAt&&a.jsx("div",{className:"text-xs text-slate-500",children:me(te.generatedAt)})]}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:a.jsx("div",{className:"text-xs md:text-sm font-semibold text-green-600",children:J(te.basic)})}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:ce(te.status)}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-slate-500",children:te.generatedBy||""}),a.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-1",children:[a.jsxs("button",{onClick:()=>{y(te),N(!0)},className:"text-blue-600 hover:text-blue-900 flex items-center gap-1 justify-center sm:justify-start p-1",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),a.jsx("span",{className:"text-xs",children:"Review"})]}),te.status==="pending_approval"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>Z(te._id,"approve"),disabled:w===te._id,className:"text-green-600 hover:text-green-900 disabled:opacity-50 flex items-center gap-1 justify-center sm:justify-start p-1",children:w===te._id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-green-600"}),a.jsx("span",{className:"text-xs",children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),a.jsx("span",{className:"text-xs",children:"Roll Out"})]})}),a.jsxs("button",{onClick:()=>{y(te),N(!0)},className:"text-red-600 hover:text-red-900 flex items-center gap-1 justify-center sm:justify-start p-1",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a.jsx("span",{className:"text-xs",children:"Reject"})]})]})]})})]},te._id))})]})})]})]}),v&&x&&a.jsx(PA,{isOpen:v,onClose:()=>N(!1),payroll:x,onApproveReject:Z,actionLoading:w,formatCurrency:J,isHR:!1,actionLabel:"Roll Out"})]})},XP=({isOpen:n,onClose:e,onSuccess:t,token:s,leaveBalance:r})=>{const[l,c]=_.useState([]),[u,h]=_.useState({leaveType:"",fromDate:"",toDate:"",reason:"",totalDays:0}),[m,p]=_.useState({}),[x,y]=_.useState(!1),[v,N]=_.useState(!1);_.useEffect(()=>{n&&w()},[n]),_.useEffect(()=>{n||(h({leaveType:"",fromDate:"",toDate:"",reason:"",totalDays:0}),p({}))},[n]);const w=async()=>{try{const R=((await xe.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${s}`}})).data||[]).filter(O=>O.isActive);c(R),R.length>0&&!u.leaveType&&h(O=>({...O,leaveType:R[0].name}))}catch(T){console.error("Error fetching leave types:",T)}},A=(T,R)=>{if(!T||!R)return 0;const O=new Date(T),H=new Date(R);if(O>H)return 0;let V=0;const L=new Date(O);for(;L<=H;){const K=L.getDay();K!==0&&K!==6&&V++,L.setDate(L.getDate()+1)}return V};_.useEffect(()=>{if(u.fromDate&&u.toDate){N(!0);const T=A(u.fromDate,u.toDate);h(R=>({...R,totalDays:T})),N(!1)}else h(T=>({...T,totalDays:0}))},[u.fromDate,u.toDate]);const j=T=>{const{name:R,value:O}=T.target;h(H=>({...H,[R]:O})),m[R]&&p(H=>({...H,[R]:""}))},C=()=>{const T={},R=new Date;if(R.setHours(0,0,0,0),u.leaveType||(T.leaveType="Leave type is required"),u.fromDate?new Date(u.fromDate)<R&&(T.fromDate="Cannot apply for backdated leaves"):T.fromDate="From date is required",u.toDate?u.fromDate&&new Date(u.toDate)<new Date(u.fromDate)&&(T.toDate="To date cannot be before from date"):T.toDate="To date is required",u.reason.trim()?u.reason.length>500&&(T.reason="Reason cannot exceed 500 characters"):T.reason="Reason is required",u.leaveType&&u.totalDays>0){const O=r[u.leaveType]||0;O<u.totalDays&&(T.leaveType=`Insufficient ${u.leaveType} leave balance! You have ${O} days left.`)}return p(T),Object.keys(T).length===0},S=async T=>{if(T.preventDefault(),!!C()){y(!0);try{await xe.post("/leave/create",u,{headers:{Authorization:`Bearer ${s}`}}),t()}catch(R){console.error("Error applying leave:",R);const O=R.response?.data?.message||"Error applying leave. Please try again.";p({submit:O})}finally{y(!1)}}};return n?a.jsx("div",{className:"fixed inset-0  bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md relative max-h-[90vh] overflow-y-auto shadow-xl border border-gray-200",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(Fo,{size:24})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Apply for Leave"}),a.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Fill in the details to apply for leave"}),m.submit&&a.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm flex items-center",children:[a.jsx(ms,{size:16,className:"mr-2"}),m.submit]}),a.jsxs("form",{onSubmit:S,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"Leave Type"}),a.jsxs("select",{name:"leaveType",value:u.leaveType,onChange:j,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",children:[a.jsx("option",{value:"",children:"Select Leave Type"}),l.map(T=>a.jsxs("option",{value:T.name,children:[T.name.replace(/_/g," ").replace(/\b\w/g,R=>R.toUpperCase()),r[T.name]!==void 0&&` (${r[T.name]} days available)`]},T._id))]}),m.leaveType&&a.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[a.jsx(ms,{size:12,className:"mr-1"}),m.leaveType]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"From Date"}),a.jsx("input",{type:"date",name:"fromDate",value:u.fromDate,onChange:j,min:new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm"}),m.fromDate&&a.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[a.jsx(ms,{size:12,className:"mr-1"}),m.fromDate]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"To Date"}),a.jsx("input",{type:"date",name:"toDate",value:u.toDate,onChange:j,min:u.fromDate||new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm"}),m.toDate&&a.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[a.jsx(ms,{size:12,className:"mr-1"}),m.toDate]})]})]}),u.fromDate&&u.toDate&&a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-blue-700 font-medium",children:"Working Days:"}),a.jsx("span",{className:"text-blue-800 font-semibold",children:v?a.jsxs("span",{className:"flex items-center",children:[a.jsx(jn,{size:14,className:"mr-1 animate-pulse"}),"Calculating..."]}):`${u.totalDays} day${u.totalDays!==1?"s":""}`})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"(Excludes weekends)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"Reason"}),a.jsx("textarea",{name:"reason",value:u.reason,onChange:j,rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",placeholder:"Please provide a reason for your leave"}),a.jsxs("div",{className:"flex justify-between mt-1",children:[a.jsxs("div",{className:"text-xs text-gray-500",children:[u.reason.length,"/500 characters"]}),m.reason&&a.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[a.jsx(ms,{size:12,className:"mr-1"}),m.reason]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm font-medium transition-colors",disabled:x,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 rounded-lg bg-[#104774] text-white hover:bg-[#0d3a61] text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Applying..."]}):a.jsxs(a.Fragment,{children:[a.jsx($s,{size:16,className:"mr-2"}),"Apply for Leave"]})})]})]})]})}):null},QP=()=>{const{token:n,user:e}=os(),[t,s]=_.useState({attendance:{},leaveBalance:{},attendanceSummary:{},leaveApplications:[]}),[r,l]=_.useState(!0),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[p,x]=_.useState(!1),[y,v]=_.useState(!1),[N,w]=_.useState([]),[A,j]=_.useState([]),C=il(),S=(Y,de="info",be=4e3)=>{const I=Date.now()+Math.random();j(Z=>[...Z,{id:I,message:Y,type:de}]),setTimeout(()=>j(Z=>Z.filter(X=>X.id!==I)),be)},T=async()=>{try{u(!0);const de=(await xe.get("/attendance/today",{headers:{Authorization:`Bearer ${n}`}})).data||{},I=(await xe.get("/leave/balance",{headers:{Authorization:`Bearer ${n}`}})).data?.balance||{},X=(await xe.get("/attendance/history",{headers:{Authorization:`Bearer ${n}`}})).data||[],P=new Date,D=new Date;D.setDate(P.getDate()-30);const M={present:X.filter(me=>me.status==="accepted"&&new Date(me.date)>=D).length,absent:0,leave:X.filter(me=>me.status==="on_leave"&&new Date(me.date)>=D).length,holidays:0},J=(await xe.get("/leave/my-requests",{headers:{Authorization:`Bearer ${n}`}})).data||[];s({attendance:de,leaveBalance:I,attendanceSummary:M,leaveApplications:J})}catch(Y){console.error("Error fetching dashboard data:",Y)}finally{l(!1),u(!1)}},R=async()=>{try{const de=((await xe.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${n}`}})).data||[]).filter(be=>be.isActive);w(de)}catch(Y){console.error("Error fetching leave types:",Y)}};_.useEffect(()=>{T(),R()},[]);const O=()=>{m(!1),T()},H=()=>{x(!1),T()},V=()=>{v(!1),T()},L=Y=>Y?fa(new Date(Y),"dd MMM yy"):"",K=Y=>Y.replace(/_/g," ").replace(/\b\w/g,de=>de.toUpperCase());if(r)return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})});const G=Math.round(t.attendanceSummary.present/26*100);return a.jsxs("div",{className:"max-h-screen  bg-gray-50",children:[a.jsx(Ji,{notifications:A}),a.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"Employee Dashboard"}),a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Welcome back, ",e?.name,"! Here's your overview for today."]})]}),a.jsxs("button",{onClick:T,disabled:c,className:"bg-[#104774] text-white px-3 py-1.5 rounded text-xs flex items-center disabled:opacity-50 w-full sm:w-auto justify-center",children:[a.jsx(Fi,{className:`w-3 h-3 mr-1 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow border border-slate-200 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Today's Attendance"}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${t.attendance.status==="accepted"?"bg-green-100 text-green-700":t.attendance.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.attendance.status?t.attendance.status.charAt(0).toUpperCase()+t.attendance.status.slice(1):"Pending"})]}),a.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Log In:"}),a.jsx("span",{className:"font-medium",children:t.attendance.checkIn?new Date(t.attendance.checkIn).toLocaleTimeString():"--:--:--"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Log Out:"}),a.jsx("span",{className:"font-medium",children:t.attendance.checkOut?new Date(t.attendance.checkOut).toLocaleTimeString():"Pending"})]})]}),t.attendance.checkOut&&a.jsx("div",{className:"w-full text-center py-1.5 bg-gray-100 text-gray-700 rounded text-xs mt-12",children:"Session Ended"})]}),a.jsxs("div",{className:"mt-3",children:[!t.attendance.checkOut&&!t.attendance.checkIn&&a.jsx("button",{onClick:()=>m(!0),className:"w-full bg-[#104774] text-white py-1.5 rounded text-xs",children:"Mark Attendance"}),!t.attendance.checkOut&&t.attendance.checkIn&&a.jsx("button",{onClick:()=>x(!0),className:"w-full bg-[#104774] text-white py-1.5 rounded text-xs",children:"Log Out"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow border border-slate-200 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-2",children:"Leaves Summary"}),a.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Total Leaves:"}),a.jsx("span",{className:"font-medium",children:(t.leaveBalance.sick||0)+(t.leaveBalance.casual||0)+(t.leaveBalance.paid||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Sick:"}),a.jsx("span",{className:"font-medium text-red-500",children:t.leaveBalance.sick||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Casual:"}),a.jsx("span",{className:"font-medium text-blue-500",children:t.leaveBalance.casual||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Paid:"}),a.jsx("span",{className:"font-medium text-green-500",children:t.leaveBalance.paid||0})]})]})]}),a.jsx("button",{onClick:()=>v(!0),className:"w-full bg-[#104774] text-white py-1.5 rounded text-xs mt-3",children:"Apply for Leave"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow border border-slate-200 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-2",children:"Performance"}),a.jsxs("div",{className:"space-y-1 text-xs mb-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-slate-600",children:"Attendance:"}),a.jsxs("span",{className:"font-medium",children:[G,"%"]})]}),a.jsx("div",{className:"h-1 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${G}%`}})}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Present:"}),a.jsx("span",{className:"font-medium",children:t.attendanceSummary.present||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Leaves Taken:"}),a.jsx("span",{className:"font-medium",children:t.attendanceSummary.leave||0})]})]})]}),a.jsx("button",{onClick:()=>C("/employee/attendance"),className:"w-full bg-[#104774] text-white py-1.5 rounded text-xs mt-3",children:"View Attendance"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow border border-slate-200 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-2",children:"Recent Leaves"}),a.jsxs("div",{className:"space-y-2 text-xs mb-3 max-h-[80px] overflow-y-auto",children:[t.leaveApplications.slice(0,2).map((Y,de)=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:K(Y.leaveType)}),a.jsxs("div",{className:"text-slate-600",children:[L(Y.fromDate)," - ",L(Y.toDate)]})]}),a.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${Y.status==="approved"?"bg-green-100 text-green-700":Y.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:Y.status})]},de)),t.leaveApplications.length===0&&a.jsx("div",{className:"text-slate-500 text-center py-1",children:"No leaves"})]})]}),a.jsx("button",{onClick:()=>C("/employee/leaves"),className:"w-full bg-[#104774] text-white py-1.5 rounded text-xs mt-3",children:"View All Leaves"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 shadow border border-slate-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Attendance Summary"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Last 30 Days"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"text-center p-2 bg-green-50 rounded border border-green-100",children:[a.jsx("div",{className:"font-bold text-green-600 text-sm",children:t.attendanceSummary.present||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"Present"})]}),a.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded border border-blue-100",children:[a.jsx("div",{className:"font-bold text-blue-600 text-sm",children:t.attendanceSummary.leave||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"On Leave"})]}),a.jsxs("div",{className:"text-center p-2 bg-yellow-50 rounded border border-yellow-100",children:[a.jsx("div",{className:"font-bold text-yellow-600 text-sm",children:"25"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Working Days"})]}),a.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded border border-purple-100",children:[a.jsx("div",{className:"font-bold text-purple-600 text-sm",children:t.attendanceSummary.holidays||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"Holidays"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-3 shadow border border-blue-100",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Leave Balance"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Remaining"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"text-center p-2 bg-white rounded shadow-sm border border-slate-100",children:[a.jsx("div",{className:"font-bold text-red-500 text-sm",children:t.leaveBalance.sick||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"Sick"})]}),a.jsxs("div",{className:"text-center p-2 bg-white rounded shadow-sm border border-slate-100",children:[a.jsx("div",{className:"font-bold text-blue-500 text-sm",children:t.leaveBalance.casual||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"Casual"})]}),a.jsxs("div",{className:"text-center p-2 bg-white rounded shadow-sm border border-slate-100",children:[a.jsx("div",{className:"font-bold text-green-500 text-sm",children:t.leaveBalance.paid||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"Paid"})]}),a.jsxs("div",{className:"text-center p-2 bg-white rounded shadow-sm border border-slate-100",children:[a.jsx("div",{className:"font-bold text-purple-500 text-sm",children:t.leaveBalance.other||0}),a.jsx("div",{className:"text-xs text-slate-600",children:"Other"})]})]})]})]}),a.jsx(Iu,{isOpen:h,onClose:()=>m(!1),onSuccess:O,token:n,addNotification:S}),a.jsx(Bu,{isOpen:p,onClose:()=>x(!1),onSuccess:H,attendanceData:t.attendance,token:n,addNotification:S}),a.jsx(XP,{isOpen:y,onClose:()=>v(!1),onSuccess:V,token:n,leaveBalance:t.leaveBalance,leaveTypes:N,addNotification:S})]})},ZP=()=>{const{token:n,user:e}=os(),t=il(),[s,r]=_.useState(null),[l,c]=_.useState([]),[u,h]=_.useState(null),[m,p]=_.useState({}),[x,y]=_.useState(!0),[v,N]=_.useState(!1),[w,A]=_.useState(!1),[j,C]=_.useState(!1);_.useEffect(()=>{S(),T()},[]);const S=async()=>{try{N(!0);const[z,G,Y]=await Promise.all([xe.get("/dashboard/hr/stats"),xe.get("/dashboard/hr/attendance-log"),xe.get("/dashboard/hr/pending-approvals")]);r(z.data.data),c(G.data.data),h(Y.data.data)}catch(z){console.error("Error fetching HR dashboard data:",z),alert("Error loading dashboard data")}finally{y(!1),N(!1)}},T=async()=>{try{const z=await xe.get("/attendance/hr/today",{headers:{Authorization:`Bearer ${n}`}});p(z.data||{})}catch(z){console.error("Error fetching HR attendance:",z)}},R=z=>{p(z),A(!1)},O=z=>{p(z),C(!1)},H=async z=>{try{await xe.patch(`/dashboard/hr/approve-attendance/${z}`,{status:"approved"}),alert("Attendance approved!"),S(),T()}catch(G){alert(G.response?.data?.message||"Error approving attendance")}},V=async z=>{try{await xe.patch(`/dashboard/hr/approve-attendance/${z}`,{status:"rejected"}),alert("Attendance rejected!"),S(),T()}catch(G){alert(G.response?.data?.message||"Error rejecting attendance")}},L=()=>A(!0),K=()=>C(!0);return x?a.jsx("div",{className:"max-h-[80vh] bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):a.jsxs("div",{className:"max-h-screen bg-gray-50 ",children:[a.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-800",children:"HR Dashboard"}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:["Welcome back, ",e?.name,"! Here's your overview for today."]})]}),a.jsxs("button",{onClick:()=>{S(),T()},disabled:v,className:"bg-[#104774] text-white px-3 py-2 rounded-md flex items-center justify-center disabled:opacity-50 w-full sm:w-auto text-sm",children:[a.jsx(Fi,{className:`w-3 h-3 mr-2 ${v?"animate-spin":""}`}),v?"Refreshing...":"Refresh Data"]})]}),a.jsxs("div",{className:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[a.jsxs("div",{onClick:()=>{m.checkIn?m.checkIn&&!m.checkOut&&K():L()},className:"bg-gradient-to-r from-yellow-100 to-yellow-200 rounded-xl p-3 shadow-md hover:shadow-lg transition-all duration-200 border border-slate-200 cursor-pointer",children:[a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Your Attendance"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m.status==="accepted"?"bg-green-100 text-green-700":m.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:m.status?m.status.charAt(0).toUpperCase()+m.status.slice(1):"Not marked"})]}),a.jsxs("div",{className:"space-y-1 text-xs text-slate-600",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Log In:"}),a.jsx("span",{className:"font-medium text-slate-900",children:m.checkIn?new Date(m.checkIn).toLocaleTimeString():"Not logged in"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Log Out:"}),a.jsx("span",{className:"font-medium text-slate-900",children:m.checkOut?new Date(m.checkOut).toLocaleTimeString():"Pending"})]})]}),a.jsx("div",{className:"text-center text-xs text-slate-700 mt-2 font-medium",children:m.checkOut?"Today's Session Ended":m.checkIn?"Click to Log Out":"Click to Mark Attendance"})]}),a.jsxs("div",{onClick:()=>t("/manage-employees"),className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-xl p-3 shadow-md hover:shadow-lg transition-all duration-200 border border-slate-200 cursor-pointer",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:"Total Employees"}),a.jsx("div",{className:"text-xl font-bold text-slate-800 mb-1",children:s?.totalEmployees||0}),a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Active"})]}),a.jsxs("div",{onClick:()=>t("/hr/leaves"),className:"bg-gradient-to-r from-orange-100 to-orange-200 rounded-xl p-3 shadow-md hover:shadow-lg transition-all duration-200 border border-slate-200 cursor-pointer",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-2",children:"Pending Approvals"}),a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-lg font-bold text-slate-800",children:u?.leaveRequests||0}),a.jsx("span",{className:"text-xs text-slate-600",children:"Leave Requests"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-lg font-bold text-slate-800",children:u?.attendance||0}),a.jsx("span",{className:"text-xs text-slate-600",children:"Attendance"})]})]}),a.jsxs("div",{onClick:()=>t("/hr/payroll"),className:"bg-gradient-to-r from-green-100 to-green-200 rounded-xl p-3 shadow-md hover:shadow-lg transition-all duration-200 border border-slate-200 cursor-pointer",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:"Payroll Processed"}),a.jsxs("div",{className:"text-xl font-bold text-slate-800 mb-1",children:[s?.processedPayroll||0,"/",s?.totalEmployees||0]}),a.jsx("p",{className:"text-xs text-slate-600",children:"This Month"})]}),a.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-purple-200 rounded-xl p-3 shadow-md hover:shadow-lg transition-all duration-200 border border-slate-200 cursor-pointer",children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm mb-1",children:"New Joiners"}),a.jsx("div",{className:"text-xl font-bold text-slate-800 mb-1",children:s?.newJoiners||0}),a.jsx("p",{className:"text-xs text-slate-600",children:"This Week"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md hover:shadow-lg transition-all duration-200 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-base font-semibold text-slate-800",children:"Log in/Out"}),a.jsx(jn,{className:"w-4 h-4 text-slate-400"})]}),a.jsx("div",{className:"block lg:hidden space-y-3",children:l.map((z,G)=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Name"}),a.jsx("p",{className:"text-sm font-medium text-slate-800 truncate",children:z.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Team"}),a.jsx("p",{className:"text-sm text-slate-600 truncate",children:z.team})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Log In"}),a.jsx("p",{className:"text-sm text-slate-600",children:z.checkIn?new Date(z.checkIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Log Out"}),a.jsx("p",{className:"text-sm text-slate-600",children:z.checkOut?new Date(z.checkOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Task"}),a.jsx("p",{className:"text-sm text-slate-600 truncate",children:z.task||"-"})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Notes"}),a.jsx("p",{className:"text-sm text-slate-600 truncate",children:z.notes||"-"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="Logged in"?"bg-green-100 text-green-700":z.status==="Pending"?"bg-yellow-100 text-yellow-700":z.status==="Rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:z.status}),z.status==="Pending"&&a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("button",{onClick:()=>H(z._id),className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1 transition-colors",children:[a.jsx(ps,{className:"w-3 h-3"}),"Approve"]}),a.jsxs("button",{onClick:()=>V(z._id),className:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1 transition-colors",children:[a.jsx(Hs,{className:"w-3 h-3"}),"Reject"]})]})]})]},z._id||G))}),a.jsx("div",{className:"hidden lg:block overflow-x-auto rounded-lg border border-slate-200",children:a.jsxs("table",{className:"w-full border-collapse",children:[a.jsx("thead",{className:"bg-[#104774] text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Name"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Team"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Log in"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Log out"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Task"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Notes"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Status"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide",children:"Action"})]})}),a.jsx("tbody",{children:l.map((z,G)=>a.jsxs("tr",{className:`${G%2===0?"bg-white":"bg-slate-50"} hover:bg-slate-100 transition-colors`,children:[a.jsx("td",{className:"px-3 py-2 text-sm text-slate-800 max-w-[120px] truncate",children:z.name}),a.jsx("td",{className:"px-3 py-2 text-sm text-slate-600 max-w-[100px] truncate",children:z.team}),a.jsx("td",{className:"px-3 py-2 text-sm text-slate-600 whitespace-nowrap",children:z.checkIn?new Date(z.checkIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"}),a.jsx("td",{className:"px-3 py-2 text-sm text-slate-600 whitespace-nowrap",children:z.checkOut?new Date(z.checkOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"}),a.jsx("td",{className:"px-3 py-2 text-sm text-slate-600 max-w-[120px] truncate",children:z.task||"-"}),a.jsx("td",{className:"px-3 py-2 text-sm text-slate-600 max-w-[120px] truncate",children:z.notes||"-"}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="Logged in"?"bg-green-100 text-green-700":z.status==="Pending"?"bg-yellow-100 text-yellow-700":z.status==="Rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:z.status})}),a.jsx("td",{className:"px-3 py-2",children:z.status==="Pending"&&a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("button",{onClick:()=>H(z._id),className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1 transition-colors",children:[a.jsx(ps,{className:"w-3 h-3"}),"Approve"]}),a.jsxs("button",{onClick:()=>V(z._id),className:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1 transition-colors",children:[a.jsx(Hs,{className:"w-3 h-3"}),"Reject"]})]})})]},z._id||G))})]})})]}),w&&a.jsx(Iu,{isOpen:w,onClose:()=>A(!1),onSuccess:R,token:n,addNotification:z=>alert(z),basePath:"/attendance/hr"}),j&&a.jsx(Bu,{isOpen:j,onClose:()=>C(!1),onSuccess:O,attendanceData:m,token:n,addNotification:z=>alert(z),basePath:"/attendance/hr"})]})},KP=()=>{const[n,e]=_.useState(null),[t,s]=_.useState([]),[r,l]=_.useState(!0),[c,u]=_.useState(!1),h=il();_.useEffect(()=>{m()},[]);const m=async()=>{try{u(!0);const[A,j]=await Promise.all([xe.get("/dashboard/admin/stats"),xe.get("/dashboard/admin/attendance-log")]);e(A.data.data),s(j.data.data)}catch(A){console.error("Error fetching admin dashboard data:",A),alert("Error loading dashboard data")}finally{l(!1),u(!1)}},p=async A=>{try{await xe.patch(`/dashboard/admin/approve-attendance/${A}`),m()}catch{alert("Error approving attendance")}},x=async A=>{try{await xe.patch(`/dashboard/admin/reject-attendance/${A}`),m()}catch{alert("Error rejecting attendance")}},y=()=>h("/admin/attendance"),v=()=>h("/admin/leaves"),N=()=>h("/admin/payroll-approval"),w=A=>A?new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-";return r?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):a.jsxs("div",{className:"max-h-screen  bg-gray-50",children:[a.jsxs("div",{className:"mb-4 md:mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[a.jsxs("div",{className:"text-center sm:text-left",children:[a.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-800",children:"Admin Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1 text-xs sm:text-sm",children:"System overview and management"})]}),a.jsxs("button",{onClick:m,disabled:c,className:"bg-[#104774] text-white px-3 py-2 rounded-md flex items-center justify-center disabled:opacity-50 w-full sm:w-auto text-xs sm:text-sm",children:[a.jsx(Fi,{className:`w-3 h-3 sm:w-4 sm:h-4 mr-2 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh Data"]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 md:gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 md:p-4 shadow-sm border border-slate-200",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-gradient-to-r from-blue-100 to-blue-200 rounded-md flex items-center justify-center mr-2",children:a.jsx(jn,{className:"w-3 h-3 md:w-4 md:h-4 text-blue-600"})}),a.jsx("h3",{className:"font-semibold text-slate-800 text-sm md:text-base",children:"Today's Attendance"})]}),a.jsxs("div",{className:"space-y-1 mb-3",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Present Today:"}),a.jsx("span",{className:"font-bold text-green-600",children:n?.attendance?.present||0})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Absent Today:"}),a.jsx("span",{className:"font-bold text-red-600",children:n?.attendance?.absent||0})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"On Leave:"}),a.jsx("span",{className:"font-bold text-orange-600",children:n?.attendance?.onLeave||0})]})]}),a.jsxs("button",{onClick:y,className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-1.5 px-3 rounded-md font-medium flex items-center justify-center transition-all duration-300 text-xs",children:["Go to Attendance",a.jsx(im,{className:"w-3 h-3 ml-1"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 md:p-4 shadow-sm border border-slate-200",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-gradient-to-r from-green-100 to-green-200 rounded-md flex items-center justify-center mr-2",children:a.jsx($s,{className:"w-3 h-3 md:w-4 md:h-4 text-green-600"})}),a.jsx("h3",{className:"font-semibold text-slate-800 text-sm md:text-base",children:"Leaves Summary"})]}),a.jsxs("div",{className:"space-y-1 mb-3",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Pending Leaves:"}),a.jsx("span",{className:"font-bold text-yellow-600",children:n?.leaves?.pending||0})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Approved:"}),a.jsx("span",{className:"font-bold text-green-600",children:n?.leaves?.approved||0})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Rejected:"}),a.jsx("span",{className:"font-bold text-red-600",children:n?.leaves?.rejected||0})]})]}),a.jsxs("button",{onClick:v,className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-1.5 px-3 rounded-md font-medium flex items-center justify-center transition-all duration-300 text-xs",children:["Go to Leaves",a.jsx(im,{className:"w-3 h-3 ml-1"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 md:p-4 shadow-sm border border-slate-200",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-gradient-to-r from-purple-100 to-purple-200 rounded-md flex items-center justify-center mr-2",children:a.jsx(r1,{className:"w-3 h-3 md:w-4 md:h-4 text-purple-600"})}),a.jsx("h3",{className:"font-semibold text-slate-800 text-sm md:text-base",children:"Payroll Summary"})]}),a.jsxs("div",{className:"space-y-1 mb-3",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Employees:"}),a.jsx("span",{className:"font-bold text-slate-800",children:n?.payroll?.employees||0})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-600",children:"Status:"}),a.jsx("span",{className:"font-bold text-blue-600",children:n?.payroll?.status||"Not available"})]})]}),a.jsxs("button",{onClick:N,className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-1.5 px-3 rounded-md font-medium flex items-center justify-center transition-all duration-300 text-xs",children:["Go to Payroll",a.jsx(im,{className:"w-3 h-3 ml-1"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 md:p-4 shadow-sm border border-slate-200 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"text-sm md:text-base font-semibold text-slate-800",children:"Log in/Out"}),a.jsx(jn,{className:"w-4 h-4 text-slate-400"})]}),a.jsx("div",{className:"block md:hidden space-y-4",children:t.map((A,j)=>a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Name"}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:A.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Team"}),a.jsx("p",{className:"text-sm text-slate-700",children:A.team})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Login"}),a.jsx("p",{className:"text-sm text-slate-700",children:w(A.checkIn)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Logout"}),a.jsx("p",{className:"text-sm text-slate-700",children:w(A.checkOut)})]})]}),a.jsxs("div",{className:"space-y-2 mb-3 bg-slate-50 p-3 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Task"}),a.jsx("p",{className:"text-sm text-slate-700",children:A.task||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Work Progress"}),a.jsx("p",{className:"text-sm text-slate-700",children:A.workProgress||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-400 font-semibold",children:"Logout Notes"}),a.jsx("p",{className:"text-sm text-slate-700",children:A.notes||"-"})]})]}),a.jsx("div",{className:"flex justify-start items-center mb-3",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${A.status==="Logged in"?"bg-green-100 text-green-800":A.status==="Pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:A.status})}),A.action==="Approve"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>p(A._id),className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[a.jsx(ps,{className:"w-4 h-4"})," Approve"]}),a.jsxs("button",{onClick:()=>x(A._id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[a.jsx(Hs,{className:"w-4 h-4"})," Reject"]})]})]},j))}),a.jsx("div",{className:"hidden md:block overflow-x-auto",children:a.jsxs("table",{className:"w-full border-collapse min-w-[600px]",children:[a.jsx("thead",{className:"bg-[#104774] text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Name"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Team"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Login"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Logout"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Task"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Work Progress"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Logout Notes"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Status"}),a.jsx("th",{className:"px-2 py-1.5 text-left text-xs font-semibold uppercase",children:"Action"})]})}),a.jsx("tbody",{children:t.map((A,j)=>a.jsxs("tr",{className:`${j%2===0?"bg-white":"bg-slate-50"} hover:bg-slate-100`,children:[a.jsx("td",{className:"px-2 py-1.5 text-xs font-medium text-slate-800 max-w-[100px] truncate",children:A.name}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600 max-w-[80px] truncate",children:A.team}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600",children:w(A.checkIn)}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600",children:w(A.checkOut)}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600 max-w-[120px] truncate",children:A.task||"-"}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600 max-w-[120px] truncate",children:A.workProgress||"-"}),a.jsx("td",{className:"px-2 py-1.5 text-xs text-slate-600 max-w-[120px] truncate",children:A.notes||"-"}),a.jsx("td",{className:"px-2 py-1.5",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.status==="Logged in"?"bg-green-100 text-green-700":A.status==="Pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:A.status})}),a.jsx("td",{className:"px-2 py-1.5",children:A.action==="Approve"&&a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("button",{onClick:()=>p(A._id),className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[a.jsx(ps,{className:"w-3 h-3"})," Approve"]}),a.jsxs("button",{onClick:()=>x(A._id),className:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs font-medium flex items-center gap-1",children:[a.jsx(Hs,{className:"w-3 h-3"})," Reject"]})]})})]},j))})]})})]})]})},JP=()=>{const[n,e]=_.useState(""),[t,s]=_.useState(""),[r,l]=_.useState(""),[c,u]=_.useState(""),[h,m]=_.useState(!1),[p,x]=_.useState(!1),[y,v]=_.useState(!1),[N,w]=_.useState(""),[A,j]=_.useState(""),[C,S]=_.useState(1),{requestPasswordReset:T,verifyOtp:R,resetPassword:O}=os(),H=async z=>{if(z.preventDefault(),w(""),j(""),v(!0),!n){w("Please enter your email address"),v(!1);return}if(!n.includes("@")){w("Please enter a valid email address"),v(!1);return}try{await T(n),j("OTP has been sent to your email"),S(2)}catch(G){w(G.response?.data?.message||"Failed to send OTP")}finally{v(!1)}},V=async z=>{if(z.preventDefault(),w(""),j(""),v(!0),!t||t.length!==6){w("Please enter a valid 6-digit OTP"),v(!1);return}try{await R(n,t),j("OTP verified successfully"),S(3)}catch(G){w(G.response?.data?.message||"Invalid OTP")}finally{v(!1)}},L=async z=>{if(z.preventDefault(),w(""),j(""),v(!0),!r||!c){w("Please fill in all fields"),v(!1);return}if(r!==c){w("Passwords do not match"),v(!1);return}if(r.length<6){w("Password must be at least 6 characters long"),v(!1);return}try{await O(n,t,r),j("Password has been reset successfully"),setTimeout(()=>{window.location.href="/login"},2e3)}catch(G){w(G.response?.data?.message||"Failed to reset password")}finally{v(!1)}},K=()=>{C===1?window.location.href="/login":(S(C-1),w(""),j(""))};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 flex items-center justify-center p-3 sm:p-4",children:a.jsxs("div",{className:"max-w-sm w-full space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-[#104774] rounded-full flex items-center justify-center mb-3",children:a.jsx(Ur,{className:"h-5 w-5 text-white"})}),a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-1",children:[C===1&&"Reset Your Password",C===2&&"Enter OTP",C===3&&"Create New Password"]}),a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:[C===1&&"Enter your email to receive a verification code",C===2&&"Enter the 6-digit code sent to your email",C===3&&"Enter your new password"]})]}),a.jsxs("button",{onClick:K,className:"flex items-center text-xs sm:text-sm text-[#104774] hover:text-[#0d385d] font-medium transition-colors duration-200",children:[a.jsx(oC,{className:"h-3 w-3 mr-1"}),"Back"]}),a.jsx("div",{className:"bg-white py-4 sm:py-6 px-4 sm:px-6 shadow-lg rounded-lg border border-gray-100",children:a.jsxs("form",{onSubmit:C===1?H:C===2?V:L,className:"space-y-4",children:[N&&a.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[a.jsx(ms,{className:"h-4 w-4 text-red-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-red-700",children:N})]}),A&&a.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx(ps,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-green-700",children:A})]}),C===1&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Email address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:a.jsx(l1,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full pl-8 pr-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#104774] focus:border-[#104774] text-xs sm:text-sm transition-colors duration-200",placeholder:"Enter your email",value:n,onChange:z=>e(z.target.value),disabled:y})]})]}),C===2&&a.jsxs("div",{children:[a.jsx("label",{htmlFor:"otp",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:a.jsx(Ur,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{id:"otp",name:"otp",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",autoComplete:"one-time-code",required:!0,className:"appearance-none relative block w-full pl-8 pr-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#104774] focus:border-[#104774] text-xs sm:text-sm transition-colors duration-200 tracking-widest text-center",placeholder:"Enter 6-digit code",value:t,onChange:z=>{const G=z.target.value.replace(/\D/g,"");s(G.slice(0,6))},disabled:y})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter the 6-digit code sent to ",n]})]}),C===3&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:a.jsx(Ur,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full pl-8 pr-8 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#104774] focus:border-[#104774] text-xs sm:text-sm transition-colors duration-200",placeholder:"Enter new password",value:r,onChange:z=>l(z.target.value),disabled:y}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-2 flex items-center",onClick:()=>m(!h),disabled:y,children:h?a.jsx(Xm,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"}):a.jsx(Zr,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-xs sm:text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:a.jsx(Ur,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full pl-8 pr-8 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#104774] focus:border-[#104774] text-xs sm:text-sm transition-colors duration-200",placeholder:"Confirm new password",value:c,onChange:z=>u(z.target.value),disabled:y}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-2 flex items-center",onClick:()=>x(!p),disabled:y,children:p?a.jsx(Xm,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"}):a.jsx(Zr,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:y,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-xs sm:text-sm font-medium rounded-lg text-white bg-[#104774] hover:bg-[#0d385d] focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-[#104774] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:y?a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-xs sm:text-sm",children:C===1?"Sending OTP...":C===2?"Verifying...":"Resetting..."})]}):a.jsxs(a.Fragment,{children:[C===1&&"Send OTP",C===2&&"Verify OTP",C===3&&"Reset Password"]})})})]})}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Remember your password?"," ",a.jsx("a",{href:"/login",className:"font-medium text-[#104774] hover:text-[#0d385d] transition-colors duration-200",children:"Sign in"})]})})]})})};function eI(){const{user:n,loading:e}=os();return a.jsx(p2,{children:a.jsxs(qE,{children:[a.jsx(wt,{path:"/login",element:a.jsx(ZC,{})}),a.jsx(wt,{path:"/forgot-password",element:a.jsx(JP,{})}),a.jsxs(wt,{path:"/admin",element:a.jsx(xm,{allowedRoles:["admin"],children:a.jsx(JC,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(a.Fragment,{children:a.jsx(KP,{})})}),a.jsx(wt,{path:"manage-employees",element:a.jsx(rv,{})}),a.jsx(wt,{path:"profile",element:a.jsx(ym,{})}),a.jsx(wt,{path:"calendar",element:a.jsx(Pm,{})}),a.jsx(wt,{path:"leaves",element:a.jsx(DP,{})}),a.jsx(wt,{path:"attendance",element:a.jsx(HP,{})}),a.jsx(wt,{path:"payroll-approval",element:a.jsx(WP,{})})]}),a.jsxs(wt,{path:"/hr",element:a.jsx(xm,{allowedRoles:["hr"],children:a.jsx(eT,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(a.Fragment,{children:a.jsx(ZP,{})})}),a.jsx(wt,{path:"manage-employees",element:a.jsx(rv,{})}),a.jsx(wt,{path:"profile",element:a.jsx(ym,{})}),a.jsx(wt,{path:"calendar",element:a.jsx(Pm,{})}),a.jsx(wt,{path:"leaves",element:a.jsx(A4,{})}),a.jsx(wt,{path:"attendance",element:a.jsx(PP,{})}),a.jsx(wt,{path:"payroll",element:a.jsx(qP,{})})]}),a.jsxs(wt,{path:"/employee",element:a.jsx(xm,{allowedRoles:["employee"],children:a.jsx(tT,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(a.Fragment,{children:a.jsx(QP,{})})}),a.jsx(wt,{path:"profile",element:a.jsx(ym,{})}),a.jsx(wt,{path:"calendar",element:a.jsx(Pm,{})}),a.jsx(wt,{path:"leaves",element:a.jsx(N4,{})}),a.jsx(wt,{path:"attendance",element:a.jsx(MP,{})}),a.jsx(wt,{path:"payslip",element:a.jsx(FP,{})})]}),a.jsx(wt,{path:"/",element:n===null&&e?a.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):n?n.role==="admin"?a.jsx(ga,{to:"/admin",replace:!0}):n.role==="hr"?a.jsx(ga,{to:"/hr",replace:!0}):a.jsx(ga,{to:"/employee",replace:!0}):a.jsx(ga,{to:"/login",replace:!0})}),a.jsx(wt,{path:"*",element:a.jsx(ga,{to:"/"})})]})})}eE.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(tC,{children:a.jsx(eI,{})})}));
