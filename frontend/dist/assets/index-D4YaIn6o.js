var lb=n=>{throw TypeError(n)};var Yf=(n,e,t)=>e.has(n)||lb("Cannot "+t);var jt=(n,e,t)=>(Yf(n,e,"read from private field"),t?t.call(n):e.get(n)),Hn=(n,e,t)=>e.has(n)?lb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ks=(n,e,t,s)=>(Yf(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),zn=(n,e,t)=>(Yf(n,e,"access private method"),t);var ob=(n,e,t,s)=>({set _(i){ks(n,e,i,t)},get _(){return jt(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function $E(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wf={exports:{}},to={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function GE(){if(cb)return to;cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,l){var c=null;if(l!==void 0&&(c=""+l),i.key!==void 0&&(c=""+i.key),"key"in i){l={};for(var u in i)u!=="key"&&(l[u]=i[u])}else l=i;return i=l.ref,{$$typeof:n,type:s,key:c,ref:i!==void 0?i:null,props:l}}return to.Fragment=e,to.jsx=t,to.jsxs=t,to}var db;function YE(){return db||(db=1,Wf.exports=GE()),Wf.exports}var r=YE(),Xf={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ub;function WE(){if(ub)return We;ub=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function x(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function S(T,q,M){this.props=T,this.context=q,this.refs=A,this.updater=M||v}S.prototype.isReactComponent={},S.prototype.setState=function(T,q){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,q,"setState")},S.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function N(){}N.prototype=S.prototype;function j(T,q,M){this.props=T,this.context=q,this.refs=A,this.updater=M||v}var C=j.prototype=new N;C.constructor=j,w(C,S.prototype),C.isPureReactComponent=!0;var R=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function B(T,q,M,G,de,re){return M=re.ref,{$$typeof:n,type:T,key:q,ref:M!==void 0?M:null,props:re}}function F(T,q){return B(T.type,q,void 0,void 0,void 0,T.props)}function I(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function ee(T){var q={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(M){return q[M]})}var z=/\/+/g;function Z(T,q){return typeof T=="object"&&T!==null&&T.key!=null?ee(""+T.key):q.toString(36)}function W(){}function ce(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(W,W):(T.status="pending",T.then(function(q){T.status==="pending"&&(T.status="fulfilled",T.value=q)},function(q){T.status==="pending"&&(T.status="rejected",T.reason=q)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function me(T,q,M,G,de){var re=typeof T;(re==="undefined"||re==="boolean")&&(T=null);var xe=!1;if(T===null)xe=!0;else switch(re){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(T.$$typeof){case n:case e:xe=!0;break;case p:return xe=T._init,me(xe(T._payload),q,M,G,de)}}if(xe)return de=de(T),xe=G===""?"."+Z(T,0):G,R(de)?(M="",xe!=null&&(M=xe.replace(z,"$&/")+"/"),me(de,q,M,"",function(he){return he})):de!=null&&(I(de)&&(de=F(de,M+(de.key==null||T&&T.key===de.key?"":(""+de.key).replace(z,"$&/")+"/")+xe)),q.push(de)),1;xe=0;var Ee=G===""?".":G+":";if(R(T))for(var Le=0;Le<T.length;Le++)G=T[Le],re=Ee+Z(G,Le),xe+=me(G,q,M,re,de);else if(Le=x(T),typeof Le=="function")for(T=Le.call(T),Le=0;!(G=T.next()).done;)G=G.value,re=Ee+Z(G,Le++),xe+=me(G,q,M,re,de);else if(re==="object"){if(typeof T.then=="function")return me(ce(T),q,M,G,de);throw q=String(T),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return xe}function L(T,q,M){if(T==null)return T;var G=[],de=0;return me(T,G,"","",function(re){return q.call(M,re,de++)}),G}function V(T){if(T._status===-1){var q=T._result;q=q(),q.then(function(M){(T._status===0||T._status===-1)&&(T._status=1,T._result=M)},function(M){(T._status===0||T._status===-1)&&(T._status=2,T._result=M)}),T._status===-1&&(T._status=0,T._result=q)}if(T._status===1)return T._result.default;throw T._result}var $=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function H(){}return We.Children={map:L,forEach:function(T,q,M){L(T,function(){q.apply(this,arguments)},M)},count:function(T){var q=0;return L(T,function(){q++}),q},toArray:function(T){return L(T,function(q){return q})||[]},only:function(T){if(!I(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},We.Component=S,We.Fragment=t,We.Profiler=i,We.PureComponent=j,We.StrictMode=s,We.Suspense=h,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,We.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},We.cache=function(T){return function(){return T.apply(null,arguments)}},We.cloneElement=function(T,q,M){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var G=w({},T.props),de=T.key,re=void 0;if(q!=null)for(xe in q.ref!==void 0&&(re=void 0),q.key!==void 0&&(de=""+q.key),q)!O.call(q,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&q.ref===void 0||(G[xe]=q[xe]);var xe=arguments.length-2;if(xe===1)G.children=M;else if(1<xe){for(var Ee=Array(xe),Le=0;Le<xe;Le++)Ee[Le]=arguments[Le+2];G.children=Ee}return B(T.type,de,void 0,void 0,re,G)},We.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:l,_context:T},T},We.createElement=function(T,q,M){var G,de={},re=null;if(q!=null)for(G in q.key!==void 0&&(re=""+q.key),q)O.call(q,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(de[G]=q[G]);var xe=arguments.length-2;if(xe===1)de.children=M;else if(1<xe){for(var Ee=Array(xe),Le=0;Le<xe;Le++)Ee[Le]=arguments[Le+2];de.children=Ee}if(T&&T.defaultProps)for(G in xe=T.defaultProps,xe)de[G]===void 0&&(de[G]=xe[G]);return B(T,re,void 0,void 0,null,de)},We.createRef=function(){return{current:null}},We.forwardRef=function(T){return{$$typeof:u,render:T}},We.isValidElement=I,We.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:V}},We.memo=function(T,q){return{$$typeof:m,type:T,compare:q===void 0?null:q}},We.startTransition=function(T){var q=D.T,M={};D.T=M;try{var G=T(),de=D.S;de!==null&&de(M,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(H,$)}catch(re){$(re)}finally{D.T=q}},We.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},We.use=function(T){return D.H.use(T)},We.useActionState=function(T,q,M){return D.H.useActionState(T,q,M)},We.useCallback=function(T,q){return D.H.useCallback(T,q)},We.useContext=function(T){return D.H.useContext(T)},We.useDebugValue=function(){},We.useDeferredValue=function(T,q){return D.H.useDeferredValue(T,q)},We.useEffect=function(T,q,M){var G=D.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return G.useEffect(T,q)},We.useId=function(){return D.H.useId()},We.useImperativeHandle=function(T,q,M){return D.H.useImperativeHandle(T,q,M)},We.useInsertionEffect=function(T,q){return D.H.useInsertionEffect(T,q)},We.useLayoutEffect=function(T,q){return D.H.useLayoutEffect(T,q)},We.useMemo=function(T,q){return D.H.useMemo(T,q)},We.useOptimistic=function(T,q){return D.H.useOptimistic(T,q)},We.useReducer=function(T,q,M){return D.H.useReducer(T,q,M)},We.useRef=function(T){return D.H.useRef(T)},We.useState=function(T){return D.H.useState(T)},We.useSyncExternalStore=function(T,q,M){return D.H.useSyncExternalStore(T,q,M)},We.useTransition=function(){return D.H.useTransition()},We.version="19.1.1",We}var hb;function bp(){return hb||(hb=1,Xf.exports=WE()),Xf.exports}var _=bp();const Eo=$E(_);var Qf={exports:{}},so={},Zf={exports:{}},Kf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function XE(){return fb||(fb=1,(function(n){function e(L,V){var $=L.length;L.push(V);e:for(;0<$;){var H=$-1>>>1,T=L[H];if(0<i(T,V))L[H]=V,L[$]=T,$=H;else break e}}function t(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var V=L[0],$=L.pop();if($!==V){L[0]=$;e:for(var H=0,T=L.length,q=T>>>1;H<q;){var M=2*(H+1)-1,G=L[M],de=M+1,re=L[de];if(0>i(G,$))de<T&&0>i(re,G)?(L[H]=re,L[de]=$,H=de):(L[H]=G,L[M]=$,H=M);else if(de<T&&0>i(re,$))L[H]=re,L[de]=$,H=de;else break e}}return V}function i(L,V){var $=L.sortIndex-V.sortIndex;return $!==0?$:L.id-V.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var h=[],m=[],p=1,y=null,x=3,v=!1,w=!1,A=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function R(L){for(var V=t(m);V!==null;){if(V.callback===null)s(m);else if(V.startTime<=L)s(m),V.sortIndex=V.expirationTime,e(h,V);else break;V=t(m)}}function D(L){if(A=!1,R(L),!w)if(t(h)!==null)w=!0,O||(O=!0,Z());else{var V=t(m);V!==null&&me(D,V.startTime-L)}}var O=!1,B=-1,F=5,I=-1;function ee(){return S?!0:!(n.unstable_now()-I<F)}function z(){if(S=!1,O){var L=n.unstable_now();I=L;var V=!0;try{e:{w=!1,A&&(A=!1,j(B),B=-1),v=!0;var $=x;try{t:{for(R(L),y=t(h);y!==null&&!(y.expirationTime>L&&ee());){var H=y.callback;if(typeof H=="function"){y.callback=null,x=y.priorityLevel;var T=H(y.expirationTime<=L);if(L=n.unstable_now(),typeof T=="function"){y.callback=T,R(L),V=!0;break t}y===t(h)&&s(h),R(L)}else s(h);y=t(h)}if(y!==null)V=!0;else{var q=t(m);q!==null&&me(D,q.startTime-L),V=!1}}break e}finally{y=null,x=$,v=!1}V=void 0}}finally{V?Z():O=!1}}}var Z;if(typeof C=="function")Z=function(){C(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ce=W.port2;W.port1.onmessage=z,Z=function(){ce.postMessage(null)}}else Z=function(){N(z,0)};function me(L,V){B=N(function(){L(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(L){switch(x){case 1:case 2:case 3:var V=3;break;default:V=x}var $=x;x=V;try{return L()}finally{x=$}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var $=x;x=L;try{return V()}finally{x=$}},n.unstable_scheduleCallback=function(L,V,$){var H=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?H+$:H):$=H,L){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=$+T,L={id:p++,callback:V,priorityLevel:L,startTime:$,expirationTime:T,sortIndex:-1},$>H?(L.sortIndex=$,e(m,L),t(h)===null&&L===t(m)&&(A?(j(B),B=-1):A=!0,me(D,$-H))):(L.sortIndex=T,e(h,L),w||v||(w=!0,O||(O=!0,Z()))),L},n.unstable_shouldYield=ee,n.unstable_wrapCallback=function(L){var V=x;return function(){var $=x;x=V;try{return L.apply(this,arguments)}finally{x=$}}}})(Kf)),Kf}var mb;function QE(){return mb||(mb=1,Zf.exports=XE()),Zf.exports}var Jf={exports:{}},gs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function ZE(){if(pb)return gs;pb=1;var n=bp();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(h,m,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:h,containerInfo:m,implementation:p}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,gs.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(h,m,null,p)},gs.flushSync=function(h){var m=c.T,p=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=m,s.p=p,s.d.f()}},gs.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(h,m))},gs.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},gs.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,y=u(p,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,v=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?s.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:x,fetchPriority:v}):p==="script"&&s.d.X(h,{crossOrigin:y,integrity:x,fetchPriority:v,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},gs.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=u(m.as,m.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(h)},gs.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,y=u(p,m.crossOrigin);s.d.L(h,p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},gs.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=u(m.as,m.crossOrigin);s.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(h)},gs.requestFormReset=function(h){s.d.r(h)},gs.unstable_batchedUpdates=function(h,m){return h(m)},gs.useFormState=function(h,m,p){return c.H.useFormState(h,m,p)},gs.useFormStatus=function(){return c.H.useHostTransitionStatus()},gs.version="19.1.1",gs}var gb;function xw(){if(gb)return Jf.exports;gb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jf.exports=ZE(),Jf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function KE(){if(yb)return so;yb=1;var n=QE(),e=bp(),t=xw();function s(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var o=a,d=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(d=o.return),a=o.return;while(a)}return o.tag===3?d:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(l(a)!==a)throw Error(s(188))}function h(a){var o=a.alternate;if(!o){if(o=l(a),o===null)throw Error(s(188));return o!==a?null:a}for(var d=a,f=o;;){var g=d.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===d)return u(g),a;if(b===f)return u(g),o;b=b.sibling}throw Error(s(188))}if(d.return!==f.return)d=g,f=b;else{for(var E=!1,k=g.child;k;){if(k===d){E=!0,d=g,f=b;break}if(k===f){E=!0,f=g,d=b;break}k=k.sibling}if(!E){for(k=b.child;k;){if(k===d){E=!0,d=b,f=g;break}if(k===f){E=!0,f=b,d=g;break}k=k.sibling}if(!E)throw Error(s(189))}}if(d.alternate!==f)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?a:o}function m(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=m(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function Z(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}var W=Symbol.for("react.client.reference");function ce(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===W?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case v:return"Portal";case C:return(a.displayName||"Context")+".Provider";case j:return(a._context.displayName||"Context")+".Consumer";case R:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case B:return o=a.displayName||null,o!==null?o:ce(a.type)||"Memo";case F:o=a._payload,a=a._init;try{return ce(a(o))}catch{}}return null}var me=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},H=[],T=-1;function q(a){return{current:a}}function M(a){0>T||(a.current=H[T],H[T]=null,T--)}function G(a,o){T++,H[T]=a.current,a.current=o}var de=q(null),re=q(null),xe=q(null),Ee=q(null);function Le(a,o){switch(G(xe,o),G(re,a),G(de,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?O0(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=O0(o),a=I0(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}M(de),G(de,a)}function he(){M(de),M(re),M(xe)}function $e(a){a.memoizedState!==null&&G(Ee,a);var o=de.current,d=I0(o,a.type);o!==d&&(G(re,a),G(de,d))}function ge(a){re.current===a&&(M(de),M(re)),Ee.current===a&&(M(Ee),Ql._currentValue=$)}var we=Object.prototype.hasOwnProperty,ke=n.unstable_scheduleCallback,te=n.unstable_cancelCallback,be=n.unstable_shouldYield,ve=n.unstable_requestPaint,je=n.unstable_now,Ye=n.unstable_getCurrentPriorityLevel,K=n.unstable_ImmediatePriority,Ne=n.unstable_UserBlockingPriority,Pe=n.unstable_NormalPriority,Xe=n.unstable_LowPriority,wt=n.unstable_IdlePriority,qt=n.log,oe=n.unstable_setDisableYieldValue,Se=null,_e=null;function Ue(a){if(typeof qt=="function"&&oe(a),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(Se,a)}catch{}}var dt=Math.clz32?Math.clz32:Rt,Qt=Math.log,Qn=Math.LN2;function Rt(a){return a>>>=0,a===0?32:31-(Qt(a)/Qn|0)|0}var en=256,Hs=4194304;function vs(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function pn(a,o,d){var f=a.pendingLanes;if(f===0)return 0;var g=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var k=f&134217727;return k!==0?(f=k&~b,f!==0?g=vs(f):(E&=k,E!==0?g=vs(E):d||(d=k&~a,d!==0&&(g=vs(d))))):(k=f&~b,k!==0?g=vs(k):E!==0?g=vs(E):d||(d=f&~a,d!==0&&(g=vs(d)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,d=o&-o,b>=d||b===32&&(d&4194048)!==0)?o:g}function zs(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ii(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(){var a=en;return en<<=1,(en&4194048)===0&&(en=256),a}function gn(){var a=Hs;return Hs<<=1,(Hs&62914560)===0&&(Hs=4194304),a}function Ji(a){for(var o=[],d=0;31>d;d++)o.push(a);return o}function Fs(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function er(a,o,d,f,g,b){var E=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var k=a.entanglements,P=a.expirationTimes,J=a.hiddenUpdates;for(d=E&~d;0<d;){var ue=31-dt(d),pe=1<<ue;k[ue]=0,P[ue]=-1;var se=J[ue];if(se!==null)for(J[ue]=null,ue=0;ue<se.length;ue++){var ne=se[ue];ne!==null&&(ne.lane&=-536870913)}d&=~pe}f!==0&&Hu(a,f,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function Hu(a,o,d){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-dt(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|d&4194090}function li(a,o){var d=a.entangledLanes|=o;for(a=a.entanglements;d;){var f=31-dt(d),g=1<<f;g&o|a[f]&o&&(a[f]|=o),d&=~g}}function X(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ae(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function De(){var a=V.p;return a!==0?a:(a=window.event,a===void 0?32:tb(a.type))}function Qe(a,o){var d=V.p;try{return V.p=a,o()}finally{V.p=d}}var At=Math.random().toString(36).slice(2),bt="__reactFiber$"+At,Nt="__reactProps$"+At,tn="__reactContainer$"+At,js="__reactEvents$"+At,yn="__reactListeners$"+At,Us="__reactHandles$"+At,_s="__reactResources$"+At,xn="__reactMarker$"+At;function ms(a){delete a[bt],delete a[Nt],delete a[js],delete a[yn],delete a[Us]}function bn(a){var o=a[bt];if(o)return o;for(var d=a.parentNode;d;){if(o=d[tn]||d[bt]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(a=z0(a);a!==null;){if(d=a[bt])return d;a=z0(a)}return o}a=d,d=a.parentNode}return null}function Mn(a){if(a=a[bt]||a[tn]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function wa(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(s(33))}function tr(a){var o=a[_s];return o||(o=a[_s]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function es(a){a[xn]=!0}var Ng=new Set,Eg={};function oi(a,o){sr(a,o),sr(a+"Capture",o)}function sr(a,o){for(Eg[a]=o,a=0;a<o.length;a++)Ng.add(o[a])}var PS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jg={},_g={};function BS(a){return we.call(_g,a)?!0:we.call(jg,a)?!1:PS.test(a)?_g[a]=!0:(jg[a]=!0,!1)}function ec(a,o,d){if(BS(o))if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+d)}}function tc(a,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+d)}}function Zn(a,o,d,f){if(f===null)a.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(o,d,""+f)}}var zu,Cg;function nr(a){if(zu===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);zu=o&&o[1]||"",Cg=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zu+a+Cg}var Fu=!1;function Uu(a,o){if(!a||Fu)return"";Fu=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ne){var se=ne}Reflect.construct(a,[],pe)}else{try{pe.call()}catch(ne){se=ne}a.call(pe.prototype)}}else{try{throw Error()}catch(ne){se=ne}(pe=a())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ne){if(ne&&se&&typeof ne.stack=="string")return[ne.stack,se.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],k=b[1];if(E&&k){var P=E.split(`
`),J=k.split(`
`);for(g=f=0;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;for(;g<J.length&&!J[g].includes("DetermineComponentFrameRoot");)g++;if(f===P.length||g===J.length)for(f=P.length-1,g=J.length-1;1<=f&&0<=g&&P[f]!==J[g];)g--;for(;1<=f&&0<=g;f--,g--)if(P[f]!==J[g]){if(f!==1||g!==1)do if(f--,g--,0>g||P[f]!==J[g]){var ue=`
`+P[f].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=f&&0<=g);break}}}finally{Fu=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?nr(d):""}function HS(a){switch(a.tag){case 26:case 27:case 5:return nr(a.type);case 16:return nr("Lazy");case 13:return nr("Suspense");case 19:return nr("SuspenseList");case 0:case 15:return Uu(a.type,!1);case 11:return Uu(a.type.render,!1);case 1:return Uu(a.type,!0);case 31:return nr("Activity");default:return""}}function Tg(a){try{var o="";do o+=HS(a),a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function sn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Dg(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function zS(a){var o=Dg(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){f=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(E){f=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function sc(a){a._valueTracker||(a._valueTracker=zS(a))}function Rg(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var d=o.getValue(),f="";return a&&(f=Dg(a)?a.checked?"true":"false":a.value),a=f,a!==d?(o.setValue(a),!0):!1}function nc(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var FS=/[\n"\\]/g;function nn(a){return a.replace(FS,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function qu(a,o,d,f,g,b,E,k){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+sn(o)):a.value!==""+sn(o)&&(a.value=""+sn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?Vu(a,E,sn(o)):d!=null?Vu(a,E,sn(d)):f!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.name=""+sn(k):a.removeAttribute("name")}function kg(a,o,d,f,g,b,E,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||d!=null){if(!(b!=="submit"&&b!=="reset"||o!=null))return;d=d!=null?""+sn(d):"",o=o!=null?""+sn(o):d,k||o===a.value||(a.value=o),a.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=k?a.checked:!!f,a.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E)}function Vu(a,o,d){o==="number"&&nc(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function ar(a,o,d,f){if(a=a.options,o){o={};for(var g=0;g<d.length;g++)o["$"+d[g]]=!0;for(d=0;d<a.length;d++)g=o.hasOwnProperty("$"+a[d].value),a[d].selected!==g&&(a[d].selected=g),g&&f&&(a[d].defaultSelected=!0)}else{for(d=""+sn(d),o=null,g=0;g<a.length;g++){if(a[g].value===d){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function Mg(a,o,d){if(o!=null&&(o=""+sn(o),o!==a.value&&(a.value=o),d==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=d!=null?""+sn(d):""}function Lg(a,o,d,f){if(o==null){if(f!=null){if(d!=null)throw Error(s(92));if(me(f)){if(1<f.length)throw Error(s(93));f=f[0]}d=f}d==null&&(d=""),o=d}d=sn(o),a.defaultValue=d,f=a.textContent,f===d&&f!==""&&f!==null&&(a.value=f)}function ir(a,o){if(o){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=o;return}}a.textContent=o}var US=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Og(a,o,d){var f=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,d):typeof d!="number"||d===0||US.has(o)?o==="float"?a.cssFloat=d:a[o]=(""+d).trim():a[o]=d+"px"}function Ig(a,o,d){if(o!=null&&typeof o!="object")throw Error(s(62));if(a=a.style,d!=null){for(var f in d)!d.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&d[g]!==f&&Og(a,g,f)}else for(var b in o)o.hasOwnProperty(b)&&Og(a,b,o[b])}function $u(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ac(a){return VS.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Gu=null;function Yu(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var rr=null,lr=null;function Pg(a){var o=Mn(a);if(o&&(a=o.stateNode)){var d=a[Nt]||null;e:switch(a=o.stateNode,o.type){case"input":if(qu(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+nn(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var f=d[o];if(f!==a&&f.form===a.form){var g=f[Nt]||null;if(!g)throw Error(s(90));qu(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<d.length;o++)f=d[o],f.form===a.form&&Rg(f)}break e;case"textarea":Mg(a,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&ar(a,!!d.multiple,o,!1)}}}var Wu=!1;function Bg(a,o,d){if(Wu)return a(o,d);Wu=!0;try{var f=a(o);return f}finally{if(Wu=!1,(rr!==null||lr!==null)&&(qc(),rr&&(o=rr,a=lr,lr=rr=null,Pg(o),a)))for(o=0;o<a.length;o++)Pg(a[o])}}function cl(a,o){var d=a.stateNode;if(d===null)return null;var f=d[Nt]||null;if(f===null)return null;d=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(s(231,o,typeof d));return d}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xu=!1;if(Kn)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){Xu=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{Xu=!1}var Aa=null,Qu=null,ic=null;function Hg(){if(ic)return ic;var a,o=Qu,d=o.length,f,g="value"in Aa?Aa.value:Aa.textContent,b=g.length;for(a=0;a<d&&o[a]===g[a];a++);var E=d-a;for(f=1;f<=E&&o[d-f]===g[b-f];f++);return ic=g.slice(a,1<f?1-f:void 0)}function rc(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function lc(){return!0}function zg(){return!1}function Cs(a){function o(d,f,g,b,E){this._reactName=d,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(d=a[k],this[k]=d?d(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?lc:zg,this.isPropagationStopped=zg,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),o}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oc=Cs(ci),ul=p({},ci,{view:0,detail:0}),$S=Cs(ul),Zu,Ku,hl,cc=p({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==hl&&(hl&&a.type==="mousemove"?(Zu=a.screenX-hl.screenX,Ku=a.screenY-hl.screenY):Ku=Zu=0,hl=a),Zu)},movementY:function(a){return"movementY"in a?a.movementY:Ku}}),Fg=Cs(cc),GS=p({},cc,{dataTransfer:0}),YS=Cs(GS),WS=p({},ul,{relatedTarget:0}),Ju=Cs(WS),XS=p({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=Cs(XS),ZS=p({},ci,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),KS=Cs(ZS),JS=p({},ci,{data:0}),Ug=Cs(JS),eN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nN(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=sN[a])?!!o[a]:!1}function eh(){return nN}var aN=p({},ul,{key:function(a){if(a.key){var o=eN[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=rc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?tN[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eh,charCode:function(a){return a.type==="keypress"?rc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?rc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),iN=Cs(aN),rN=p({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=Cs(rN),lN=p({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eh}),oN=Cs(lN),cN=p({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),dN=Cs(cN),uN=p({},cc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),hN=Cs(uN),fN=p({},ci,{newState:0,oldState:0}),mN=Cs(fN),pN=[9,13,27,32],th=Kn&&"CompositionEvent"in window,fl=null;Kn&&"documentMode"in document&&(fl=document.documentMode);var gN=Kn&&"TextEvent"in window&&!fl,Vg=Kn&&(!th||fl&&8<fl&&11>=fl),$g=" ",Gg=!1;function Yg(a,o){switch(a){case"keyup":return pN.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wg(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var or=!1;function yN(a,o){switch(a){case"compositionend":return Wg(o);case"keypress":return o.which!==32?null:(Gg=!0,$g);case"textInput":return a=o.data,a===$g&&Gg?null:a;default:return null}}function xN(a,o){if(or)return a==="compositionend"||!th&&Yg(a,o)?(a=Hg(),ic=Qu=Aa=null,or=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vg&&o.locale!=="ko"?null:o.data;default:return null}}var bN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xg(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!bN[a.type]:o==="textarea"}function Qg(a,o,d,f){rr?lr?lr.push(f):lr=[f]:rr=f,o=Xc(o,"onChange"),0<o.length&&(d=new oc("onChange","change",null,d,f),a.push({event:d,listeners:o}))}var ml=null,pl=null;function vN(a){D0(a,0)}function dc(a){var o=wa(a);if(Rg(o))return a}function Zg(a,o){if(a==="change")return o}var Kg=!1;if(Kn){var sh;if(Kn){var nh="oninput"in document;if(!nh){var Jg=document.createElement("div");Jg.setAttribute("oninput","return;"),nh=typeof Jg.oninput=="function"}sh=nh}else sh=!1;Kg=sh&&(!document.documentMode||9<document.documentMode)}function ey(){ml&&(ml.detachEvent("onpropertychange",ty),pl=ml=null)}function ty(a){if(a.propertyName==="value"&&dc(pl)){var o=[];Qg(o,pl,a,Yu(a)),Bg(vN,o)}}function wN(a,o,d){a==="focusin"?(ey(),ml=o,pl=d,ml.attachEvent("onpropertychange",ty)):a==="focusout"&&ey()}function AN(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return dc(pl)}function SN(a,o){if(a==="click")return dc(o)}function NN(a,o){if(a==="input"||a==="change")return dc(o)}function EN(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var qs=typeof Object.is=="function"?Object.is:EN;function gl(a,o){if(qs(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var d=Object.keys(a),f=Object.keys(o);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!we.call(o,g)||!qs(a[g],o[g]))return!1}return!0}function sy(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ny(a,o){var d=sy(a);a=0;for(var f;d;){if(d.nodeType===3){if(f=a+d.textContent.length,a<=o&&f>=o)return{node:d,offset:o-a};a=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=sy(d)}}function ay(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?ay(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function iy(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=nc(a.document);o instanceof a.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)a=o.contentWindow;else break;o=nc(a.document)}return o}function ah(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var jN=Kn&&"documentMode"in document&&11>=document.documentMode,cr=null,ih=null,yl=null,rh=!1;function ry(a,o,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;rh||cr==null||cr!==nc(f)||(f=cr,"selectionStart"in f&&ah(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),yl&&gl(yl,f)||(yl=f,f=Xc(ih,"onSelect"),0<f.length&&(o=new oc("onSelect","select",null,o,d),a.push({event:o,listeners:f}),o.target=cr)))}function di(a,o){var d={};return d[a.toLowerCase()]=o.toLowerCase(),d["Webkit"+a]="webkit"+o,d["Moz"+a]="moz"+o,d}var dr={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionrun:di("Transition","TransitionRun"),transitionstart:di("Transition","TransitionStart"),transitioncancel:di("Transition","TransitionCancel"),transitionend:di("Transition","TransitionEnd")},lh={},ly={};Kn&&(ly=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function ui(a){if(lh[a])return lh[a];if(!dr[a])return a;var o=dr[a],d;for(d in o)if(o.hasOwnProperty(d)&&d in ly)return lh[a]=o[d];return a}var oy=ui("animationend"),cy=ui("animationiteration"),dy=ui("animationstart"),_N=ui("transitionrun"),CN=ui("transitionstart"),TN=ui("transitioncancel"),uy=ui("transitionend"),hy=new Map,oh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oh.push("scrollEnd");function vn(a,o){hy.set(a,o),oi(o,[a])}var fy=new WeakMap;function an(a,o){if(typeof a=="object"&&a!==null){var d=fy.get(a);return d!==void 0?d:(o={value:a,source:o,stack:Tg(o)},fy.set(a,o),o)}return{value:a,source:o,stack:Tg(o)}}var rn=[],ur=0,ch=0;function uc(){for(var a=ur,o=ch=ur=0;o<a;){var d=rn[o];rn[o++]=null;var f=rn[o];rn[o++]=null;var g=rn[o];rn[o++]=null;var b=rn[o];if(rn[o++]=null,f!==null&&g!==null){var E=f.pending;E===null?g.next=g:(g.next=E.next,E.next=g),f.pending=g}b!==0&&my(d,g,b)}}function hc(a,o,d,f){rn[ur++]=a,rn[ur++]=o,rn[ur++]=d,rn[ur++]=f,ch|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function dh(a,o,d,f){return hc(a,o,d,f),fc(a)}function hr(a,o){return hc(a,null,null,o),fc(a)}function my(a,o,d){a.lanes|=d;var f=a.alternate;f!==null&&(f.lanes|=d);for(var g=!1,b=a.return;b!==null;)b.childLanes|=d,f=b.alternate,f!==null&&(f.childLanes|=d),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&o!==null&&(g=31-dt(d),a=b.hiddenUpdates,f=a[g],f===null?a[g]=[o]:f.push(o),o.lane=d|536870912),b):null}function fc(a){if(50<Ul)throw Ul=0,yf=null,Error(s(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var fr={};function DN(a,o,d,f){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(a,o,d,f){return new DN(a,o,d,f)}function uh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Jn(a,o){var d=a.alternate;return d===null?(d=Vs(a.tag,o,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=o,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,o=a.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function py(a,o){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,o=d.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function mc(a,o,d,f,g,b){var E=0;if(f=a,typeof a=="function")uh(a)&&(E=1);else if(typeof a=="string")E=kE(a,d,de.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case I:return a=Vs(31,d,o,g),a.elementType=I,a.lanes=b,a;case w:return hi(d.children,g,b,o);case A:E=8,g|=24;break;case S:return a=Vs(12,d,o,g|2),a.elementType=S,a.lanes=b,a;case D:return a=Vs(13,d,o,g),a.elementType=D,a.lanes=b,a;case O:return a=Vs(19,d,o,g),a.elementType=O,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:case C:E=10;break e;case j:E=9;break e;case R:E=11;break e;case B:E=14;break e;case F:E=16,f=null;break e}E=29,d=Error(s(130,a===null?"null":typeof a,"")),f=null}return o=Vs(E,d,o,g),o.elementType=a,o.type=f,o.lanes=b,o}function hi(a,o,d,f){return a=Vs(7,a,f,o),a.lanes=d,a}function hh(a,o,d){return a=Vs(6,a,null,o),a.lanes=d,a}function fh(a,o,d){return o=Vs(4,a.children!==null?a.children:[],a.key,o),o.lanes=d,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var mr=[],pr=0,pc=null,gc=0,ln=[],on=0,fi=null,ea=1,ta="";function mi(a,o){mr[pr++]=gc,mr[pr++]=pc,pc=a,gc=o}function gy(a,o,d){ln[on++]=ea,ln[on++]=ta,ln[on++]=fi,fi=a;var f=ea;a=ta;var g=32-dt(f)-1;f&=~(1<<g),d+=1;var b=32-dt(o)+g;if(30<b){var E=g-g%5;b=(f&(1<<E)-1).toString(32),f>>=E,g-=E,ea=1<<32-dt(o)+g|d<<g|f,ta=b+a}else ea=1<<b|d<<g|f,ta=a}function mh(a){a.return!==null&&(mi(a,1),gy(a,1,0))}function ph(a){for(;a===pc;)pc=mr[--pr],mr[pr]=null,gc=mr[--pr],mr[pr]=null;for(;a===fi;)fi=ln[--on],ln[on]=null,ta=ln[--on],ln[on]=null,ea=ln[--on],ln[on]=null}var ws=null,Ot=null,ot=!1,pi=null,Ln=!1,gh=Error(s(519));function gi(a){var o=Error(s(418,""));throw vl(an(o,a)),gh}function yy(a){var o=a.stateNode,d=a.type,f=a.memoizedProps;switch(o[bt]=a,o[Nt]=f,d){case"dialog":tt("cancel",o),tt("close",o);break;case"iframe":case"object":case"embed":tt("load",o);break;case"video":case"audio":for(d=0;d<Vl.length;d++)tt(Vl[d],o);break;case"source":tt("error",o);break;case"img":case"image":case"link":tt("error",o),tt("load",o);break;case"details":tt("toggle",o);break;case"input":tt("invalid",o),kg(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),sc(o);break;case"select":tt("invalid",o);break;case"textarea":tt("invalid",o),Lg(o,f.value,f.defaultValue,f.children),sc(o)}d=f.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||f.suppressHydrationWarning===!0||L0(o.textContent,d)?(f.popover!=null&&(tt("beforetoggle",o),tt("toggle",o)),f.onScroll!=null&&tt("scroll",o),f.onScrollEnd!=null&&tt("scrollend",o),f.onClick!=null&&(o.onclick=Qc),o=!0):o=!1,o||gi(a)}function xy(a){for(ws=a.return;ws;)switch(ws.tag){case 5:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:ws=ws.return}}function xl(a){if(a!==ws)return!1;if(!ot)return xy(a),ot=!0,!1;var o=a.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||Mf(a.type,a.memoizedProps)),d=!d),d&&Ot&&gi(a),xy(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(o===0){Ot=An(a.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++;a=a.nextSibling}Ot=null}}else o===27?(o=Ot,Ba(a.type)?(a=Pf,Pf=null,Ot=a):Ot=o):Ot=ws?An(a.stateNode.nextSibling):null;return!0}function bl(){Ot=ws=null,ot=!1}function by(){var a=pi;return a!==null&&(Rs===null?Rs=a:Rs.push.apply(Rs,a),pi=null),a}function vl(a){pi===null?pi=[a]:pi.push(a)}var yh=q(null),yi=null,sa=null;function Sa(a,o,d){G(yh,o._currentValue),o._currentValue=d}function na(a){a._currentValue=yh.current,M(yh)}function xh(a,o,d){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===d)break;a=a.return}}function bh(a,o,d,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=g;for(var P=0;P<o.length;P++)if(k.context===o[P]){b.lanes|=d,k=b.alternate,k!==null&&(k.lanes|=d),xh(b.return,d,a),f||(E=null);break e}b=k.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(s(341));E.lanes|=d,b=E.alternate,b!==null&&(b.lanes|=d),xh(E,d,a),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===a){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function wl(a,o,d,f){a=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var k=g.type;qs(g.pendingProps.value,E.value)||(a!==null?a.push(k):a=[k])}}else if(g===Ee.current){if(E=g.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(Ql):a=[Ql])}g=g.return}a!==null&&bh(o,a,d,f),o.flags|=262144}function yc(a){for(a=a.firstContext;a!==null;){if(!qs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function xi(a){yi=a,sa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ps(a){return vy(yi,a)}function xc(a,o){return yi===null&&xi(a),vy(a,o)}function vy(a,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},sa===null){if(a===null)throw Error(s(308));sa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else sa=sa.next=o;return d}var RN=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(d,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(d){return d()})}},kN=n.unstable_scheduleCallback,MN=n.unstable_NormalPriority,Zt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vh(){return{controller:new RN,data:new Map,refCount:0}}function Al(a){a.refCount--,a.refCount===0&&kN(MN,function(){a.controller.abort()})}var Sl=null,wh=0,gr=0,yr=null;function LN(a,o){if(Sl===null){var d=Sl=[];wh=0,gr=Nf(),yr={status:"pending",value:void 0,then:function(f){d.push(f)}}}return wh++,o.then(wy,wy),o}function wy(){if(--wh===0&&Sl!==null){yr!==null&&(yr.status="fulfilled");var a=Sl;Sl=null,gr=0,yr=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function ON(a,o){var d=[],f={status:"pending",value:null,reason:null,then:function(g){d.push(g)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<d.length;g++)(0,d[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<d.length;g++)(0,d[g])(void 0)}),f}var Ay=L.S;L.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&LN(a,o),Ay!==null&&Ay(a,o)};var bi=q(null);function Ah(){var a=bi.current;return a!==null?a:St.pooledCache}function bc(a,o){o===null?G(bi,bi.current):G(bi,o.pool)}function Sy(){var a=Ah();return a===null?null:{parent:Zt._currentValue,pool:a}}var Nl=Error(s(460)),Ny=Error(s(474)),vc=Error(s(542)),Sh={then:function(){}};function Ey(a){return a=a.status,a==="fulfilled"||a==="rejected"}function wc(){}function jy(a,o,d){switch(d=a[d],d===void 0?a.push(o):d!==o&&(o.then(wc,wc),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cy(a),a;default:if(typeof o.status=="string")o.then(wc,wc);else{if(a=St,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cy(a),a}throw El=o,Nl}}var El=null;function _y(){if(El===null)throw Error(s(459));var a=El;return El=null,a}function Cy(a){if(a===Nl||a===vc)throw Error(s(483))}var Na=!1;function Nh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ea(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ja(a,o,d){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(ut&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=fc(a),my(a,null,d),o}return hc(a,f,o,d),fc(a)}function jl(a,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,d|=f,o.lanes=d,li(a,d)}}function jh(a,o){var d=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var E={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,d=d.next}while(d!==null);b===null?g=b=o:b=b.next=o}else g=b=o;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=o:a.next=o,d.lastBaseUpdate=o}var _h=!1;function _l(){if(_h){var a=yr;if(a!==null)throw a}}function Cl(a,o,d,f){_h=!1;var g=a.updateQueue;Na=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,k=g.shared.pending;if(k!==null){g.shared.pending=null;var P=k,J=P.next;P.next=null,E===null?b=J:E.next=J,E=P;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,k=ue.lastBaseUpdate,k!==E&&(k===null?ue.firstBaseUpdate=J:k.next=J,ue.lastBaseUpdate=P))}if(b!==null){var pe=g.baseState;E=0,ue=J=P=null,k=b;do{var se=k.lane&-536870913,ne=se!==k.lane;if(ne?(it&se)===se:(f&se)===se){se!==0&&se===gr&&(_h=!0),ue!==null&&(ue=ue.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Fe=a,Be=k;se=o;var gt=d;switch(Be.tag){case 1:if(Fe=Be.payload,typeof Fe=="function"){pe=Fe.call(gt,pe,se);break e}pe=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=Be.payload,se=typeof Fe=="function"?Fe.call(gt,pe,se):Fe,se==null)break e;pe=p({},pe,se);break e;case 2:Na=!0}}se=k.callback,se!==null&&(a.flags|=64,ne&&(a.flags|=8192),ne=g.callbacks,ne===null?g.callbacks=[se]:ne.push(se))}else ne={lane:se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ue===null?(J=ue=ne,P=pe):ue=ue.next=ne,E|=se;if(k=k.next,k===null){if(k=g.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,g.lastBaseUpdate=ne,g.shared.pending=null}}while(!0);ue===null&&(P=pe),g.baseState=P,g.firstBaseUpdate=J,g.lastBaseUpdate=ue,b===null&&(g.shared.lanes=0),La|=E,a.lanes=E,a.memoizedState=pe}}function Ty(a,o){if(typeof a!="function")throw Error(s(191,a));a.call(o)}function Dy(a,o){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Ty(d[a],o)}var xr=q(null),Ac=q(0);function Ry(a,o){a=da,G(Ac,a),G(xr,o),da=a|o.baseLanes}function Ch(){G(Ac,da),G(xr,xr.current)}function Th(){da=Ac.current,M(xr),M(Ac)}var _a=0,Ke=null,mt=null,Vt=null,Sc=!1,br=!1,vi=!1,Nc=0,Tl=0,vr=null,IN=0;function Bt(){throw Error(s(321))}function Dh(a,o){if(o===null)return!1;for(var d=0;d<o.length&&d<a.length;d++)if(!qs(a[d],o[d]))return!1;return!0}function Rh(a,o,d,f,g,b){return _a=b,Ke=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=a===null||a.memoizedState===null?mx:px,vi=!1,b=d(f,g),vi=!1,br&&(b=My(o,d,f,g)),ky(a),b}function ky(a){L.H=Dc;var o=mt!==null&&mt.next!==null;if(_a=0,Vt=mt=Ke=null,Sc=!1,Tl=0,vr=null,o)throw Error(s(300));a===null||ts||(a=a.dependencies,a!==null&&yc(a)&&(ts=!0))}function My(a,o,d,f){Ke=a;var g=0;do{if(br&&(vr=null),Tl=0,br=!1,25<=g)throw Error(s(301));if(g+=1,Vt=mt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}L.H=qN,b=o(d,f)}while(br);return b}function PN(){var a=L.H,o=a.useState()[0];return o=typeof o.then=="function"?Dl(o):o,a=a.useState()[0],(mt!==null?mt.memoizedState:null)!==a&&(Ke.flags|=1024),o}function kh(){var a=Nc!==0;return Nc=0,a}function Mh(a,o,d){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~d}function Lh(a){if(Sc){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Sc=!1}_a=0,Vt=mt=Ke=null,br=!1,Tl=Nc=0,vr=null}function Ts(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ke.memoizedState=Vt=a:Vt=Vt.next=a,Vt}function $t(){if(mt===null){var a=Ke.alternate;a=a!==null?a.memoizedState:null}else a=mt.next;var o=Vt===null?Ke.memoizedState:Vt.next;if(o!==null)Vt=o,mt=a;else{if(a===null)throw Ke.alternate===null?Error(s(467)):Error(s(310));mt=a,a={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Vt===null?Ke.memoizedState=Vt=a:Vt=Vt.next=a}return Vt}function Oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(a){var o=Tl;return Tl+=1,vr===null&&(vr=[]),a=jy(vr,a,o),o=Ke,(Vt===null?o.memoizedState:Vt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?mx:px),a}function Ec(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Dl(a);if(a.$$typeof===C)return ps(a)}throw Error(s(438,String(a)))}function Ih(a){var o=null,d=Ke.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var f=Ke.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=Oh(),Ke.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(a),f=0;f<a;f++)d[f]=ee;return o.index++,d}function aa(a,o){return typeof o=="function"?o(a):o}function jc(a){var o=$t();return Ph(o,mt,a)}function Ph(a,o,d){var f=a.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=d;var g=a.baseQueue,b=f.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}o.baseQueue=g=b,f.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{o=g.next;var k=E=null,P=null,J=o,ue=!1;do{var pe=J.lane&-536870913;if(pe!==J.lane?(it&pe)===pe:(_a&pe)===pe){var se=J.revertLane;if(se===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),pe===gr&&(ue=!0);else if((_a&se)===se){J=J.next,se===gr&&(ue=!0);continue}else pe={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(k=P=pe,E=b):P=P.next=pe,Ke.lanes|=se,La|=se;pe=J.action,vi&&d(b,pe),b=J.hasEagerState?J.eagerState:d(b,pe)}else se={lane:pe,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},P===null?(k=P=se,E=b):P=P.next=se,Ke.lanes|=pe,La|=pe;J=J.next}while(J!==null&&J!==o);if(P===null?E=b:P.next=k,!qs(b,a.memoizedState)&&(ts=!0,ue&&(d=yr,d!==null)))throw d;a.memoizedState=b,a.baseState=E,a.baseQueue=P,f.lastRenderedState=b}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Bh(a){var o=$t(),d=o.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=a;var f=d.dispatch,g=d.pending,b=o.memoizedState;if(g!==null){d.pending=null;var E=g=g.next;do b=a(b,E.action),E=E.next;while(E!==g);qs(b,o.memoizedState)||(ts=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),d.lastRenderedState=b}return[b,f]}function Ly(a,o,d){var f=Ke,g=$t(),b=ot;if(b){if(d===void 0)throw Error(s(407));d=d()}else d=o();var E=!qs((mt||g).memoizedState,d);E&&(g.memoizedState=d,ts=!0),g=g.queue;var k=Py.bind(null,f,g,a);if(Rl(2048,8,k,[a]),g.getSnapshot!==o||E||Vt!==null&&Vt.memoizedState.tag&1){if(f.flags|=2048,wr(9,_c(),Iy.bind(null,f,g,d,o),null),St===null)throw Error(s(349));b||(_a&124)!==0||Oy(f,o,d)}return d}function Oy(a,o,d){a.flags|=16384,a={getSnapshot:o,value:d},o=Ke.updateQueue,o===null?(o=Oh(),Ke.updateQueue=o,o.stores=[a]):(d=o.stores,d===null?o.stores=[a]:d.push(a))}function Iy(a,o,d,f){o.value=d,o.getSnapshot=f,By(o)&&Hy(a)}function Py(a,o,d){return d(function(){By(o)&&Hy(a)})}function By(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!qs(a,d)}catch{return!0}}function Hy(a){var o=hr(a,2);o!==null&&Xs(o,a,2)}function Hh(a){var o=Ts();if(typeof a=="function"){var d=a;if(a=d(),vi){Ue(!0);try{d()}finally{Ue(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:a},o}function zy(a,o,d,f){return a.baseState=d,Ph(a,mt,typeof f=="function"?f:aa)}function BN(a,o,d,f,g){if(Tc(a))throw Error(s(485));if(a=o.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};L.T!==null?d(!0):b.isTransition=!1,f(b),d=o.pending,d===null?(b.next=o.pending=b,Fy(o,b)):(b.next=d.next,o.pending=d.next=b)}}function Fy(a,o){var d=o.action,f=o.payload,g=a.state;if(o.isTransition){var b=L.T,E={};L.T=E;try{var k=d(g,f),P=L.S;P!==null&&P(E,k),Uy(a,o,k)}catch(J){zh(a,o,J)}finally{L.T=b}}else try{b=d(g,f),Uy(a,o,b)}catch(J){zh(a,o,J)}}function Uy(a,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(f){qy(a,o,f)},function(f){return zh(a,o,f)}):qy(a,o,d)}function qy(a,o,d){o.status="fulfilled",o.value=d,Vy(o),a.state=d,o=a.pending,o!==null&&(d=o.next,d===o?a.pending=null:(d=d.next,o.next=d,Fy(a,d)))}function zh(a,o,d){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=d,Vy(o),o=o.next;while(o!==f)}a.action=null}function Vy(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function $y(a,o){return o}function Gy(a,o){if(ot){var d=St.formState;if(d!==null){e:{var f=Ke;if(ot){if(Ot){t:{for(var g=Ot,b=Ln;g.nodeType!==8;){if(!b){g=null;break t}if(g=An(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){Ot=An(g.nextSibling),f=g.data==="F!";break e}}gi(f)}f=!1}f&&(o=d[0])}}return d=Ts(),d.memoizedState=d.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$y,lastRenderedState:o},d.queue=f,d=ux.bind(null,Ke,f),f.dispatch=d,f=Hh(!1),b=$h.bind(null,Ke,!1,f.queue),f=Ts(),g={state:o,dispatch:null,action:a,pending:null},f.queue=g,d=BN.bind(null,Ke,g,b,d),g.dispatch=d,f.memoizedState=a,[o,d,!1]}function Yy(a){var o=$t();return Wy(o,mt,a)}function Wy(a,o,d){if(o=Ph(a,o,$y)[0],a=jc(aa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Dl(o)}catch(E){throw E===Nl?vc:E}else f=o;o=$t();var g=o.queue,b=g.dispatch;return d!==o.memoizedState&&(Ke.flags|=2048,wr(9,_c(),HN.bind(null,g,d),null)),[f,b,a]}function HN(a,o){a.action=o}function Xy(a){var o=$t(),d=mt;if(d!==null)return Wy(o,d,a);$t(),o=o.memoizedState,d=$t();var f=d.queue.dispatch;return d.memoizedState=a,[o,f,!1]}function wr(a,o,d,f){return a={tag:a,create:d,deps:f,inst:o,next:null},o=Ke.updateQueue,o===null&&(o=Oh(),Ke.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=a.next=a:(f=d.next,d.next=a,a.next=f,o.lastEffect=a),a}function _c(){return{destroy:void 0,resource:void 0}}function Qy(){return $t().memoizedState}function Cc(a,o,d,f){var g=Ts();f=f===void 0?null:f,Ke.flags|=a,g.memoizedState=wr(1|o,_c(),d,f)}function Rl(a,o,d,f){var g=$t();f=f===void 0?null:f;var b=g.memoizedState.inst;mt!==null&&f!==null&&Dh(f,mt.memoizedState.deps)?g.memoizedState=wr(o,b,d,f):(Ke.flags|=a,g.memoizedState=wr(1|o,b,d,f))}function Zy(a,o){Cc(8390656,8,a,o)}function Ky(a,o){Rl(2048,8,a,o)}function Jy(a,o){return Rl(4,2,a,o)}function ex(a,o){return Rl(4,4,a,o)}function tx(a,o){if(typeof o=="function"){a=a();var d=o(a);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function sx(a,o,d){d=d!=null?d.concat([a]):null,Rl(4,4,tx.bind(null,o,a),d)}function Fh(){}function nx(a,o){var d=$t();o=o===void 0?null:o;var f=d.memoizedState;return o!==null&&Dh(o,f[1])?f[0]:(d.memoizedState=[a,o],a)}function ax(a,o){var d=$t();o=o===void 0?null:o;var f=d.memoizedState;if(o!==null&&Dh(o,f[1]))return f[0];if(f=a(),vi){Ue(!0);try{a()}finally{Ue(!1)}}return d.memoizedState=[f,o],f}function Uh(a,o,d){return d===void 0||(_a&1073741824)!==0?a.memoizedState=o:(a.memoizedState=d,a=l0(),Ke.lanes|=a,La|=a,d)}function ix(a,o,d,f){return qs(d,o)?d:xr.current!==null?(a=Uh(a,d,f),qs(a,o)||(ts=!0),a):(_a&42)===0?(ts=!0,a.memoizedState=d):(a=l0(),Ke.lanes|=a,La|=a,o)}function rx(a,o,d,f,g){var b=V.p;V.p=b!==0&&8>b?b:8;var E=L.T,k={};L.T=k,$h(a,!1,o,d);try{var P=g(),J=L.S;if(J!==null&&J(k,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var ue=ON(P,f);kl(a,o,ue,Ws(a))}else kl(a,o,f,Ws(a))}catch(pe){kl(a,o,{then:function(){},status:"rejected",reason:pe},Ws())}finally{V.p=b,L.T=E}}function zN(){}function qh(a,o,d,f){if(a.tag!==5)throw Error(s(476));var g=lx(a).queue;rx(a,g,o,$,d===null?zN:function(){return ox(a),d(f)})}function lx(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:$},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:aa,lastRenderedState:d},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function ox(a){var o=lx(a).next.queue;kl(a,o,{},Ws())}function Vh(){return ps(Ql)}function cx(){return $t().memoizedState}function dx(){return $t().memoizedState}function FN(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var d=Ws();a=Ea(d);var f=ja(o,a,d);f!==null&&(Xs(f,o,d),jl(f,o,d)),o={cache:vh()},a.payload=o;return}o=o.return}}function UN(a,o,d){var f=Ws();d={lane:f,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Tc(a)?hx(o,d):(d=dh(a,o,d,f),d!==null&&(Xs(d,a,f),fx(d,o,f)))}function ux(a,o,d){var f=Ws();kl(a,o,d,f)}function kl(a,o,d,f){var g={lane:f,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Tc(a))hx(o,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,k=b(E,d);if(g.hasEagerState=!0,g.eagerState=k,qs(k,E))return hc(a,o,g,0),St===null&&uc(),!1}catch{}finally{}if(d=dh(a,o,g,f),d!==null)return Xs(d,a,f),fx(d,o,f),!0}return!1}function $h(a,o,d,f){if(f={lane:2,revertLane:Nf(),action:f,hasEagerState:!1,eagerState:null,next:null},Tc(a)){if(o)throw Error(s(479))}else o=dh(a,d,f,2),o!==null&&Xs(o,a,2)}function Tc(a){var o=a.alternate;return a===Ke||o!==null&&o===Ke}function hx(a,o){br=Sc=!0;var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}function fx(a,o,d){if((d&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,d|=f,o.lanes=d,li(a,d)}}var Dc={readContext:ps,use:Ec,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useLayoutEffect:Bt,useInsertionEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useSyncExternalStore:Bt,useId:Bt,useHostTransitionStatus:Bt,useFormState:Bt,useActionState:Bt,useOptimistic:Bt,useMemoCache:Bt,useCacheRefresh:Bt},mx={readContext:ps,use:Ec,useCallback:function(a,o){return Ts().memoizedState=[a,o===void 0?null:o],a},useContext:ps,useEffect:Zy,useImperativeHandle:function(a,o,d){d=d!=null?d.concat([a]):null,Cc(4194308,4,tx.bind(null,o,a),d)},useLayoutEffect:function(a,o){return Cc(4194308,4,a,o)},useInsertionEffect:function(a,o){Cc(4,2,a,o)},useMemo:function(a,o){var d=Ts();o=o===void 0?null:o;var f=a();if(vi){Ue(!0);try{a()}finally{Ue(!1)}}return d.memoizedState=[f,o],f},useReducer:function(a,o,d){var f=Ts();if(d!==void 0){var g=d(o);if(vi){Ue(!0);try{d(o)}finally{Ue(!1)}}}else g=o;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=UN.bind(null,Ke,a),[f.memoizedState,a]},useRef:function(a){var o=Ts();return a={current:a},o.memoizedState=a},useState:function(a){a=Hh(a);var o=a.queue,d=ux.bind(null,Ke,o);return o.dispatch=d,[a.memoizedState,d]},useDebugValue:Fh,useDeferredValue:function(a,o){var d=Ts();return Uh(d,a,o)},useTransition:function(){var a=Hh(!1);return a=rx.bind(null,Ke,a.queue,!0,!1),Ts().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,d){var f=Ke,g=Ts();if(ot){if(d===void 0)throw Error(s(407));d=d()}else{if(d=o(),St===null)throw Error(s(349));(it&124)!==0||Oy(f,o,d)}g.memoizedState=d;var b={value:d,getSnapshot:o};return g.queue=b,Zy(Py.bind(null,f,b,a),[a]),f.flags|=2048,wr(9,_c(),Iy.bind(null,f,b,d,o),null),d},useId:function(){var a=Ts(),o=St.identifierPrefix;if(ot){var d=ta,f=ea;d=(f&~(1<<32-dt(f)-1)).toString(32)+d,o=""+o+"R"+d,d=Nc++,0<d&&(o+="H"+d.toString(32)),o+=""}else d=IN++,o=""+o+"r"+d.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:Vh,useFormState:Gy,useActionState:Gy,useOptimistic:function(a){var o=Ts();o.memoizedState=o.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=$h.bind(null,Ke,!0,d),d.dispatch=o,[a,o]},useMemoCache:Ih,useCacheRefresh:function(){return Ts().memoizedState=FN.bind(null,Ke)}},px={readContext:ps,use:Ec,useCallback:nx,useContext:ps,useEffect:Ky,useImperativeHandle:sx,useInsertionEffect:Jy,useLayoutEffect:ex,useMemo:ax,useReducer:jc,useRef:Qy,useState:function(){return jc(aa)},useDebugValue:Fh,useDeferredValue:function(a,o){var d=$t();return ix(d,mt.memoizedState,a,o)},useTransition:function(){var a=jc(aa)[0],o=$t().memoizedState;return[typeof a=="boolean"?a:Dl(a),o]},useSyncExternalStore:Ly,useId:cx,useHostTransitionStatus:Vh,useFormState:Yy,useActionState:Yy,useOptimistic:function(a,o){var d=$t();return zy(d,mt,a,o)},useMemoCache:Ih,useCacheRefresh:dx},qN={readContext:ps,use:Ec,useCallback:nx,useContext:ps,useEffect:Ky,useImperativeHandle:sx,useInsertionEffect:Jy,useLayoutEffect:ex,useMemo:ax,useReducer:Bh,useRef:Qy,useState:function(){return Bh(aa)},useDebugValue:Fh,useDeferredValue:function(a,o){var d=$t();return mt===null?Uh(d,a,o):ix(d,mt.memoizedState,a,o)},useTransition:function(){var a=Bh(aa)[0],o=$t().memoizedState;return[typeof a=="boolean"?a:Dl(a),o]},useSyncExternalStore:Ly,useId:cx,useHostTransitionStatus:Vh,useFormState:Xy,useActionState:Xy,useOptimistic:function(a,o){var d=$t();return mt!==null?zy(d,mt,a,o):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:Ih,useCacheRefresh:dx},Ar=null,Ml=0;function Rc(a){var o=Ml;return Ml+=1,Ar===null&&(Ar=[]),jy(Ar,a,o)}function Ll(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function kc(a,o){throw o.$$typeof===y?Error(s(525)):(a=Object.prototype.toString.call(o),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function gx(a){var o=a._init;return o(a._payload)}function yx(a){function o(Y,U){if(a){var Q=Y.deletions;Q===null?(Y.deletions=[U],Y.flags|=16):Q.push(U)}}function d(Y,U){if(!a)return null;for(;U!==null;)o(Y,U),U=U.sibling;return null}function f(Y){for(var U=new Map;Y!==null;)Y.key!==null?U.set(Y.key,Y):U.set(Y.index,Y),Y=Y.sibling;return U}function g(Y,U){return Y=Jn(Y,U),Y.index=0,Y.sibling=null,Y}function b(Y,U,Q){return Y.index=Q,a?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<U?(Y.flags|=67108866,U):Q):(Y.flags|=67108866,U)):(Y.flags|=1048576,U)}function E(Y){return a&&Y.alternate===null&&(Y.flags|=67108866),Y}function k(Y,U,Q,fe){return U===null||U.tag!==6?(U=hh(Q,Y.mode,fe),U.return=Y,U):(U=g(U,Q),U.return=Y,U)}function P(Y,U,Q,fe){var Te=Q.type;return Te===w?ue(Y,U,Q.props.children,fe,Q.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===F&&gx(Te)===U.type)?(U=g(U,Q.props),Ll(U,Q),U.return=Y,U):(U=mc(Q.type,Q.key,Q.props,null,Y.mode,fe),Ll(U,Q),U.return=Y,U)}function J(Y,U,Q,fe){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=fh(Q,Y.mode,fe),U.return=Y,U):(U=g(U,Q.children||[]),U.return=Y,U)}function ue(Y,U,Q,fe,Te){return U===null||U.tag!==7?(U=hi(Q,Y.mode,fe,Te),U.return=Y,U):(U=g(U,Q),U.return=Y,U)}function pe(Y,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=hh(""+U,Y.mode,Q),U.return=Y,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return Q=mc(U.type,U.key,U.props,null,Y.mode,Q),Ll(Q,U),Q.return=Y,Q;case v:return U=fh(U,Y.mode,Q),U.return=Y,U;case F:var fe=U._init;return U=fe(U._payload),pe(Y,U,Q)}if(me(U)||Z(U))return U=hi(U,Y.mode,Q,null),U.return=Y,U;if(typeof U.then=="function")return pe(Y,Rc(U),Q);if(U.$$typeof===C)return pe(Y,xc(Y,U),Q);kc(Y,U)}return null}function se(Y,U,Q,fe){var Te=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Te!==null?null:k(Y,U,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return Q.key===Te?P(Y,U,Q,fe):null;case v:return Q.key===Te?J(Y,U,Q,fe):null;case F:return Te=Q._init,Q=Te(Q._payload),se(Y,U,Q,fe)}if(me(Q)||Z(Q))return Te!==null?null:ue(Y,U,Q,fe,null);if(typeof Q.then=="function")return se(Y,U,Rc(Q),fe);if(Q.$$typeof===C)return se(Y,U,xc(Y,Q),fe);kc(Y,Q)}return null}function ne(Y,U,Q,fe,Te){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Y=Y.get(Q)||null,k(U,Y,""+fe,Te);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case x:return Y=Y.get(fe.key===null?Q:fe.key)||null,P(U,Y,fe,Te);case v:return Y=Y.get(fe.key===null?Q:fe.key)||null,J(U,Y,fe,Te);case F:var Je=fe._init;return fe=Je(fe._payload),ne(Y,U,Q,fe,Te)}if(me(fe)||Z(fe))return Y=Y.get(Q)||null,ue(U,Y,fe,Te,null);if(typeof fe.then=="function")return ne(Y,U,Q,Rc(fe),Te);if(fe.$$typeof===C)return ne(Y,U,Q,xc(U,fe),Te);kc(U,fe)}return null}function Fe(Y,U,Q,fe){for(var Te=null,Je=null,Re=U,He=U=0,ns=null;Re!==null&&He<Q.length;He++){Re.index>He?(ns=Re,Re=null):ns=Re.sibling;var rt=se(Y,Re,Q[He],fe);if(rt===null){Re===null&&(Re=ns);break}a&&Re&&rt.alternate===null&&o(Y,Re),U=b(rt,U,He),Je===null?Te=rt:Je.sibling=rt,Je=rt,Re=ns}if(He===Q.length)return d(Y,Re),ot&&mi(Y,He),Te;if(Re===null){for(;He<Q.length;He++)Re=pe(Y,Q[He],fe),Re!==null&&(U=b(Re,U,He),Je===null?Te=Re:Je.sibling=Re,Je=Re);return ot&&mi(Y,He),Te}for(Re=f(Re);He<Q.length;He++)ns=ne(Re,Y,He,Q[He],fe),ns!==null&&(a&&ns.alternate!==null&&Re.delete(ns.key===null?He:ns.key),U=b(ns,U,He),Je===null?Te=ns:Je.sibling=ns,Je=ns);return a&&Re.forEach(function(qa){return o(Y,qa)}),ot&&mi(Y,He),Te}function Be(Y,U,Q,fe){if(Q==null)throw Error(s(151));for(var Te=null,Je=null,Re=U,He=U=0,ns=null,rt=Q.next();Re!==null&&!rt.done;He++,rt=Q.next()){Re.index>He?(ns=Re,Re=null):ns=Re.sibling;var qa=se(Y,Re,rt.value,fe);if(qa===null){Re===null&&(Re=ns);break}a&&Re&&qa.alternate===null&&o(Y,Re),U=b(qa,U,He),Je===null?Te=qa:Je.sibling=qa,Je=qa,Re=ns}if(rt.done)return d(Y,Re),ot&&mi(Y,He),Te;if(Re===null){for(;!rt.done;He++,rt=Q.next())rt=pe(Y,rt.value,fe),rt!==null&&(U=b(rt,U,He),Je===null?Te=rt:Je.sibling=rt,Je=rt);return ot&&mi(Y,He),Te}for(Re=f(Re);!rt.done;He++,rt=Q.next())rt=ne(Re,Y,He,rt.value,fe),rt!==null&&(a&&rt.alternate!==null&&Re.delete(rt.key===null?He:rt.key),U=b(rt,U,He),Je===null?Te=rt:Je.sibling=rt,Je=rt);return a&&Re.forEach(function(VE){return o(Y,VE)}),ot&&mi(Y,He),Te}function gt(Y,U,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===w&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:e:{for(var Te=Q.key;U!==null;){if(U.key===Te){if(Te=Q.type,Te===w){if(U.tag===7){d(Y,U.sibling),fe=g(U,Q.props.children),fe.return=Y,Y=fe;break e}}else if(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===F&&gx(Te)===U.type){d(Y,U.sibling),fe=g(U,Q.props),Ll(fe,Q),fe.return=Y,Y=fe;break e}d(Y,U);break}else o(Y,U);U=U.sibling}Q.type===w?(fe=hi(Q.props.children,Y.mode,fe,Q.key),fe.return=Y,Y=fe):(fe=mc(Q.type,Q.key,Q.props,null,Y.mode,fe),Ll(fe,Q),fe.return=Y,Y=fe)}return E(Y);case v:e:{for(Te=Q.key;U!==null;){if(U.key===Te)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){d(Y,U.sibling),fe=g(U,Q.children||[]),fe.return=Y,Y=fe;break e}else{d(Y,U);break}else o(Y,U);U=U.sibling}fe=fh(Q,Y.mode,fe),fe.return=Y,Y=fe}return E(Y);case F:return Te=Q._init,Q=Te(Q._payload),gt(Y,U,Q,fe)}if(me(Q))return Fe(Y,U,Q,fe);if(Z(Q)){if(Te=Z(Q),typeof Te!="function")throw Error(s(150));return Q=Te.call(Q),Be(Y,U,Q,fe)}if(typeof Q.then=="function")return gt(Y,U,Rc(Q),fe);if(Q.$$typeof===C)return gt(Y,U,xc(Y,Q),fe);kc(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(d(Y,U.sibling),fe=g(U,Q),fe.return=Y,Y=fe):(d(Y,U),fe=hh(Q,Y.mode,fe),fe.return=Y,Y=fe),E(Y)):d(Y,U)}return function(Y,U,Q,fe){try{Ml=0;var Te=gt(Y,U,Q,fe);return Ar=null,Te}catch(Re){if(Re===Nl||Re===vc)throw Re;var Je=Vs(29,Re,null,Y.mode);return Je.lanes=fe,Je.return=Y,Je}finally{}}}var Sr=yx(!0),xx=yx(!1),cn=q(null),On=null;function Ca(a){var o=a.alternate;G(Kt,Kt.current&1),G(cn,a),On===null&&(o===null||xr.current!==null||o.memoizedState!==null)&&(On=a)}function bx(a){if(a.tag===22){if(G(Kt,Kt.current),G(cn,a),On===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(On=a)}}else Ta()}function Ta(){G(Kt,Kt.current),G(cn,cn.current)}function ia(a){M(cn),On===a&&(On=null),M(Kt)}var Kt=q(0);function Mc(a){for(var o=a;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||If(d)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Gh(a,o,d,f){o=a.memoizedState,d=d(f,o),d=d==null?o:p({},o,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Yh={enqueueSetState:function(a,o,d){a=a._reactInternals;var f=Ws(),g=Ea(f);g.payload=o,d!=null&&(g.callback=d),o=ja(a,g,f),o!==null&&(Xs(o,a,f),jl(o,a,f))},enqueueReplaceState:function(a,o,d){a=a._reactInternals;var f=Ws(),g=Ea(f);g.tag=1,g.payload=o,d!=null&&(g.callback=d),o=ja(a,g,f),o!==null&&(Xs(o,a,f),jl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var d=Ws(),f=Ea(d);f.tag=2,o!=null&&(f.callback=o),o=ja(a,f,d),o!==null&&(Xs(o,a,d),jl(o,a,d))}};function vx(a,o,d,f,g,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,E):o.prototype&&o.prototype.isPureReactComponent?!gl(d,f)||!gl(g,b):!0}function wx(a,o,d,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,f),o.state!==a&&Yh.enqueueReplaceState(o,o.state,null)}function wi(a,o){var d=o;if("ref"in o){d={};for(var f in o)f!=="ref"&&(d[f]=o[f])}if(a=a.defaultProps){d===o&&(d=p({},d));for(var g in a)d[g]===void 0&&(d[g]=a[g])}return d}var Lc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function Ax(a){Lc(a)}function Sx(a){console.error(a)}function Nx(a){Lc(a)}function Oc(a,o){try{var d=a.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Ex(a,o,d){try{var f=a.onCaughtError;f(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Wh(a,o,d){return d=Ea(d),d.tag=3,d.payload={element:null},d.callback=function(){Oc(a,o)},d}function jx(a){return a=Ea(a),a.tag=3,a}function _x(a,o,d,f){var g=d.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;a.payload=function(){return g(b)},a.callback=function(){Ex(o,d,f)}}var E=d.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Ex(o,d,f),typeof g!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var k=f.stack;this.componentDidCatch(f.value,{componentStack:k!==null?k:""})})}function VN(a,o,d,f,g){if(d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=d.alternate,o!==null&&wl(o,d,g,!0),d=cn.current,d!==null){switch(d.tag){case 13:return On===null?bf():d.alternate===null&&It===0&&(It=3),d.flags&=-257,d.flags|=65536,d.lanes=g,f===Sh?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([f]):o.add(f),wf(a,f,g)),!1;case 22:return d.flags|=65536,f===Sh?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([f]):d.add(f)),wf(a,f,g)),!1}throw Error(s(435,d.tag))}return wf(a,f,g),bf(),!1}if(ot)return o=cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==gh&&(a=Error(s(422),{cause:f}),vl(an(a,d)))):(f!==gh&&(o=Error(s(423),{cause:f}),vl(an(o,d))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=an(f,d),g=Wh(a.stateNode,f,g),jh(a,g),It!==4&&(It=2)),!1;var b=Error(s(520),{cause:f});if(b=an(b,d),Fl===null?Fl=[b]:Fl.push(b),It!==4&&(It=2),o===null)return!0;f=an(f,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,a=g&-g,d.lanes|=a,a=Wh(d.stateNode,f,a),jh(d,a),!1;case 1:if(o=d.type,b=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Oa===null||!Oa.has(b))))return d.flags|=65536,g&=-g,d.lanes|=g,g=jx(g),_x(g,a,d,f),jh(d,g),!1}d=d.return}while(d!==null);return!1}var Cx=Error(s(461)),ts=!1;function os(a,o,d,f){o.child=a===null?xx(o,null,d,f):Sr(o,a.child,d,f)}function Tx(a,o,d,f,g){d=d.render;var b=o.ref;if("ref"in f){var E={};for(var k in f)k!=="ref"&&(E[k]=f[k])}else E=f;return xi(o),f=Rh(a,o,d,E,b,g),k=kh(),a!==null&&!ts?(Mh(a,o,g),ra(a,o,g)):(ot&&k&&mh(o),o.flags|=1,os(a,o,f,g),o.child)}function Dx(a,o,d,f,g){if(a===null){var b=d.type;return typeof b=="function"&&!uh(b)&&b.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=b,Rx(a,o,b,f,g)):(a=mc(d.type,null,f,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!sf(a,g)){var E=b.memoizedProps;if(d=d.compare,d=d!==null?d:gl,d(E,f)&&a.ref===o.ref)return ra(a,o,g)}return o.flags|=1,a=Jn(b,f),a.ref=o.ref,a.return=o,o.child=a}function Rx(a,o,d,f,g){if(a!==null){var b=a.memoizedProps;if(gl(b,f)&&a.ref===o.ref)if(ts=!1,o.pendingProps=f=b,sf(a,g))(a.flags&131072)!==0&&(ts=!0);else return o.lanes=a.lanes,ra(a,o,g)}return Xh(a,o,d,f,g)}function kx(a,o,d){var f=o.pendingProps,g=f.children,b=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=b!==null?b.baseLanes|d:d,a!==null){for(g=o.child=a.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;o.childLanes=b&~f}else o.childLanes=0,o.child=null;return Mx(a,o,f,d)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&bc(o,b!==null?b.cachePool:null),b!==null?Ry(o,b):Ch(),bx(o);else return o.lanes=o.childLanes=536870912,Mx(a,o,b!==null?b.baseLanes|d:d,d)}else b!==null?(bc(o,b.cachePool),Ry(o,b),Ta(),o.memoizedState=null):(a!==null&&bc(o,null),Ch(),Ta());return os(a,o,g,d),o.child}function Mx(a,o,d,f){var g=Ah();return g=g===null?null:{parent:Zt._currentValue,pool:g},o.memoizedState={baseLanes:d,cachePool:g},a!==null&&bc(o,null),Ch(),bx(o),a!==null&&wl(a,o,f,!0),null}function Ic(a,o){var d=o.ref;if(d===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(a===null||a.ref!==d)&&(o.flags|=4194816)}}function Xh(a,o,d,f,g){return xi(o),d=Rh(a,o,d,f,void 0,g),f=kh(),a!==null&&!ts?(Mh(a,o,g),ra(a,o,g)):(ot&&f&&mh(o),o.flags|=1,os(a,o,d,g),o.child)}function Lx(a,o,d,f,g,b){return xi(o),o.updateQueue=null,d=My(o,f,d,g),ky(a),f=kh(),a!==null&&!ts?(Mh(a,o,b),ra(a,o,b)):(ot&&f&&mh(o),o.flags|=1,os(a,o,d,b),o.child)}function Ox(a,o,d,f,g){if(xi(o),o.stateNode===null){var b=fr,E=d.contextType;typeof E=="object"&&E!==null&&(b=ps(E)),b=new d(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Yh,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},Nh(o),E=d.contextType,b.context=typeof E=="object"&&E!==null?ps(E):fr,b.state=o.memoizedState,E=d.getDerivedStateFromProps,typeof E=="function"&&(Gh(o,d,E,f),b.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&Yh.enqueueReplaceState(b,b.state,null),Cl(o,f,b,g),_l(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){b=o.stateNode;var k=o.memoizedProps,P=wi(d,k);b.props=P;var J=b.context,ue=d.contextType;E=fr,typeof ue=="object"&&ue!==null&&(E=ps(ue));var pe=d.getDerivedStateFromProps;ue=typeof pe=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,ue||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||J!==E)&&wx(o,b,f,E),Na=!1;var se=o.memoizedState;b.state=se,Cl(o,f,b,g),_l(),J=o.memoizedState,k||se!==J||Na?(typeof pe=="function"&&(Gh(o,d,pe,f),J=o.memoizedState),(P=Na||vx(o,d,P,f,se,J,E))?(ue||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=J),b.props=f,b.state=J,b.context=E,f=P):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,Eh(a,o),E=o.memoizedProps,ue=wi(d,E),b.props=ue,pe=o.pendingProps,se=b.context,J=d.contextType,P=fr,typeof J=="object"&&J!==null&&(P=ps(J)),k=d.getDerivedStateFromProps,(J=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==pe||se!==P)&&wx(o,b,f,P),Na=!1,se=o.memoizedState,b.state=se,Cl(o,f,b,g),_l();var ne=o.memoizedState;E!==pe||se!==ne||Na||a!==null&&a.dependencies!==null&&yc(a.dependencies)?(typeof k=="function"&&(Gh(o,d,k,f),ne=o.memoizedState),(ue=Na||vx(o,d,ue,f,se,ne,P)||a!==null&&a.dependencies!==null&&yc(a.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ne,P),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ne,P)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&se===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&se===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ne),b.props=f,b.state=ne,b.context=P,f=ue):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&se===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&se===a.memoizedState||(o.flags|=1024),f=!1)}return b=f,Ic(a,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,d=f&&typeof d.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&f?(o.child=Sr(o,a.child,null,g),o.child=Sr(o,null,d,g)):os(a,o,d,g),o.memoizedState=b.state,a=o.child):a=ra(a,o,g),a}function Ix(a,o,d,f){return bl(),o.flags|=256,os(a,o,d,f),o.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zh(a){return{baseLanes:a,cachePool:Sy()}}function Kh(a,o,d){return a=a!==null?a.childLanes&~d:0,o&&(a|=dn),a}function Px(a,o,d){var f=o.pendingProps,g=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Kt.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(ot){if(g?Ca(o):Ta(),ot){var k=Ot,P;if(P=k){e:{for(P=k,k=Ln;P.nodeType!==8;){if(!k){k=null;break e}if(P=An(P.nextSibling),P===null){k=null;break e}}k=P}k!==null?(o.memoizedState={dehydrated:k,treeContext:fi!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},P=Vs(18,null,null,0),P.stateNode=k,P.return=o,o.child=P,ws=o,Ot=null,P=!0):P=!1}P||gi(o)}if(k=o.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return If(k)?o.lanes=32:o.lanes=536870912,null;ia(o)}return k=f.children,f=f.fallback,g?(Ta(),g=o.mode,k=Pc({mode:"hidden",children:k},g),f=hi(f,g,d,null),k.return=o,f.return=o,k.sibling=f,o.child=k,g=o.child,g.memoizedState=Zh(d),g.childLanes=Kh(a,E,d),o.memoizedState=Qh,f):(Ca(o),Jh(o,k))}if(P=a.memoizedState,P!==null&&(k=P.dehydrated,k!==null)){if(b)o.flags&256?(Ca(o),o.flags&=-257,o=ef(a,o,d)):o.memoizedState!==null?(Ta(),o.child=a.child,o.flags|=128,o=null):(Ta(),g=f.fallback,k=o.mode,f=Pc({mode:"visible",children:f.children},k),g=hi(g,k,d,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,Sr(o,a.child,null,d),f=o.child,f.memoizedState=Zh(d),f.childLanes=Kh(a,E,d),o.memoizedState=Qh,o=g);else if(Ca(o),If(k)){if(E=k.nextSibling&&k.nextSibling.dataset,E)var J=E.dgst;E=J,f=Error(s(419)),f.stack="",f.digest=E,vl({value:f,source:null,stack:null}),o=ef(a,o,d)}else if(ts||wl(a,o,d,!1),E=(d&a.childLanes)!==0,ts||E){if(E=St,E!==null&&(f=d&-d,f=(f&42)!==0?1:X(f),f=(f&(E.suspendedLanes|d))!==0?0:f,f!==0&&f!==P.retryLane))throw P.retryLane=f,hr(a,f),Xs(E,a,f),Cx;k.data==="$?"||bf(),o=ef(a,o,d)}else k.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=P.treeContext,Ot=An(k.nextSibling),ws=o,ot=!0,pi=null,Ln=!1,a!==null&&(ln[on++]=ea,ln[on++]=ta,ln[on++]=fi,ea=a.id,ta=a.overflow,fi=o),o=Jh(o,f.children),o.flags|=4096);return o}return g?(Ta(),g=f.fallback,k=o.mode,P=a.child,J=P.sibling,f=Jn(P,{mode:"hidden",children:f.children}),f.subtreeFlags=P.subtreeFlags&65011712,J!==null?g=Jn(J,g):(g=hi(g,k,d,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,k=a.child.memoizedState,k===null?k=Zh(d):(P=k.cachePool,P!==null?(J=Zt._currentValue,P=P.parent!==J?{parent:J,pool:J}:P):P=Sy(),k={baseLanes:k.baseLanes|d,cachePool:P}),g.memoizedState=k,g.childLanes=Kh(a,E,d),o.memoizedState=Qh,f):(Ca(o),d=a.child,a=d.sibling,d=Jn(d,{mode:"visible",children:f.children}),d.return=o,d.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=d,o.memoizedState=null,d)}function Jh(a,o){return o=Pc({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Pc(a,o){return a=Vs(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ef(a,o,d){return Sr(o,a.child,null,d),a=Jh(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Bx(a,o,d){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),xh(a.return,o,d)}function tf(a,o,d,f,g){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=d,b.tailMode=g)}function Hx(a,o,d){var f=o.pendingProps,g=f.revealOrder,b=f.tail;if(os(a,o,f.children,d),f=Kt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Bx(a,d,o);else if(a.tag===19)Bx(a,d,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(G(Kt,f),g){case"forwards":for(d=o.child,g=null;d!==null;)a=d.alternate,a!==null&&Mc(a)===null&&(g=d),d=d.sibling;d=g,d===null?(g=o.child,o.child=null):(g=d.sibling,d.sibling=null),tf(o,!1,g,d,b);break;case"backwards":for(d=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&Mc(a)===null){o.child=g;break}a=g.sibling,g.sibling=d,d=g,g=a}tf(o,!0,d,null,b);break;case"together":tf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ra(a,o,d){if(a!==null&&(o.dependencies=a.dependencies),La|=o.lanes,(d&o.childLanes)===0)if(a!==null){if(wl(a,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(s(153));if(o.child!==null){for(a=o.child,d=Jn(a,a.pendingProps),o.child=d,d.return=o;a.sibling!==null;)a=a.sibling,d=d.sibling=Jn(a,a.pendingProps),d.return=o;d.sibling=null}return o.child}function sf(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&yc(a)))}function $N(a,o,d){switch(o.tag){case 3:Le(o,o.stateNode.containerInfo),Sa(o,Zt,a.memoizedState.cache),bl();break;case 27:case 5:$e(o);break;case 4:Le(o,o.stateNode.containerInfo);break;case 10:Sa(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Ca(o),o.flags|=128,null):(d&o.child.childLanes)!==0?Px(a,o,d):(Ca(o),a=ra(a,o,d),a!==null?a.sibling:null);Ca(o);break;case 19:var g=(a.flags&128)!==0;if(f=(d&o.childLanes)!==0,f||(wl(a,o,d,!1),f=(d&o.childLanes)!==0),g){if(f)return Hx(a,o,d);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(Kt,Kt.current),f)break;return null;case 22:case 23:return o.lanes=0,kx(a,o,d);case 24:Sa(o,Zt,a.memoizedState.cache)}return ra(a,o,d)}function zx(a,o,d){if(a!==null)if(a.memoizedProps!==o.pendingProps)ts=!0;else{if(!sf(a,d)&&(o.flags&128)===0)return ts=!1,$N(a,o,d);ts=(a.flags&131072)!==0}else ts=!1,ot&&(o.flags&1048576)!==0&&gy(o,gc,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")uh(f)?(a=wi(f,a),o.tag=1,o=Ox(null,o,f,a,d)):(o.tag=0,o=Xh(null,o,f,a,d));else{if(f!=null){if(g=f.$$typeof,g===R){o.tag=11,o=Tx(null,o,f,a,d);break e}else if(g===B){o.tag=14,o=Dx(null,o,f,a,d);break e}}throw o=ce(f)||f,Error(s(306,o,""))}}return o;case 0:return Xh(a,o,o.type,o.pendingProps,d);case 1:return f=o.type,g=wi(f,o.pendingProps),Ox(a,o,f,g,d);case 3:e:{if(Le(o,o.stateNode.containerInfo),a===null)throw Error(s(387));f=o.pendingProps;var b=o.memoizedState;g=b.element,Eh(a,o),Cl(o,f,null,d);var E=o.memoizedState;if(f=E.cache,Sa(o,Zt,f),f!==b.cache&&bh(o,[Zt],d,!0),_l(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Ix(a,o,f,d);break e}else if(f!==g){g=an(Error(s(424)),o),vl(g),o=Ix(a,o,f,d);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ot=An(a.firstChild),ws=o,ot=!0,pi=null,Ln=!0,d=xx(o,null,f,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(bl(),f===g){o=ra(a,o,d);break e}os(a,o,f,d)}o=o.child}return o;case 26:return Ic(a,o),a===null?(d=V0(o.type,null,o.pendingProps,null))?o.memoizedState=d:ot||(d=o.type,a=o.pendingProps,f=Zc(xe.current).createElement(d),f[bt]=o,f[Nt]=a,ds(f,d,a),es(f),o.stateNode=f):o.memoizedState=V0(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return $e(o),a===null&&ot&&(f=o.stateNode=F0(o.type,o.pendingProps,xe.current),ws=o,Ln=!0,g=Ot,Ba(o.type)?(Pf=g,Ot=An(f.firstChild)):Ot=g),os(a,o,o.pendingProps.children,d),Ic(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&ot&&((g=f=Ot)&&(f=bE(f,o.type,o.pendingProps,Ln),f!==null?(o.stateNode=f,ws=o,Ot=An(f.firstChild),Ln=!1,g=!0):g=!1),g||gi(o)),$e(o),g=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,f=b.children,Mf(g,b)?f=null:E!==null&&Mf(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=Rh(a,o,PN,null,null,d),Ql._currentValue=g),Ic(a,o),os(a,o,f,d),o.child;case 6:return a===null&&ot&&((a=d=Ot)&&(d=vE(d,o.pendingProps,Ln),d!==null?(o.stateNode=d,ws=o,Ot=null,a=!0):a=!1),a||gi(o)),null;case 13:return Px(a,o,d);case 4:return Le(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=Sr(o,null,f,d):os(a,o,f,d),o.child;case 11:return Tx(a,o,o.type,o.pendingProps,d);case 7:return os(a,o,o.pendingProps,d),o.child;case 8:return os(a,o,o.pendingProps.children,d),o.child;case 12:return os(a,o,o.pendingProps.children,d),o.child;case 10:return f=o.pendingProps,Sa(o,o.type,f.value),os(a,o,f.children,d),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,xi(o),g=ps(g),f=f(g),o.flags|=1,os(a,o,f,d),o.child;case 14:return Dx(a,o,o.type,o.pendingProps,d);case 15:return Rx(a,o,o.type,o.pendingProps,d);case 19:return Hx(a,o,d);case 31:return f=o.pendingProps,d=o.mode,f={mode:f.mode,children:f.children},a===null?(d=Pc(f,d),d.ref=o.ref,o.child=d,d.return=o,o=d):(d=Jn(a.child,f),d.ref=o.ref,o.child=d,d.return=o,o=d),o;case 22:return kx(a,o,d);case 24:return xi(o),f=ps(Zt),a===null?(g=Ah(),g===null&&(g=St,b=vh(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=d),g=b),o.memoizedState={parent:f,cache:g},Nh(o),Sa(o,Zt,g)):((a.lanes&d)!==0&&(Eh(a,o),Cl(o,null,null,d),_l()),g=a.memoizedState,b=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Sa(o,Zt,f)):(f=b.cache,Sa(o,Zt,f),f!==g.cache&&bh(o,[Zt],d,!0))),os(a,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function la(a){a.flags|=4}function Fx(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!X0(o)){if(o=cn.current,o!==null&&((it&4194048)===it?On!==null:(it&62914560)!==it&&(it&536870912)===0||o!==On))throw El=Sh,Ny;a.flags|=8192}}function Bc(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?gn():536870912,a.lanes|=o,_r|=o)}function Ol(a,o){if(!ot)switch(a.tailMode){case"hidden":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function kt(a){var o=a.alternate!==null&&a.alternate.child===a.child,d=0,f=0;if(o)for(var g=a.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=d,o}function GN(a,o,d){var f=o.pendingProps;switch(ph(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(o),null;case 1:return kt(o),null;case 3:return d=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),na(Zt),he(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(xl(o)?la(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,by())),kt(o),null;case 26:return d=o.memoizedState,a===null?(la(o),d!==null?(kt(o),Fx(o,d)):(kt(o),o.flags&=-16777217)):d?d!==a.memoizedState?(la(o),kt(o),Fx(o,d)):(kt(o),o.flags&=-16777217):(a.memoizedProps!==f&&la(o),kt(o),o.flags&=-16777217),null;case 27:ge(o),d=xe.current;var g=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&la(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return kt(o),null}a=de.current,xl(o)?yy(o):(a=F0(g,f,d),o.stateNode=a,la(o))}return kt(o),null;case 5:if(ge(o),d=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&la(o);else{if(!f){if(o.stateNode===null)throw Error(s(166));return kt(o),null}if(a=de.current,xl(o))yy(o);else{switch(g=Zc(xe.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?g.createElement(d,{is:f.is}):g.createElement(d)}}a[bt]=o,a[Nt]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=a;e:switch(ds(a,d,f),d){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&la(o)}}return kt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&la(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(s(166));if(a=xe.current,xl(o)){if(a=o.stateNode,d=o.memoizedProps,f=null,g=ws,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[bt]=o,a=!!(a.nodeValue===d||f!==null&&f.suppressHydrationWarning===!0||L0(a.nodeValue,d)),a||gi(o)}else a=Zc(a).createTextNode(f),a[bt]=o,o.stateNode=a}return kt(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=xl(o),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[bt]=o}else bl(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;kt(o),g=!1}else g=by(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(ia(o),o):(ia(o),null)}if(ia(o),(o.flags&128)!==0)return o.lanes=d,o;if(d=f!==null,a=a!==null&&a.memoizedState!==null,d){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)}return d!==a&&d&&(o.child.flags|=8192),Bc(o,o.updateQueue),kt(o),null;case 4:return he(),a===null&&Cf(o.stateNode.containerInfo),kt(o),null;case 10:return na(o.type),kt(o),null;case 19:if(M(Kt),g=o.memoizedState,g===null)return kt(o),null;if(f=(o.flags&128)!==0,b=g.rendering,b===null)if(f)Ol(g,!1);else{if(It!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Mc(a),b!==null){for(o.flags|=128,Ol(g,!1),a=b.updateQueue,o.updateQueue=a,Bc(o,a),o.subtreeFlags=0,a=d,d=o.child;d!==null;)py(d,a),d=d.sibling;return G(Kt,Kt.current&1|2),o.child}a=a.sibling}g.tail!==null&&je()>Fc&&(o.flags|=128,f=!0,Ol(g,!1),o.lanes=4194304)}else{if(!f)if(a=Mc(b),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,Bc(o,a),Ol(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!ot)return kt(o),null}else 2*je()-g.renderingStartTime>Fc&&d!==536870912&&(o.flags|=128,f=!0,Ol(g,!1),o.lanes=4194304);g.isBackwards?(b.sibling=o.child,o.child=b):(a=g.last,a!==null?a.sibling=b:o.child=b,g.last=b)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=je(),o.sibling=null,a=Kt.current,G(Kt,f?a&1|2:a&1),o):(kt(o),null);case 22:case 23:return ia(o),Th(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(d&536870912)!==0&&(o.flags&128)===0&&(kt(o),o.subtreeFlags&6&&(o.flags|=8192)):kt(o),d=o.updateQueue,d!==null&&Bc(o,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048),a!==null&&M(bi),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),na(Zt),kt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function YN(a,o){switch(ph(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return na(Zt),he(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return ge(o),null;case 13:if(ia(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(s(340));bl()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return M(Kt),null;case 4:return he(),null;case 10:return na(o.type),null;case 22:case 23:return ia(o),Th(),a!==null&&M(bi),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return na(Zt),null;case 25:return null;default:return null}}function Ux(a,o){switch(ph(o),o.tag){case 3:na(Zt),he();break;case 26:case 27:case 5:ge(o);break;case 4:he();break;case 13:ia(o);break;case 19:M(Kt);break;case 10:na(o.type);break;case 22:case 23:ia(o),Th(),a!==null&&M(bi);break;case 24:na(Zt)}}function Il(a,o){try{var d=o.updateQueue,f=d!==null?d.lastEffect:null;if(f!==null){var g=f.next;d=g;do{if((d.tag&a)===a){f=void 0;var b=d.create,E=d.inst;f=b(),E.destroy=f}d=d.next}while(d!==g)}}catch(k){vt(o,o.return,k)}}function Da(a,o,d){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&a)===a){var E=f.inst,k=E.destroy;if(k!==void 0){E.destroy=void 0,g=o;var P=d,J=k;try{J()}catch(ue){vt(g,P,ue)}}}f=f.next}while(f!==b)}}catch(ue){vt(o,o.return,ue)}}function qx(a){var o=a.updateQueue;if(o!==null){var d=a.stateNode;try{Dy(o,d)}catch(f){vt(a,a.return,f)}}}function Vx(a,o,d){d.props=wi(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(f){vt(a,o,f)}}function Pl(a,o){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof d=="function"?a.refCleanup=d(f):d.current=f}}catch(g){vt(a,o,g)}}function In(a,o){var d=a.ref,f=a.refCleanup;if(d!==null)if(typeof f=="function")try{f()}catch(g){vt(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(g){vt(a,o,g)}else d.current=null}function $x(a){var o=a.type,d=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&f.focus();break e;case"img":d.src?f.src=d.src:d.srcSet&&(f.srcset=d.srcSet)}}catch(g){vt(a,a.return,g)}}function nf(a,o,d){try{var f=a.stateNode;mE(f,a.type,d,o),f[Nt]=o}catch(g){vt(a,a.return,g)}}function Gx(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ba(a.type)||a.tag===4}function af(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Gx(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ba(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function rf(a,o,d){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(a),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=Qc));else if(f!==4&&(f===27&&Ba(a.type)&&(d=a.stateNode,o=null),a=a.child,a!==null))for(rf(a,o,d),a=a.sibling;a!==null;)rf(a,o,d),a=a.sibling}function Hc(a,o,d){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?d.insertBefore(a,o):d.appendChild(a);else if(f!==4&&(f===27&&Ba(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(Hc(a,o,d),a=a.sibling;a!==null;)Hc(a,o,d),a=a.sibling}function Yx(a){var o=a.stateNode,d=a.memoizedProps;try{for(var f=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);ds(o,f,d),o[bt]=a,o[Nt]=d}catch(b){vt(a,a.return,b)}}var oa=!1,Ht=!1,lf=!1,Wx=typeof WeakSet=="function"?WeakSet:Set,ss=null;function WN(a,o){if(a=a.containerInfo,Rf=nd,a=iy(a),ah(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var E=0,k=-1,P=-1,J=0,ue=0,pe=a,se=null;t:for(;;){for(var ne;pe!==d||g!==0&&pe.nodeType!==3||(k=E+g),pe!==b||f!==0&&pe.nodeType!==3||(P=E+f),pe.nodeType===3&&(E+=pe.nodeValue.length),(ne=pe.firstChild)!==null;)se=pe,pe=ne;for(;;){if(pe===a)break t;if(se===d&&++J===g&&(k=E),se===b&&++ue===f&&(P=E),(ne=pe.nextSibling)!==null)break;pe=se,se=pe.parentNode}pe=ne}d=k===-1||P===-1?null:{start:k,end:P}}else d=null}d=d||{start:0,end:0}}else d=null;for(kf={focusedElem:a,selectionRange:d},nd=!1,ss=o;ss!==null;)if(o=ss,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,ss=a;else for(;ss!==null;){switch(o=ss,b=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,d=o,g=b.memoizedProps,b=b.memoizedState,f=d.stateNode;try{var Fe=wi(d.type,g,d.elementType===d.type);a=f.getSnapshotBeforeUpdate(Fe,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(Be){vt(d,d.return,Be)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,d=a.nodeType,d===9)Of(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Of(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=o.sibling,a!==null){a.return=o.return,ss=a;break}ss=o.return}}function Xx(a,o,d){var f=d.flags;switch(d.tag){case 0:case 11:case 15:Ra(a,d),f&4&&Il(5,d);break;case 1:if(Ra(a,d),f&4)if(a=d.stateNode,o===null)try{a.componentDidMount()}catch(E){vt(d,d.return,E)}else{var g=wi(d.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){vt(d,d.return,E)}}f&64&&qx(d),f&512&&Pl(d,d.return);break;case 3:if(Ra(a,d),f&64&&(a=d.updateQueue,a!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{Dy(a,o)}catch(E){vt(d,d.return,E)}}break;case 27:o===null&&f&4&&Yx(d);case 26:case 5:Ra(a,d),o===null&&f&4&&$x(d),f&512&&Pl(d,d.return);break;case 12:Ra(a,d);break;case 13:Ra(a,d),f&4&&Kx(a,d),f&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=nE.bind(null,d),wE(a,d))));break;case 22:if(f=d.memoizedState!==null||oa,!f){o=o!==null&&o.memoizedState!==null||Ht,g=oa;var b=Ht;oa=f,(Ht=o)&&!b?ka(a,d,(d.subtreeFlags&8772)!==0):Ra(a,d),oa=g,Ht=b}break;case 30:break;default:Ra(a,d)}}function Qx(a){var o=a.alternate;o!==null&&(a.alternate=null,Qx(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&ms(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Et=null,Ds=!1;function ca(a,o,d){for(d=d.child;d!==null;)Zx(a,o,d),d=d.sibling}function Zx(a,o,d){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(Se,d)}catch{}switch(d.tag){case 26:Ht||In(d,o),ca(a,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ht||In(d,o);var f=Et,g=Ds;Ba(d.type)&&(Et=d.stateNode,Ds=!1),ca(a,o,d),Gl(d.stateNode),Et=f,Ds=g;break;case 5:Ht||In(d,o);case 6:if(f=Et,g=Ds,Et=null,ca(a,o,d),Et=f,Ds=g,Et!==null)if(Ds)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(d.stateNode)}catch(b){vt(d,o,b)}else try{Et.removeChild(d.stateNode)}catch(b){vt(d,o,b)}break;case 18:Et!==null&&(Ds?(a=Et,H0(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),eo(a)):H0(Et,d.stateNode));break;case 4:f=Et,g=Ds,Et=d.stateNode.containerInfo,Ds=!0,ca(a,o,d),Et=f,Ds=g;break;case 0:case 11:case 14:case 15:Ht||Da(2,d,o),Ht||Da(4,d,o),ca(a,o,d);break;case 1:Ht||(In(d,o),f=d.stateNode,typeof f.componentWillUnmount=="function"&&Vx(d,o,f)),ca(a,o,d);break;case 21:ca(a,o,d);break;case 22:Ht=(f=Ht)||d.memoizedState!==null,ca(a,o,d),Ht=f;break;default:ca(a,o,d)}}function Kx(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{eo(a)}catch(d){vt(o,o.return,d)}}function XN(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Wx),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Wx),o;default:throw Error(s(435,a.tag))}}function of(a,o){var d=XN(a);o.forEach(function(f){var g=aE.bind(null,a,f);d.has(f)||(d.add(f),f.then(g,g))})}function $s(a,o){var d=o.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f],b=a,E=o,k=E;e:for(;k!==null;){switch(k.tag){case 27:if(Ba(k.type)){Et=k.stateNode,Ds=!1;break e}break;case 5:Et=k.stateNode,Ds=!1;break e;case 3:case 4:Et=k.stateNode.containerInfo,Ds=!0;break e}k=k.return}if(Et===null)throw Error(s(160));Zx(b,E,g),Et=null,Ds=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Jx(o,a),o=o.sibling}var wn=null;function Jx(a,o){var d=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:$s(o,a),Gs(a),f&4&&(Da(3,a,a.return),Il(3,a),Da(5,a,a.return));break;case 1:$s(o,a),Gs(a),f&512&&(Ht||d===null||In(d,d.return)),f&64&&oa&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?f:d.concat(f))));break;case 26:var g=wn;if($s(o,a),Gs(a),f&512&&(Ht||d===null||In(d,d.return)),f&4){var b=d!==null?d.memoizedState:null;if(f=a.memoizedState,d===null)if(f===null)if(a.stateNode===null){e:{f=a.type,d=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[xn]||b[bt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),ds(b,f,d),b[bt]=a,es(b),f=b;break e;case"link":var E=Y0("link","href",g).get(f+(d.href||""));if(E){for(var k=0;k<E.length;k++)if(b=E[k],b.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&b.getAttribute("rel")===(d.rel==null?null:d.rel)&&b.getAttribute("title")===(d.title==null?null:d.title)&&b.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){E.splice(k,1);break t}}b=g.createElement(f),ds(b,f,d),g.head.appendChild(b);break;case"meta":if(E=Y0("meta","content",g).get(f+(d.content||""))){for(k=0;k<E.length;k++)if(b=E[k],b.getAttribute("content")===(d.content==null?null:""+d.content)&&b.getAttribute("name")===(d.name==null?null:d.name)&&b.getAttribute("property")===(d.property==null?null:d.property)&&b.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&b.getAttribute("charset")===(d.charSet==null?null:d.charSet)){E.splice(k,1);break t}}b=g.createElement(f),ds(b,f,d),g.head.appendChild(b);break;default:throw Error(s(468,f))}b[bt]=a,es(b),f=b}a.stateNode=f}else W0(g,a.type,a.stateNode);else a.stateNode=G0(g,f,a.memoizedProps);else b!==f?(b===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):b.count--,f===null?W0(g,a.type,a.stateNode):G0(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&nf(a,a.memoizedProps,d.memoizedProps)}break;case 27:$s(o,a),Gs(a),f&512&&(Ht||d===null||In(d,d.return)),d!==null&&f&4&&nf(a,a.memoizedProps,d.memoizedProps);break;case 5:if($s(o,a),Gs(a),f&512&&(Ht||d===null||In(d,d.return)),a.flags&32){g=a.stateNode;try{ir(g,"")}catch(ne){vt(a,a.return,ne)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,nf(a,g,d!==null?d.memoizedProps:g)),f&1024&&(lf=!0);break;case 6:if($s(o,a),Gs(a),f&4){if(a.stateNode===null)throw Error(s(162));f=a.memoizedProps,d=a.stateNode;try{d.nodeValue=f}catch(ne){vt(a,a.return,ne)}}break;case 3:if(ed=null,g=wn,wn=Kc(o.containerInfo),$s(o,a),wn=g,Gs(a),f&4&&d!==null&&d.memoizedState.isDehydrated)try{eo(o.containerInfo)}catch(ne){vt(a,a.return,ne)}lf&&(lf=!1,e0(a));break;case 4:f=wn,wn=Kc(a.stateNode.containerInfo),$s(o,a),Gs(a),wn=f;break;case 12:$s(o,a),Gs(a);break;case 13:$s(o,a),Gs(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(mf=je()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,of(a,f)));break;case 22:g=a.memoizedState!==null;var P=d!==null&&d.memoizedState!==null,J=oa,ue=Ht;if(oa=J||g,Ht=ue||P,$s(o,a),Ht=ue,oa=J,Gs(a),f&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(d===null||P||oa||Ht||Ai(a)),d=null,o=a;;){if(o.tag===5||o.tag===26){if(d===null){P=d=o;try{if(b=P.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{k=P.stateNode;var pe=P.memoizedProps.style,se=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;k.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ne){vt(P,P.return,ne)}}}else if(o.tag===6){if(d===null){P=o;try{P.stateNode.nodeValue=g?"":P.memoizedProps}catch(ne){vt(P,P.return,ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(d=f.retryQueue,d!==null&&(f.retryQueue=null,of(a,d))));break;case 19:$s(o,a),Gs(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,of(a,f)));break;case 30:break;case 21:break;default:$s(o,a),Gs(a)}}function Gs(a){var o=a.flags;if(o&2){try{for(var d,f=a.return;f!==null;){if(Gx(f)){d=f;break}f=f.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var g=d.stateNode,b=af(a);Hc(a,b,g);break;case 5:var E=d.stateNode;d.flags&32&&(ir(E,""),d.flags&=-33);var k=af(a);Hc(a,k,E);break;case 3:case 4:var P=d.stateNode.containerInfo,J=af(a);rf(a,J,P);break;default:throw Error(s(161))}}catch(ue){vt(a,a.return,ue)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function e0(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;e0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ra(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Xx(a,o.alternate,o),o=o.sibling}function Ai(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Da(4,o,o.return),Ai(o);break;case 1:In(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&Vx(o,o.return,d),Ai(o);break;case 27:Gl(o.stateNode);case 26:case 5:In(o,o.return),Ai(o);break;case 22:o.memoizedState===null&&Ai(o);break;case 30:Ai(o);break;default:Ai(o)}a=a.sibling}}function ka(a,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:ka(g,b,d),Il(4,b);break;case 1:if(ka(g,b,d),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(J){vt(f,f.return,J)}if(f=b,g=f.updateQueue,g!==null){var k=f.stateNode;try{var P=g.shared.hiddenCallbacks;if(P!==null)for(g.shared.hiddenCallbacks=null,g=0;g<P.length;g++)Ty(P[g],k)}catch(J){vt(f,f.return,J)}}d&&E&64&&qx(b),Pl(b,b.return);break;case 27:Yx(b);case 26:case 5:ka(g,b,d),d&&f===null&&E&4&&$x(b),Pl(b,b.return);break;case 12:ka(g,b,d);break;case 13:ka(g,b,d),d&&E&4&&Kx(g,b);break;case 22:b.memoizedState===null&&ka(g,b,d),Pl(b,b.return);break;case 30:break;default:ka(g,b,d)}o=o.sibling}}function cf(a,o){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Al(d))}function df(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Al(a))}function Pn(a,o,d,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)t0(a,o,d,f),o=o.sibling}function t0(a,o,d,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Pn(a,o,d,f),g&2048&&Il(9,o);break;case 1:Pn(a,o,d,f);break;case 3:Pn(a,o,d,f),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Al(a)));break;case 12:if(g&2048){Pn(a,o,d,f),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,k=b.onPostCommit;typeof k=="function"&&k(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(P){vt(o,o.return,P)}}else Pn(a,o,d,f);break;case 13:Pn(a,o,d,f);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Pn(a,o,d,f):Bl(a,o):b._visibility&2?Pn(a,o,d,f):(b._visibility|=2,Nr(a,o,d,f,(o.subtreeFlags&10256)!==0)),g&2048&&cf(E,o);break;case 24:Pn(a,o,d,f),g&2048&&df(o.alternate,o);break;default:Pn(a,o,d,f)}}function Nr(a,o,d,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var b=a,E=o,k=d,P=f,J=E.flags;switch(E.tag){case 0:case 11:case 15:Nr(b,E,k,P,g),Il(8,E);break;case 23:break;case 22:var ue=E.stateNode;E.memoizedState!==null?ue._visibility&2?Nr(b,E,k,P,g):Bl(b,E):(ue._visibility|=2,Nr(b,E,k,P,g)),g&&J&2048&&cf(E.alternate,E);break;case 24:Nr(b,E,k,P,g),g&&J&2048&&df(E.alternate,E);break;default:Nr(b,E,k,P,g)}o=o.sibling}}function Bl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=a,f=o,g=f.flags;switch(f.tag){case 22:Bl(d,f),g&2048&&cf(f.alternate,f);break;case 24:Bl(d,f),g&2048&&df(f.alternate,f);break;default:Bl(d,f)}o=o.sibling}}var Hl=8192;function Er(a){if(a.subtreeFlags&Hl)for(a=a.child;a!==null;)s0(a),a=a.sibling}function s0(a){switch(a.tag){case 26:Er(a),a.flags&Hl&&a.memoizedState!==null&&LE(wn,a.memoizedState,a.memoizedProps);break;case 5:Er(a);break;case 3:case 4:var o=wn;wn=Kc(a.stateNode.containerInfo),Er(a),wn=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Hl,Hl=16777216,Er(a),Hl=o):Er(a));break;default:Er(a)}}function n0(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function zl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var f=o[d];ss=f,i0(f,a)}n0(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)a0(a),a=a.sibling}function a0(a){switch(a.tag){case 0:case 11:case 15:zl(a),a.flags&2048&&Da(9,a,a.return);break;case 3:zl(a);break;case 12:zl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,zc(a)):zl(a);break;default:zl(a)}}function zc(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var f=o[d];ss=f,i0(f,a)}n0(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Da(8,o,o.return),zc(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,zc(o));break;default:zc(o)}a=a.sibling}}function i0(a,o){for(;ss!==null;){var d=ss;switch(d.tag){case 0:case 11:case 15:Da(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var f=d.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Al(d.memoizedState.cache)}if(f=d.child,f!==null)f.return=d,ss=f;else e:for(d=a;ss!==null;){f=ss;var g=f.sibling,b=f.return;if(Qx(f),f===d){ss=null;break e}if(g!==null){g.return=b,ss=g;break e}ss=b}}}var QN={getCacheForType:function(a){var o=ps(Zt),d=o.data.get(a);return d===void 0&&(d=a(),o.data.set(a,d)),d}},ZN=typeof WeakMap=="function"?WeakMap:Map,ut=0,St=null,et=null,it=0,ht=0,Ys=null,Ma=!1,jr=!1,uf=!1,da=0,It=0,La=0,Si=0,hf=0,dn=0,_r=0,Fl=null,Rs=null,ff=!1,mf=0,Fc=1/0,Uc=null,Oa=null,cs=0,Ia=null,Cr=null,Tr=0,pf=0,gf=null,r0=null,Ul=0,yf=null;function Ws(){if((ut&2)!==0&&it!==0)return it&-it;if(L.T!==null){var a=gr;return a!==0?a:Nf()}return De()}function l0(){dn===0&&(dn=(it&536870912)===0||ot?ri():536870912);var a=cn.current;return a!==null&&(a.flags|=32),dn}function Xs(a,o,d){(a===St&&(ht===2||ht===9)||a.cancelPendingCommit!==null)&&(Dr(a,0),Pa(a,it,dn,!1)),Fs(a,d),((ut&2)===0||a!==St)&&(a===St&&((ut&2)===0&&(Si|=d),It===4&&Pa(a,it,dn,!1)),Bn(a))}function o0(a,o,d){if((ut&6)!==0)throw Error(s(327));var f=!d&&(o&124)===0&&(o&a.expiredLanes)===0||zs(a,o),g=f?eE(a,o):vf(a,o,!0),b=f;do{if(g===0){jr&&!f&&Pa(a,o,0,!1);break}else{if(d=a.current.alternate,b&&!KN(d)){g=vf(a,o,!1),b=!1;continue}if(g===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var k=a;g=Fl;var P=k.current.memoizedState.isDehydrated;if(P&&(Dr(k,E).flags|=256),E=vf(k,E,!1),E!==2){if(uf&&!P){k.errorRecoveryDisabledLanes|=b,Si|=b,g=4;break e}b=Rs,Rs=g,b!==null&&(Rs===null?Rs=b:Rs.push.apply(Rs,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){Dr(a,0),Pa(a,o,0,!0);break}e:{switch(f=a,b=g,b){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Pa(f,o,dn,!Ma);break e;case 2:Rs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=mf+300-je(),10<g)){if(Pa(f,o,dn,!Ma),pn(f,0,!0)!==0)break e;f.timeoutHandle=P0(c0.bind(null,f,d,Rs,Uc,ff,o,dn,Si,_r,Ma,b,2,-0,0),g);break e}c0(f,d,Rs,Uc,ff,o,dn,Si,_r,Ma,b,0,-0,0)}}break}while(!0);Bn(a)}function c0(a,o,d,f,g,b,E,k,P,J,ue,pe,se,ne){if(a.timeoutHandle=-1,pe=o.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Xl={stylesheets:null,count:0,unsuspend:ME},s0(o),pe=OE(),pe!==null)){a.cancelPendingCommit=pe(g0.bind(null,a,o,b,d,f,g,E,k,P,ue,1,se,ne)),Pa(a,b,E,!J);return}g0(a,o,b,d,f,g,E,k,P)}function KN(a){for(var o=a;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var f=0;f<d.length;f++){var g=d[f],b=g.getSnapshot;g=g.value;try{if(!qs(b(),g))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Pa(a,o,d,f){o&=~hf,o&=~Si,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var g=o;0<g;){var b=31-dt(g),E=1<<b;f[b]=-1,g&=~E}d!==0&&Hu(a,d,o)}function qc(){return(ut&6)===0?(ql(0),!1):!0}function xf(){if(et!==null){if(ht===0)var a=et.return;else a=et,sa=yi=null,Lh(a),Ar=null,Ml=0,a=et;for(;a!==null;)Ux(a.alternate,a),a=a.return;et=null}}function Dr(a,o){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,gE(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),xf(),St=a,et=d=Jn(a.current,null),it=o,ht=0,Ys=null,Ma=!1,jr=zs(a,o),uf=!1,_r=dn=hf=Si=La=It=0,Rs=Fl=null,ff=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var g=31-dt(f),b=1<<g;o|=a[g],f&=~b}return da=o,uc(),d}function d0(a,o){Ke=null,L.H=Dc,o===Nl||o===vc?(o=_y(),ht=3):o===Ny?(o=_y(),ht=4):ht=o===Cx?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ys=o,et===null&&(It=1,Oc(a,an(o,a.current)))}function u0(){var a=L.H;return L.H=Dc,a===null?Dc:a}function h0(){var a=L.A;return L.A=QN,a}function bf(){It=4,Ma||(it&4194048)!==it&&cn.current!==null||(jr=!0),(La&134217727)===0&&(Si&134217727)===0||St===null||Pa(St,it,dn,!1)}function vf(a,o,d){var f=ut;ut|=2;var g=u0(),b=h0();(St!==a||it!==o)&&(Uc=null,Dr(a,o)),o=!1;var E=It;e:do try{if(ht!==0&&et!==null){var k=et,P=Ys;switch(ht){case 8:xf(),E=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(o=!0);var J=ht;if(ht=0,Ys=null,Rr(a,k,P,J),d&&jr){E=0;break e}break;default:J=ht,ht=0,Ys=null,Rr(a,k,P,J)}}JN(),E=It;break}catch(ue){d0(a,ue)}while(!0);return o&&a.shellSuspendCounter++,sa=yi=null,ut=f,L.H=g,L.A=b,et===null&&(St=null,it=0,uc()),E}function JN(){for(;et!==null;)f0(et)}function eE(a,o){var d=ut;ut|=2;var f=u0(),g=h0();St!==a||it!==o?(Uc=null,Fc=je()+500,Dr(a,o)):jr=zs(a,o);e:do try{if(ht!==0&&et!==null){o=et;var b=Ys;t:switch(ht){case 1:ht=0,Ys=null,Rr(a,o,b,1);break;case 2:case 9:if(Ey(b)){ht=0,Ys=null,m0(o);break}o=function(){ht!==2&&ht!==9||St!==a||(ht=7),Bn(a)},b.then(o,o);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Ey(b)?(ht=0,Ys=null,m0(o)):(ht=0,Ys=null,Rr(a,o,b,7));break;case 5:var E=null;switch(et.tag){case 26:E=et.memoizedState;case 5:case 27:var k=et;if(!E||X0(E)){ht=0,Ys=null;var P=k.sibling;if(P!==null)et=P;else{var J=k.return;J!==null?(et=J,Vc(J)):et=null}break t}}ht=0,Ys=null,Rr(a,o,b,5);break;case 6:ht=0,Ys=null,Rr(a,o,b,6);break;case 8:xf(),It=6;break e;default:throw Error(s(462))}}tE();break}catch(ue){d0(a,ue)}while(!0);return sa=yi=null,L.H=f,L.A=g,ut=d,et!==null?0:(St=null,it=0,uc(),It)}function tE(){for(;et!==null&&!be();)f0(et)}function f0(a){var o=zx(a.alternate,a,da);a.memoizedProps=a.pendingProps,o===null?Vc(a):et=o}function m0(a){var o=a,d=o.alternate;switch(o.tag){case 15:case 0:o=Lx(d,o,o.pendingProps,o.type,void 0,it);break;case 11:o=Lx(d,o,o.pendingProps,o.type.render,o.ref,it);break;case 5:Lh(o);default:Ux(d,o),o=et=py(o,da),o=zx(d,o,da)}a.memoizedProps=a.pendingProps,o===null?Vc(a):et=o}function Rr(a,o,d,f){sa=yi=null,Lh(o),Ar=null,Ml=0;var g=o.return;try{if(VN(a,g,o,d,it)){It=1,Oc(a,an(d,a.current)),et=null;return}}catch(b){if(g!==null)throw et=g,b;It=1,Oc(a,an(d,a.current)),et=null;return}o.flags&32768?(ot||f===1?a=!0:jr||(it&536870912)!==0?a=!1:(Ma=a=!0,(f===2||f===9||f===3||f===6)&&(f=cn.current,f!==null&&f.tag===13&&(f.flags|=16384))),p0(o,a)):Vc(o)}function Vc(a){var o=a;do{if((o.flags&32768)!==0){p0(o,Ma);return}a=o.return;var d=GN(o.alternate,o,da);if(d!==null){et=d;return}if(o=o.sibling,o!==null){et=o;return}et=o=a}while(o!==null);It===0&&(It=5)}function p0(a,o){do{var d=YN(a.alternate,a);if(d!==null){d.flags&=32767,et=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(a=a.sibling,a!==null)){et=a;return}et=a=d}while(a!==null);It=6,et=null}function g0(a,o,d,f,g,b,E,k,P){a.cancelPendingCommit=null;do $c();while(cs!==0);if((ut&6)!==0)throw Error(s(327));if(o!==null){if(o===a.current)throw Error(s(177));if(b=o.lanes|o.childLanes,b|=ch,er(a,d,b,E,k,P),a===St&&(et=St=null,it=0),Cr=o,Ia=a,Tr=d,pf=b,gf=g,r0=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,iE(Pe,function(){return w0(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=L.T,L.T=null,g=V.p,V.p=2,E=ut,ut|=4;try{WN(a,o,d)}finally{ut=E,V.p=g,L.T=f}}cs=1,y0(),x0(),b0()}}function y0(){if(cs===1){cs=0;var a=Ia,o=Cr,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=L.T,L.T=null;var f=V.p;V.p=2;var g=ut;ut|=4;try{Jx(o,a);var b=kf,E=iy(a.containerInfo),k=b.focusedElem,P=b.selectionRange;if(E!==k&&k&&k.ownerDocument&&ay(k.ownerDocument.documentElement,k)){if(P!==null&&ah(k)){var J=P.start,ue=P.end;if(ue===void 0&&(ue=J),"selectionStart"in k)k.selectionStart=J,k.selectionEnd=Math.min(ue,k.value.length);else{var pe=k.ownerDocument||document,se=pe&&pe.defaultView||window;if(se.getSelection){var ne=se.getSelection(),Fe=k.textContent.length,Be=Math.min(P.start,Fe),gt=P.end===void 0?Be:Math.min(P.end,Fe);!ne.extend&&Be>gt&&(E=gt,gt=Be,Be=E);var Y=ny(k,Be),U=ny(k,gt);if(Y&&U&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==U.node||ne.focusOffset!==U.offset)){var Q=pe.createRange();Q.setStart(Y.node,Y.offset),ne.removeAllRanges(),Be>gt?(ne.addRange(Q),ne.extend(U.node,U.offset)):(Q.setEnd(U.node,U.offset),ne.addRange(Q))}}}}for(pe=[],ne=k;ne=ne.parentNode;)ne.nodeType===1&&pe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<pe.length;k++){var fe=pe[k];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}nd=!!Rf,kf=Rf=null}finally{ut=g,V.p=f,L.T=d}}a.current=o,cs=2}}function x0(){if(cs===2){cs=0;var a=Ia,o=Cr,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=L.T,L.T=null;var f=V.p;V.p=2;var g=ut;ut|=4;try{Xx(a,o.alternate,o)}finally{ut=g,V.p=f,L.T=d}}cs=3}}function b0(){if(cs===4||cs===3){cs=0,ve();var a=Ia,o=Cr,d=Tr,f=r0;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cs=5:(cs=0,Cr=Ia=null,v0(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Oa=null),Ae(d),o=o.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(Se,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=L.T,g=V.p,V.p=2,L.T=null;try{for(var b=a.onRecoverableError,E=0;E<f.length;E++){var k=f[E];b(k.value,{componentStack:k.stack})}}finally{L.T=o,V.p=g}}(Tr&3)!==0&&$c(),Bn(a),g=a.pendingLanes,(d&4194090)!==0&&(g&42)!==0?a===yf?Ul++:(Ul=0,yf=a):Ul=0,ql(0)}}function v0(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Al(o)))}function $c(a){return y0(),x0(),b0(),w0()}function w0(){if(cs!==5)return!1;var a=Ia,o=pf;pf=0;var d=Ae(Tr),f=L.T,g=V.p;try{V.p=32>d?32:d,L.T=null,d=gf,gf=null;var b=Ia,E=Tr;if(cs=0,Cr=Ia=null,Tr=0,(ut&6)!==0)throw Error(s(331));var k=ut;if(ut|=4,a0(b.current),t0(b,b.current,E,d),ut=k,ql(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(Se,b)}catch{}return!0}finally{V.p=g,L.T=f,v0(a,o)}}function A0(a,o,d){o=an(d,o),o=Wh(a.stateNode,o,2),a=ja(a,o,2),a!==null&&(Fs(a,2),Bn(a))}function vt(a,o,d){if(a.tag===3)A0(a,a,d);else for(;o!==null;){if(o.tag===3){A0(o,a,d);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Oa===null||!Oa.has(f))){a=an(d,a),d=jx(2),f=ja(o,d,2),f!==null&&(_x(d,f,o,a),Fs(f,2),Bn(f));break}}o=o.return}}function wf(a,o,d){var f=a.pingCache;if(f===null){f=a.pingCache=new ZN;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(d)||(uf=!0,g.add(d),a=sE.bind(null,a,o,d),o.then(a,a))}function sE(a,o,d){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,St===a&&(it&d)===d&&(It===4||It===3&&(it&62914560)===it&&300>je()-mf?(ut&2)===0&&Dr(a,0):hf|=d,_r===it&&(_r=0)),Bn(a)}function S0(a,o){o===0&&(o=gn()),a=hr(a,o),a!==null&&(Fs(a,o),Bn(a))}function nE(a){var o=a.memoizedState,d=0;o!==null&&(d=o.retryLane),S0(a,d)}function aE(a,o){var d=0;switch(a.tag){case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(o),S0(a,d)}function iE(a,o){return ke(a,o)}var Gc=null,kr=null,Af=!1,Yc=!1,Sf=!1,Ni=0;function Bn(a){a!==kr&&a.next===null&&(kr===null?Gc=kr=a:kr=kr.next=a),Yc=!0,Af||(Af=!0,lE())}function ql(a,o){if(!Sf&&Yc){Sf=!0;do for(var d=!1,f=Gc;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var E=f.suspendedLanes,k=f.pingedLanes;b=(1<<31-dt(42|a)+1)-1,b&=g&~(E&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(d=!0,_0(f,b))}else b=it,b=pn(f,f===St?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||zs(f,b)||(d=!0,_0(f,b));f=f.next}while(d);Sf=!1}}function rE(){N0()}function N0(){Yc=Af=!1;var a=0;Ni!==0&&(pE()&&(a=Ni),Ni=0);for(var o=je(),d=null,f=Gc;f!==null;){var g=f.next,b=E0(f,o);b===0?(f.next=null,d===null?Gc=g:d.next=g,g===null&&(kr=d)):(d=f,(a!==0||(b&3)!==0)&&(Yc=!0)),f=g}ql(a)}function E0(a,o){for(var d=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-dt(b),k=1<<E,P=g[E];P===-1?((k&d)===0||(k&f)!==0)&&(g[E]=ii(k,o)):P<=o&&(a.expiredLanes|=k),b&=~k}if(o=St,d=it,d=pn(a,a===o?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,d===0||a===o&&(ht===2||ht===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&te(f),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||zs(a,d)){if(o=d&-d,o===a.callbackPriority)return o;switch(f!==null&&te(f),Ae(d)){case 2:case 8:d=Ne;break;case 32:d=Pe;break;case 268435456:d=wt;break;default:d=Pe}return f=j0.bind(null,a),d=ke(d,f),a.callbackPriority=o,a.callbackNode=d,o}return f!==null&&f!==null&&te(f),a.callbackPriority=2,a.callbackNode=null,2}function j0(a,o){if(cs!==0&&cs!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if($c()&&a.callbackNode!==d)return null;var f=it;return f=pn(a,a===St?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(o0(a,f,o),E0(a,je()),a.callbackNode!=null&&a.callbackNode===d?j0.bind(null,a):null)}function _0(a,o){if($c())return null;o0(a,o,!0)}function lE(){yE(function(){(ut&6)!==0?ke(K,rE):N0()})}function Nf(){return Ni===0&&(Ni=ri()),Ni}function C0(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ac(""+a)}function T0(a,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,a.id&&d.setAttribute("form",a.id),o.parentNode.insertBefore(d,o),a=new FormData(a),d.parentNode.removeChild(d),a}function oE(a,o,d,f,g){if(o==="submit"&&d&&d.stateNode===g){var b=C0((g[Nt]||null).action),E=f.submitter;E&&(o=(o=E[Nt]||null)?C0(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var k=new oc("action","action",null,f,g);a.push({event:k,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ni!==0){var P=E?T0(g,E):new FormData(g);qh(d,{pending:!0,data:P,method:g.method,action:b},null,P)}}else typeof b=="function"&&(k.preventDefault(),P=E?T0(g,E):new FormData(g),qh(d,{pending:!0,data:P,method:g.method,action:b},b,P))},currentTarget:g}]})}}for(var Ef=0;Ef<oh.length;Ef++){var jf=oh[Ef],cE=jf.toLowerCase(),dE=jf[0].toUpperCase()+jf.slice(1);vn(cE,"on"+dE)}vn(oy,"onAnimationEnd"),vn(cy,"onAnimationIteration"),vn(dy,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(_N,"onTransitionRun"),vn(CN,"onTransitionStart"),vn(TN,"onTransitionCancel"),vn(uy,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function D0(a,o){o=(o&4)!==0;for(var d=0;d<a.length;d++){var f=a[d],g=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var E=f.length-1;0<=E;E--){var k=f[E],P=k.instance,J=k.currentTarget;if(k=k.listener,P!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=J;try{b(g)}catch(ue){Lc(ue)}g.currentTarget=null,b=P}else for(E=0;E<f.length;E++){if(k=f[E],P=k.instance,J=k.currentTarget,k=k.listener,P!==b&&g.isPropagationStopped())break e;b=k,g.currentTarget=J;try{b(g)}catch(ue){Lc(ue)}g.currentTarget=null,b=P}}}}function tt(a,o){var d=o[js];d===void 0&&(d=o[js]=new Set);var f=a+"__bubble";d.has(f)||(R0(o,a,2,!1),d.add(f))}function _f(a,o,d){var f=0;o&&(f|=4),R0(d,a,f,o)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function Cf(a){if(!a[Wc]){a[Wc]=!0,Ng.forEach(function(d){d!=="selectionchange"&&(uE.has(d)||_f(d,!1,a),_f(d,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Wc]||(o[Wc]=!0,_f("selectionchange",!1,o))}}function R0(a,o,d,f){switch(tb(o)){case 2:var g=BE;break;case 8:g=HE;break;default:g=Uf}d=g.bind(null,o,d,a),g=void 0,!Xu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(o,d,{capture:!0,passive:g}):a.addEventListener(o,d,!0):g!==void 0?a.addEventListener(o,d,{passive:g}):a.addEventListener(o,d,!1)}function Tf(a,o,d,f,g){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var k=f.stateNode.containerInfo;if(k===g)break;if(E===4)for(E=f.return;E!==null;){var P=E.tag;if((P===3||P===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;k!==null;){if(E=bn(k),E===null)return;if(P=E.tag,P===5||P===6||P===26||P===27){f=b=E;continue e}k=k.parentNode}}f=f.return}Bg(function(){var J=b,ue=Yu(d),pe=[];e:{var se=hy.get(a);if(se!==void 0){var ne=oc,Fe=a;switch(a){case"keypress":if(rc(d)===0)break e;case"keydown":case"keyup":ne=iN;break;case"focusin":Fe="focus",ne=Ju;break;case"focusout":Fe="blur",ne=Ju;break;case"beforeblur":case"afterblur":ne=Ju;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=YS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=oN;break;case oy:case cy:case dy:ne=QS;break;case uy:ne=dN;break;case"scroll":case"scrollend":ne=$S;break;case"wheel":ne=hN;break;case"copy":case"cut":case"paste":ne=KS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=qg;break;case"toggle":case"beforetoggle":ne=mN}var Be=(o&4)!==0,gt=!Be&&(a==="scroll"||a==="scrollend"),Y=Be?se!==null?se+"Capture":null:se;Be=[];for(var U=J,Q;U!==null;){var fe=U;if(Q=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Q===null||Y===null||(fe=cl(U,Y),fe!=null&&Be.push($l(U,fe,Q))),gt)break;U=U.return}0<Be.length&&(se=new ne(se,Fe,null,d,ue),pe.push({event:se,listeners:Be}))}}if((o&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",ne=a==="mouseout"||a==="pointerout",se&&d!==Gu&&(Fe=d.relatedTarget||d.fromElement)&&(bn(Fe)||Fe[tn]))break e;if((ne||se)&&(se=ue.window===ue?ue:(se=ue.ownerDocument)?se.defaultView||se.parentWindow:window,ne?(Fe=d.relatedTarget||d.toElement,ne=J,Fe=Fe?bn(Fe):null,Fe!==null&&(gt=l(Fe),Be=Fe.tag,Fe!==gt||Be!==5&&Be!==27&&Be!==6)&&(Fe=null)):(ne=null,Fe=J),ne!==Fe)){if(Be=Fg,fe="onMouseLeave",Y="onMouseEnter",U="mouse",(a==="pointerout"||a==="pointerover")&&(Be=qg,fe="onPointerLeave",Y="onPointerEnter",U="pointer"),gt=ne==null?se:wa(ne),Q=Fe==null?se:wa(Fe),se=new Be(fe,U+"leave",ne,d,ue),se.target=gt,se.relatedTarget=Q,fe=null,bn(ue)===J&&(Be=new Be(Y,U+"enter",Fe,d,ue),Be.target=Q,Be.relatedTarget=gt,fe=Be),gt=fe,ne&&Fe)t:{for(Be=ne,Y=Fe,U=0,Q=Be;Q;Q=Mr(Q))U++;for(Q=0,fe=Y;fe;fe=Mr(fe))Q++;for(;0<U-Q;)Be=Mr(Be),U--;for(;0<Q-U;)Y=Mr(Y),Q--;for(;U--;){if(Be===Y||Y!==null&&Be===Y.alternate)break t;Be=Mr(Be),Y=Mr(Y)}Be=null}else Be=null;ne!==null&&k0(pe,se,ne,Be,!1),Fe!==null&&gt!==null&&k0(pe,gt,Fe,Be,!0)}}e:{if(se=J?wa(J):window,ne=se.nodeName&&se.nodeName.toLowerCase(),ne==="select"||ne==="input"&&se.type==="file")var Te=Zg;else if(Xg(se))if(Kg)Te=NN;else{Te=AN;var Je=wN}else ne=se.nodeName,!ne||ne.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?J&&$u(J.elementType)&&(Te=Zg):Te=SN;if(Te&&(Te=Te(a,J))){Qg(pe,Te,d,ue);break e}Je&&Je(a,se,J),a==="focusout"&&J&&se.type==="number"&&J.memoizedProps.value!=null&&Vu(se,"number",se.value)}switch(Je=J?wa(J):window,a){case"focusin":(Xg(Je)||Je.contentEditable==="true")&&(cr=Je,ih=J,yl=null);break;case"focusout":yl=ih=cr=null;break;case"mousedown":rh=!0;break;case"contextmenu":case"mouseup":case"dragend":rh=!1,ry(pe,d,ue);break;case"selectionchange":if(jN)break;case"keydown":case"keyup":ry(pe,d,ue)}var Re;if(th)e:{switch(a){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else or?Yg(a,d)&&(He="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(He="onCompositionStart");He&&(Vg&&d.locale!=="ko"&&(or||He!=="onCompositionStart"?He==="onCompositionEnd"&&or&&(Re=Hg()):(Aa=ue,Qu="value"in Aa?Aa.value:Aa.textContent,or=!0)),Je=Xc(J,He),0<Je.length&&(He=new Ug(He,a,null,d,ue),pe.push({event:He,listeners:Je}),Re?He.data=Re:(Re=Wg(d),Re!==null&&(He.data=Re)))),(Re=gN?yN(a,d):xN(a,d))&&(He=Xc(J,"onBeforeInput"),0<He.length&&(Je=new Ug("onBeforeInput","beforeinput",null,d,ue),pe.push({event:Je,listeners:He}),Je.data=Re)),oE(pe,a,J,d,ue)}D0(pe,o)})}function $l(a,o,d){return{instance:a,listener:o,currentTarget:d}}function Xc(a,o){for(var d=o+"Capture",f=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=cl(a,d),g!=null&&f.unshift($l(a,g,b)),g=cl(a,o),g!=null&&f.push($l(a,g,b))),a.tag===3)return f;a=a.return}return[]}function Mr(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function k0(a,o,d,f,g){for(var b=o._reactName,E=[];d!==null&&d!==f;){var k=d,P=k.alternate,J=k.stateNode;if(k=k.tag,P!==null&&P===f)break;k!==5&&k!==26&&k!==27||J===null||(P=J,g?(J=cl(d,b),J!=null&&E.unshift($l(d,J,P))):g||(J=cl(d,b),J!=null&&E.push($l(d,J,P)))),d=d.return}E.length!==0&&a.push({event:o,listeners:E})}var hE=/\r\n?/g,fE=/\u0000|\uFFFD/g;function M0(a){return(typeof a=="string"?a:""+a).replace(hE,`
`).replace(fE,"")}function L0(a,o){return o=M0(o),M0(a)===o}function Qc(){}function pt(a,o,d,f,g,b){switch(d){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||ir(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&ir(a,""+f);break;case"className":tc(a,"class",f);break;case"tabIndex":tc(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":tc(a,d,f);break;case"style":Ig(a,f,b);break;case"data":if(o!=="object"){tc(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||d!=="href")){a.removeAttribute(d);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(d);break}f=ac(""+f),a.setAttribute(d,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(d==="formAction"?(o!=="input"&&pt(a,o,"name",g.name,g,null),pt(a,o,"formEncType",g.formEncType,g,null),pt(a,o,"formMethod",g.formMethod,g,null),pt(a,o,"formTarget",g.formTarget,g,null)):(pt(a,o,"encType",g.encType,g,null),pt(a,o,"method",g.method,g,null),pt(a,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(d);break}f=ac(""+f),a.setAttribute(d,f);break;case"onClick":f!=null&&(a.onclick=Qc);break;case"onScroll":f!=null&&tt("scroll",a);break;case"onScrollEnd":f!=null&&tt("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(d=f.__html,d!=null){if(g.children!=null)throw Error(s(60));a.innerHTML=d}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}d=ac(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(d,""+f):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":f===!0?a.setAttribute(d,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(d,f):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(d,f):a.removeAttribute(d);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(d):a.setAttribute(d,f);break;case"popover":tt("beforetoggle",a),tt("toggle",a),ec(a,"popover",f);break;case"xlinkActuate":Zn(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Zn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Zn(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Zn(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Zn(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Zn(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Zn(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Zn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Zn(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":ec(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=qS.get(d)||d,ec(a,d,f))}}function Df(a,o,d,f,g,b){switch(d){case"style":Ig(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(d=f.__html,d!=null){if(g.children!=null)throw Error(s(60));a.innerHTML=d}}break;case"children":typeof f=="string"?ir(a,f):(typeof f=="number"||typeof f=="bigint")&&ir(a,""+f);break;case"onScroll":f!=null&&tt("scroll",a);break;case"onScrollEnd":f!=null&&tt("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Qc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eg.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(g=d.endsWith("Capture"),o=d.slice(2,g?d.length-7:void 0),b=a[Nt]||null,b=b!=null?b[d]:null,typeof b=="function"&&a.removeEventListener(o,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(o,f,g);break e}d in a?a[d]=f:f===!0?a.setAttribute(d,""):ec(a,d,f)}}}function ds(a,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",a),tt("load",a);var f=!1,g=!1,b;for(b in d)if(d.hasOwnProperty(b)){var E=d[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:pt(a,o,b,E,d,null)}}g&&pt(a,o,"srcSet",d.srcSet,d,null),f&&pt(a,o,"src",d.src,d,null);return;case"input":tt("invalid",a);var k=b=E=g=null,P=null,J=null;for(f in d)if(d.hasOwnProperty(f)){var ue=d[f];if(ue!=null)switch(f){case"name":g=ue;break;case"type":E=ue;break;case"checked":P=ue;break;case"defaultChecked":J=ue;break;case"value":b=ue;break;case"defaultValue":k=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,o));break;default:pt(a,o,f,ue,d,null)}}kg(a,b,k,P,J,E,g,!1),sc(a);return;case"select":tt("invalid",a),f=E=b=null;for(g in d)if(d.hasOwnProperty(g)&&(k=d[g],k!=null))switch(g){case"value":b=k;break;case"defaultValue":E=k;break;case"multiple":f=k;default:pt(a,o,g,k,d,null)}o=b,d=E,a.multiple=!!f,o!=null?ar(a,!!f,o,!1):d!=null&&ar(a,!!f,d,!0);return;case"textarea":tt("invalid",a),b=g=f=null;for(E in d)if(d.hasOwnProperty(E)&&(k=d[E],k!=null))switch(E){case"value":f=k;break;case"defaultValue":g=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:pt(a,o,E,k,d,null)}Lg(a,f,g,b),sc(a);return;case"option":for(P in d)if(d.hasOwnProperty(P)&&(f=d[P],f!=null))switch(P){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:pt(a,o,P,f,d,null)}return;case"dialog":tt("beforetoggle",a),tt("toggle",a),tt("cancel",a),tt("close",a);break;case"iframe":case"object":tt("load",a);break;case"video":case"audio":for(f=0;f<Vl.length;f++)tt(Vl[f],a);break;case"image":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"embed":case"source":case"link":tt("error",a),tt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in d)if(d.hasOwnProperty(J)&&(f=d[J],f!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:pt(a,o,J,f,d,null)}return;default:if($u(o)){for(ue in d)d.hasOwnProperty(ue)&&(f=d[ue],f!==void 0&&Df(a,o,ue,f,d,void 0));return}}for(k in d)d.hasOwnProperty(k)&&(f=d[k],f!=null&&pt(a,o,k,f,d,null))}function mE(a,o,d,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,k=null,P=null,J=null,ue=null;for(ne in d){var pe=d[ne];if(d.hasOwnProperty(ne)&&pe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":P=pe;default:f.hasOwnProperty(ne)||pt(a,o,ne,null,f,pe)}}for(var se in f){var ne=f[se];if(pe=d[se],f.hasOwnProperty(se)&&(ne!=null||pe!=null))switch(se){case"type":b=ne;break;case"name":g=ne;break;case"checked":J=ne;break;case"defaultChecked":ue=ne;break;case"value":E=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,o));break;default:ne!==pe&&pt(a,o,se,ne,f,pe)}}qu(a,E,k,P,J,ue,b,g);return;case"select":ne=E=k=se=null;for(b in d)if(P=d[b],d.hasOwnProperty(b)&&P!=null)switch(b){case"value":break;case"multiple":ne=P;default:f.hasOwnProperty(b)||pt(a,o,b,null,f,P)}for(g in f)if(b=f[g],P=d[g],f.hasOwnProperty(g)&&(b!=null||P!=null))switch(g){case"value":se=b;break;case"defaultValue":k=b;break;case"multiple":E=b;default:b!==P&&pt(a,o,g,b,f,P)}o=k,d=E,f=ne,se!=null?ar(a,!!d,se,!1):!!f!=!!d&&(o!=null?ar(a,!!d,o,!0):ar(a,!!d,d?[]:"",!1));return;case"textarea":ne=se=null;for(k in d)if(g=d[k],d.hasOwnProperty(k)&&g!=null&&!f.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:pt(a,o,k,null,f,g)}for(E in f)if(g=f[E],b=d[E],f.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":se=g;break;case"defaultValue":ne=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==b&&pt(a,o,E,g,f,b)}Mg(a,se,ne);return;case"option":for(var Fe in d)if(se=d[Fe],d.hasOwnProperty(Fe)&&se!=null&&!f.hasOwnProperty(Fe))switch(Fe){case"selected":a.selected=!1;break;default:pt(a,o,Fe,null,f,se)}for(P in f)if(se=f[P],ne=d[P],f.hasOwnProperty(P)&&se!==ne&&(se!=null||ne!=null))switch(P){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:pt(a,o,P,se,f,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in d)se=d[Be],d.hasOwnProperty(Be)&&se!=null&&!f.hasOwnProperty(Be)&&pt(a,o,Be,null,f,se);for(J in f)if(se=f[J],ne=d[J],f.hasOwnProperty(J)&&se!==ne&&(se!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,o));break;default:pt(a,o,J,se,f,ne)}return;default:if($u(o)){for(var gt in d)se=d[gt],d.hasOwnProperty(gt)&&se!==void 0&&!f.hasOwnProperty(gt)&&Df(a,o,gt,void 0,f,se);for(ue in f)se=f[ue],ne=d[ue],!f.hasOwnProperty(ue)||se===ne||se===void 0&&ne===void 0||Df(a,o,ue,se,f,ne);return}}for(var Y in d)se=d[Y],d.hasOwnProperty(Y)&&se!=null&&!f.hasOwnProperty(Y)&&pt(a,o,Y,null,f,se);for(pe in f)se=f[pe],ne=d[pe],!f.hasOwnProperty(pe)||se===ne||se==null&&ne==null||pt(a,o,pe,se,f,ne)}var Rf=null,kf=null;function Zc(a){return a.nodeType===9?a:a.ownerDocument}function O0(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I0(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Mf(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lf=null;function pE(){var a=window.event;return a&&a.type==="popstate"?a===Lf?!1:(Lf=a,!0):(Lf=null,!1)}var P0=typeof setTimeout=="function"?setTimeout:void 0,gE=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,yE=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(a){return B0.resolve(null).then(a).catch(xE)}:P0;function xE(a){setTimeout(function(){throw a})}function Ba(a){return a==="head"}function H0(a,o){var d=o,f=0,g=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(0<f&&8>f){d=f;var E=a.ownerDocument;if(d&1&&Gl(E.documentElement),d&2&&Gl(E.body),d&4)for(d=E.head,Gl(d),E=d.firstChild;E;){var k=E.nextSibling,P=E.nodeName;E[xn]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&E.rel.toLowerCase()==="stylesheet"||d.removeChild(E),E=k}}if(g===0){a.removeChild(b),eo(o);return}g--}else d==="$"||d==="$?"||d==="$!"?g++:f=d.charCodeAt(0)-48;else f=0;d=b}while(d);eo(o)}function Of(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Of(d),ms(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function bE(a,o,d,f){for(;a.nodeType===1;){var g=d;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[xn])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=An(a.nextSibling),a===null)break}return null}function vE(a,o,d){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=An(a.nextSibling),a===null))return null;return a}function If(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function wE(a,o){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")o();else{var f=function(){o(),d.removeEventListener("DOMContentLoaded",f)};d.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function An(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Pf=null;function z0(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return a;o--}else d==="/$"&&o++}a=a.previousSibling}return null}function F0(a,o,d){switch(o=Zc(d),a){case"html":if(a=o.documentElement,!a)throw Error(s(452));return a;case"head":if(a=o.head,!a)throw Error(s(453));return a;case"body":if(a=o.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function Gl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);ms(a)}var un=new Map,U0=new Set;function Kc(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var ua=V.d;V.d={f:AE,r:SE,D:NE,C:EE,L:jE,m:_E,X:TE,S:CE,M:DE};function AE(){var a=ua.f(),o=qc();return a||o}function SE(a){var o=Mn(a);o!==null&&o.tag===5&&o.type==="form"?ox(o):ua.r(a)}var Lr=typeof document>"u"?null:document;function q0(a,o,d){var f=Lr;if(f&&typeof o=="string"&&o){var g=nn(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof d=="string"&&(g+='[crossorigin="'+d+'"]'),U0.has(g)||(U0.add(g),a={rel:a,crossOrigin:d,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),ds(o,"link",a),es(o),f.head.appendChild(o)))}}function NE(a){ua.D(a),q0("dns-prefetch",a,null)}function EE(a,o){ua.C(a,o),q0("preconnect",a,o)}function jE(a,o,d){ua.L(a,o,d);var f=Lr;if(f&&a&&o){var g='link[rel="preload"][as="'+nn(o)+'"]';o==="image"&&d&&d.imageSrcSet?(g+='[imagesrcset="'+nn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(g+='[imagesizes="'+nn(d.imageSizes)+'"]')):g+='[href="'+nn(a)+'"]';var b=g;switch(o){case"style":b=Or(a);break;case"script":b=Ir(a)}un.has(b)||(a=p({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:a,as:o},d),un.set(b,a),f.querySelector(g)!==null||o==="style"&&f.querySelector(Yl(b))||o==="script"&&f.querySelector(Wl(b))||(o=f.createElement("link"),ds(o,"link",a),es(o),f.head.appendChild(o)))}}function _E(a,o){ua.m(a,o);var d=Lr;if(d&&a){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+nn(f)+'"][href="'+nn(a)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ir(a)}if(!un.has(b)&&(a=p({rel:"modulepreload",href:a},o),un.set(b,a),d.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Wl(b)))return}f=d.createElement("link"),ds(f,"link",a),es(f),d.head.appendChild(f)}}}function CE(a,o,d){ua.S(a,o,d);var f=Lr;if(f&&a){var g=tr(f).hoistableStyles,b=Or(a);o=o||"default";var E=g.get(b);if(!E){var k={loading:0,preload:null};if(E=f.querySelector(Yl(b)))k.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},d),(d=un.get(b))&&Bf(a,d);var P=E=f.createElement("link");es(P),ds(P,"link",a),P._p=new Promise(function(J,ue){P.onload=J,P.onerror=ue}),P.addEventListener("load",function(){k.loading|=1}),P.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Jc(E,o,f)}E={type:"stylesheet",instance:E,count:1,state:k},g.set(b,E)}}}function TE(a,o){ua.X(a,o);var d=Lr;if(d&&a){var f=tr(d).hoistableScripts,g=Ir(a),b=f.get(g);b||(b=d.querySelector(Wl(g)),b||(a=p({src:a,async:!0},o),(o=un.get(g))&&Hf(a,o),b=d.createElement("script"),es(b),ds(b,"link",a),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function DE(a,o){ua.M(a,o);var d=Lr;if(d&&a){var f=tr(d).hoistableScripts,g=Ir(a),b=f.get(g);b||(b=d.querySelector(Wl(g)),b||(a=p({src:a,async:!0,type:"module"},o),(o=un.get(g))&&Hf(a,o),b=d.createElement("script"),es(b),ds(b,"link",a),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function V0(a,o,d,f){var g=(g=xe.current)?Kc(g):null;if(!g)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=Or(d.href),d=tr(g).hoistableStyles,f=d.get(o),f||(f={type:"style",instance:null,count:0,state:null},d.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Or(d.href);var b=tr(g).hoistableStyles,E=b.get(a);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=g.querySelector(Yl(a)))&&!b._p&&(E.instance=b,E.state.loading=5),un.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},un.set(a,d),b||RE(g,a,d,E.state))),o&&f===null)throw Error(s(528,""));return E}if(o&&f!==null)throw Error(s(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ir(d),d=tr(g).hoistableScripts,f=d.get(o),f||(f={type:"script",instance:null,count:0,state:null},d.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function Or(a){return'href="'+nn(a)+'"'}function Yl(a){return'link[rel="stylesheet"]['+a+"]"}function $0(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function RE(a,o,d,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),ds(o,"link",d),es(o),a.head.appendChild(o))}function Ir(a){return'[src="'+nn(a)+'"]'}function Wl(a){return"script[async]"+a}function G0(a,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+nn(d.href)+'"]');if(f)return o.instance=f,es(f),f;var g=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),es(f),ds(f,"style",g),Jc(f,d.precedence,a),o.instance=f;case"stylesheet":g=Or(d.href);var b=a.querySelector(Yl(g));if(b)return o.state.loading|=4,o.instance=b,es(b),b;f=$0(d),(g=un.get(g))&&Bf(f,g),b=(a.ownerDocument||a).createElement("link"),es(b);var E=b;return E._p=new Promise(function(k,P){E.onload=k,E.onerror=P}),ds(b,"link",f),o.state.loading|=4,Jc(b,d.precedence,a),o.instance=b;case"script":return b=Ir(d.src),(g=a.querySelector(Wl(b)))?(o.instance=g,es(g),g):(f=d,(g=un.get(b))&&(f=p({},d),Hf(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),es(g),ds(g,"link",f),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Jc(f,d.precedence,a));return o.instance}function Jc(a,o,d){for(var f=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,E=0;E<f.length;E++){var k=f[E];if(k.dataset.precedence===o)b=k;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(a,o.firstChild))}function Bf(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function Hf(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var ed=null;function Y0(a,o,d){if(ed===null){var f=new Map,g=ed=new Map;g.set(d,f)}else g=ed,f=g.get(d),f||(f=new Map,g.set(d,f));if(f.has(a))return f;for(f.set(a,null),d=d.getElementsByTagName(a),g=0;g<d.length;g++){var b=d[g];if(!(b[xn]||b[bt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var k=f.get(E);k?k.push(b):f.set(E,[b])}}return f}function W0(a,o,d){a=a.ownerDocument||a,a.head.insertBefore(d,o==="title"?a.querySelector("head > title"):null)}function kE(a,o,d){if(d===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function X0(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Xl=null;function ME(){}function LE(a,o,d){if(Xl===null)throw Error(s(475));var f=Xl;if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=Or(d.href),b=a.querySelector(Yl(g));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=td.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=b,es(b);return}b=a.ownerDocument||a,d=$0(d),(g=un.get(g))&&Bf(d,g),b=b.createElement("link"),es(b);var E=b;E._p=new Promise(function(k,P){E.onload=k,E.onerror=P}),ds(b,"link",d),o.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=td.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function OE(){if(Xl===null)throw Error(s(475));var a=Xl;return a.stylesheets&&a.count===0&&zf(a,a.stylesheets),0<a.count?function(o){var d=setTimeout(function(){if(a.stylesheets&&zf(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(d)}}:null}function td(){if(this.count--,this.count===0){if(this.stylesheets)zf(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var sd=null;function zf(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,sd=new Map,o.forEach(IE,a),sd=null,td.call(a))}function IE(a,o){if(!(o.state.loading&4)){var d=sd.get(a);if(d)var f=d.get(null);else{d=new Map,sd.set(a,d);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(d.set(E.dataset.precedence,E),f=E)}f&&d.set(null,f)}g=o.instance,E=g.getAttribute("data-precedence"),b=d.get(E)||f,b===f&&d.set(null,g),d.set(E,g),this.count++,f=td.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var Ql={$$typeof:C,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function PE(a,o,d,f,g,b,E,k){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Q0(a,o,d,f,g,b,E,k,P,J,ue,pe){return a=new PE(a,o,d,E,k,P,J,pe),o=1,b===!0&&(o|=24),b=Vs(3,null,null,o),a.current=b,b.stateNode=a,o=vh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:d,cache:o},Nh(b),a}function Z0(a){return a?(a=fr,a):fr}function K0(a,o,d,f,g,b){g=Z0(g),f.context===null?f.context=g:f.pendingContext=g,f=Ea(o),f.payload={element:d},b=b===void 0?null:b,b!==null&&(f.callback=b),d=ja(a,f,o),d!==null&&(Xs(d,a,o),jl(d,a,o))}function J0(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<o?d:o}}function Ff(a,o){J0(a,o),(a=a.alternate)&&J0(a,o)}function eb(a){if(a.tag===13){var o=hr(a,67108864);o!==null&&Xs(o,a,67108864),Ff(a,67108864)}}var nd=!0;function BE(a,o,d,f){var g=L.T;L.T=null;var b=V.p;try{V.p=2,Uf(a,o,d,f)}finally{V.p=b,L.T=g}}function HE(a,o,d,f){var g=L.T;L.T=null;var b=V.p;try{V.p=8,Uf(a,o,d,f)}finally{V.p=b,L.T=g}}function Uf(a,o,d,f){if(nd){var g=qf(f);if(g===null)Tf(a,o,f,ad,d),sb(a,f);else if(FE(g,a,o,d,f))f.stopPropagation();else if(sb(a,f),o&4&&-1<zE.indexOf(a)){for(;g!==null;){var b=Mn(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=vs(b.pendingLanes);if(E!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;E;){var P=1<<31-dt(E);k.entanglements[1]|=P,E&=~P}Bn(b),(ut&6)===0&&(Fc=je()+500,ql(0))}}break;case 13:k=hr(b,2),k!==null&&Xs(k,b,2),qc(),Ff(b,2)}if(b=qf(f),b===null&&Tf(a,o,f,ad,d),b===g)break;g=b}g!==null&&f.stopPropagation()}else Tf(a,o,f,null,d)}}function qf(a){return a=Yu(a),Vf(a)}var ad=null;function Vf(a){if(ad=null,a=bn(a),a!==null){var o=l(a);if(o===null)a=null;else{var d=o.tag;if(d===13){if(a=c(o),a!==null)return a;a=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return ad=a,null}function tb(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case K:return 2;case Ne:return 8;case Pe:case Xe:return 32;case wt:return 268435456;default:return 32}default:return 32}}var $f=!1,Ha=null,za=null,Fa=null,Zl=new Map,Kl=new Map,Ua=[],zE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(a,o){switch(a){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":Zl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(o.pointerId)}}function Jl(a,o,d,f,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:d,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},o!==null&&(o=Mn(o),o!==null&&eb(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function FE(a,o,d,f,g){switch(o){case"focusin":return Ha=Jl(Ha,a,o,d,f,g),!0;case"dragenter":return za=Jl(za,a,o,d,f,g),!0;case"mouseover":return Fa=Jl(Fa,a,o,d,f,g),!0;case"pointerover":var b=g.pointerId;return Zl.set(b,Jl(Zl.get(b)||null,a,o,d,f,g)),!0;case"gotpointercapture":return b=g.pointerId,Kl.set(b,Jl(Kl.get(b)||null,a,o,d,f,g)),!0}return!1}function nb(a){var o=bn(a.target);if(o!==null){var d=l(o);if(d!==null){if(o=d.tag,o===13){if(o=c(d),o!==null){a.blockedOn=o,Qe(a.priority,function(){if(d.tag===13){var f=Ws();f=X(f);var g=hr(d,f);g!==null&&Xs(g,d,f),Ff(d,f)}});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function id(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var d=qf(a.nativeEvent);if(d===null){d=a.nativeEvent;var f=new d.constructor(d.type,d);Gu=f,d.target.dispatchEvent(f),Gu=null}else return o=Mn(d),o!==null&&eb(o),a.blockedOn=d,!1;o.shift()}return!0}function ab(a,o,d){id(a)&&d.delete(o)}function UE(){$f=!1,Ha!==null&&id(Ha)&&(Ha=null),za!==null&&id(za)&&(za=null),Fa!==null&&id(Fa)&&(Fa=null),Zl.forEach(ab),Kl.forEach(ab)}function rd(a,o){a.blockedOn===o&&(a.blockedOn=null,$f||($f=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UE)))}var ld=null;function ib(a){ld!==a&&(ld=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ld===a&&(ld=null);for(var o=0;o<a.length;o+=3){var d=a[o],f=a[o+1],g=a[o+2];if(typeof f!="function"){if(Vf(f||d)===null)continue;break}var b=Mn(d);b!==null&&(a.splice(o,3),o-=3,qh(b,{pending:!0,data:g,method:d.method,action:f},f,g))}}))}function eo(a){function o(P){return rd(P,a)}Ha!==null&&rd(Ha,a),za!==null&&rd(za,a),Fa!==null&&rd(Fa,a),Zl.forEach(o),Kl.forEach(o);for(var d=0;d<Ua.length;d++){var f=Ua[d];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ua.length&&(d=Ua[0],d.blockedOn===null);)nb(d),d.blockedOn===null&&Ua.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(f=0;f<d.length;f+=3){var g=d[f],b=d[f+1],E=g[Nt]||null;if(typeof b=="function")E||ib(d);else if(E){var k=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[Nt]||null)k=E.formAction;else if(Vf(g)!==null)continue}else k=E.action;typeof k=="function"?d[f+1]=k:(d.splice(f,3),f-=3),ib(d)}}}function Gf(a){this._internalRoot=a}od.prototype.render=Gf.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(s(409));var d=o.current,f=Ws();K0(d,f,a,o,null,null)},od.prototype.unmount=Gf.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;K0(a.current,2,null,a,null,null),qc(),o[tn]=null}};function od(a){this._internalRoot=a}od.prototype.unstable_scheduleHydration=function(a){if(a){var o=De();a={blockedOn:null,target:a,priority:o};for(var d=0;d<Ua.length&&o!==0&&o<Ua[d].priority;d++);Ua.splice(d,0,a),d===0&&nb(a)}};var rb=e.version;if(rb!=="19.1.1")throw Error(s(527,rb,"19.1.1"));V.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=h(o),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var qE={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{Se=cd.inject(qE),_e=cd}catch{}}return so.createRoot=function(a,o){if(!i(a))throw Error(s(299));var d=!1,f="",g=Ax,b=Sx,E=Nx,k=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(k=o.unstable_transitionCallbacks)),o=Q0(a,1,!1,null,null,d,f,g,b,E,k,null),a[tn]=o.current,Cf(a),new Gf(o)},so.hydrateRoot=function(a,o,d){if(!i(a))throw Error(s(299));var f=!1,g="",b=Ax,E=Sx,k=Nx,P=null,J=null;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(b=d.onUncaughtError),d.onCaughtError!==void 0&&(E=d.onCaughtError),d.onRecoverableError!==void 0&&(k=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(P=d.unstable_transitionCallbacks),d.formState!==void 0&&(J=d.formState)),o=Q0(a,1,!0,o,d??null,f,g,b,E,k,P,J),o.context=Z0(null),d=o.current,f=Ws(),f=X(f),g=Ea(f),g.callback=null,ja(d,g,f),d=f,o.current.lanes=d,Fs(o,d),Bn(o),a[tn]=o.current,Cf(a),new od(o)},so.version="19.1.1",so}var xb;function JE(){if(xb)return Qf.exports;xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qf.exports=KE(),Qf.exports}var ej=JE();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var bb="popstate";function tj(n={}){function e(s,i){let{pathname:l,search:c,hash:u}=s.location;return Hm("",{pathname:l,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:jo(i)}return nj(e,t,null,n)}function Dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sj(){return Math.random().toString(36).substring(2,10)}function vb(n,e){return{usr:n.state,key:n.key,idx:e}}function Hm(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?tl(e):e,state:t,key:e&&e.key||s||sj()}}function jo({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function nj(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:l=!1}=s,c=i.history,u="POP",h=null,m=p();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function p(){return(c.state||{idx:null}).idx}function y(){u="POP";let S=p(),N=S==null?null:S-m;m=S,h&&h({action:u,location:A.location,delta:N})}function x(S,N){u="PUSH";let j=Hm(A.location,S,N);m=p()+1;let C=vb(j,m),R=A.createHref(j);try{c.pushState(C,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(R)}l&&h&&h({action:u,location:A.location,delta:1})}function v(S,N){u="REPLACE";let j=Hm(A.location,S,N);m=p();let C=vb(j,m),R=A.createHref(j);c.replaceState(C,"",R),l&&h&&h({action:u,location:A.location,delta:0})}function w(S){return aj(S)}let A={get action(){return u},get location(){return n(i,c)},listen(S){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(bb,y),h=S,()=>{i.removeEventListener(bb,y),h=null}},createHref(S){return e(i,S)},createURL:w,encodeLocation(S){let N=w(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:v,go(S){return c.go(S)}};return A}function aj(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Dt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:jo(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function bw(n,e,t="/"){return ij(n,e,t,!1)}function ij(n,e,t,s){let i=typeof e=="string"?tl(e):e,l=ya(i.pathname||"/",t);if(l==null)return null;let c=vw(n);rj(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let m=yj(l);u=pj(c[h],m,s)}return u}function vw(n,e=[],t=[],s="",i=!1){let l=(c,u,h=i,m)=>{let p={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&h)return;Dt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let y=ga([s,p.relativePath]),x=t.concat(p);c.children&&c.children.length>0&&(Dt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),vw(c.children,e,x,y,h)),!(c.path==null&&!c.index)&&e.push({path:y,score:fj(y,c.index),routesMeta:x})};return n.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))l(c,u);else for(let h of ww(c.path))l(c,u,!0,h)}),e}function ww(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return i?[l,""]:[l];let c=ww(s.join("/")),u=[];return u.push(...c.map(h=>h===""?l:[l,h].join("/"))),i&&u.push(...c),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function rj(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mj(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var lj=/^:[\w-]+$/,oj=3,cj=2,dj=1,uj=10,hj=-2,wb=n=>n==="*";function fj(n,e){let t=n.split("/"),s=t.length;return t.some(wb)&&(s+=hj),e&&(s+=cj),t.filter(i=>!wb(i)).reduce((i,l)=>i+(lj.test(l)?oj:l===""?dj:uj),s)}function mj(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function pj(n,e,t=!1){let{routesMeta:s}=n,i={},l="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],m=u===s.length-1,p=l==="/"?e:e.slice(l.length)||"/",y=Hd({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),x=h.route;if(!y&&m&&t&&!s[s.length-1].route.index&&(y=Hd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!y)return null;Object.assign(i,y.params),c.push({params:i,pathname:ga([l,y.pathname]),pathnameBase:wj(ga([l,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(l=ga([l,y.pathnameBase]))}return c}function Hd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=gj(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:s.reduce((m,{paramName:p,isOptional:y},x)=>{if(p==="*"){let w=u[x]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[x];return y&&!v?m[p]=void 0:m[p]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function gj(n,e=!1,t=!0){jn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function yj(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ya(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function xj(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?tl(n):n;return{pathname:t?t.startsWith("/")?t:bj(t,e):e,search:Aj(s),hash:Sj(i)}}function bj(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function em(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vj(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vp(n){let e=vj(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function wp(n,e,t,s=!1){let i;typeof n=="string"?i=tl(n):(i={...n},Dt(!i.pathname||!i.pathname.includes("?"),em("?","pathname","search",i)),Dt(!i.pathname||!i.pathname.includes("#"),em("#","pathname","hash",i)),Dt(!i.search||!i.search.includes("#"),em("#","search","hash",i)));let l=n===""||i.pathname==="",c=l?"/":i.pathname,u;if(c==null)u=t;else{let y=e.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),y-=1;i.pathname=x.join("/")}u=y>=0?e[y]:"/"}let h=xj(i,u),m=c&&c!=="/"&&c.endsWith("/"),p=(l||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var ga=n=>n.join("/").replace(/\/\/+/g,"/"),wj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Aj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Sj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Nj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Aw=["POST","PUT","PATCH","DELETE"];new Set(Aw);var Ej=["GET",...Aw];new Set(Ej);var sl=_.createContext(null);sl.displayName="DataRouter";var du=_.createContext(null);du.displayName="DataRouterState";_.createContext(!1);var Sw=_.createContext({isTransitioning:!1});Sw.displayName="ViewTransition";var jj=_.createContext(new Map);jj.displayName="Fetchers";var _j=_.createContext(null);_j.displayName="Await";var Tn=_.createContext(null);Tn.displayName="Navigation";var Po=_.createContext(null);Po.displayName="Location";var Dn=_.createContext({outlet:null,matches:[],isDataRoute:!1});Dn.displayName="Route";var Ap=_.createContext(null);Ap.displayName="RouteError";function Cj(n,{relative:e}={}){Dt(nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=_.useContext(Tn),{hash:i,pathname:l,search:c}=Bo(n,{relative:e}),u=l;return t!=="/"&&(u=l==="/"?t:ga([t,l])),s.createHref({pathname:u,search:c,hash:i})}function nl(){return _.useContext(Po)!=null}function ba(){return Dt(nl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(Po).location}var Nw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ew(n){_.useContext(Tn).static||_.useLayoutEffect(n)}function al(){let{isDataRoute:n}=_.useContext(Dn);return n?qj():Tj()}function Tj(){Dt(nl(),"useNavigate() may be used only in the context of a <Router> component.");let n=_.useContext(sl),{basename:e,navigator:t}=_.useContext(Tn),{matches:s}=_.useContext(Dn),{pathname:i}=ba(),l=JSON.stringify(vp(s)),c=_.useRef(!1);return Ew(()=>{c.current=!0}),_.useCallback((h,m={})=>{if(jn(c.current,Nw),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=wp(h,JSON.parse(l),i,m.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ga([e,p.pathname])),(m.replace?t.replace:t.push)(p,m.state,m)},[e,t,l,i,n])}var Dj=_.createContext(null);function Rj(n){let e=_.useContext(Dn).outlet;return e&&_.createElement(Dj.Provider,{value:n},e)}function Bo(n,{relative:e}={}){let{matches:t}=_.useContext(Dn),{pathname:s}=ba(),i=JSON.stringify(vp(t));return _.useMemo(()=>wp(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function kj(n,e){return jw(n,e)}function jw(n,e,t,s,i){Dt(nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=_.useContext(Tn),{matches:c}=_.useContext(Dn),u=c[c.length-1],h=u?u.params:{},m=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let j=y&&y.path||"";_w(m,!y||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let x=ba(),v;if(e){let j=typeof e=="string"?tl(e):e;Dt(p==="/"||j.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${j.pathname}" was given in the \`location\` prop.`),v=j}else v=x;let w=v.pathname||"/",A=w;if(p!=="/"){let j=p.replace(/^\//,"").split("/");A="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let S=bw(n,{pathname:A});jn(y||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),jn(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=Pj(S&&S.map(j=>Object.assign({},j,{params:Object.assign({},h,j.params),pathname:ga([p,l.encodeLocation?l.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?p:ga([p,l.encodeLocation?l.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),c,t,s,i);return e&&N?_.createElement(Po.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},N):N}function Mj(){let n=Uj(),e=Nj(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:l},"ErrorBoundary")," or"," ",_.createElement("code",{style:l},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:i},t):null,c)}var Lj=_.createElement(Mj,null),Oj=class extends _.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?_.createElement(Dn.Provider,{value:this.props.routeContext},_.createElement(Ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ij({routeContext:n,match:e,children:t}){let s=_.useContext(sl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Dn.Provider,{value:n},t)}function Pj(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let m=l.findIndex(p=>p.route.id&&c?.[p.route.id]!==void 0);Dt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,m+1))}let u=!1,h=-1;if(t)for(let m=0;m<l.length;m++){let p=l[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:y,errors:x}=t,v=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||v){u=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((m,p,y)=>{let x,v=!1,w=null,A=null;t&&(x=c&&p.route.id?c[p.route.id]:void 0,w=p.route.errorElement||Lj,u&&(h<0&&y===0?(_w("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,A=null):h===y&&(v=!0,A=p.route.hydrateFallbackElement||null)));let S=e.concat(l.slice(0,y+1)),N=()=>{let j;return x?j=w:v?j=A:p.route.Component?j=_.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=m,_.createElement(Ij,{match:p,routeContext:{outlet:m,matches:S,isDataRoute:t!=null},children:j})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?_.createElement(Oj,{location:t.location,revalidation:t.revalidation,component:w,error:x,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:s}):N()},null)}function Sp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bj(n){let e=_.useContext(sl);return Dt(e,Sp(n)),e}function Hj(n){let e=_.useContext(du);return Dt(e,Sp(n)),e}function zj(n){let e=_.useContext(Dn);return Dt(e,Sp(n)),e}function Np(n){let e=zj(n),t=e.matches[e.matches.length-1];return Dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Fj(){return Np("useRouteId")}function Uj(){let n=_.useContext(Ap),e=Hj("useRouteError"),t=Np("useRouteError");return n!==void 0?n:e.errors?.[t]}function qj(){let{router:n}=Bj("useNavigate"),e=Np("useNavigate"),t=_.useRef(!1);return Ew(()=>{t.current=!0}),_.useCallback(async(i,l={})=>{jn(t.current,Nw),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...l}))},[n,e])}var Ab={};function _w(n,e,t){!e&&!Ab[n]&&(Ab[n]=!0,jn(!1,t))}_.memo(Vj);function Vj({routes:n,future:e,state:t,unstable_onError:s}){return jw(n,void 0,t,s,e)}function pa({to:n,replace:e,state:t,relative:s}){Dt(nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=_.useContext(Tn);jn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=_.useContext(Dn),{pathname:c}=ba(),u=al(),h=wp(n,vp(l),c,s==="path"),m=JSON.stringify(h);return _.useEffect(()=>{u(JSON.parse(m),{replace:e,state:t,relative:s})},[u,m,s,e,t]),null}function Ep(n){return Rj(n.context)}function yt(n){Dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $j({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:l=!1}){Dt(!nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:l,future:{}}),[c,i,l]);typeof t=="string"&&(t=tl(t));let{pathname:h="/",search:m="",hash:p="",state:y=null,key:x="default"}=t,v=_.useMemo(()=>{let w=ya(h,c);return w==null?null:{location:{pathname:w,search:m,hash:p,state:y,key:x},navigationType:s}},[c,h,m,p,y,x,s]);return jn(v!=null,`<Router basename="${c}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:_.createElement(Tn.Provider,{value:u},_.createElement(Po.Provider,{children:e,value:v}))}function Gj({children:n,location:e}){return kj(zm(n),e)}function zm(n,e=[]){let t=[];return _.Children.forEach(n,(s,i)=>{if(!_.isValidElement(s))return;let l=[...e,i];if(s.type===_.Fragment){t.push.apply(t,zm(s.props.children,l));return}Dt(s.type===yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=zm(s.props.children,l)),t.push(c)}),t}var jd="get",_d="application/x-www-form-urlencoded";function uu(n){return n!=null&&typeof n.tagName=="string"}function Yj(n){return uu(n)&&n.tagName.toLowerCase()==="button"}function Wj(n){return uu(n)&&n.tagName.toLowerCase()==="form"}function Xj(n){return uu(n)&&n.tagName.toLowerCase()==="input"}function Qj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Zj(n,e){return n.button===0&&(!e||e==="_self")&&!Qj(n)}var dd=null;function Kj(){if(dd===null)try{new FormData(document.createElement("form"),0),dd=!1}catch{dd=!0}return dd}var Jj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tm(n){return n!=null&&!Jj.has(n)?(jn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):n}function e_(n,e){let t,s,i,l,c;if(Wj(n)){let u=n.getAttribute("action");s=u?ya(u,e):null,t=n.getAttribute("method")||jd,i=tm(n.getAttribute("enctype"))||_d,l=new FormData(n)}else if(Yj(n)||Xj(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(s=h?ya(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||jd,i=tm(n.getAttribute("formenctype"))||tm(u.getAttribute("enctype"))||_d,l=new FormData(u,n),!Kj()){let{name:m,type:p,value:y}=n;if(p==="image"){let x=m?`${m}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else m&&l.append(m,y)}}else{if(uu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jd,s=null,i=_d,c=n}return l&&i==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function t_(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&ya(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function s_(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function n_(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function a_(n,e,t){let s=await Promise.all(n.map(async i=>{let l=e.routes[i.route.id];if(l){let c=await s_(l,t);return c.links?c.links():[]}return[]}));return o_(s.flat(1).filter(n_).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Sb(n,e,t,s,i,l){let c=(h,m)=>t[m]?h.route.id!==t[m].route.id:!0,u=(h,m)=>t[m].pathname!==h.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==h.params["*"];return l==="assets"?e.filter((h,m)=>c(h,m)||u(h,m)):l==="data"?e.filter((h,m)=>{let p=s.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,m)||u(h,m))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function i_(n,e,{includeHydrateFallback:t}={}){return r_(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function r_(n){return[...new Set(n)]}function l_(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function o_(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let l=JSON.stringify(l_(i));return t.has(l)||(t.add(l),s.push({key:l,link:i})),s},[])}function Cw(){let n=_.useContext(sl);return jp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function c_(){let n=_.useContext(du);return jp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var _p=_.createContext(void 0);_p.displayName="FrameworkContext";function Tw(){let n=_.useContext(_p);return jp(n,"You must render this element inside a <HydratedRouter> element"),n}function d_(n,e){let t=_.useContext(_p),[s,i]=_.useState(!1),[l,c]=_.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:y}=e,x=_.useRef(null);_.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let A=N=>{N.forEach(j=>{c(j.isIntersecting)})},S=new IntersectionObserver(A,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[n]),_.useEffect(()=>{if(s){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[s]);let v=()=>{i(!0)},w=()=>{i(!1),c(!1)};return t?n!=="intent"?[l,x,{}]:[l,x,{onFocus:no(u,v),onBlur:no(h,w),onMouseEnter:no(m,v),onMouseLeave:no(p,w),onTouchStart:no(y,v)}]:[!1,x,{}]}function no(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function u_({page:n,...e}){let{router:t}=Cw(),s=_.useMemo(()=>bw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?_.createElement(f_,{page:n,matches:s,...e}):null}function h_(n){let{manifest:e,routeModules:t}=Tw(),[s,i]=_.useState([]);return _.useEffect(()=>{let l=!1;return a_(n,e,t).then(c=>{l||i(c)}),()=>{l=!0}},[n,e,t]),s}function f_({page:n,matches:e,...t}){let s=ba(),{manifest:i,routeModules:l}=Tw(),{basename:c}=Cw(),{loaderData:u,matches:h}=c_(),m=_.useMemo(()=>Sb(n,e,h,i,s,"data"),[n,e,h,i,s]),p=_.useMemo(()=>Sb(n,e,h,i,s,"assets"),[n,e,h,i,s]),y=_.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let w=new Set,A=!1;if(e.forEach(N=>{let j=i.routes[N.route.id];!j||!j.hasLoader||(!m.some(C=>C.route.id===N.route.id)&&N.route.id in u&&l[N.route.id]?.shouldRevalidate||j.hasClientLoader?A=!0:w.add(N.route.id))}),w.size===0)return[];let S=t_(n,c,"data");return A&&w.size>0&&S.searchParams.set("_routes",e.filter(N=>w.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[c,u,s,i,m,e,n,l]),x=_.useMemo(()=>i_(p,i),[p,i]),v=h_(p);return _.createElement(_.Fragment,null,y.map(w=>_.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>_.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),v.map(({key:w,link:A})=>_.createElement("link",{key:w,nonce:t.nonce,...A})))}function m_(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Dw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dw&&(window.__reactRouterVersion="7.8.2")}catch{}function p_({basename:n,children:e,window:t}){let s=_.useRef();s.current==null&&(s.current=tj({window:t,v5Compat:!0}));let i=s.current,[l,c]=_.useState({action:i.action,location:i.location}),u=_.useCallback(h=>{_.startTransition(()=>c(h))},[c]);return _.useLayoutEffect(()=>i.listen(u),[i,u]),_.createElement($j,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:i})}var Rw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cp=_.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:l,replace:c,state:u,target:h,to:m,preventScrollReset:p,viewTransition:y,...x},v){let{basename:w}=_.useContext(Tn),A=typeof m=="string"&&Rw.test(m),S,N=!1;if(typeof m=="string"&&A&&(S=m,Dw))try{let I=new URL(window.location.href),ee=m.startsWith("//")?new URL(I.protocol+m):new URL(m),z=ya(ee.pathname,w);ee.origin===I.origin&&z!=null?m=z+ee.search+ee.hash:N=!0}catch{jn(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=Cj(m,{relative:i}),[C,R,D]=d_(s,x),O=b_(m,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:y});function B(I){e&&e(I),I.defaultPrevented||O(I)}let F=_.createElement("a",{...x,...D,href:S||j,onClick:N||l?e:B,ref:m_(v,R),target:h,"data-discover":!A&&t==="render"?"true":void 0});return C&&!A?_.createElement(_.Fragment,null,F,_.createElement(u_,{page:j})):F});Cp.displayName="Link";var g_=_.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:l,to:c,viewTransition:u,children:h,...m},p){let y=Bo(c,{relative:m.relative}),x=ba(),v=_.useContext(du),{navigator:w,basename:A}=_.useContext(Tn),S=v!=null&&N_(y)&&u===!0,N=w.encodeLocation?w.encodeLocation(y).pathname:y.pathname,j=x.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(j=j.toLowerCase(),C=C?C.toLowerCase():null,N=N.toLowerCase()),C&&A&&(C=ya(C,A)||C);const R=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let D=j===N||!i&&j.startsWith(N)&&j.charAt(R)==="/",O=C!=null&&(C===N||!i&&C.startsWith(N)&&C.charAt(N.length)==="/"),B={isActive:D,isPending:O,isTransitioning:S},F=D?e:void 0,I;typeof s=="function"?I=s(B):I=[s,D?"active":null,O?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ee=typeof l=="function"?l(B):l;return _.createElement(Cp,{...m,"aria-current":F,className:I,ref:p,style:ee,to:c,viewTransition:u},typeof h=="function"?h(B):h)});g_.displayName="NavLink";var y_=_.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:l,method:c=jd,action:u,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:y,...x},v)=>{let w=A_(),A=S_(u,{relative:m}),S=c.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&Rw.test(u),j=C=>{if(h&&h(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,D=R?.getAttribute("formmethod")||c;w(R||C.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:l,relative:m,preventScrollReset:p,viewTransition:y})};return _.createElement("form",{ref:v,method:S,action:A,onSubmit:s?h:j,...x,"data-discover":!N&&n==="render"?"true":void 0})});y_.displayName="Form";function x_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kw(n){let e=_.useContext(sl);return Dt(e,x_(n)),e}function b_(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:l,viewTransition:c}={}){let u=al(),h=ba(),m=Bo(n,{relative:l});return _.useCallback(p=>{if(Zj(p,e)){p.preventDefault();let y=t!==void 0?t:jo(h)===jo(m);u(n,{replace:y,state:s,preventScrollReset:i,relative:l,viewTransition:c})}},[h,u,m,t,s,e,n,i,l,c])}var v_=0,w_=()=>`__${String(++v_)}__`;function A_(){let{router:n}=kw("useSubmit"),{basename:e}=_.useContext(Tn),t=Fj();return _.useCallback(async(s,i={})=>{let{action:l,method:c,encType:u,formData:h,body:m}=e_(s,e);if(i.navigate===!1){let p=i.fetcherKey||w_();await n.fetch(p,t,i.action||l,{preventScrollReset:i.preventScrollReset,formData:h,body:m,formMethod:i.method||c,formEncType:i.encType||u,flushSync:i.flushSync})}else await n.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:h,body:m,formMethod:i.method||c,formEncType:i.encType||u,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function S_(n,{relative:e}={}){let{basename:t}=_.useContext(Tn),s=_.useContext(Dn);Dt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),l={...Bo(n||".",{relative:e})},c=ba();if(n==null){l.search=c.search;let u=new URLSearchParams(l.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(y=>y).forEach(y=>u.append("index",y));let p=u.toString();l.search=p?`?${p}`:""}}return(!n||n===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ga([t,l.pathname])),jo(l)}function N_(n,{relative:e}={}){let t=_.useContext(Sw);Dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=kw("useViewTransitionState"),i=Bo(n,{relative:e});if(!t.isTransitioning)return!1;let l=ya(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=ya(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Hd(i.pathname,c)!=null||Hd(i.pathname,l)!=null}var Fm=xw();function Mw(n,e){return function(){return n.apply(e,arguments)}}const{toString:E_}=Object.prototype,{getPrototypeOf:Tp}=Object,{iterator:hu,toStringTag:Lw}=Symbol,fu=(n=>e=>{const t=E_.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rn=n=>(n=n.toLowerCase(),e=>fu(e)===n),mu=n=>e=>typeof e===n,{isArray:il}=Array,_o=mu("undefined");function Ho(n){return n!==null&&!_o(n)&&n.constructor!==null&&!_o(n.constructor)&&Ps(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Ow=Rn("ArrayBuffer");function j_(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Ow(n.buffer),e}const __=mu("string"),Ps=mu("function"),Iw=mu("number"),zo=n=>n!==null&&typeof n=="object",C_=n=>n===!0||n===!1,Cd=n=>{if(fu(n)!=="object")return!1;const e=Tp(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Lw in n)&&!(hu in n)},T_=n=>{if(!zo(n)||Ho(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},D_=Rn("Date"),R_=Rn("File"),k_=Rn("Blob"),M_=Rn("FileList"),L_=n=>zo(n)&&Ps(n.pipe),O_=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Ps(n.append)&&((e=fu(n))==="formdata"||e==="object"&&Ps(n.toString)&&n.toString()==="[object FormData]"))},I_=Rn("URLSearchParams"),[P_,B_,H_,z_]=["ReadableStream","Request","Response","Headers"].map(Rn),F_=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fo(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),il(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{if(Ho(n))return;const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let u;for(s=0;s<c;s++)u=l[s],e.call(null,n[u],u,n)}}function Pw(n,e){if(Ho(n))return null;e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const Di=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bw=n=>!_o(n)&&n!==Di;function Um(){const{caseless:n}=Bw(this)&&this||{},e={},t=(s,i)=>{const l=n&&Pw(e,i)||i;Cd(e[l])&&Cd(s)?e[l]=Um(e[l],s):Cd(s)?e[l]=Um({},s):il(s)?e[l]=s.slice():e[l]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Fo(arguments[s],t);return e}const U_=(n,e,t,{allOwnKeys:s}={})=>(Fo(e,(i,l)=>{t&&Ps(i)?n[l]=Mw(i,t):n[l]=i},{allOwnKeys:s}),n),q_=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),V_=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},$_=(n,e,t,s)=>{let i,l,c;const u={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),l=i.length;l-- >0;)c=i[l],(!s||s(c,n,e))&&!u[c]&&(e[c]=n[c],u[c]=!0);n=t!==!1&&Tp(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},G_=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},Y_=n=>{if(!n)return null;if(il(n))return n;let e=n.length;if(!Iw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},W_=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Tp(Uint8Array)),X_=(n,e)=>{const s=(n&&n[hu]).call(n);let i;for(;(i=s.next())&&!i.done;){const l=i.value;e.call(n,l[0],l[1])}},Q_=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},Z_=Rn("HTMLFormElement"),K_=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),Nb=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),J_=Rn("RegExp"),Hw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};Fo(t,(i,l)=>{let c;(c=e(i,l,n))!==!1&&(s[l]=c||i)}),Object.defineProperties(n,s)},eC=n=>{Hw(n,(e,t)=>{if(Ps(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Ps(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},tC=(n,e)=>{const t={},s=i=>{i.forEach(l=>{t[l]=!0})};return il(n)?s(n):s(String(n).split(e)),t},sC=()=>{},nC=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function aC(n){return!!(n&&Ps(n.append)&&n[Lw]==="FormData"&&n[hu])}const iC=n=>{const e=new Array(10),t=(s,i)=>{if(zo(s)){if(e.indexOf(s)>=0)return;if(Ho(s))return s;if(!("toJSON"in s)){e[i]=s;const l=il(s)?[]:{};return Fo(s,(c,u)=>{const h=t(c,i+1);!_o(h)&&(l[u]=h)}),e[i]=void 0,l}}return s};return t(n,0)},rC=Rn("AsyncFunction"),lC=n=>n&&(zo(n)||Ps(n))&&Ps(n.then)&&Ps(n.catch),zw=((n,e)=>n?setImmediate:e?((t,s)=>(Di.addEventListener("message",({source:i,data:l})=>{i===Di&&l===t&&s.length&&s.shift()()},!1),i=>{s.push(i),Di.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ps(Di.postMessage)),oC=typeof queueMicrotask<"u"?queueMicrotask.bind(Di):typeof process<"u"&&process.nextTick||zw,cC=n=>n!=null&&Ps(n[hu]),le={isArray:il,isArrayBuffer:Ow,isBuffer:Ho,isFormData:O_,isArrayBufferView:j_,isString:__,isNumber:Iw,isBoolean:C_,isObject:zo,isPlainObject:Cd,isEmptyObject:T_,isReadableStream:P_,isRequest:B_,isResponse:H_,isHeaders:z_,isUndefined:_o,isDate:D_,isFile:R_,isBlob:k_,isRegExp:J_,isFunction:Ps,isStream:L_,isURLSearchParams:I_,isTypedArray:W_,isFileList:M_,forEach:Fo,merge:Um,extend:U_,trim:F_,stripBOM:q_,inherits:V_,toFlatObject:$_,kindOf:fu,kindOfTest:Rn,endsWith:G_,toArray:Y_,forEachEntry:X_,matchAll:Q_,isHTMLForm:Z_,hasOwnProperty:Nb,hasOwnProp:Nb,reduceDescriptors:Hw,freezeMethods:eC,toObjectSet:tC,toCamelCase:K_,noop:sC,toFiniteNumber:nC,findKey:Pw,global:Di,isContextDefined:Bw,isSpecCompliantForm:aC,toJSONObject:iC,isAsyncFn:rC,isThenable:lC,setImmediate:zw,asap:oC,isIterable:cC};function Ge(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}le.inherits(Ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const Fw=Ge.prototype,Uw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Uw[n]={value:n}});Object.defineProperties(Ge,Uw);Object.defineProperty(Fw,"isAxiosError",{value:!0});Ge.from=(n,e,t,s,i,l)=>{const c=Object.create(Fw);return le.toFlatObject(n,c,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),Ge.call(c,n.message,e,t,s,i),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const dC=null;function qm(n){return le.isPlainObject(n)||le.isArray(n)}function qw(n){return le.endsWith(n,"[]")?n.slice(0,-2):n}function Eb(n,e,t){return n?n.concat(e).map(function(i,l){return i=qw(i),!t&&l?"["+i+"]":i}).join(t?".":""):e}function uC(n){return le.isArray(n)&&!n.some(qm)}const hC=le.toFlatObject(le,{},null,function(e){return/^is[A-Z]/.test(e)});function pu(n,e,t){if(!le.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=le.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,S){return!le.isUndefined(S[A])});const s=t.metaTokens,i=t.visitor||p,l=t.dots,c=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(e);if(!le.isFunction(i))throw new TypeError("visitor must be a function");function m(w){if(w===null)return"";if(le.isDate(w))return w.toISOString();if(le.isBoolean(w))return w.toString();if(!h&&le.isBlob(w))throw new Ge("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(w)||le.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,A,S){let N=w;if(w&&!S&&typeof w=="object"){if(le.endsWith(A,"{}"))A=s?A:A.slice(0,-2),w=JSON.stringify(w);else if(le.isArray(w)&&uC(w)||(le.isFileList(w)||le.endsWith(A,"[]"))&&(N=le.toArray(w)))return A=qw(A),N.forEach(function(C,R){!(le.isUndefined(C)||C===null)&&e.append(c===!0?Eb([A],R,l):c===null?A:A+"[]",m(C))}),!1}return qm(w)?!0:(e.append(Eb(S,A,l),m(w)),!1)}const y=[],x=Object.assign(hC,{defaultVisitor:p,convertValue:m,isVisitable:qm});function v(w,A){if(!le.isUndefined(w)){if(y.indexOf(w)!==-1)throw Error("Circular reference detected in "+A.join("."));y.push(w),le.forEach(w,function(N,j){(!(le.isUndefined(N)||N===null)&&i.call(e,N,le.isString(j)?j.trim():j,A,x))===!0&&v(N,A?A.concat(j):[j])}),y.pop()}}if(!le.isObject(n))throw new TypeError("data must be an object");return v(n),e}function jb(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Dp(n,e){this._pairs=[],n&&pu(n,this,e)}const Vw=Dp.prototype;Vw.append=function(e,t){this._pairs.push([e,t])};Vw.toString=function(e){const t=e?function(s){return e.call(this,s,jb)}:jb;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function fC(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $w(n,e,t){if(!e)return n;const s=t&&t.encode||fC;le.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let l;if(i?l=i(e,t):l=le.isURLSearchParams(e)?e.toString():new Dp(e,t).toString(s),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class _b{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){le.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Gw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mC=typeof URLSearchParams<"u"?URLSearchParams:Dp,pC=typeof FormData<"u"?FormData:null,gC=typeof Blob<"u"?Blob:null,yC={isBrowser:!0,classes:{URLSearchParams:mC,FormData:pC,Blob:gC},protocols:["http","https","file","blob","url","data"]},Rp=typeof window<"u"&&typeof document<"u",Vm=typeof navigator=="object"&&navigator||void 0,xC=Rp&&(!Vm||["ReactNative","NativeScript","NS"].indexOf(Vm.product)<0),bC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vC=Rp&&window.location.href||"http://localhost",wC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Rp,hasStandardBrowserEnv:xC,hasStandardBrowserWebWorkerEnv:bC,navigator:Vm,origin:vC},Symbol.toStringTag,{value:"Module"})),xs={...wC,...yC};function AC(n,e){return pu(n,new xs.classes.URLSearchParams,{visitor:function(t,s,i,l){return xs.isNode&&le.isBuffer(t)?(this.append(s,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...e})}function SC(n){return le.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function NC(n){const e={},t=Object.keys(n);let s;const i=t.length;let l;for(s=0;s<i;s++)l=t[s],e[l]=n[l];return e}function Yw(n){function e(t,s,i,l){let c=t[l++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=l>=t.length;return c=!c&&le.isArray(i)?i.length:c,h?(le.hasOwnProp(i,c)?i[c]=[i[c],s]:i[c]=s,!u):((!i[c]||!le.isObject(i[c]))&&(i[c]=[]),e(t,s,i[c],l)&&le.isArray(i[c])&&(i[c]=NC(i[c])),!u)}if(le.isFormData(n)&&le.isFunction(n.entries)){const t={};return le.forEachEntry(n,(s,i)=>{e(SC(s),i,t,0)}),t}return null}function EC(n,e,t){if(le.isString(n))try{return(e||JSON.parse)(n),le.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const Uo={transitional:Gw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,l=le.isObject(e);if(l&&le.isHTMLForm(e)&&(e=new FormData(e)),le.isFormData(e))return i?JSON.stringify(Yw(e)):e;if(le.isArrayBuffer(e)||le.isBuffer(e)||le.isStream(e)||le.isFile(e)||le.isBlob(e)||le.isReadableStream(e))return e;if(le.isArrayBufferView(e))return e.buffer;if(le.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return AC(e,this.formSerializer).toString();if((u=le.isFileList(e))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return pu(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return l||i?(t.setContentType("application/json",!1),EC(e)):e}],transformResponse:[function(e){const t=this.transitional||Uo.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(le.isResponse(e)||le.isReadableStream(e))return e;if(e&&le.isString(e)&&(s&&!this.responseType||i)){const c=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?Ge.from(u,Ge.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xs.classes.FormData,Blob:xs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],n=>{Uo.headers[n]={}});const jC=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_C=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(c){i=c.indexOf(":"),t=c.substring(0,i).trim().toLowerCase(),s=c.substring(i+1).trim(),!(!t||e[t]&&jC[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},Cb=Symbol("internals");function ao(n){return n&&String(n).trim().toLowerCase()}function Td(n){return n===!1||n==null?n:le.isArray(n)?n.map(Td):String(n)}function CC(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const TC=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function sm(n,e,t,s,i){if(le.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!le.isString(e)){if(le.isString(s))return e.indexOf(s)!==-1;if(le.isRegExp(s))return s.test(e)}}function DC(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function RC(n,e){const t=le.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,l,c){return this[s].call(this,e,i,l,c)},configurable:!0})})}let Bs=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function l(u,h,m){const p=ao(h);if(!p)throw new Error("header name must be a non-empty string");const y=le.findKey(i,p);(!y||i[y]===void 0||m===!0||m===void 0&&i[y]!==!1)&&(i[y||h]=Td(u))}const c=(u,h)=>le.forEach(u,(m,p)=>l(m,p,h));if(le.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(le.isString(e)&&(e=e.trim())&&!TC(e))c(_C(e),t);else if(le.isObject(e)&&le.isIterable(e)){let u={},h,m;for(const p of e){if(!le.isArray(p))throw TypeError("Object iterator must return a key-value pair");u[m=p[0]]=(h=u[m])?le.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}c(u,t)}else e!=null&&l(t,e,s);return this}get(e,t){if(e=ao(e),e){const s=le.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return CC(i);if(le.isFunction(t))return t.call(this,i,s);if(le.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ao(e),e){const s=le.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||sm(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function l(c){if(c=ao(c),c){const u=le.findKey(s,c);u&&(!t||sm(s,s[u],u,t))&&(delete s[u],i=!0)}}return le.isArray(e)?e.forEach(l):l(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const l=t[s];(!e||sm(this,this[l],l,e,!0))&&(delete this[l],i=!0)}return i}normalize(e){const t=this,s={};return le.forEach(this,(i,l)=>{const c=le.findKey(s,l);if(c){t[c]=Td(i),delete t[l];return}const u=e?DC(l):String(l).trim();u!==l&&delete t[l],t[u]=Td(i),s[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return le.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&le.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[Cb]=this[Cb]={accessors:{}}).accessors,i=this.prototype;function l(c){const u=ao(c);s[u]||(RC(i,c),s[u]=!0)}return le.isArray(e)?e.forEach(l):l(e),this}};Bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Bs.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});le.freezeMethods(Bs);function nm(n,e){const t=this||Uo,s=e||t,i=Bs.from(s.headers);let l=s.data;return le.forEach(n,function(u){l=u.call(t,l,i.normalize(),e?e.status:void 0)}),i.normalize(),l}function Ww(n){return!!(n&&n.__CANCEL__)}function rl(n,e,t){Ge.call(this,n??"canceled",Ge.ERR_CANCELED,e,t),this.name="CanceledError"}le.inherits(rl,Ge,{__CANCEL__:!0});function Xw(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new Ge("Request failed with status code "+t.status,[Ge.ERR_BAD_REQUEST,Ge.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function kC(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function MC(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,l=0,c;return e=e!==void 0?e:1e3,function(h){const m=Date.now(),p=s[l];c||(c=m),t[i]=h,s[i]=m;let y=l,x=0;for(;y!==i;)x+=t[y++],y=y%n;if(i=(i+1)%n,i===l&&(l=(l+1)%n),m-c<e)return;const v=p&&m-p;return v?Math.round(x*1e3/v):void 0}}function LC(n,e){let t=0,s=1e3/e,i,l;const c=(m,p=Date.now())=>{t=p,i=null,l&&(clearTimeout(l),l=null),n(...m)};return[(...m)=>{const p=Date.now(),y=p-t;y>=s?c(m,p):(i=m,l||(l=setTimeout(()=>{l=null,c(i)},s-y)))},()=>i&&c(i)]}const zd=(n,e,t=3)=>{let s=0;const i=MC(50,250);return LC(l=>{const c=l.loaded,u=l.lengthComputable?l.total:void 0,h=c-s,m=i(h),p=c<=u;s=c;const y={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:m||void 0,estimated:m&&u&&p?(u-c)/m:void 0,event:l,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(y)},t)},Tb=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},Db=n=>(...e)=>le.asap(()=>n(...e)),OC=xs.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,xs.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(xs.origin),xs.navigator&&/(msie|trident)/i.test(xs.navigator.userAgent)):()=>!0,IC=xs.hasStandardBrowserEnv?{write(n,e,t,s,i,l){const c=[n+"="+encodeURIComponent(e)];le.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),le.isString(s)&&c.push("path="+s),le.isString(i)&&c.push("domain="+i),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function PC(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function BC(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Qw(n,e,t){let s=!PC(e);return n&&(s||t==!1)?BC(n,e):e}const Rb=n=>n instanceof Bs?{...n}:n;function Hi(n,e){e=e||{};const t={};function s(m,p,y,x){return le.isPlainObject(m)&&le.isPlainObject(p)?le.merge.call({caseless:x},m,p):le.isPlainObject(p)?le.merge({},p):le.isArray(p)?p.slice():p}function i(m,p,y,x){if(le.isUndefined(p)){if(!le.isUndefined(m))return s(void 0,m,y,x)}else return s(m,p,y,x)}function l(m,p){if(!le.isUndefined(p))return s(void 0,p)}function c(m,p){if(le.isUndefined(p)){if(!le.isUndefined(m))return s(void 0,m)}else return s(void 0,p)}function u(m,p,y){if(y in e)return s(m,p);if(y in n)return s(void 0,m)}const h={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(m,p,y)=>i(Rb(m),Rb(p),y,!0)};return le.forEach(Object.keys({...n,...e}),function(p){const y=h[p]||i,x=y(n[p],e[p],p);le.isUndefined(x)&&y!==u||(t[p]=x)}),t}const Zw=n=>{const e=Hi({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:l,headers:c,auth:u}=e;e.headers=c=Bs.from(c),e.url=$w(Qw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let h;if(le.isFormData(t)){if(xs.hasStandardBrowserEnv||xs.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((h=c.getContentType())!==!1){const[m,...p]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",...p].join("; "))}}if(xs.hasStandardBrowserEnv&&(s&&le.isFunction(s)&&(s=s(e)),s||s!==!1&&OC(e.url))){const m=i&&l&&IC.read(l);m&&c.set(i,m)}return e},HC=typeof XMLHttpRequest<"u",zC=HC&&function(n){return new Promise(function(t,s){const i=Zw(n);let l=i.data;const c=Bs.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:m}=i,p,y,x,v,w;function A(){v&&v(),w&&w(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function N(){if(!S)return;const C=Bs.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),D={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:C,config:n,request:S};Xw(function(B){t(B),A()},function(B){s(B),A()},D),S=null}"onloadend"in S?S.onloadend=N:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(N)},S.onabort=function(){S&&(s(new Ge("Request aborted",Ge.ECONNABORTED,n,S)),S=null)},S.onerror=function(){s(new Ge("Network Error",Ge.ERR_NETWORK,n,S)),S=null},S.ontimeout=function(){let R=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const D=i.transitional||Gw;i.timeoutErrorMessage&&(R=i.timeoutErrorMessage),s(new Ge(R,D.clarifyTimeoutError?Ge.ETIMEDOUT:Ge.ECONNABORTED,n,S)),S=null},l===void 0&&c.setContentType(null),"setRequestHeader"in S&&le.forEach(c.toJSON(),function(R,D){S.setRequestHeader(D,R)}),le.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),u&&u!=="json"&&(S.responseType=i.responseType),m&&([x,w]=zd(m,!0),S.addEventListener("progress",x)),h&&S.upload&&([y,v]=zd(h),S.upload.addEventListener("progress",y),S.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(p=C=>{S&&(s(!C||C.type?new rl(null,n,S):C),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const j=kC(i.url);if(j&&xs.protocols.indexOf(j)===-1){s(new Ge("Unsupported protocol "+j+":",Ge.ERR_BAD_REQUEST,n));return}S.send(l||null)})},FC=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,i;const l=function(m){if(!i){i=!0,u();const p=m instanceof Error?m:this.reason;s.abort(p instanceof Ge?p:new rl(p instanceof Error?p.message:p))}};let c=e&&setTimeout(()=>{c=null,l(new Ge(`timeout ${e} of ms exceeded`,Ge.ETIMEDOUT))},e);const u=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),n=null)};n.forEach(m=>m.addEventListener("abort",l));const{signal:h}=s;return h.unsubscribe=()=>le.asap(u),h}},UC=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},qC=async function*(n,e){for await(const t of VC(n))yield*UC(t,e)},VC=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},kb=(n,e,t,s)=>{const i=qC(n,e);let l=0,c,u=h=>{c||(c=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await i.next();if(m){u(),h.close();return}let y=p.byteLength;if(t){let x=l+=y;t(x)}h.enqueue(new Uint8Array(p))}catch(m){throw u(m),m}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},gu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Kw=gu&&typeof ReadableStream=="function",$C=gu&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Jw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},GC=Kw&&Jw(()=>{let n=!1;const e=new Request(xs.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Mb=64*1024,$m=Kw&&Jw(()=>le.isReadableStream(new Response("").body)),Fd={stream:$m&&(n=>n.body)};gu&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Fd[e]&&(Fd[e]=le.isFunction(n[e])?t=>t[e]():(t,s)=>{throw new Ge(`Response type '${e}' is not supported`,Ge.ERR_NOT_SUPPORT,s)})})})(new Response);const YC=async n=>{if(n==null)return 0;if(le.isBlob(n))return n.size;if(le.isSpecCompliantForm(n))return(await new Request(xs.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(le.isArrayBufferView(n)||le.isArrayBuffer(n))return n.byteLength;if(le.isURLSearchParams(n)&&(n=n+""),le.isString(n))return(await $C(n)).byteLength},WC=async(n,e)=>{const t=le.toFiniteNumber(n.getContentLength());return t??YC(e)},XC=gu&&(async n=>{let{url:e,method:t,data:s,signal:i,cancelToken:l,timeout:c,onDownloadProgress:u,onUploadProgress:h,responseType:m,headers:p,withCredentials:y="same-origin",fetchOptions:x}=Zw(n);m=m?(m+"").toLowerCase():"text";let v=FC([i,l&&l.toAbortSignal()],c),w;const A=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let S;try{if(h&&GC&&t!=="get"&&t!=="head"&&(S=await WC(p,s))!==0){let D=new Request(e,{method:"POST",body:s,duplex:"half"}),O;if(le.isFormData(s)&&(O=D.headers.get("content-type"))&&p.setContentType(O),D.body){const[B,F]=Tb(S,zd(Db(h)));s=kb(D.body,Mb,B,F)}}le.isString(y)||(y=y?"include":"omit");const N="credentials"in Request.prototype;w=new Request(e,{...x,signal:v,method:t.toUpperCase(),headers:p.normalize().toJSON(),body:s,duplex:"half",credentials:N?y:void 0});let j=await fetch(w,x);const C=$m&&(m==="stream"||m==="response");if($m&&(u||C&&A)){const D={};["status","statusText","headers"].forEach(I=>{D[I]=j[I]});const O=le.toFiniteNumber(j.headers.get("content-length")),[B,F]=u&&Tb(O,zd(Db(u),!0))||[];j=new Response(kb(j.body,Mb,B,()=>{F&&F(),A&&A()}),D)}m=m||"text";let R=await Fd[le.findKey(Fd,m)||"text"](j,n);return!C&&A&&A(),await new Promise((D,O)=>{Xw(D,O,{data:R,headers:Bs.from(j.headers),status:j.status,statusText:j.statusText,config:n,request:w})})}catch(N){throw A&&A(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new Ge("Network Error",Ge.ERR_NETWORK,n,w),{cause:N.cause||N}):Ge.from(N,N&&N.code,n,w)}}),Gm={http:dC,xhr:zC,fetch:XC};le.forEach(Gm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Lb=n=>`- ${n}`,QC=n=>le.isFunction(n)||n===null||n===!1,eA={getAdapter:n=>{n=le.isArray(n)?n:[n];const{length:e}=n;let t,s;const i={};for(let l=0;l<e;l++){t=n[l];let c;if(s=t,!QC(t)&&(s=Gm[(c=String(t)).toLowerCase()],s===void 0))throw new Ge(`Unknown adapter '${c}'`);if(s)break;i[c||"#"+l]=s}if(!s){const l=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(Lb).join(`
`):" "+Lb(l[0]):"as no adapter specified";throw new Ge("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s},adapters:Gm};function am(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new rl(null,n)}function Ob(n){return am(n),n.headers=Bs.from(n.headers),n.data=nm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),eA.getAdapter(n.adapter||Uo.adapter)(n).then(function(s){return am(n),s.data=nm.call(n,n.transformResponse,s),s.headers=Bs.from(s.headers),s},function(s){return Ww(s)||(am(n),s&&s.response&&(s.response.data=nm.call(n,n.transformResponse,s.response),s.response.headers=Bs.from(s.response.headers))),Promise.reject(s)})}const tA="1.11.0",yu={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{yu[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Ib={};yu.transitional=function(e,t,s){function i(l,c){return"[Axios v"+tA+"] Transitional option '"+l+"'"+c+(s?". "+s:"")}return(l,c,u)=>{if(e===!1)throw new Ge(i(c," has been removed"+(t?" in "+t:"")),Ge.ERR_DEPRECATED);return t&&!Ib[c]&&(Ib[c]=!0,console.warn(i(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,u):!0}};yu.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function ZC(n,e,t){if(typeof n!="object")throw new Ge("options must be an object",Ge.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const l=s[i],c=e[l];if(c){const u=n[l],h=u===void 0||c(u,l,n);if(h!==!0)throw new Ge("option "+l+" must be "+h,Ge.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ge("Unknown option "+l,Ge.ERR_BAD_OPTION)}}const Dd={assertOptions:ZC,validators:yu},Fn=Dd.validators;let Ii=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _b,response:new _b}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Hi(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:l}=t;s!==void 0&&Dd.assertOptions(s,{silentJSONParsing:Fn.transitional(Fn.boolean),forcedJSONParsing:Fn.transitional(Fn.boolean),clarifyTimeoutError:Fn.transitional(Fn.boolean)},!1),i!=null&&(le.isFunction(i)?t.paramsSerializer={serialize:i}:Dd.assertOptions(i,{encode:Fn.function,serialize:Fn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Dd.assertOptions(t,{baseUrl:Fn.spelling("baseURL"),withXsrfToken:Fn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&le.merge(l.common,l[t.method]);l&&le.forEach(["delete","get","head","post","put","patch","common"],w=>{delete l[w]}),t.headers=Bs.concat(c,l);const u=[];let h=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(h=h&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const m=[];this.interceptors.response.forEach(function(A){m.push(A.fulfilled,A.rejected)});let p,y=0,x;if(!h){const w=[Ob.bind(this),void 0];for(w.unshift(...u),w.push(...m),x=w.length,p=Promise.resolve(t);y<x;)p=p.then(w[y++],w[y++]);return p}x=u.length;let v=t;for(y=0;y<x;){const w=u[y++],A=u[y++];try{v=w(v)}catch(S){A.call(this,S);break}}try{p=Ob.call(this,v)}catch(w){return Promise.reject(w)}for(y=0,x=m.length;y<x;)p=p.then(m[y++],m[y++]);return p}getUri(e){e=Hi(this.defaults,e);const t=Qw(e.baseURL,e.url,e.allowAbsoluteUrls);return $w(t,e.params,e.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(e){Ii.prototype[e]=function(t,s){return this.request(Hi(s||{},{method:e,url:t,data:(s||{}).data}))}});le.forEach(["post","put","patch"],function(e){function t(s){return function(l,c,u){return this.request(Hi(u||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}Ii.prototype[e]=t(),Ii.prototype[e+"Form"]=t(!0)});let KC=class sA{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const s=this;this.promise.then(i=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](i);s._listeners=null}),this.promise.then=i=>{let l;const c=new Promise(u=>{s.subscribe(u),l=u}).then(i);return c.cancel=function(){s.unsubscribe(l)},c},e(function(l,c,u){s.reason||(s.reason=new rl(l,c,u),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new sA(function(i){e=i}),cancel:e}}};function JC(n){return function(t){return n.apply(null,t)}}function eT(n){return le.isObject(n)&&n.isAxiosError===!0}const Ym={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ym).forEach(([n,e])=>{Ym[e]=n});function nA(n){const e=new Ii(n),t=Mw(Ii.prototype.request,e);return le.extend(t,Ii.prototype,e,{allOwnKeys:!0}),le.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return nA(Hi(n,i))},t}const Ft=nA(Uo);Ft.Axios=Ii;Ft.CanceledError=rl;Ft.CancelToken=KC;Ft.isCancel=Ww;Ft.VERSION=tA;Ft.toFormData=pu;Ft.AxiosError=Ge;Ft.Cancel=Ft.CanceledError;Ft.all=function(e){return Promise.all(e)};Ft.spread=JC;Ft.isAxiosError=eT;Ft.mergeConfig=Hi;Ft.AxiosHeaders=Bs;Ft.formToJSON=n=>Yw(le.isHTMLForm(n)?new FormData(n):n);Ft.getAdapter=eA.getAdapter;Ft.HttpStatusCode=Ym;Ft.default=Ft;const{Axios:aP,AxiosError:iP,CanceledError:rP,isCancel:lP,CancelToken:oP,VERSION:cP,all:dP,Cancel:uP,isAxiosError:hP,spread:fP,toFormData:mP,AxiosHeaders:pP,HttpStatusCode:gP,formToJSON:yP,getAdapter:xP,mergeConfig:bP}=Ft,ye=Ft.create({baseURL:"https://gys-hrms.vercel.app/api",headers:{"Content-Type":"application/json"}});ye.interceptors.request.use(n=>{const e=localStorage.getItem("token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>Promise.reject(n));const aA=_.createContext(),tT=({children:n})=>{const[e,t]=_.useState(null),[s,i]=_.useState(localStorage.getItem("token")||null),[l,c]=_.useState(!0),u=async(x,v)=>{const w=await ye.post("/auth/login",{email:x,password:v});i(w.data.token),localStorage.setItem("token",w.data.token),t(w.data.user)},h=()=>{t(null),i(null),localStorage.removeItem("token")},m=async x=>(await ye.post("/auth/forgot-password",{email:x})).data,p=async(x,v)=>(await ye.post("/auth/verify-otp",{email:x,otp:v})).data,y=async(x,v,w)=>(await ye.post("/auth/reset-password",{email:x,otp:v,password:w})).data;return _.useEffect(()=>{(async()=>{if(s)try{const v=await ye.get("/auth/me",{headers:{Authorization:`Bearer ${s}`}});t(v.data)}catch{h()}c(!1)})()},[s]),r.jsx(aA.Provider,{value:{user:e,token:s,loading:l,login:u,logout:h,requestPasswordReset:m,verifyOtp:p,resetPassword:y},children:n})},ls=()=>_.useContext(aA);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nT=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Pb=n=>{const e=nT(n);return e.charAt(0).toUpperCase()+e.slice(1)},iA=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),aT=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...u},h)=>_.createElement("svg",{ref:h,...iT,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:iA("lucide",i),...!l&&!aT(u)&&{"aria-hidden":"true"},...u},[...c.map(([m,p])=>_.createElement(m,p)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=(n,e)=>{const t=_.forwardRef(({className:s,...i},l)=>_.createElement(rT,{ref:l,iconNode:e,className:iA(`lucide-${sT(Pb(n))}`,`lucide-${n}`,s),...i}));return t.displayName=Pb(n),t};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oT=nt("arrow-left",lT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],im=nt("arrow-right",cT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],uT=nt("camera",dT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ks=nt("calendar",hT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],rm=nt("chart-column",fT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ho=nt("chevron-down",mT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],gT=nt("chevron-left",pT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],xT=nt("chevron-right",yT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fo=nt("chevron-up",bT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],as=nt("circle-alert",vT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Os=nt("circle-check-big",wT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Bb=nt("circle-user",AT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Nn=nt("circle-x",ST);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mn=nt("clock",NT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ud=nt("coffee",ET);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lm=nt("credit-card",jT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],CT=nt("dollar-sign",_T);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wm=nt("eye-off",TT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Co=nt("eye",DT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xo=nt("file-text",RT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],rA=nt("funnel",kT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],qd=nt("heart",MT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],OT=nt("loader",LT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ur=nt("lock",IT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],BT=nt("log-out",PT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lA=nt("mail",HT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],oA=nt("menu",zT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pi=nt("plus",FT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zi=nt("refresh-cw",UT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kp=nt("search",qT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xm=nt("square-pen",VT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mp=nt("trash-2",$T);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],YT=nt("user-check",GT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cA=nt("user",WT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vd=nt("users",XT);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qo=nt("x",QT),ZT=()=>{const[n,e]=_.useState(""),[t,s]=_.useState(""),[i,l]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(""),{login:p}=ls(),y=al(),x=async v=>{if(v.preventDefault(),m(""),u(!0),!n||!t){m("Please fill in all fields"),u(!1);return}if(!n.includes("@")){m("Please enter a valid email address"),u(!1);return}try{await p(n,t);const w=JSON.parse(localStorage.getItem("user"))?.role;y(w==="admin"?"/admin":w==="hr"?"/hr":"/employee")}catch(w){m(w.response?.data?.message||"Invalid credentials")}finally{u(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-[#104774] rounded-full flex items-center justify-center mb-4",children:r.jsx(Ur,{className:"h-8 w-8 text-white"})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome back"}),r.jsx("p",{className:"text-gray-600",children:"Please sign in to your account"})]}),r.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-xl border border-gray-100",children:r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[h&&r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(as,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-red-700",children:h})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(lA,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] focus:border-[#104774] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Enter your email",value:n,onChange:v=>e(v.target.value),disabled:c})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ur,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,className:"appearance-none relative block w-full pl-10 pr-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] focus:border-[#104774] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Enter your password",value:t,onChange:v=>s(v.target.value),disabled:c}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>l(!i),disabled:c,children:i?r.jsx(Wm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):r.jsx(Co,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),r.jsx("div",{className:"flex items-center justify-end",children:r.jsx("button",{onClick:()=>y("/forgot-password"),type:"button",className:"text-sm text-[#104774] hover:text-[#0d385d] font-medium transition-colors duration-200",children:"Forgot your password?"})}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-[#104774] hover:bg-[#0d385d] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#104774] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 active:scale-95",children:c?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Signing in..."})]}):"Sign in"})})]})})]})})},KT="/assets/gys_logo-Blem-OFh.png",Lp=({closeSidebar:n})=>{const{user:e,logout:t}=ls(),s=ba();if(!e)return null;const i={admin:[{label:"Dashboard",path:"/admin",icon:rm},{label:"Manage Employees",path:"/admin/manage-employees",icon:Vd},{label:"Attendance Management",path:"/admin/attendance",icon:mn},{label:"Payroll Approval",path:"/admin/payroll-approval",icon:lm},{label:"Calendar",path:"/admin/calendar",icon:Ks},{label:"Leaves Management",path:"/admin/leaves",icon:xo}],hr:[{label:"Dashboard",path:"/hr",icon:rm},{label:"Manage Employees",path:"/hr/manage-employees",icon:Vd},{label:"Attendance Management",path:"/hr/attendance",icon:mn},{label:"Payroll",path:"/hr/payroll",icon:lm},{label:"Leaves Management",path:"/hr/leaves",icon:xo},{label:"My Profile",path:"/hr/profile",icon:Bb},{label:"Calendar",path:"/hr/calendar",icon:Ks}],employee:[{label:"Dashboard",path:"/employee",icon:rm},{label:"My Attendance",path:"/employee/attendance",icon:mn},{label:"My Leaves",path:"/employee/leaves",icon:xo},{label:"Payslip",path:"/employee/payslip",icon:lm},{label:"My Profile",path:"/employee/profile",icon:Bb},{label:"Calendar",path:"/employee/calendar",icon:Ks}]};return r.jsxs("div",{className:"bg-white shadow-lg w-80 min-h-screen flex flex-col relative",children:[r.jsxs("div",{className:" px-5  border-b border-gray-100 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("img",{src:KT,alt:"GYS Logo",className:"h-21 w-auto object-contain "})}),r.jsx("button",{onClick:n,className:"lg:hidden text-gray-600 hover:text-gray-900",children:""})]}),r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[e?.avatarUrl?r.jsx("img",{src:e?.avatarUrl,alt:e.firstName,className:"w-20 h-20 rounded-full object-cover border border-gray-200"}):r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-300 to-gray-400 rounded-full flex items-center justify-center",children:r.jsx(cA,{size:20,className:"text-gray-600"})}),r.jsx("div",{className:"flex-1",children:e?.firstName||e?.lastName||e?.designation?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-semibold text-gray-800 px-1",children:`${e?.firstName||""} ${e?.lastName||""}`}),r.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full inline-block mt-1",children:e?.designation?.toUpperCase()})]}):r.jsx("div",{className:"font-semibold text-gray-500 bg-gray-100 px-5 py-1 rounded-full inline-block",children:e?.role?.toUpperCase()})})]})}),r.jsx("nav",{className:"flex-1 p-4 space-y-3",children:i[e.role]?.map((l,c)=>{const u=l.icon,h=s.pathname===l.path;return r.jsxs(Cp,{to:l.path,onClick:n,className:`w-full flex items-center px-4 py-4 rounded-xl transition-all duration-200 group ${h?"bg-gradient-to-r from-[#104774] to-[#0d3a61] text-white shadow-lg transform scale-105":"text-gray-600 hover:bg-gray-50 hover:text-[#104774]"}`,children:[r.jsx(u,{size:20,className:`mr-4 transition-transform duration-200 ${h?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"font-medium text-sm",children:l.label}),h&&r.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full opacity-80"})]},c)})}),r.jsx("div",{className:"p-4 border-t border-gray-100 mt-8",children:r.jsxs("button",{onClick:t,className:"w-full flex items-center px-4 py-4 text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 group",children:[r.jsx(BT,{size:20,className:"mr-4 transition-transform duration-200 group-hover:scale-110"}),r.jsx("span",{className:"font-medium text-sm",children:"Log Out"})]})})]})},Op=({onMenuClick:n})=>{const{user:e}=ls();if(!e)return null;const t=new Date().toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"short"}),s=new Date().getHours();let i="Hello";return s<12?i="Good Morning":s<18?i="Good Afternoon":i="Good Evening",r.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 px-6 py-3 flex justify-between items-center border-b border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-md text-gray-700 hover:bg-gray-100",children:r.jsx(oA,{size:24})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-1",children:[i,", ",e.firstName]}),r.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t})]})]}),r.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-[#104774] to-[#0d3a61] text-white rounded-full text-xs font-medium shadow",children:e.role.toUpperCase()})]})},JT=()=>{const[n,e]=_.useState(!1);return r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:`fixed inset-0 z-40 lg:static lg:translate-x-0 transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:r.jsx(Lp,{closeSidebar:()=>e(!1)})}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[r.jsx(Op,{onMenuClick:()=>e(!0)}),r.jsx("div",{className:"p-6 flex-1 bg-gray-50 overflow-y-auto",children:r.jsx(Ep,{})})]})]})},eD=()=>{const[n,e]=_.useState(!1);return r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:`fixed inset-0 z-40 lg:static lg:translate-x-0 transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:r.jsx(Lp,{closeSidebar:()=>e(!1)})}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[r.jsx(Op,{onMenuClick:()=>e(!0)}),r.jsx("div",{className:"p-6 flex-1 bg-gray-50 overflow-y-auto",children:r.jsx(Ep,{})})]})]})},tD=()=>{const[n,e]=_.useState(!1);return r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:`fixed inset-0 z-40 lg:static lg:translate-x-0 transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:r.jsx(Lp,{closeSidebar:()=>e(!1)})}),r.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[r.jsx(Op,{onMenuClick:()=>e(!0)}),r.jsx("div",{className:"p-6 flex-1 bg-gray-50 overflow-y-auto",children:r.jsx(Ep,{})})]})]})},sD=({formData:n,errors:e,handleInputChange:t,isEditMode:s=!1})=>{const i=l=>{if(!l)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(l))return l;const c=new Date(l);return isNaN(c.getTime())?"":c.toISOString().split("T")[0]};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Job Information"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the employee's job details"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation *"}),r.jsx("input",{type:"text",value:n.jobInfo.designation,onChange:l=>t("jobInfo","designation",l.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.designation?"border-red-500":"border-gray-300"}`,placeholder:"e.g., Software Developer"}),e.designation&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.designation})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department *"}),r.jsxs("select",{value:n.jobInfo.department,onChange:l=>t("jobInfo","department",l.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.department?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select Department"}),r.jsx("option",{value:"Software Developer",children:"Software Developer"}),r.jsx("option",{value:"UI",children:"UI/UX Designer"}),r.jsx("option",{value:"HR",children:"Human Resources"}),r.jsx("option",{value:"Finance",children:"Finance"}),r.jsx("option",{value:"Marketing",children:"Marketing"}),r.jsx("option",{value:"Sales",children:"Sales"}),r.jsx("option",{value:"Operations",children:"Operations"})]}),e.department&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.department})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Joining *"}),r.jsx("input",{type:"date",value:i(n.jobInfo.dateOfJoining),onChange:l=>t("jobInfo","dateOfJoining",l.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.dateOfJoining?"border-red-500":"border-gray-300"}`,disabled:s}),e.dateOfJoining&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.dateOfJoining}),s&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Joining date cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employment Type"}),r.jsxs("select",{value:n.jobInfo.employmentType||"full-time",onChange:l=>t("jobInfo","employmentType",l.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[r.jsx("option",{value:"full-time",children:"Full Time"}),r.jsx("option",{value:"intern",children:"Intern"}),r.jsx("option",{value:"part-time",children:"Part Time"}),r.jsx("option",{value:"contract",children:"Contract"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Work Mode"}),r.jsxs("select",{value:n.jobInfo.workMode||"work-from-home",onChange:l=>t("jobInfo","workMode",l.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[r.jsx("option",{value:"work-from-home",children:"Work From Home"}),r.jsx("option",{value:"work-from-office",children:"Work From Office"}),r.jsx("option",{value:"hybrid",children:"Hybrid"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift Start Time"}),r.jsx("input",{type:"time",value:n.jobInfo.shiftTiming?.start||"",onChange:l=>{const c={...n.jobInfo.shiftTiming,start:l.target.value};t("jobInfo","shiftTiming",c)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shift End Time"}),r.jsx("input",{type:"time",value:n.jobInfo.shiftTiming?.end||"",onChange:l=>{const c={...n.jobInfo.shiftTiming,end:l.target.value};t("jobInfo","shiftTiming",c)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]})]})]})},nD=({formData:n,errors:e,handlePasswordChange:t,handleRoleChange:s,isEditMode:i=!1})=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Account Credentials"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i?"Update employee's login credentials":"Set up login credentials for the employee"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-300",children:r.jsx("span",{className:"text-gray-800",children:n.basicInfo.email})}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This will be the username for login"})]}),!i&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Create Password *"}),r.jsx("input",{type:"password",value:n.password,onChange:t,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.password?"border-red-500":"border-gray-300"}`,placeholder:"Enter secure password"}),e.password&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.password}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Minimum 6 characters required"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role"}),r.jsxs("select",{value:n.role,onChange:s,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[r.jsx("option",{value:"employee",children:"Employee"}),r.jsx("option",{value:"hr",children:"HR Manager"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n.role==="hr"?"HR managers can manage employees and leave requests":"Employees can view their profile and submit leave requests"})]}),!i&&r.jsxs("div",{className:"bg-[#104774]/10 p-4 rounded-lg border border-[#104774]/40",children:[r.jsx("h4",{className:"font-semibold text-[#104774] mb-2",children:" Login Instructions"}),r.jsx("p",{className:"text-sm text-[#104774]",children:"The employee will receive an email with these credentials to access their account on their joining date."})]})]}),aD=({formData:n,handleDocumentUpload:e,removeDocument:t,isEditMode:s=!1,uploadProgress:i={},uploadingDocs:l={}})=>{const[c,u]=_.useState(!0),[h,m]=_.useState(""),[p,y]=_.useState([]),x=[{id:"aadhar",label:"Aadhar Card",required:!0},{id:"pan",label:"PAN Card",required:!0},{id:"tenth",label:"10th Marksheet",required:!0},{id:"twelfth",label:"12th Marksheet",required:!0},{id:"bank",label:"Bank Passbook",required:!0}],v=[{id:"provisional",label:"Provisional Certificate",required:!0},{id:"graduation",label:"Graduation Marksheet",required:!0}],w=N=>{u(N)},A=()=>{const N=(h||"").trim();if(!N)return alert("Enter a document name");const j=`custom_${Date.now()}`;y(C=>[...C,{id:j,label:N,required:!1}]),m("")},S=(N,j)=>{const C=n.basicInfo.documents||[];let R=C.find(O=>O.type===N);if(R)return R;const D=(j||"").toLowerCase().split(" ")[0];return R=C.find(O=>O.name&&O.name.toLowerCase().includes(D)||O.originalName&&O.originalName.toLowerCase().includes(D))||null,R};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student Status"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",checked:c,onChange:()=>w(!0),className:"form-radio text-[#104774]"}),r.jsx("span",{className:"ml-2",children:"Student"})]}),r.jsxs("label",{className:"inline-flex items-center",children:[r.jsx("input",{type:"radio",checked:!c,onChange:()=>w(!1),className:"form-radio text-[#104774]"}),r.jsx("span",{className:"ml-2",children:"Graduated"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Required Documents"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.map(N=>r.jsx(om,{doc:N,uploadedFile:S(N.id,N.label),handleDocumentUpload:e,removeDocument:t,isEditMode:s,uploadProgress:i[N.id]||0,isUploading:l[N.id]||!1},N.id)),!c&&v.map(N=>r.jsx(om,{doc:N,uploadedFile:S(N.id,N.label),handleDocumentUpload:e,removeDocument:t,isEditMode:s,uploadProgress:i[N.id]||0,isUploading:l[N.id]||!1},N.id)),p.map(N=>r.jsx(om,{doc:N,uploadedFile:S(N.id,N.label),handleDocumentUpload:e,removeDocument:t,isEditMode:s,uploadProgress:i[N.id]||0,isUploading:l[N.id]||!1},N.id))]}),r.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r.jsx("input",{type:"text",value:h,onChange:N=>m(N.target.value),placeholder:"New document name (e.g. Driving Licence)",className:"w-[80%] p-2 border border-gray-300 rounded-lg"}),r.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-[#104774] text-white rounded-lg",children:"+ Add Document"})]})]})]})},om=({doc:n,uploadedFile:e,handleDocumentUpload:t,removeDocument:s,isEditMode:i=!1,uploadProgress:l=0,isUploading:c=!1})=>{const u=`document-${n.id}`,h=e&&(e.displayName||e.name)||n.label||"Document";return r.jsxs("div",{className:"border border-gray-300 rounded-lg p-4",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.label," ",n.required&&r.jsx("span",{className:"text-red-500",children:"*"})]}),e?r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-gray-100 rounded-lg mr-2",children:r.jsx("i",{className:"far fa-file text-gray-600"})}),r.jsx("span",{className:"text-sm text-gray-700 truncate",children:h})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"text-sm text-[#104774] underline",children:"View"}),r.jsx("button",{type:"button",onClick:()=>s(e),className:"text-red-500 hover:text-red-700 text-sm",children:"remove"})]})]}):r.jsxs("div",{children:[r.jsx("input",{type:"file",id:u,onChange:m=>t(m,n),className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",disabled:c}),r.jsx("label",{htmlFor:u,className:`cursor-pointer flex items-center justify-center p-3 border border-dashed border-gray-300 rounded-lg text-center transition-colors ${c?"opacity-50":"hover:border-[#104774]"}`,children:c?r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-[#104774] border-t-transparent rounded-full animate-spin mx-auto mb-2"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Uploading... ",l,"%"]})]}):r.jsxs("div",{children:[r.jsx("i",{className:"far fa-cloud-upload text-gray-400 text-xl mb-1"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Upload ",n.label]}),r.jsx("p",{className:"text-xs text-gray-400",children:"PDF, JPG, PNG (Max 5MB)"})]})})]})]})},iD=({formData:n,errors:e,handleInputChange:t,handleDocumentUpload:s,removeDocument:i,profileImage:l,handleProfileImageUpload:c,removeProfileImage:u,isEditMode:h=!1,uploadProgress:m,uploadingDocs:p})=>{const y=x=>{if(!x)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(x))return x;const v=new Date(x);return isNaN(v.getTime())?"":v.toISOString().split("T")[0]};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Basic Information"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the employee's personal details"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[l?r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:l.url||l,alt:"Profile preview",className:"w-20 h-20 rounded-full object-cover border-2 border-gray-300"}),!h&&r.jsx("button",{type:"button",onClick:u,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 text-xs",children:""})]}):r.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-500 text-sm",children:"No image"})}),!h&&r.jsxs("div",{children:[r.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"hidden",id:"profile-image-upload",disabled:p.profile}),r.jsx("label",{htmlFor:"profile-image-upload",className:`cursor-pointer text-white px-4 py-2 rounded-lg text-sm transition-colors ${p.profile?"bg-gray-400":"bg-[#104774] hover:bg-[#104774]"}`,children:p.profile?`Uploading... ${m.profile||0}%`:l?"Change Photo":"Upload Photo"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG (Max 5MB)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),r.jsx("input",{type:"text",value:n.basicInfo.firstName,onChange:x=>t("basicInfo","firstName",x.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter first name"}),e.firstName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.firstName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),r.jsx("input",{type:"text",value:n.basicInfo.lastName,onChange:x=>t("basicInfo","lastName",x.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Enter last name"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),r.jsx("input",{type:"email",value:n.basicInfo.email,onChange:x=>t("basicInfo","email",x.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.email?"border-red-500":"border-gray-300"}`,placeholder:"employee@company.com",disabled:h}),e.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.email}),h&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),r.jsx("input",{type:"tel",value:n.basicInfo.phone,onChange:x=>t("basicInfo","phone",x.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.phone?"border-red-500":"border-gray-300"}`,placeholder:"+91 1234567890"}),e.phone&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.phone})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),r.jsx("input",{type:"date",value:y(n.basicInfo.dob),max:new Date(new Date().setFullYear(new Date().getFullYear()-16)).toISOString().split("T")[0],onChange:x=>t("basicInfo","dob",x.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.dob?"border-red-500":"border-gray-300"}`}),e.dob&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.dob})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),r.jsxs("select",{value:n.basicInfo.gender,onChange:x=>t("basicInfo","gender",x.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[r.jsx("option",{value:"male",children:"Male"}),r.jsx("option",{value:"female",children:"Female"}),r.jsx("option",{value:"other",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("textarea",{value:n.basicInfo.address||"",onChange:x=>t("basicInfo","address",x.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Enter complete address",rows:"3"})]}),r.jsx(aD,{formData:n,handleDocumentUpload:s,removeDocument:i,isEditMode:h,uploadProgress:m,uploadingDocs:p})]})},rD=({formData:n,errors:e,handleInputChange:t,handleAddAllowance:s,handleRemoveAllowance:i,handleAddDeduction:l,handleRemoveDeduction:c,isEditMode:u=!1})=>{const h=parseFloat(n.payrollInfo.basic)||0,m=parseFloat(n.payrollInfo.hra)||0,p=parseFloat(n.payrollInfo.tax)||0,y=Math.round(h*p/100*100)/100,x=n.payrollInfo.allowances.reduce((S,N)=>S+(parseFloat(N.amount)||0),0),v=n.payrollInfo.deductions.reduce((S,N)=>S+(parseFloat(N.amount)||0),0)+y,w=h+m+x,A=w-v;return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Payroll Information"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Set up the employee's salary structure"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Basic Salary *"}),r.jsx("input",{type:"number",value:n.payrollInfo.basic,onChange:S=>t("payrollInfo","basic",S.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.basic?"border-red-500":"border-gray-300"}`,placeholder:"0.00",min:"0"}),e.basic&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.basic})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HRA"}),r.jsx("input",{type:"number",value:n.payrollInfo.hra,onChange:S=>t("payrollInfo","hra",S.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"0.00",min:"0"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax (%)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:n.payrollInfo.tax,onChange:S=>t("payrollInfo","tax",S.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Tax percentage e.g. 2"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Allowances"}),r.jsx("button",{type:"button",onClick:s,className:"text-sm text-[#104774] hover:text-[#104774] font-medium",children:"+ Add Allowance"})]}),n.payrollInfo.allowances.map((S,N)=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[r.jsx("input",{type:"text",value:S.title,onChange:j=>{const C=[...n.payrollInfo.allowances];C[N].title=j.target.value,t("payrollInfo","allowances",C)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Allowance title"}),r.jsx("input",{type:"number",value:S.amount,onChange:j=>{const C=[...n.payrollInfo.allowances];C[N].amount=j.target.value,t("payrollInfo","allowances",C)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Amount",min:"0"}),r.jsx("button",{type:"button",onClick:()=>i(N),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:"Remove"})]},N))]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deductions"}),r.jsx("button",{type:"button",onClick:l,className:"text-sm text-[#104774] hover:text-[#104774] font-medium",children:"+ Add Deduction"})]}),n.payrollInfo.deductions.map((S,N)=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[r.jsx("input",{type:"text",value:S.title,onChange:j=>{const C=[...n.payrollInfo.deductions];C[N].title=j.target.value,t("payrollInfo","deductions",C)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Deduction title"}),r.jsx("input",{type:"number",value:S.amount,onChange:j=>{const C=[...n.payrollInfo.deductions];C[N].amount=j.target.value,t("payrollInfo","deductions",C)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent",placeholder:"Amount",min:"0"}),r.jsx("button",{type:"button",onClick:()=>c(N),className:"px-3 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",children:"Remove"})]},N))]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payroll Month *"}),r.jsx("input",{type:"month",value:n.payrollInfo.month,onChange:S=>t("payrollInfo","month",S.target.value),className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#104774] focus:border-transparent ${e.month?"border-red-500":"border-gray-300"}`}),e.month&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:e.month})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mt-4",children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Salary Summary"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Basic Salary:"}),r.jsxs("span",{className:"font-medium",children:["",h.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"HRA:"}),r.jsxs("span",{className:"font-medium",children:["",m.toLocaleString()]})]}),n.payrollInfo.allowances.map((S,N)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:[S.title||"Allowance",":"]}),r.jsxs("span",{className:"font-medium",children:["",(parseFloat(S.amount)||0).toLocaleString()]})]},N)),r.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[r.jsx("span",{className:"text-gray-600",children:"Total Earnings:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["",w.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:["Tax Deduction (",p,"%):"]}),r.jsxs("span",{className:"font-medium text-red-600",children:["-",y.toLocaleString()]})]}),n.payrollInfo.deductions.map((S,N)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:[S.title||"Deduction",":"]}),r.jsxs("span",{className:"font-medium text-red-600",children:["-",(parseFloat(S.amount)||0).toLocaleString()]})]},N)),r.jsxs("div",{className:"flex justify-between border-t border-gray-200 pt-2",children:[r.jsx("span",{className:"text-gray-800 font-semibold",children:"Net Pay:"}),r.jsxs("span",{className:"font-bold text-[#104774]",children:["",A.toLocaleString()]})]})]})]})]})},lD=({onClose:n,employee:e,isEditMode:t=!1})=>{const[s,i]=_.useState(1),[l,c]=_.useState({basicInfo:{firstName:"",lastName:"",email:"",phone:"",dob:"",gender:"other",address:"",documents:[],profileImage:null},jobInfo:{designation:"",department:"",dateOfJoining:"",employmentType:"full-time",workMode:"work-from-home",shiftTiming:{start:"",end:""}},payrollInfo:{basic:"",hra:"",tax:"",allowances:[],deductions:[],month:new Date().toISOString().slice(0,7),status:"draft"},password:"",role:"employee"}),[u,h]=_.useState({}),[m,p]=_.useState(!1),[y,x]=_.useState(null),[v,w]=_.useState({}),[A,S]=_.useState({});_.useEffect(()=>{if(t&&e){const H=(e.documents||[]).map(T=>({type:T.type||T.docType||null,name:T.name||T.originalName||T.filename||T.fileName||T._id||"",originalName:T.originalName||T.name||null,url:T.url||T.path||T.secure_url||T.link||"",fileType:T.fileType||T.type||null,uploadedAt:T.uploadedAt||T.createdAt||null,raw:T}));c(T=>({...T,basicInfo:{firstName:e.firstName||"",lastName:e.lastName||"",email:e.user?.email||"",phone:e.phone||"",dob:e.dob||"",gender:e.gender||"other",address:e.address||"",documents:H||[],profileImage:e.avatarUrl?{url:e.avatarUrl}:null},jobInfo:{designation:e.designation||"",department:e.department||"",dateOfJoining:e.dateOfJoining||"",employmentType:e.employmentType||"full-time",workMode:e.workMode||"work-from-home",shiftTiming:e.shiftTiming||{start:"",end:""}},role:e.user?.role||"employee",payrollInfo:{...T.payrollInfo,basic:e.payrollInfo?.basic??T.payrollInfo.basic,hra:e.payrollInfo?.hra??T.payrollInfo.hra,tax:e.payrollInfo?.tax??T.payrollInfo.tax,allowances:e.payrollInfo?.allowances||T.payrollInfo.allowances,deductions:e.payrollInfo?.deductions||T.payrollInfo.deductions,month:e.payrollInfo?.month||T.payrollInfo.month,status:e.payrollInfo?.status||T.payrollInfo.status}})),e.avatarUrl&&x({url:e.avatarUrl})}},[t,e]);const N=async H=>{try{const T=new FormData;return H.forEach(M=>T.append("documents",M.file)),H.forEach(M=>T.append("types[]",M.type||"")),H.forEach(M=>T.append("originalNames[]",M.name||M.file.name)),(await ye.post("/upload-files/upload",T,{onUploadProgress:M=>{if(M.total){const G=Math.round(M.loaded*100/M.total);console.log("overall upload:",G,"%")}}})).data.files.map((M,G)=>({type:M.type||H[G]?.type||null,originalName:M.originalName||M.name||H[G]?.name,url:M.url||M.secure_url||M.path||"",raw:M}))}catch(T){throw console.error("File upload error (frontend):",T),T.response?(console.error("Server response:",T.response.status,T.response.data),T.response.status===413?new Error("File too large: Maximum size is 5MB"):new Error(T.response.data?.message||"Server error while uploading files")):T.request?new Error("Network error: Please check your connection"):new Error(T.message||"Failed to upload files")}},j=H=>{const T={};if(H===1){l.basicInfo.firstName.trim()||(T.firstName="First name is required"),l.basicInfo.email.trim()?/\S+@\S+\.\S+/.test(l.basicInfo.email)||(T.email="Invalid email format"):T.email="Email is required",l.basicInfo.phone.trim()||(T.phone="Phone number is required"),l.basicInfo.dob||(T.dob="Date of birth is required");const q=["aadhar","pan","tenth","twelfth","bank"],M=(l.basicInfo.documents||[]).map(de=>de.type);q.filter(de=>!M.includes(de)).length>0&&!t&&(T.documents="Please upload all required documents")}return H===2&&(l.jobInfo.designation.trim()||(T.designation="Designation is required"),l.jobInfo.department.trim()||(T.department="Department is required"),l.jobInfo.dateOfJoining||(T.dateOfJoining="Date of joining is required")),H===3&&((!l.payrollInfo.basic||l.payrollInfo.basic<=0)&&(T.basic="Valid basic salary is required"),l.payrollInfo.month||(T.month="Payroll month is required")),H===4&&!t&&(l.password.trim()?l.password.length<6&&(T.password="Password must be at least 6 characters"):T.password="Password is required"),h(T),Object.keys(T).length===0},C=()=>{j(s)&&i(H=>H+1)},R=()=>i(H=>Math.max(1,H-1)),D=(H,T,q)=>{c(M=>({...M,[H]:{...M[H],[T]:q}})),u[T]&&h(M=>({...M,[T]:""}))},O=H=>{const T=H.target.value;c(q=>({...q,password:T})),u.password&&h(q=>({...q,password:""}))},B=H=>{const T=H.target.value;c(q=>({...q,role:T}))},F=async(H,T)=>{const q=H.target.files?.[0];if(!q)return;const M=typeof T=="string"?T:T.id,G=typeof T=="object"?T.label:null;if(q.size>5*1024*1024){alert("File size must be less than 5MB"),H.target.value="";return}if(!["image/jpeg","image/png","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(q.type)){alert("Only JPEG, PNG, PDF, DOC, and DOCX files are allowed"),H.target.value="";return}S(re=>({...re,[M]:!0})),w(re=>({...re,[M]:0}));try{const re=new FormData;re.append("document",q);const xe=await ye.post("/upload-files/upload",re,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Ee=>{if(Ee.total){const Le=Math.round(Ee.loaded*100/Ee.total);w(he=>({...he,[M]:Le}))}}});if(xe.data?.success&&xe.data?.file){const Ee=xe.data.file,Le={type:M,name:G||Ee.originalName||q.name,originalName:Ee.originalName||q.name,url:Ee.url,fileType:Ee.type};c(he=>{const $e=(he.basicInfo.documents||[]).filter(ge=>ge.type!==M);return{...he,basicInfo:{...he.basicInfo,documents:[...$e,Le]}}})}else throw new Error("Invalid upload response")}catch(re){console.error("Document upload failed:",re),alert(re.response?.data?.message||re.message||"Upload failed")}finally{S(re=>({...re,[M]:!1})),w(re=>({...re,[M]:0})),H.target.value=""}},I=H=>{const T=typeof H=="string"?H:H&&(H.type||H.url||H.originalName||H.name);if(!window.confirm("Are you sure you want to remove this document?"))return;const q=(l.basicInfo.documents||[]).filter(M=>{if(!T)return!0;const G=M.type&&T&&M.type===T,de=M.url&&T&&M.url===T,re=M.originalName&&T&&M.originalName===T,xe=M.name&&T&&M.name===T;return!(G||de||re||xe)});c(M=>({...M,basicInfo:{...M.basicInfo,documents:q}}))},ee=async H=>{const T=H.target.files[0];if(T){if(T.size>5*1024*1024){alert("Profile image must be less than 5MB");return}if(!T.type.startsWith("image/")){alert("Please select an image file");return}S(q=>({...q,profile:!0})),w(q=>({...q,profile:0}));try{const q=new FormData;q.append("document",T);const M=await ye.post("/upload-files/upload",q,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:G=>{if(G.total){const de=Math.round(G.loaded*100/G.total);w(re=>({...re,profile:de}))}}});if(M.data.success){const G=M.data.file,de={name:G.originalName,url:G.url,fileType:G.type};x(de),c(re=>({...re,basicInfo:{...re.basicInfo,profileImage:{url:G.url}}}))}}catch(q){console.error("Profile image upload error:",q),alert("Profile image upload failed. Please try again.")}finally{S(q=>({...q,profile:!1})),w(q=>({...q,profile:0})),H.target.value=""}}},z=()=>{x(null),c(H=>({...H,basicInfo:{...H.basicInfo,profileImage:null}}))},Z=()=>{c(H=>({...H,payrollInfo:{...H.payrollInfo,allowances:[...H.payrollInfo.allowances,{title:"",amount:0}]}}))},W=H=>{c(T=>({...T,payrollInfo:{...T.payrollInfo,allowances:T.payrollInfo.allowances.filter((q,M)=>M!==H)}}))},ce=()=>{c(H=>({...H,payrollInfo:{...H.payrollInfo,deductions:[...H.payrollInfo.deductions,{title:"",amount:0}]}}))},me=H=>{c(T=>({...T,payrollInfo:{...T.payrollInfo,deductions:T.payrollInfo.deductions.filter((q,M)=>M!==H)}}))},L=async()=>{if(j(4)){p(!0);try{let H=null;if(y&&y.file){const re=new FormData;re.append("document",y.file);const xe=await ye.post("/upload-files/upload",re,{headers:{"Content-Type":"multipart/form-data"}});xe.data.file&&(H=xe.data.file)}let T=[];const q=(l.basicInfo.documents||[]).filter(re=>!re.url&&re.file);q.length>0&&(T=await N(q));const M=(l.basicInfo.documents||[]).map(re=>{const xe=T.find(Ee=>Ee.type===re.type||Ee.originalName===re.originalName);return xe?{type:xe.type,name:re.name||xe.originalName,url:xe.url}:{type:re.type,name:re.name||re.originalName||re.name,url:re.url}}),G={basicInfo:{...l.basicInfo,profileImage:H?{url:H.url}:l.basicInfo.profileImage,documents:M},jobInfo:l.jobInfo,payrollInfo:l.payrollInfo,password:l.password,role:l.role},de=await ye.post("/employee/add",G);alert("Employee added successfully!"),n()}catch(H){console.error("Error adding employee:",H),alert(H.response?.data?.message||"Error adding employee")}finally{p(!1)}}},V=async()=>{if(j(4)){p(!0);try{let H=null;if(y&&y.file){const re=new FormData;re.append("document",y.file);const xe=await ye.post("/upload-files/upload",re,{headers:{"Content-Type":"multipart/form-data"}});xe.data.file&&(H=xe.data.file)}let T=[];const q=(l.basicInfo.documents||[]).filter(re=>!re.url&&re.file);q.length>0&&(T=await N(q));const M=(l.basicInfo.documents||[]).map(re=>{const xe=T.find(Ee=>Ee.type===re.type||Ee.originalName===re.originalName);return xe?{type:xe.type,name:re.name||xe.originalName,url:xe.url}:{type:re.type,name:re.name||re.originalName||re.name,url:re.url}}),G={basicInfo:{...l.basicInfo,profileImage:H?{url:H.url}:l.basicInfo.profileImage,documents:M},jobInfo:l.jobInfo,payrollInfo:l.payrollInfo},de=await ye.put(`/employee/update/${e._id}`,G);alert("Employee updated successfully!"),n()}catch(H){console.error("Error updating employee:",H),alert(H.response?.data?.message||"Error updating employee")}finally{p(!1)}}},$=s/4*100;return r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-auto my-8 relative",children:[r.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-10 bg-gray-200 hover:bg-gray-300 rounded-full p-2",children:""}),r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-xl",children:[r.jsx("div",{className:"flex justify-between items-center mb-4",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t?"Edit Employee":"Add New Employee"})}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:r.jsx("div",{className:"bg-[#104774] h-2 rounded-full transition-all duration-300",style:{width:`${$}%`}})}),r.jsx("div",{className:"flex justify-between mb-2",children:["Basic Info","Job Details","Payroll","Credentials"].map((H,T)=>r.jsx("div",{className:`text-xs font-medium ${s>T+1?"text-green-600":s===T+1?"text-[#104774]":"text-gray-500"}`,children:H},H))})]}),r.jsxs("div",{className:"p-6",children:[s===1&&r.jsx(iD,{formData:l,errors:u,handleInputChange:D,handleDocumentUpload:F,removeDocument:I,profileImage:y,handleProfileImageUpload:ee,removeProfileImage:z,isEditMode:t,uploadProgress:v,uploadingDocs:A}),s===2&&r.jsx(sD,{formData:l,errors:u,handleInputChange:D,isEditMode:t}),s===3&&r.jsx(rD,{formData:l,errors:u,handleInputChange:D,handleAddAllowance:Z,handleRemoveAllowance:W,handleAddDeduction:ce,handleRemoveDeduction:me,isEditMode:t}),s===4&&r.jsx(nD,{formData:l,errors:u,handlePasswordChange:O,handleRoleChange:B,isEditMode:t})]}),r.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 rounded-b-xl",children:r.jsxs("div",{className:"flex justify-between",children:[s>1?r.jsx("button",{onClick:R,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",disabled:m,children:" Back"}):r.jsx("div",{}),s<4?r.jsx("button",{onClick:C,className:"px-6 py-3 bg-[#104774] text-white rounded-lg hover:bg-[#104774] transition-colors",children:"Next "}):r.jsx("button",{onClick:t?V:L,disabled:m,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-green-400 transition-colors",children:m?r.jsxs("span",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Updating...":"Creating..."]}):t?"Update Employee":"Create Employee"})]})})]})},Ss=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Qm=[.001,0,0,.001,0,0],cm=1.35,Qs={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ga={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dA="pdfjs_internal_editor_",qe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},at={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},oD={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ys={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Rd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Yt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Br={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},xu={ERRORS:0,WARNINGS:1,INFOS:5},$d={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ud={moveTo:0,lineTo:1,curveTo:2,closePath:3},cD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let bu=xu.WARNINGS;function dD(n){Number.isInteger(n)&&(bu=n)}function uD(){return bu}function vu(n){bu>=xu.INFOS&&console.log(`Info: ${n}`)}function Ve(n){bu>=xu.WARNINGS&&console.log(`Warning: ${n}`)}function xt(n){throw new Error(n)}function Xt(n,e){n||xt(e)}function hD(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function uA(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=yD(n)}catch{}const s=e?URL.parse(n,e):URL.parse(n);return hD(s)?s:null}function hA(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&uA(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function st(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const $i=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class Hb extends $i{constructor(e,t){super(e,"PasswordException"),this.code=t}}class dm extends $i{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Zm extends $i{constructor(e){super(e,"InvalidPDFException")}}class Gd extends $i{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class fD extends $i{constructor(e){super(e,"FormatError")}}class Ka extends $i{constructor(e){super(e,"AbortException")}}function fA(n){(typeof n!="object"||n?.length===void 0)&&xt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const l=Math.min(i+t,e),c=n.subarray(i,l);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function Vo(n){typeof n!="string"&&xt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function mD(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function pD(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function gD(){try{return new Function(""),!0}catch{return!1}}class fs{static get isLittleEndian(){return st(this,"isLittleEndian",pD())}static get isEvalSupported(){return st(this,"isEvalSupported",gD())}static get isOffscreenCanvasSupported(){return st(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return st(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return st(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return st(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const um=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class Me{static makeHexColor(e,t,s){return`#${um[e]}${um[t]}${um[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const i=e[s],l=e[s+1];e[s]=i*t[0]+l*t[2]+t[4],e[s+1]=i*t[1]+l*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],l=t[1],c=t[2],u=t[3],h=t[4],m=t[5];for(let p=0;p<6;p+=2){const y=e[s+p],x=e[s+p+1];e[s+p]=y*i+x*c+h,e[s+p+1]=y*l+x*u+m}}static applyInverseTransform(e,t){const s=e[0],i=e[1],l=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/l,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/l}static axialAlignedBoundingBox(e,t,s){const i=t[0],l=t[1],c=t[2],u=t[3],h=t[4],m=t[5],p=e[0],y=e[1],x=e[2],v=e[3];let w=i*p+h,A=w,S=i*x+h,N=S,j=u*y+m,C=j,R=u*v+m,D=R;if(l!==0||c!==0){const O=l*p,B=l*x,F=c*y,I=c*v;w+=F,N+=F,S+=I,A+=I,j+=O,D+=O,R+=B,C+=B}s[0]=Math.min(s[0],w,S,A,N),s[1]=Math.min(s[1],j,R,C,D),s[2]=Math.max(s[2],w,S,A,N),s[3]=Math.max(s[3],j,R,C,D)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],l=e[2],c=e[3],u=s**2+i**2,h=s*l+i*c,m=l**2+c**2,p=(u+m)/2,y=Math.sqrt(p**2-(u*m-h**2));t[0]=Math.sqrt(p+y||1),t[1]=Math.sqrt(p-y||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const l=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return l>c?null:[s,l,i,c]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,l){l[0]=Math.min(l[0],e,s),l[1]=Math.min(l[1],t,i),l[2]=Math.max(l[2],e,s),l[3]=Math.max(l[3],t,i)}static#e(e,t,s,i,l,c,u,h,m,p){if(m<=0||m>=1)return;const y=1-m,x=m*m,v=x*m,w=y*(y*(y*e+3*m*t)+3*x*s)+v*i,A=y*(y*(y*l+3*m*c)+3*x*u)+v*h;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],A),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],A)}static#t(e,t,s,i,l,c,u,h,m,p,y,x){if(Math.abs(m)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,s,i,l,c,u,h,-y/p,x);return}const v=p**2-4*y*m;if(v<0)return;const w=Math.sqrt(v),A=2*m;this.#e(e,t,s,i,l,c,u,h,(-p+w)/A,x),this.#e(e,t,s,i,l,c,u,h,(-p-w)/A,x)}static bezierBoundingBox(e,t,s,i,l,c,u,h,m){m[0]=Math.min(m[0],e,u),m[1]=Math.min(m[1],t,h),m[2]=Math.max(m[2],e,u),m[3]=Math.max(m[3],t,h),this.#t(e,s,l,u,t,i,c,h,3*(-e+3*(s-l)+u),6*(e-2*s+l),3*(s-e),m),this.#t(e,s,l,u,t,i,c,h,3*(-t+3*(i-c)+h),6*(t-2*i+c),3*(i-t),m)}}function yD(n){return decodeURIComponent(escape(n))}let hm=null,zb=null;function xD(n){return hm||(hm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,zb=new Map([["","t"]])),n.replaceAll(hm,(e,t,s)=>t?t.normalize("NFKC"):zb.get(s))}function mA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),fA(n)}const Ip="pdfjs_internal_id_";function bD(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...l]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const c=l.length;let u=!0;switch(i.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Ns(n,e,t){return Math.min(Math.max(n,e),t)}function pA(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(fA(n))}function vD(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Vo(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const ha="http://www.w3.org/2000/svg";class Zr{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function $o(n,e="text"){if(mo(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Go{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:l=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=l,this.offsetY=c,s*=t;const h=(e[2]+e[0])/2,m=(e[3]+e[1])/2;let p,y,x,v;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,y=0,x=0,v=1;break;case 90:p=0,y=1,x=1,v=0;break;case 270:p=0,y=-1,x=-1,v=0;break;case 0:p=1,y=0,x=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(x=-x,v=-v);let w,A,S,N;p===0?(w=Math.abs(m-e[1])*s+l,A=Math.abs(h-e[0])*s+c,S=(e[3]-e[1])*s,N=(e[2]-e[0])*s):(w=Math.abs(h-e[0])*s+l,A=Math.abs(m-e[1])*s+c,S=(e[2]-e[0])*s,N=(e[3]-e[1])*s),this.transform=[p*s,y*s,x*s,v*s,w-p*s*h-x*s*m,A-y*s*h-v*s*m],this.width=S,this.height=N}get rawDims(){const e=this.viewBox;return st(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:l=!1}={}){return new Go({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:l})}convertToViewportPoint(e,t){const s=[e,t];return Me.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];Me.applyTransform(t,this.transform);const s=[e[2],e[3]];return Me.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return Me.applyInverseTransform(s,this.transform),s}}class Pp extends $i{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function wu(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Bp(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function wD(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function AD(n,e="document.pdf"){if(typeof n!="string")return e;if(wu(n))return Ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(l.test(c))return i(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const m of u)if(l.test(m))return i(m);const h=Array.from(s.searchParams.keys()).reverse();for(const m of h)if(l.test(m))return i(m)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return i(h[0])}return e}class Fb{started=Object.create(null);times=[];time(e){e in this.started&&Ve(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ve(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:l}of this.times)e.push(`${s.padEnd(t)} ${l-i}ms
`);return e.join("")}}function mo(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function _n(n){n.preventDefault()}function Wt(n){n.preventDefault(),n.stopPropagation()}function SD(n){console.log("Deprecated API usage: "+n)}class gA{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let l=parseInt(t[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const m=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,m==="-"?(c+=p,u+=y):m==="+"&&(c-=p,u-=y),new Date(Date.UTC(s,i,l,c,u,h))}}function ND(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,l=[0,0,parseInt(s),parseInt(i)];return new Go({viewBox:l,userUnit:1,scale:e,rotation:t})}function Hp(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ve(`Not a valid color format: "${n}"`),[0,0,0])}function ED(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Hp(s))}e.remove()}function Mt(n){const{a:e,b:t,c:s,d:i,e:l,f:c}=n.getTransform();return[e,t,s,i,l,c]}function Un(n){const{a:e,b:t,c:s,d:i,e:l,f:c}=n.getTransform().invertSelf();return[e,t,s,i,l,c]}function Fi(n,e,t=!1,s=!0){if(e instanceof Go){const{pageWidth:i,pageHeight:l}=e.rawDims,{style:c}=n,u=fs.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,m=`var(--total-scale-factor) * ${l}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${m}, var(--scale-round-y))`:`calc(${m})`;!t||e.rotation%180===0?(c.width=p,c.height=y):(c.width=y,c.height=p)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Wn{constructor(){const{pixelRatio:e}=Wn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,l=-1){let c=1/0,u=1/0,h=1/0;s=Wn.capPixels(s,l),s>0&&(c=Math.sqrt(s/(e*t))),i!==-1&&(u=i/e,h=i/t);const m=Math.min(c,u,h);return this.sx>m||this.sy>m?(this.sx=m,this.sy=m,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Km=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class bo{#e=null;#t=null;#s;#n=null;#i=null;#a=null;static#l=null;constructor(e){this.#s=e,bo.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;e.addEventListener("contextmenu",_n,{signal:t}),e.addEventListener("pointerdown",bo.#r,{signal:t});const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const i=this.#s.toolbarPosition;if(i){const{style:l}=e,c=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#r(e){e.stopPropagation()}#u(e){this.#s._focusEventsAllowed=!1,Wt(e)}#o(e){this.#s._focusEventsAllowed=!0,Wt(e)}#h(e){const t=this.#s._uiManager._signal;e.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#o.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",_n,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",bo.#l[e]),this.#h(s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(s)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#h(t),this.#n.append(t,this.#d),this.#i=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#h(t),this.#n.append(t,this.#d)}async addEditSignatureButton(e){const t=this.#a=await e.renderEditButton(this.#s);this.#h(t),this.#n.append(t,this.#d)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){this.#a&&(this.#a.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class jD{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",_n,{signal:this.#s._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#a(),e}#i(e,t){let s=0,i=0;for(const l of e){const c=l.y+l.height;if(c<s)continue;const u=l.x+(t?l.width:0);if(c>s){i=u,s=c;continue}t?u>i&&(i=u):u<i&&(i=u)}return[t?1-i:i,s]}show(e,t,s){const[i,l]=this.#i(t,s),{style:c}=this.#t||=this.#n();e.append(this.#t),c.insetInlineEnd=`${100*i}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#a(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=this.#s._signal;e.addEventListener("contextmenu",_n,{signal:s}),e.addEventListener("click",()=>{this.#s.highlightSelection("floating_button")},{signal:s}),this.#e.append(e)}}function yA(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}class _D{#e=0;get id(){return`${dA}${this.#e++}`}}class zp{#e=mA();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const l=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return st(this,"_isSVGFittingCanvas",l)}async#n(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(s.url=t,i=await $o(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const l=zp._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((m,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,m()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=p});c.readAsDataURL(i),await h}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Ve(i),s=null}return this.#s.set(e,s),s&&this.#s.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:i,type:l}=e;return this.#n(`${t}_${s}_${i}_${l}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const s=await t;return this.#n(e,s)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,s),this.#s.set(s.id,s),s}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class CD{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:s,mustExec:i,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(i&&e(),this.#t)return;const h={cmd:e,undo:t,post:s,type:l};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(h);return}if(c&&this.#e[this.#n].type===l){u&&(h.undo=this.#e[this.#n].undo),this.#e[this.#n]=h;return}const m=this.#n+1;m===this.#s?this.#e.splice(0,1):(this.#n=m,m<this.#e.length&&this.#e.splice(m)),this.#e.push(h)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Yo{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=fs.platform;for(const[s,i,l={}]of e)for(const c of s){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:i,options:l}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:i,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:i,options:{bubbles:l=!1,args:c=[],checker:u=null}}=s;u&&!u(e,t)||(i.bind(e,...c,t)(),l||Wt(t))}}class Fp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return ED(e),st(this,"_colors",e)}convert(e){const t=Hp(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((l,c)=>l===t[c]))return Fp._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Me.makeHexColor(...t):e}}class Ja{#e=new AbortController;#t=null;#s=new Map;#n=new Map;#i=null;#a=null;#l=null;#r=new CD;#u=null;#o=null;#h=0;#d=new Set;#f=null;#m=null;#p=new Set;_editorUndoBar=null;#c=!1;#g=!1;#y=!1;#x=null;#v=null;#w=null;#A=null;#E=!1;#_=null;#T=new _D;#S=!1;#C=!1;#j=null;#R=null;#k=null;#M=null;#z=null;#N=qe.NONE;#b=new Set;#P=null;#B=null;#q=null;#V=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#L=null;#O=null;#U=null;#X=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Ja.prototype,t=c=>c.#O.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return st(this,"_keyboardManager",new Yo([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#O.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#O.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-l,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[l,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-l],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,l],checker:t}]]))}constructor(e,t,s,i,l,c,u,h,m,p,y,x,v,w,A){const S=this._signal=this.#e.signal;this.#O=e,this.#U=t,this.#X=s,this.#i=i,this.#B=l,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:S}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),c._on("setpreference",this.onSetPreference.bind(this),{signal:S}),c._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:S}),this.#ae(),this.#oe(),this.#Z(),this.#a=u.annotationStorage,this.#x=u.filterFactory,this.#q=h,this.#A=m||null,this.#c=p,this.#g=y,this.#y=x,this.#z=v||null,this.viewParameters={realScale:Zr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=A!==!1}destroy(){this.#I?.resolve(),this.#I=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#n.values())e.destroy();this.#n.clear(),this.#s.clear(),this.#p.clear(),this.#M?.clear(),this.#t=null,this.#b.clear(),this.#r.destroy(),this.#i?.destroy(),this.#B?.destroy(),this.#_?.hide(),this.#_=null,this.#k?.destroy(),this.#k=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#z}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return st(this,"hcmFilter",this.#q?this.#x.addHCMFilter(this.#q.foreground,this.#q.background):"none")}get direction(){return st(this,"direction",getComputedStyle(this.#O).direction)}get highlightColors(){return st(this,"highlightColors",this.#A?new Map(this.#A.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return st(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#o=e}setMainHighlightColorPicker(e){this.#k=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=t;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#O.focus()}findParent(e,t){for(const s of this.#n.values()){const{x:i,y:l,width:c,height:u}=s.div.getBoundingClientRect();if(e>=i&&e<=i+c&&t>=l&&t<=l+u)return s}return null}disableUserSelect(e=!1){this.#U.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Zr.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#o?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Y({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#Q(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#n.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:l,focusOffset:c}=t,u=t.toString(),m=this.#Y(t).closest(".textLayer"),p=this.getSelectionBoxes(m);if(!p)return;t.empty();const y=this.#Q(m),x=this.#N===qe.NONE,v=()=>{y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:s,anchorOffset:i,focusNode:l,focusOffset:c,text:u}),x&&this.showAllEditors("highlight",!0,!0)};if(x){this.switchToMode(qe.HIGHLIGHT,v);return}v()}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Y(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#_||=new jD(this),this.#_.show(s,i,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#X;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#ne(){const e=document.getSelection();if(!e||e.isCollapsed){this.#P&&(this.#_?.hide(),this.#P=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#P)return;const i=this.#Y(e).closest(".textLayer");if(!i){this.#P&&(this.#_?.hide(),this.#P=null,this.#D({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#P=t,this.#D({hasSelectedText:!0}),!(this.#N!==qe.HIGHLIGHT&&this.#N!==qe.NONE)&&(this.#N===qe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#E=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#N===qe.HIGHLIGHT?this.#Q(i):null;l?.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),h=m=>{m.type==="pointerup"&&m.button!==0||(c.abort(),l?.toggleDrawing(!0),m.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}}#W(e=""){this.#N===qe.HIGHLIGHT?this.highlightSelection(e):this.#c&&this.#se()}#ae(){document.addEventListener("selectionchange",this.#ne.bind(this),{signal:this._signal})}#ie(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#re(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#b)if(t.div.contains(e)){this.#R=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[e,t]=this.#R;this.#R=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#Z(){if(this.#j)return;this.#j=new AbortController;const e=this.combinedSignal(this.#j);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#le(){this.#j?.abort(),this.#j=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#J(){this.#u?.abort(),this.#u=null}#oe(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#Z(),this.#K()}removeEditListeners(){this.#le(),this.#J()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#m)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#m)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#b){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const l of t.items)for(const c of this.#m)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){Ve(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const l=[];for(const h of s){const m=await i.deserialize(h);if(!m)return;l.push(m)}const c=()=>{for(const h of l)this.#ee(h);this.#te(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(l){Ve(`paste: "${l.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#N!==qe.NONE&&!this.isEditorHandlingKeyboard&&Ja._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#E&&(this.#E=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#D(e){Object.entries(e).some(([s,i])=>this.#$[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,e)}),this.#N===qe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[at.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ie(),this.#K(),this.#D({isEditing:this.#N!==qe.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#re(),this.#J(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#m){this.#m=e;for(const t of this.#m)this.#H(t.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#n.get(this.#h)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#n.set(e.pageIndex,e),this.#S?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1){if(this.#N!==e&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#o?.commitOrRemove(),this.#N=e,e===qe.NONE){this.setEditingState(!1),this.#de(),this._editorUndoBar?.hide(),this.#I.resolve();return}e===qe.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#ce(),this.unselectAll();for(const l of this.#n.values())l.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const l of this.#s.values())l.annotationElementId===t||l.id===t?(this.setSelected(l),i&&l.enterInEditMode()):l.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#N&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#m){switch(e){case at.CREATE:this.currentLayer.addNewEditor(t);return;case at.HIGHLIGHT_DEFAULT_COLOR:this.#k?.updateColor(t);break;case at.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const s of this.#b)s.updateParams(e,t);for(const s of this.#m)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const l of this.#s.values())l.editorType===e&&l.show(t);(this.#V?.get(at.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#H([[at.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#C!==e){this.#C=e;for(const t of this.#n.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#ce(){if(!this.#S){this.#S=!0;const e=[];for(const t of this.#n.values())e.push(t.enable());await Promise.all(e);for(const t of this.#s.values())t.enable()}}#de(){if(this.unselectAll(),this.#S){this.#S=!1;for(const e of this.#n.values())e.disable();for(const e of this.#s.values())e.disable()}}getEditors(e){const t=[];for(const s of this.#s.values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return this.#s.get(e)}addEditor(e){this.#s.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#s.delete(e.id),e.annotationElementId&&this.#M?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ee(e){const t=this.#n.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#H(e.propertiesToUpdate))}get#ue(){let e=null;for(e of this.#b);return e}updateUI(e){this.#ue===e&&this.#H(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#H(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#b.has(e)){this.#b.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#b.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#o?.commitOrRemove();for(const t of this.#b)t!==e&&t.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#b.size!==0}get isEnterHandled(){return this.#b.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#r.undo(),this.#D({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()}),this._editorUndoBar?.hide()}redo(){this.#r.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(e){this.#r.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}cleanUndoStack(e){this.#r.cleanType(e)}#G(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const e of this.#s.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#b],s=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},i=()=>{for(const l of t)this.#ee(l)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#te(e){for(const t of this.#b)t.unselect();this.#b.clear();for(const t of e)t.isEmpty()||(this.#b.add(t),t.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#te(this.#s.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#N!==qe.NONE))&&!this.#o?.commitOrRemove()&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=e,this.#F[1]+=t;const[i,l]=this.#F,c=[...this.#b],u=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(i,l),h.translationDone())},undo:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(-i,-l),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#b)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let t=!1;for(const[{x:i,y:l,pageIndex:c},u]of e)u.newX=i,u.newY=l,u.newPageIndex=c,t||=i!==u.savedX||l!==u.savedY||c!==u.savedPageIndex;if(!t)return!1;const s=(i,l,c,u)=>{if(this.#s.has(i.id)){const h=this.#n.get(u);h?i._setParentAndPosition(h,l,c):(i.pageIndex=u,i.x=l,i.y=c)}};return this.addCommands({cmd:()=>{for(const[i,{newX:l,newY:c,newPageIndex:u}]of e)s(i,l,c,u)},undo:()=>{for(const[i,{savedX:l,savedY:c,savedPageIndex:u}]of e)s(i,l,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#f)for(const s of this.#f.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#b.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#N}get imageManager(){return st(this,"imageManager",new zp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let m=0,p=t.rangeCount;m<p;m++)if(!e.contains(t.getRangeAt(m).commonAncestorContainer))return null;const{x:s,y:i,width:l,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(m,p,y,x)=>({x:(p-i)/c,y:1-(m+y-s)/l,width:x/c,height:y/l});break;case"180":u=(m,p,y,x)=>({x:1-(m+y-s)/l,y:1-(p+x-i)/c,width:y/l,height:x/c});break;case"270":u=(m,p,y,x)=>({x:1-(p+x-i)/c,y:(m-s)/l,width:x/c,height:y/l});break;default:u=(m,p,y,x)=>({x:(m-s)/l,y:(p-i)/c,width:y/l,height:x/c});break}const h=[];for(let m=0,p=t.rangeCount;m<p;m++){const y=t.getRangeAt(m);if(!y.collapsed)for(const{x,y:v,width:w,height:A}of y.getClientRects())w===0||A===0||h.push(u(x,v,w,A))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#N===qe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const i=this.#M?.get(e);i&&(i.setCanvas(t,s),this.#M.delete(e))}addMissingCanvas(e,t){(this.#M||=new Map).set(e,t)}}class $n{#e=null;#t=!1;#s=null;#n=null;#i=null;#a=null;#l=!1;#r=null;#u=null;#o=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,$n.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){$n._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",$n.#f.missing),t.setAttribute("data-l10n-id",$n.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#u._uiManager._signal;e.addEventListener("contextmenu",_n,{signal:s}),e.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const i=l=>{l.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",l=>{l.target===e&&l.key==="Enter"&&(this.#l=!0,i(l))},{signal:s}),await this.#p(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(e){this.#e===null&&(this.#o=e,this.#h=await $n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#r?.remove(),this.#r=null;return}if(!this.#r){const t=this.#r=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#r.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#o===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#o,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:l=!1}){s&&(this.#o=s,this.#h=i),!(this.#e===e&&this.#t===t)&&(l||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#s&&(!e&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#s.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#i=null,this.#r?.remove(),this.#r=null}async#p(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",$n.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",$n.#f[`${this.#m}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const i=100,l=this.#u._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#i.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:l}),e.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i?.classList.remove("show")},{signal:l})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Au{#e;#t=!1;#s=null;#n;#i;#a;#l;#r=null;#u;#o=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:l=null,onPinchEnd:c=null,signal:u}){this.#e=e,this.#s=s,this.#n=t,this.#i=i,this.#a=l,this.#l=c,this.#h=new AbortController,this.#u=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wn.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#r)return;const i=this.#r=new AbortController,l=AbortSignal.any([this.#u,i.signal]),c=this.#e,u={capture:!0,signal:l,passive:!1},h=m=>{m.pointerType==="touch"&&(this.#r?.abort(),this.#r=null)};c.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Wt(m),h(m))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#u,this.#d.signal]),l=this.#e,c={signal:i,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#p.bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",Wt,c),l.addEventListener("pointermove",Wt,c),l.addEventListener("pointercancel",Wt,c),l.addEventListener("pointerup",Wt,c),this.#i?.()}if(Wt(e),e.touches.length!==2||this.#s?.()){this.#o=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#o={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(e){if(!this.#o||e.touches.length!==2)return;Wt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:l}=t,{screenX:c,screenY:u}=s,h=this.#o,{touch0X:m,touch0Y:p,touch1X:y,touch1Y:x}=h,v=y-m,w=x-p,A=c-i,S=u-l,N=Math.hypot(A,S)||1,j=Math.hypot(v,w)||1;if(!this.#t&&Math.abs(j-N)<=Au.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=l,h.touch1X=c,h.touch1Y=u,!this.#t){this.#t=!0;return}const C=[(i+c)/2,(l+u)/2];this.#a?.(C,j,N)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#l?.()),this.#o&&(Wt(e),this.#o=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#r?.abort(),this.#r=null}}class Oe{#e=null;#t=null;#s=null;#n=!1;#i=null;#a="";#l=!1;#r=null;#u=null;#o=null;#h=null;#d="";#f=!1;#m=null;#p=!1;#c=!1;#g=!1;#y=null;#x=0;#v=0;#w=null;#A=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#E=!1;#_=Oe._zIndex++;static _borderLineWidth=-1;static _colorManager=new Fp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Oe.prototype._resizeWithKeyboard,t=Ja.TRANSLATE_SMALL,s=Ja.TRANSLATE_BIG;return st(this,"_resizerKeyboardManager",new Yo([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Oe.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[l,c];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return st(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new TD({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Oe._l10n??=e,Oe._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Oe._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Oe._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#E}set _isDraggable(e){this.#E=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#U(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[l,c]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/l,this.y=(t+i)/c,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}#T([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#T(this.parentDimensions,e,t)}translateInPage(e,t){this.#m||=[this.x,this.y,this.width,this.height],this.#T(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#m||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,l]}=this;if(this.x+=e/i,this.y+=t/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,m]=this.getBaseTranslation();c+=h,u+=m;const{style:p}=s;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#m&&(this.#m[0]!==this.x||this.#m[1]!==this.y)}get _hasBeenResized(){return!!this.#m&&(this.#m[2]!==this.width||this.#m[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Oe,i=s/e,l=s/t;switch(this.rotation){case 90:return[-i,l];case 180:return[i,l];case 270:return[i,-l];default:return[-i,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:l,y:c,width:u,height:h}=this;if(u*=s,h*=i,l*=s,c*=i,this._mustFixPosition)switch(e){case 0:l=Ns(l,0,s-u),c=Ns(c,0,i-h);break;case 90:l=Ns(l,0,s-h),c=Ns(c,u,i);break;case 180:l=Ns(l,u,s),c=Ns(c,h,i);break;case 270:l=Ns(l,h,s),c=Ns(c,0,i-u);break}this.x=l/=s,this.y=c/=i;const[m,p]=this.getBaseTranslation();l+=m,c+=p,t.left=`${(100*l).toFixed(2)}%`,t.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#S(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Oe.#S(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Oe.#S(e,t,360-this.parentRotation)}#C(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*e/s).toFixed(2)}%`,this.#l||(l.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),l=!this.#l&&t.endsWith("%");if(i&&l)return;const[c,u]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/c).toFixed(2)}%`),!this.#l&&!l&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#j(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#r.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#R.bind(this,s),{signal:t}),i.addEventListener("contextmenu",_n,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#r)}#R(e,t){t.preventDefault();const{isMac:s}=fs.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#u=[t.screenX,t.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Wt,{passive:!1,signal:c}),window.addEventListener("contextmenu",_n,{signal:c}),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const m=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#M()};window.addEventListener("pointerup",m,{signal:c}),window.addEventListener("blur",m,{signal:c})}#k(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[l,c]=this.parentDimensions;this.setDims(l*s,c*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#M(){if(!this.#o)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=this.#o;this.#o=null;const l=this.x,c=this.y,u=this.width,h=this.height;l===e&&c===t&&u===s&&h===i||this.addCommands({cmd:this.#k.bind(this,l,c,u,h),undo:this.#k.bind(this,e,t,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#z(e,t){const[s,i]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,m=Oe.MIN_SIZE/s,p=Oe.MIN_SIZE/i,y=this.#C(this.rotation),x=(L,V)=>[y[0]*L+y[2]*V,y[1]*L+y[3]*V],v=this.#C(360-this.rotation),w=(L,V)=>[v[0]*L+v[2]*V,v[1]*L+v[3]*V];let A,S,N=!1,j=!1;switch(e){case"topLeft":N=!0,A=(L,V)=>[0,0],S=(L,V)=>[L,V];break;case"topMiddle":A=(L,V)=>[L/2,0],S=(L,V)=>[L/2,V];break;case"topRight":N=!0,A=(L,V)=>[L,0],S=(L,V)=>[0,V];break;case"middleRight":j=!0,A=(L,V)=>[L,V/2],S=(L,V)=>[0,V/2];break;case"bottomRight":N=!0,A=(L,V)=>[L,V],S=(L,V)=>[0,0];break;case"bottomMiddle":A=(L,V)=>[L/2,V],S=(L,V)=>[L/2,0];break;case"bottomLeft":N=!0,A=(L,V)=>[0,V],S=(L,V)=>[L,0];break;case"middleLeft":j=!0,A=(L,V)=>[0,V/2],S=(L,V)=>[L,V/2];break}const C=A(u,h),R=S(u,h);let D=x(...R);const O=Oe._round(l+D[0]),B=Oe._round(c+D[1]);let F=1,I=1,ee,z;if(t.fromKeyboard)({deltaX:ee,deltaY:z}=t);else{const{screenX:L,screenY:V}=t,[$,H]=this.#u;[ee,z]=this.screenToPageTranslation(L-$,V-H),this.#u[0]=L,this.#u[1]=V}if([ee,z]=w(ee/s,z/i),N){const L=Math.hypot(u,h);F=I=Math.max(Math.min(Math.hypot(R[0]-C[0]-ee,R[1]-C[1]-z)/L,1/u,1/h),m/u,p/h)}else j?F=Ns(Math.abs(R[0]-C[0]-ee),m,1)/u:I=Ns(Math.abs(R[1]-C[1]-z),p,1)/h;const Z=Oe._round(u*F),W=Oe._round(h*I);D=x(...S(Z,W));const ce=O-D[0],me=B-D[1];this.#m||=[this.x,this.y,this.width,this.height],this.width=Z,this.height=W,this.x=ce,this.y=me,this.setDims(s*Z,i*W),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#c)return this._editToolbar;this._editToolbar=new bo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#s?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||($n.initialize(Oe._l10n),this.#s=new $n(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#n?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#V();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,l]=this.getInitialTranslation();return this.translate(i,l),yA(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#A||=new Au({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#N.bind(this),onPinching:this.#b.bind(this),onPinchEnd:this.#P.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),e}#N(){this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#b(e,t,s){let l=.7*(s/t)+1-.7;if(l===1)return;const c=this.#C(this.rotation),u=(O,B)=>[c[0]*O+c[2]*B,c[1]*O+c[3]*B],[h,m]=this.parentDimensions,p=this.x,y=this.y,x=this.width,v=this.height,w=Oe.MIN_SIZE/h,A=Oe.MIN_SIZE/m;l=Math.max(Math.min(l,1/x,1/v),w/x,A/v);const S=Oe._round(x*l),N=Oe._round(v*l);if(S===x&&N===v)return;this.#m||=[p,y,x,v];const j=u(x/2,v/2),C=Oe._round(p+j[0]),R=Oe._round(y+j[1]),D=u(S/2,N/2);this.x=C-D[0],this.y=R-D[1],this.width=S,this.height=N,this.setDims(h*S,m*N),this.fixAndSetPosition(),this._onResizing()}#P(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#M()}pointerdown(e){const{isMac:t}=fs.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#q(e);return}this.#B(e)}#B(e){const{isMac:t}=fs.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#q(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,l=this._uiManager.combinedSignal(i),c={capture:!0,passive:!1,signal:l},u=m=>{i.abort(),this.#i=null,this.#f=!1,this._uiManager.endDragSession()||this.#B(m),s&&this._onStopDragging()};t&&(this.#x=e.clientX,this.#v=e.clientY,this.#i=e.pointerId,this.#a=e.pointerType,window.addEventListener("pointermove",m=>{s||(s=!0,this._onStartDragging());const{clientX:p,clientY:y,pointerId:x}=m;if(x!==this.#i){Wt(m);return}const[v,w]=this.screenToPageTranslation(p-this.#x,y-this.#v);this.#x=p,this.#v=y,this._uiManager.dragSelectedEditors(v,w)},c),window.addEventListener("touchmove",Wt,c),window.addEventListener("pointerdown",m=>{m.pointerType===this.#a&&(this.#A||m.isPrimary)&&u(m),Wt(m)},c));const h=m=>{if(!this.#i||this.#i===m.pointerId){u(m);return}Wt(m)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[l,c]=this.pageDimensions,[u,h]=this.pageTranslation,m=e/i,p=t/i,y=this.x*l,x=this.y*c,v=this.width*l,w=this.height*c;switch(s){case 0:return[y+m+u,c-x-p-w+h,y+m+v+u,c-x-p+h];case 90:return[y+p+u,c-x+m+h,y+p+w+u,c-x+m+v+h];case 180:return[y-m-v+u,c-x+p+h,y-m+u,c-x+p+w+h];case 270:return[y-p-w+u,c-x-m-v+h,y-p+u,c-x-m+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,l,c]=e,u=l-s,h=c-i;switch(this.rotation){case 0:return[s,t-c,u,h];case 90:return[s,t-i,h,u];case 180:return[l,t-i,u,h];case 270:return[l,t-c,h,u];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#c=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#c=!1,!0):!1}isInEditMode(){return this.#c}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return t<c&&i>0&&e<l&&s>0}#V(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#V()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){xt("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[l,c]=i.pageDimensions,[u,h,m,p]=i.getRectInCurrentCoords(e.rect,c);return i.x=u/l,i.y=h/c,i.width=m/l,i.height=p/c,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#U(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#A?.destroy(),this.#A=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#r.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#o={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#r.children;if(!this.#t){this.#t=Array.from(t);const c=this.#$.bind(this),u=this.#F.bind(this),h=this._uiManager._signal;for(const m of this.#t){const p=m.getAttribute("data-resizer-name");m.setAttribute("role","spinbutton"),m.addEventListener("keydown",c,{signal:h}),m.addEventListener("blur",u,{signal:h}),m.addEventListener("focus",this.#L.bind(this,p),{signal:h}),m.setAttribute("data-l10n-id",Oe._l10nResizer[p])}}const s=this.#t[0];let i=0;for(const c of t){if(c===s)break;i++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(l!==i){if(l<i)for(let u=0;u<i-l;u++)this.#r.append(this.#r.firstChild);else if(l>i)for(let u=0;u<l-i;u++)this.#r.firstChild.before(this.#r.lastChild);let c=0;for(const u of t){const m=this.#t[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Oe._l10nResizer[m])}}this.#O(0),this.#g=!0,this.#r.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#$(e){Oe._resizerKeyboardManager.exec(this,e)}#F(e){this.#g&&e.relatedTarget?.parentNode!==this.#r&&this.#U()}#L(e){this.#d=this.#g?e:""}#O(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#g&&this.#z(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#U(){this.#g=!1,this.#O(-1),this.#M()}_stopResizingWithKeyboard(){this.#U(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:s}=e;let i=this.#w.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(s),this.#w.size===0&&(this.#w=null)},Oe._telemetryTimeout),this.#w.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class TD extends Oe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ub=3285377520,hn=4294901760,qn=65535;class xA{constructor(e){this.h1=e?e&4294967295:Ub,this.h2=e?e&4294967295:Ub}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let A=0,S=e.length;A<S;A++){const N=e.charCodeAt(A);N<=255?t[s++]=N:(t[s++]=N>>>8,t[s++]=N&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,l=s-i*4,c=new Uint32Array(t.buffer,0,i);let u=0,h=0,m=this.h1,p=this.h2;const y=3432918353,x=461845907,v=y&qn,w=x&qn;for(let A=0;A<i;A++)A&1?(u=c[A],u=u*y&hn|u*v&qn,u=u<<15|u>>>17,u=u*x&hn|u*w&qn,m^=u,m=m<<13|m>>>19,m=m*5+3864292196):(h=c[A],h=h*y&hn|h*v&qn,h=h<<15|h>>>17,h=h*x&hn|h*w&qn,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,l){case 3:u^=t[i*4+2]<<16;case 2:u^=t[i*4+1]<<8;case 1:u^=t[i*4],u=u*y&hn|u*v&qn,u=u<<15|u>>>17,u=u*x&hn|u*w&qn,i&1?m^=u:p^=u}this.h1=m,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&hn|e*36045&qn,t=t*4283543511&hn|((t<<16|e>>>16)*2950163797&hn)>>>16,e^=t>>>1,e=e*444984403&hn|e*60499&qn,t=t*3301882366&hn|((t<<16|e>>>16)*3120437893&hn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Jm=Object.freeze({map:null,hash:"",transfer:void 0});class Up{#e=!1;#t=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#s.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#s.get(e)}remove(e){if(this.#s.delete(e),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#s.values())if(t instanceof Oe)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#s.get(e);let i=!1;if(s!==void 0)for(const[l,c]of Object.entries(t))s[l]!==c&&(i=!0,s[l]=c);else i=!0,this.#s.set(e,t);i&&this.#n(),t instanceof Oe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#s.has(e)}get size(){return this.#s.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new bA(this)}get serializable(){if(this.#s.size===0)return Jm;const e=new Map,t=new xA,s=[],i=Object.create(null);let l=!1;for(const[c,u]of this.#s){const h=u instanceof Oe?u.serialize(!1,i):u;h&&(e.set(c,h),t.update(`${c}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const c of e.values())c.bitmap&&s.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Jm}get editorStats(){let e=null;const t=new Map;for(const s of this.#s.values()){if(!(s instanceof Oe))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:l}=i;t.has(l)||t.set(l,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[u,h]of Object.entries(i)){if(u==="type")continue;let m=c.get(u);m||(m=new Map,c.set(u,m));const p=m.get(h)??0;m.set(h,p+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#s.values())!(t instanceof Oe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class bA extends Up{#e;constructor(e){super();const{map:t,hash:s,transfer:i}=e.serializable,l=structuredClone(t,i?{transfer:i}:null);this.#e={map:l,hash:s,transfer:i}}get print(){xt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return st(this,"modifiedIds",{ids:new Set,hash:""})}}class DD{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(Xt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:l,style:c}=e,u=new FontFace(i,l,c);this.addNativeFontFace(u);try{await u.load(),this.#e.add(i),s?.(e)}catch{Ve(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Ve(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return st(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return st(this,"isSyncFontLoadingSupported",Ss||fs.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return st(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function i(R,D,O,B){const F=R.substring(0,D),I=R.substring(D+O);return F+B+I}let l,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let m=0;function p(R,D){if(++m>30){Ve("Load test font never loaded."),D();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,R,D))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=i(x,976,y.length,y);const w=16,A=1482184792;let S=s(x,w);for(l=0,c=y.length-3;l<c;l+=4)S=S-A+s(y,l)|0;l<y.length&&(S=S-A+s(y+"XXX",l)|0),x=i(x,w,4,mD(S));const N=`url(data:font/opentype;base64,${btoa(x)});`,j=`@font-face {font-family:"${y}";src:${N}}`;this.insertRule(j);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const R of[e.loadedName,y]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,C.append(D)}this._document.body.append(C),p(y,()=>{C.remove(),t.complete()})}}class RD{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${pA(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(c){Ve(`getPathGenerator - ignoring character: "${c}".`)}const l=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=l}}function kD(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ss)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function MD(n){if(Ss&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Vo(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function hd(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const ep=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,LD=n=>typeof n=="object"&&typeof n?.name=="string",OD=bD.bind(null,ep,LD);class ID{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){Ve("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);i=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const fd={DATA:1,ERROR:2},Gt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function qb(){}function Ms(n){if(n instanceof Ka||n instanceof Zm||n instanceof Hb||n instanceof Gd||n instanceof dm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ka(n.message);case"InvalidPDFException":return new Zm(n.message);case"PasswordException":return new Hb(n.message,n.code);case"ResponseException":return new Gd(n.message,n.status,n.missing);case"UnknownErrorException":return new dm(n.message,n.details)}return new dm(n.message,n.toString())}class po{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===fd.DATA)i.resolve(e.data);else if(e.callback===fd.ERROR)i.reject(Ms(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,l=this.comObj;Promise.try(t,e.data).then(function(c){l.postMessage({sourceName:s,targetName:i,callback:fd.DATA,callbackId:e.callbackId,data:c})},function(c){l.postMessage({sourceName:s,targetName:i,callback:fd.ERROR,callbackId:e.callbackId,reason:Ms(c)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[i]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(c){l.reject(c)}return l.promise}sendWithStream(e,t,s,i){const l=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:m=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:m,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:e,streamId:l,data:t,desiredSize:m.desiredSize},i),p.promise},pull:m=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:Gt.PULL,streamId:l,desiredSize:m.desiredSize}),p.promise},cancel:m=>{Xt(m instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:Gt.CANCEL,streamId:l,reason:Ms(m)}),p.promise}},s)}#s(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,l=this.comObj,c=this,u=this.actionHandler[e.action],h={enqueue(m,p=1,y){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=p,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:i,stream:Gt.ENQUEUE,streamId:t,chunk:m},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:i,stream:Gt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(m){Xt(m instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:i,stream:Gt.ERROR,streamId:t,reason:Ms(m)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){l.postMessage({sourceName:s,targetName:i,stream:Gt.START_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:s,targetName:i,stream:Gt.START_COMPLETE,streamId:t,reason:Ms(m)})})}#n(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,l=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Gt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Ms(e.reason));break;case Gt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Ms(e.reason));break;case Gt.PULL:if(!u){l.postMessage({sourceName:s,targetName:i,stream:Gt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||qb).then(function(){l.postMessage({sourceName:s,targetName:i,stream:Gt.PULL_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:s,targetName:i,stream:Gt.PULL_COMPLETE,streamId:t,reason:Ms(m)})});break;case Gt.ENQUEUE:if(Xt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case Gt.CLOSE:if(Xt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#i(c,t);break;case Gt.ERROR:Xt(c,"error should have stream controller"),c.controller.error(Ms(e.reason)),this.#i(c,t);break;case Gt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Ms(e.reason)),this.#i(c,t);break;case Gt.CANCEL:if(!u)break;const h=Ms(e.reason);Promise.try(u.onCancel||qb,h).then(function(){l.postMessage({sourceName:s,targetName:i,stream:Gt.CANCEL_COMPLETE,streamId:t,success:!0})},function(m){l.postMessage({sourceName:s,targetName:i,stream:Gt.CANCEL_COMPLETE,streamId:t,reason:Ms(m)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class vA{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){xt("Abstract method `_createCanvas` called.")}}class PD extends vA{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class wA{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){xt("Abstract method `_fetch` called.")}}class Vb extends wA{async _fetch(e){const t=await $o(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Vo(t)}}class AA{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,l){return"none"}destroy(e=!1){}}class BD extends AA{#e;#t;#s;#n;#i;#a;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#i=t}get#r(){return this.#t||=new Map}get#u(){return this.#a||=new Map}get#o(){if(!this.#s){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#i.createElementNS(ha,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#i.createElementNS(ha,"defs"),e.append(s),s.append(this.#s),this.#i.body.append(e)}return this.#s}#h(e){if(e.length===1){const h=e[0],m=new Array(256);for(let y=0;y<256;y++)m[y]=h[y]/255;const p=m.join(",");return[p,p,p]}const[t,s,i]=e,l=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=t[h]/255,c[h]=s[h]/255,u[h]=i[h]/255;return[l.join(","),c.join(","),u.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&(wu(t)?Ve('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=hA(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#r.get(e);if(t)return t;const[s,i,l]=this.#h(e),c=e.length===1?s:`${s}${i}${l}`;if(t=this.#r.get(c),t)return this.#r.set(e,t),t;const u=`g_${this.#n}_transfer_map_${this.#l++}`,h=this.#d(u);this.#r.set(e,h),this.#r.set(c,h);const m=this.#p(u);return this.#g(s,i,l,m),h}addHCMFilter(e,t){const s=`${e}-${t}`,i="base";let l=this.#u.get(i);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#u.set(i,l)),!e||!t))return l.url;const c=this.#x(e);e=Me.makeHexColor(...c);const u=this.#x(t);if(t=Me.makeHexColor(...u),this.#o.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return l.url;const h=new Array(256);for(let v=0;v<=255;v++){const w=v/255;h[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const m=h.join(","),p=`g_${this.#n}_hcm_filter`,y=l.filter=this.#p(p);this.#g(m,m,m,y),this.#m(y);const x=(v,w)=>{const A=c[v]/255,S=u[v]/255,N=new Array(w+1);for(let j=0;j<=w;j++)N[j]=A+j/w*(S-A);return N.join(",")};return this.#g(x(0,5),x(1,5),x(2,5),y),l.url=this.#d(p),l.url}addAlphaFilter(e){let t=this.#r.get(e);if(t)return t;const[s]=this.#h([e]),i=`alpha_${s}`;if(t=this.#r.get(i),t)return this.#r.set(e,t),t;const l=`g_${this.#n}_alpha_map_${this.#l++}`,c=this.#d(l);this.#r.set(e,c),this.#r.set(i,c);const u=this.#p(l);return this.#y(s,u),c}addLuminosityFilter(e){let t=this.#r.get(e||"luminosity");if(t)return t;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",t=this.#r.get(i),t)return this.#r.set(e,t),t;const l=`g_${this.#n}_luminosity_map_${this.#l++}`,c=this.#d(l);this.#r.set(e,c),this.#r.set(i,c);const u=this.#p(l);return this.#f(u),e&&this.#y(s,u),c}addHighlightHCMFilter(e,t,s,i,l){const c=`${t}-${s}-${i}-${l}`;let u=this.#u.get(e);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#u.set(e,u)),!t||!s))return u.url;const[h,m]=[t,s].map(this.#x.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[x,v]=[i,l].map(this.#x.bind(this));y<p&&([p,y,x,v]=[y,p,v,x]),this.#o.style.color="";const w=(N,j,C)=>{const R=new Array(256),D=(y-p)/C,O=N/255,B=(j-N)/(255*C);let F=0;for(let I=0;I<=C;I++){const ee=Math.round(p+I*D),z=O+I*B;for(let Z=F;Z<=ee;Z++)R[Z]=z;F=ee+1}for(let I=F;I<256;I++)R[I]=R[F-1];return R.join(",")},A=`g_${this.#n}_hcm_${e}_filter`,S=u.filter=this.#p(A);return this.#m(S),this.#g(w(x[0],v[0],5),w(x[1],v[1],5),w(x[2],v[2],5),S),u.url=this.#d(A),u.url}destroy(e=!1){e&&this.#a?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#a?.clear(),this.#a=null,this.#l=0)}#f(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#i.createElementNS(ha,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#i.createElementNS(ha,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#o.append(t),t}#c(e,t,s){const i=this.#i.createElementNS(ha,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#g(e,t,s,i){const l=this.#i.createElementNS(ha,"feComponentTransfer");i.append(l),this.#c(l,"feFuncR",e),this.#c(l,"feFuncG",t),this.#c(l,"feFuncB",s)}#y(e,t){const s=this.#i.createElementNS(ha,"feComponentTransfer");t.append(s),this.#c(s,"feFuncA",e)}#x(e){return this.#o.style.color=e,Hp(getComputedStyle(this.#o).getPropertyValue("color"))}}class SA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){xt("Abstract method `_fetch` called.")}}class $b extends SA{async _fetch(e){const t=await $o(e,"arraybuffer");return new Uint8Array(t)}}class NA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){xt("Abstract method `_fetch` called.")}}class Gb extends NA{async _fetch(e){const t=await $o(e,"arraybuffer");return new Uint8Array(t)}}Ss&&Ve("Please use the `legacy` build in Node.js environments.");async function qp(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class HD extends AA{}class zD extends vA{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class FD extends wA{async _fetch(e){return qp(e)}}class UD extends SA{async _fetch(e){return qp(e)}}class qD extends NA{async _fetch(e){return qp(e)}}const hs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function tp(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class Vp{isModifyingCurrentTransform(){return!1}getPattern(){xt("Abstract method `getPattern` called.")}}class VD extends Vp{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let l;if(i===hs.STROKE||i===hs.FILL){const c=t.current.getClippedPathBoundingBox(i,Mt(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,m=t.cachedCanvases.getCanvas("pattern",u,h),p=m.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),s=Me.transform(s,[1,0,0,1,c[0],c[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),tp(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=e.createPattern(m.canvas,"no-repeat");const y=new DOMMatrix(s);l.setTransform(y)}else tp(e,this._bbox),l=this._createGradient(e);return l}}function fm(n,e,t,s,i,l,c,u){const h=e.coords,m=e.colors,p=n.data,y=n.width*4;let x;h[t+1]>h[s+1]&&(x=t,t=s,s=x,x=l,l=c,c=x),h[s+1]>h[i+1]&&(x=s,s=i,i=x,x=c,c=u,u=x),h[t+1]>h[s+1]&&(x=t,t=s,s=x,x=l,l=c,c=x);const v=(h[t]+e.offsetX)*e.scaleX,w=(h[t+1]+e.offsetY)*e.scaleY,A=(h[s]+e.offsetX)*e.scaleX,S=(h[s+1]+e.offsetY)*e.scaleY,N=(h[i]+e.offsetX)*e.scaleX,j=(h[i+1]+e.offsetY)*e.scaleY;if(w>=j)return;const C=m[l],R=m[l+1],D=m[l+2],O=m[c],B=m[c+1],F=m[c+2],I=m[u],ee=m[u+1],z=m[u+2],Z=Math.round(w),W=Math.round(j);let ce,me,L,V,$,H,T,q;for(let M=Z;M<=W;M++){if(M<S){const Ee=M<w?0:(w-M)/(w-S);ce=v-(v-A)*Ee,me=C-(C-O)*Ee,L=R-(R-B)*Ee,V=D-(D-F)*Ee}else{let Ee;M>j?Ee=1:S===j?Ee=0:Ee=(S-M)/(S-j),ce=A-(A-N)*Ee,me=O-(O-I)*Ee,L=B-(B-ee)*Ee,V=F-(F-z)*Ee}let G;M<w?G=0:M>j?G=1:G=(w-M)/(w-j),$=v-(v-N)*G,H=C-(C-I)*G,T=R-(R-ee)*G,q=D-(D-z)*G;const de=Math.round(Math.min(ce,$)),re=Math.round(Math.max(ce,$));let xe=y*M+de*4;for(let Ee=de;Ee<=re;Ee++)G=(ce-Ee)/(ce-$),G<0?G=0:G>1&&(G=1),p[xe++]=me-(me-H)*G|0,p[xe++]=L-(L-T)*G|0,p[xe++]=V-(V-q)*G|0,p[xe++]=255}}function $D(n,e,t){const s=e.coords,i=e.colors;let l,c;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(s.length/u)-1,m=u-1;for(l=0;l<h;l++){let p=l*u;for(let y=0;y<m;y++,p++)fm(n,t,s[p],s[p+1],s[p+u],i[p],i[p+1],i[p+u]),fm(n,t,s[p+u+1],s[p+1],s[p+u],i[p+u+1],i[p+1],i[p+u])}break;case"triangles":for(l=0,c=s.length;l<c;l+=3)fm(n,t,s[l],s[l+1],s[l+2],i[l],i[l+1],i[l+2]);break;default:throw new Error("illegal figure")}}class GD extends Vp{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(m*e[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),v=m/y,w=p/x,A={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/w},S=y+4,N=x+4,j=s.getCanvas("mesh",S,N),C=j.context,R=C.createImageData(y,x);if(t){const O=R.data;for(let B=0,F=O.length;B<F;B+=4)O[B]=t[0],O[B+1]=t[1],O[B+2]=t[2],O[B+3]=255}for(const O of this._figures)$D(R,O,A);return C.putImageData(R,2,2),{canvas:j.canvas,offsetX:u-2*v,offsetY:h-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){tp(e,this._bbox);const l=new Float32Array(2);if(i===hs.SHADING)Me.singularValueDecompose2dScale(Mt(e),l);else if(this.matrix){Me.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;Me.singularValueDecompose2dScale(t.baseTransform,l),l[0]*=u,l[1]*=h}else Me.singularValueDecompose2dScale(t.baseTransform,l);const c=this._createMeshCanvas(l,i===hs.SHADING?null:this._background,t.cachedCanvases);return i!==hs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class YD extends Vp{getPattern(){return"hotpink"}}function WD(n){switch(n[0]){case"RadialAxial":return new VD(n);case"Mesh":return new GD(n);case"Dummy":return new YD}throw new Error(`Unknown IR type: ${n[0]}`)}const Yb={COLORED:1,UNCOLORED:2};class $p{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:l,color:c,canvasGraphicsFactory:u}=this;let{xstep:h,ystep:m}=this;h=Math.abs(h),m=Math.abs(m),vu("TilingType: "+l);const p=t[0],y=t[1],x=t[2],v=t[3],w=x-p,A=v-y,S=new Float32Array(2);Me.singularValueDecompose2dScale(this.matrix,S);const[N,j]=S;Me.singularValueDecompose2dScale(this.baseTransform,S);const C=N*S[0],R=j*S[1];let D=w,O=A,B=!1,F=!1;const I=Math.ceil(h*C),ee=Math.ceil(m*R),z=Math.ceil(w*C),Z=Math.ceil(A*R);I>=z?D=h:B=!0,ee>=Z?O=m:F=!0;const W=this.getSizeAndScale(D,this.ctx.canvas.width,C),ce=this.getSizeAndScale(O,this.ctx.canvas.height,R),me=e.cachedCanvases.getCanvas("pattern",W.size,ce.size),L=me.context,V=u.createCanvasGraphics(L);if(V.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(V,i,c),L.translate(-W.scale*p,-ce.scale*y),V.transform(W.scale,0,0,ce.scale,0,0),L.save(),this.clipBbox(V,p,y,x,v),V.baseTransform=Mt(V.ctx),V.executeOperatorList(s),V.endDrawing(),L.restore(),B||F){const $=me.canvas;B&&(D=h),F&&(O=m);const H=this.getSizeAndScale(D,this.ctx.canvas.width,C),T=this.getSizeAndScale(O,this.ctx.canvas.height,R),q=H.size,M=T.size,G=e.cachedCanvases.getCanvas("pattern-workaround",q,M),de=G.context,re=B?Math.floor(w/h):0,xe=F?Math.floor(A/m):0;for(let Ee=0;Ee<=re;Ee++)for(let Le=0;Le<=xe;Le++)de.drawImage($,q*Ee,M*Le,q,M,0,0,q,M);return{canvas:G.canvas,scaleX:H.scale,scaleY:T.scale,offsetX:p,offsetY:y}}return{canvas:me.canvas,scaleX:W.scale,scaleY:ce.scale,offsetX:p,offsetY:y}}getSizeAndScale(e,t,s){const i=Math.max($p.MAX_PATTERN_SIZE,t);let l=Math.ceil(e*s);return l>=i?l=i:s=l/e,{scale:s,size:l}}clipBbox(e,t,s,i,l){const c=i-t,u=l-s;e.ctx.rect(t,s,c,u),Me.axialAlignedBoundingBox([t,s,i,l],Mt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,l=e.current;switch(t){case Yb.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;i.fillStyle=l.fillColor=c,i.strokeStyle=l.strokeColor=u;break;case Yb.UNCOLORED:i.fillStyle=i.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new fD(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i){let l=s;i!==hs.SHADING&&(l=Me.transform(l,t.baseTransform),this.matrix&&(l=Me.transform(l,this.matrix)));const c=this.createPatternCanvas(t);let u=new DOMMatrix(l);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(u),h}}function XD({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const u=fs.isLittleEndian?4278190080:255,[h,m]=c?[l,u]:[u,l],p=s>>3,y=s&7,x=n.length;t=new Uint32Array(t.buffer);let v=0;for(let w=0;w<i;w++){for(const S=e+p;e<S;e++){const N=e<x?n[e]:255;t[v++]=N&128?m:h,t[v++]=N&64?m:h,t[v++]=N&32?m:h,t[v++]=N&16?m:h,t[v++]=N&8?m:h,t[v++]=N&4?m:h,t[v++]=N&2?m:h,t[v++]=N&1?m:h}if(y===0)continue;const A=e<x?n[e++]:255;for(let S=0;S<y;S++)t[v++]=A&1<<7-S?m:h}return{srcPos:e,destPos:v}}const Wb=16,Xb=100,QD=15,Qb=10,Ls=16,mm=new DOMMatrix,Zs=new Float32Array(2),qr=new Float32Array([1/0,1/0,-1/0,-1/0]);function ZD(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,l,c,u){e.transform(t,s,i,l,c,u),this.__originalTransform(t,s,i,l,c,u)},n.setTransform=function(t,s,i,l,c,u){e.setTransform(t,s,i,l,c,u),this.__originalSetTransform(t,s,i,l,c,u)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,l,c,u){e.bezierCurveTo(t,s,i,l,c,u),this.__originalBezierCurveTo(t,s,i,l,c,u)},n.rect=function(t,s,i,l){e.rect(t,s,i,l),this.__originalRect(t,s,i,l)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class KD{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function md(n,e,t,s,i,l,c,u,h,m){const[p,y,x,v,w,A]=Mt(n);if(y===0&&x===0){const j=c*p+w,C=Math.round(j),R=u*v+A,D=Math.round(R),O=(c+h)*p+w,B=Math.abs(Math.round(O)-C)||1,F=(u+m)*v+A,I=Math.abs(Math.round(F)-D)||1;return n.setTransform(Math.sign(p),0,0,Math.sign(v),C,D),n.drawImage(e,t,s,i,l,0,0,B,I),n.setTransform(p,y,x,v,w,A),[B,I]}if(p===0&&v===0){const j=u*x+w,C=Math.round(j),R=c*y+A,D=Math.round(R),O=(u+m)*x+w,B=Math.abs(Math.round(O)-C)||1,F=(c+h)*y+A,I=Math.abs(Math.round(F)-D)||1;return n.setTransform(0,Math.sign(y),Math.sign(x),0,C,D),n.drawImage(e,t,s,i,l,0,0,I,B),n.setTransform(p,y,x,v,w,A),[I,B]}n.drawImage(e,t,s,i,l,c,u,h,m);const S=Math.hypot(p,y),N=Math.hypot(x,v);return[S*h,N*m]}class Zb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Qm;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ys.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t){this.clipBox=new Float32Array([0,0,e,t]),this.minMax=qr.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=hs.FILL,t=null){const s=this.minMax.slice();if(e===hs.STROKE){t||xt("Stroke bounding box must include transform."),Me.singularValueDecompose2dScale(t,Zs);const i=Zs[0]*this.lineWidth/2,l=Zs[1]*this.lineWidth/2;s[0]-=i,s[1]-=l,s[2]+=i,s[3]+=l}return s}updateClipFromPath(){const e=Me.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(qr,0)}getClippedPathBoundingBox(e=hs.FILL,t=null){return Me.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Kb(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Ls,l=(t-i)/Ls,c=i===0?l:l+1,u=n.createImageData(s,Ls);let h=0,m;const p=e.data,y=u.data;let x,v,w,A;if(e.kind===Rd.GRAYSCALE_1BPP){const S=p.byteLength,N=new Uint32Array(y.buffer,0,y.byteLength>>2),j=N.length,C=s+7>>3,R=4294967295,D=fs.isLittleEndian?4278190080:255;for(x=0;x<c;x++){for(w=x<l?Ls:i,m=0,v=0;v<w;v++){const O=S-h;let B=0;const F=O>C?s:O*8-7,I=F&-8;let ee=0,z=0;for(;B<I;B+=8)z=p[h++],N[m++]=z&128?R:D,N[m++]=z&64?R:D,N[m++]=z&32?R:D,N[m++]=z&16?R:D,N[m++]=z&8?R:D,N[m++]=z&4?R:D,N[m++]=z&2?R:D,N[m++]=z&1?R:D;for(;B<F;B++)ee===0&&(z=p[h++],ee=128),N[m++]=z&ee?R:D,ee>>=1}for(;m<j;)N[m++]=0;n.putImageData(u,0,x*Ls)}}else if(e.kind===Rd.RGBA_32BPP){for(v=0,A=s*Ls*4,x=0;x<l;x++)y.set(p.subarray(h,h+A)),h+=A,n.putImageData(u,0,v),v+=Ls;x<c&&(A=s*i*4,y.set(p.subarray(h,h+A)),n.putImageData(u,0,v))}else if(e.kind===Rd.RGB_24BPP)for(w=Ls,A=s*w,x=0;x<c;x++){for(x>=l&&(w=i,A=s*w),m=0,v=A;v--;)y[m++]=p[h++],y[m++]=p[h++],y[m++]=p[h++],y[m++]=255;n.putImageData(u,0,x*Ls)}else throw new Error(`bad image kind: ${e.kind}`)}function Jb(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Ls,l=(t-i)/Ls,c=i===0?l:l+1,u=n.createImageData(s,Ls);let h=0;const m=e.data,p=u.data;for(let y=0;y<c;y++){const x=y<l?Ls:i;({srcPos:h}=XD({src:m,srcPos:h,dest:p,width:s,height:x,nonBlackColor:0})),n.putImageData(u,0,y*Ls)}}function io(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function pd(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function ev(n,e){if(e)return!0;Me.singularValueDecompose2dScale(n,Zs);const t=Math.fround(Wn.pixelRatio*Zr.PDF_TO_CSS_UNITS);return Zs[0]<=t&&Zs[1]<=t}const JD=["butt","round","square"],e2=["miter","round","bevel"],t2={},tv={};class Gr{constructor(e,t,s,i,l,{optionalContentConfig:c,markedContentStack:u=null},h,m){this.ctx=e,this.current=new Zb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new KD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=m,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Mt(this.compositeCtx))}this.ctx.save(),pd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Mt(this.ctx)}executeOperatorList(e,t,s,i){const l=e.argsArray,c=e.fnArray;let u=t||0;const h=l.length;if(h===u)return u;const m=h-u>Qb&&typeof s=="function",p=m?Date.now()+QD:0;let y=0;const x=this.commonObjs,v=this.objs;let w;for(;;){if(i!==void 0&&u===i.nextBreakPoint)return i.breakIt(u,s),u;if(w=c[u],w!==$d.dependency)this[w].apply(this,l[u]);else for(const A of l[u]){const S=A.startsWith("g_")?x:v;if(!S.has(A))return S.get(A,s),u}if(u++,u===h)return u;if(m&&++y>Qb){if(Date.now()>p)return s(),u;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=s,h=i,m="prescale1",p,y;for(;l>2&&u>1||c>2&&h>1;){let x=u,v=h;l>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/x),c>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/v),p=this.cachedCanvases.getCanvas(m,x,v),y=p.context,y.clearRect(0,0,x,v),y.drawImage(e,0,0,u,h,0,0,x,v),e=p.canvas,u=x,h=v,m=m==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,l=this.current.fillColor,c=this.current.patternFill,u=Mt(t);let h,m,p,y;if((e.bitmap||e.data)&&e.count>1){const I=e.bitmap||e.data.buffer;m=JSON.stringify(c?u:[u.slice(0,4),l]),h=this._cachedBitmapsMap.get(I),h||(h=new Map,this._cachedBitmapsMap.set(I,h));const ee=h.get(m);if(ee&&!c){const z=Math.round(Math.min(u[0],u[2])+u[4]),Z=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:ee,offsetX:z,offsetY:Z}}p=ee}p||(y=this.cachedCanvases.getCanvas("maskCanvas",s,i),Jb(y.context,e));let x=Me.transform(u,[1/s,0,0,-1/i,0,0]);x=Me.transform(x,[1,0,0,1,0,-i]);const v=qr.slice();Me.axialAlignedBoundingBox([0,0,s,i],x,v);const[w,A,S,N]=v,j=Math.round(S-w)||1,C=Math.round(N-A)||1,R=this.cachedCanvases.getCanvas("fillCanvas",j,C),D=R.context,O=w,B=A;D.translate(-O,-B),D.transform(...x),p||(p=this._scaleImage(y.canvas,Un(D)),p=p.img,h&&c&&h.set(m,p)),D.imageSmoothingEnabled=ev(Mt(D),e.interpolate),md(D,p,0,0,p.width,p.height,0,0,s,i),D.globalCompositeOperation="source-in";const F=Me.transform(Un(D),[1,0,0,1,-O,-B]);return D.fillStyle=c?l.getPattern(t,this,F,hs.FILL):l,D.fillRect(0,0,s,i),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(m,R.canvas)),{canvas:R.canvas,offsetX:Math.round(O),offsetY:Math.round(B)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=JD[e]}setLineJoin(e){this.ctx.lineJoin=e2[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const l=this.ctx=i.context;l.setTransform(this.suspendedCtx.getTransform()),io(this.suspendedCtx,l),ZD(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),io(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const l=i[0],c=i[1],u=i[2]-l,h=i[3]-c;u===0||h===0||(this.genericComposeSMask(t.context,s,u,h,t.subtype,t.backdrop,t.transferMap,l,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,l,c,u,h,m,p,y){let x=e.canvas,v=h-p,w=m-y;if(c)if(v<0||w<0||v+s>x.width||w+i>x.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,i),N=S.context;N.drawImage(x,-v,-w),N.globalCompositeOperation="destination-atop",N.fillStyle=c,N.fillRect(0,0,s,i),N.globalCompositeOperation="source-over",x=S.canvas,v=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(v,w,s,i),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=c,e.fillRect(v,w,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const A=new Path2D;A.rect(h,m,s,i),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(x,v,w,s,i,h,m,s,i),t.restore()}save(){this.inSMaskMode&&io(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&io(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,l,c){this.ctx.transform(e,t,s,i,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[i]=t;if(!s){i||=t[0]=new Path2D,this[e](i);return}if(!(i instanceof Path2D)){const l=t[0]=new Path2D;for(let c=0,u=i.length;c<u;)switch(i[c++]){case ud.moveTo:l.moveTo(i[c++],i[c++]);break;case ud.lineTo:l.lineTo(i[c++],i[c++]);break;case ud.curveTo:l.bezierCurveTo(i[c++],i[c++],i[c++],i[c++],i[c++],i[c++]);break;case ud.closePath:l.closePath();break;default:Ve(`Unrecognized drawing path operator: ${i[c-1]}`);break}i=l}Me.axialAlignedBoundingBox(s,Mt(this.ctx),this.current.minMax),this[e](i)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&i?.getPattern){const l=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,Un(s),hs.STROKE),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(hs.STROKE,Mt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,i=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,Un(s),hs.FILL),h){const m=new Path2D;m.addPath(e,s.getTransform().invertSelf().multiplySelf(h)),e=m}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),c&&s.restore(),t&&this.consumePath(e,u)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=t2}eoClip(){this.pendingClip=tv}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:l,x:c,y:u,fontSize:h,path:m}of e)s.addPath(m,new DOMMatrix(l).preMultiplySelf(i).translate(c,u).scale(h,-h));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Qm,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Ve("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const l=s.loadedName||"sans-serif",c=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const h=s.italic?"italic":"normal";let m=t;t<Wb?m=Wb:t>Xb&&(m=Xb),this.current.fontSizeScale=t/m,this.ctx.font=`${h} ${u} ${m}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#s(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i}paintChar(e,t,s,i,l){const c=this.ctx,u=this.current,h=u.font,m=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,y=m&ys.FILL_STROKE_MASK,x=!!(m&ys.ADD_TO_PATH_FLAG),v=u.patternFill&&!h.missingFile,w=u.patternStroke&&!h.missingFile;let A;if((h.disableFontFace||x||v||w)&&(A=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||v||w){c.save(),c.translate(t,s),c.scale(p,-p);let S;if((y===ys.FILL||y===ys.FILL_STROKE)&&(i?(S=c.getTransform(),c.setTransform(...i),c.fill(this.#s(A,S,i))):c.fill(A)),y===ys.STROKE||y===ys.FILL_STROKE)if(l){S||=c.getTransform(),c.setTransform(...l);const{a:N,b:j,c:C,d:R}=S,D=Me.inverseTransform(l),O=Me.transform([N,j,C,R,0,0],D);Me.singularValueDecompose2dScale(O,Zs),c.lineWidth*=Math.max(Zs[0],Zs[1])/p,c.stroke(this.#s(A,S,l))}else c.lineWidth/=p,c.stroke(A);c.restore()}else(y===ys.FILL||y===ys.FILL_STROKE)&&c.fillText(e,t,s),(y===ys.STROKE||y===ys.FILL_STROKE)&&c.strokeText(e,t,s);x&&(this.pendingTextPaths||=[]).push({transform:Mt(c),x:t,y:s,fontSize:p,path:A})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return st(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const l=this.ctx,c=t.fontSizeScale,u=t.charSpacing,h=t.wordSpacing,m=t.fontDirection,p=t.textHScale*m,y=e.length,x=s.vertical,v=x?1:-1,w=s.defaultVMetrics,A=i*t.fontMatrix[0],S=t.textRenderingMode===ys.FILL&&!s.disableFontFace&&!t.patternFill;l.save(),t.textMatrix&&l.transform(...t.textMatrix),l.translate(t.x,t.y+t.textRise),m>0?l.scale(p,-1):l.scale(p,1);let N,j;if(t.patternFill){l.save();const B=t.fillColor.getPattern(l,this,Un(l),hs.FILL);N=Mt(l),l.restore(),l.fillStyle=B}if(t.patternStroke){l.save();const B=t.strokeColor.getPattern(l,this,Un(l),hs.STROKE);j=Mt(l),l.restore(),l.strokeStyle=B}let C=t.lineWidth;const R=t.textMatrixScale;if(R===0||C===0){const B=t.textRenderingMode&ys.FILL_STROKE_MASK;(B===ys.STROKE||B===ys.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=R;if(c!==1&&(l.scale(c,c),C/=c),l.lineWidth=C,s.isInvalidPDFjsFont){const B=[];let F=0;for(const I of e)B.push(I.unicode),F+=I.width;l.fillText(B.join(""),0,0),t.x+=F*A*p,l.restore(),this.compose();return}let D=0,O;for(O=0;O<y;++O){const B=e[O];if(typeof B=="number"){D+=v*B*i/1e3;continue}let F=!1;const I=(B.isSpace?h:0)+u,ee=B.fontChar,z=B.accent;let Z,W,ce=B.width;if(x){const L=B.vmetric||w,V=-(B.vmetric?L[1]:ce*.5)*A,$=L[2]*A;ce=L?-L[0]:ce,Z=V/c,W=(D+$)/c}else Z=D/c,W=0;if(s.remeasure&&ce>0){const L=l.measureText(ee).width*1e3/i*c;if(ce<L&&this.isFontSubpixelAAEnabled){const V=ce/L;F=!0,l.save(),l.scale(V,1),Z/=V}else ce!==L&&(Z+=(ce-L)/2e3*i/c)}if(this.contentVisible&&(B.isInFont||s.missingFile)){if(S&&!z)l.fillText(ee,Z,W);else if(this.paintChar(ee,Z,W,N,j),z){const L=Z+i*z.offset.x/c,V=W-i*z.offset.y/c;this.paintChar(z.fontChar,L,V,N,j)}}const me=x?ce*A-I*m:ce*A+I*m;D+=me,F&&l.restore()}x?t.y-=D:t.x+=D*p,l.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,l=s.fontSize,c=s.fontDirection,u=i.vertical?1:-1,h=s.charSpacing,m=s.wordSpacing,p=s.textHScale*c,y=s.fontMatrix||Qm,x=e.length,v=s.textRenderingMode===ys.INVISIBLE;let w,A,S,N;if(!(v||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(p,c),w=0;w<x;++w){if(A=e[w],typeof A=="number"){N=u*A*l/1e3,this.ctx.translate(N,0),s.x+=N*p;continue}const j=(A.isSpace?m:0)+h,C=i.charProcOperatorList[A.operatorListId];C?this.contentVisible&&(this.save(),t.scale(l,l),t.transform(...y),this.executeOperatorList(C),this.restore()):Ve(`Type3 character "${A.operatorListId}" is not available.`);const R=[A.width,0];Me.applyTransform(R,y),S=R[0]*l+j,t.translate(S,0),s.x+=S*p}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,l,c){const u=new Path2D;u.rect(s,i,l-s,c-i),this.ctx.clip(u),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||Mt(this.ctx),i={createCanvasGraphics:l=>new Gr(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new $p(e,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=WD(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,Un(t),hs.SHADING);const i=Un(t);if(i){const{width:l,height:c}=t.canvas,u=qr.slice();Me.axialAlignedBoundingBox([0,0,l,c],i,u);const[h,m,p,y]=u;this.ctx.fillRect(h,m,p-h,y-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){xt("Should not call beginInlineImage")}beginImageData(){xt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Mt(this.ctx),t)){Me.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,i,l,c]=t,u=new Path2D;u.rect(s,i,l-s,c-i),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||vu("TODO: Support non-isolated groups."),e.knockout&&Ve("Knockout groups not supported.");const s=Mt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=qr.slice();Me.axialAlignedBoundingBox(e.bbox,Mt(t),i);const l=[0,0,t.canvas.width,t.canvas.height];i=Me.intersect(i,l)||[0,0,0,0];const c=Math.floor(i[0]),u=Math.floor(i[1]),h=Math.max(Math.ceil(i[2])-c,1),m=Math.max(Math.ceil(i[3])-u,1);this.current.startNewPathAndClipBox([0,0,h,m]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,h,m),x=y.context;x.translate(-c,-u),x.transform(...s);let v=new Path2D;const[w,A,S,N]=e.bbox;if(v.rect(w,A,S-w,N-A),e.matrix){const j=new Path2D;j.addPath(v,new DOMMatrix(e.matrix)),v=j}x.clip(v),e.smask?this.smaskStack.push({canvas:y.canvas,context:x,offsetX:c,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,u),t.save()),io(t,x),this.ctx=x,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=Mt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const l=qr.slice();Me.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i,l),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,s,i,l){if(this.#e(),pd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],u=t[3]-t[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=u,Me.singularValueDecompose2dScale(Mt(this.ctx),Zs);const{viewportScale:h}=this,m=Math.ceil(c*this.outputScaleX*h),p=Math.ceil(u*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(m,p);const{canvas:y,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Zs[0],0,0,-Zs[1],0,u*Zs[1]),pd(this.ctx)}else{pd(this.ctx),this.endPath();const h=new Path2D;h.rect(t[0],t[1],c,u),this.ctx.clip(h)}}this.current=new Zb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this._createMaskCanvas(e),l=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,l,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const h=Mt(u);u.transform(t,s,i,l,0,0);const m=this._createMaskCanvas(e);u.setTransform(1,0,0,1,m.offsetX-h[4],m.offsetY-h[5]);for(let p=0,y=c.length;p<y;p+=2){const x=Me.transform(h,[t,s,i,l,c[p],c[p+1]]);u.drawImage(m.canvas,x[4],x[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const l of e){const{data:c,width:u,height:h,transform:m}=l,p=this.cachedCanvases.getCanvas("maskCanvas",u,h),y=p.context;y.save();const x=this.getObject(c,l);Jb(y,x),y.globalCompositeOperation="source-in",y.fillStyle=i?s.getPattern(y,this,Un(t),hs.FILL):s,y.fillRect(0,0,u,h),y.restore(),t.save(),t.transform(...m),t.scale(1,-1),md(t,p.canvas,0,0,u,h,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const l=this.getObject(e);if(!l){Ve("Dependent image isn't ready yet");return}const c=l.width,u=l.height,h=[];for(let m=0,p=i.length;m<p;m+=2)h.push({transform:[t,0,0,s,i[m],i[m+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(l,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,l=this.cachedCanvases.getCanvas("inlineImage",s,i),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",l.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;this.save();const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none"),i.scale(1/t,-1/s);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",t,s).context;Kb(m,e),c=this.applyTransferMapsToCanvas(m)}const u=this._scaleImage(c,Un(i));i.imageSmoothingEnabled=ev(Mt(i),e.interpolate),md(i,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const l=e.width,c=e.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;Kb(h,e),i=this.applyTransferMapsToCanvas(h)}for(const l of t)s.save(),s.transform(...l.transform),s.scale(1,-1),md(s,i,l.x,l.y,l.w,l.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===tv?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Mt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:l}=this.ctx.getTransform();let c,u;if(s===0&&i===0){const h=Math.abs(t),m=Math.abs(l);if(h===m)if(e===0)c=u=1/h;else{const p=h*e;c=u=p<1?1/p:1}else if(e===0)c=1/h,u=1/m;else{const p=h*e,y=m*e;c=p<1?1/p:1,u=y<1?1/y:1}}else{const h=Math.abs(t*l-s*i),m=Math.hypot(t,s),p=Math.hypot(i,l);if(e===0)c=p/h,u=m/h;else{const y=e*h;c=p>y?p/y:1,u=m>y?m/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[l,c]=this.getScaleForStroking();if(l===c){s.lineWidth=(i||1)*l,s.stroke(e);return}const u=s.getLineDash();t&&s.save(),s.scale(l,c),mm.a=1/l,mm.d=1/c;const h=new Path2D;if(h.addPath(e,mm),u.length>0){const m=Math.max(l,c);s.setLineDash(u.map(p=>p/m)),s.lineDashOffset/=m}s.lineWidth=i||1,s.stroke(h),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in $d)Gr.prototype[n]!==void 0&&(Gr.prototype[$d[n]]=Gr.prototype[n]);class Yr{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class s2{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const Hr=Symbol("INTERNAL");class n2{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:s,usage:i,rbGroups:l}){this.#e=!!(e&Qs.DISPLAY),this.#t=!!(e&Qs.PRINT),this.name=t,this.intent=s,this.usage=i,this.rbGroups=l}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==Hr&&xt("Internal method `_setVisible` called."),this.#s=s,this.#n=t}}class a2{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=Qs.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new n2(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(Hr,!1);for(const s of e.on)this.#t.get(s)._setVisible(Hr,!0);for(const s of e.off)this.#t.get(s)._setVisible(Hr,!1);this.#s=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const l=e[i];let c;if(Array.isArray(l))c=this.#i(l);else if(this.#t.has(l))c=this.#t.get(l).visible;else return Ve(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return vu("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ve(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ve(`Unknown optional content policy ${e.policy}.`),!0}return Ve(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const i=this.#t.get(e);if(!i){Ve(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const l of i.rbGroups)for(const c of l)c!==e&&this.#t.get(c)?._setVisible(Hr,!1,!0);i._setVisible(Hr,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const l=this.#t.get(i);if(l)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!l.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new xA;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class i2{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:l,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,l?.length>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,m)=>{this._onReceiveData({begin:h,chunk:m})}),e.addProgressListener((h,m)=>{this._onProgress({loaded:h,total:m})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(l){return l._begin!==e?!1:(l._enqueue(s),!0)});Xt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new r2(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new l2(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class r2{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=Bp(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class l2{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function o2(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let p=u(t);return p=unescape(p),p=h(p),p=m(p),l(p)}if(t=c(n),t){const p=m(t);return l(p)}if(t=s("filename","i").exec(n),t){t=t[1];let p=u(t);return p=m(p),l(p)}function s(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function i(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const x=new TextDecoder(p,{fatal:!0}),v=Vo(y);y=x.decode(v),e=!1}catch{}}return y}function l(p){return e&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),e&&(p=i("iso-8859-1",p))),p}function c(p){const y=[];let x;const v=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=v.exec(p))!==null;){let[,A,S,N]=x;if(A=parseInt(A,10),A in y){if(A===0)break;continue}y[A]=[S,N]}const w=[];for(let A=0;A<y.length&&A in y;++A){let[S,N]=y[A];N=u(N),S&&(N=unescape(N),A===0&&(N=h(N))),w.push(N)}return w.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let x=0;x<y.length;++x){const v=y[x].indexOf('"');v!==-1&&(y[x]=y[x].slice(0,v),y.length=x+1),y[x]=y[x].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function h(p){const y=p.indexOf("'");if(y===-1)return p;const x=p.slice(0,y),w=p.slice(y+1).replace(/^[^']*'/,"");return i(x,w)}function m(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,x,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,S){return String.fromCharCode(parseInt(S,16))}),i(x,w);try{w=atob(w)}catch{}return i(x,w)})}return""}function EA(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function Su(n){return URL.parse(n)?.origin??null}function jA({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(n.get("Content-Length"),10);return!Number.isInteger(l)||(i.suggestedLength=l,l<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function _A(n){const e=n.get("Content-Disposition");if(e){let t=o2(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Bp(t))return t}return null}function Wo(n,e){return new Gd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function CA(n){return n===200||n===206}function TA(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function DA(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ve(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class c2{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=EA(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d2(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new u2(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class d2{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,TA(s,this._withCredentials,this._abortController)).then(l=>{if(e._responseOrigin=Su(l.url),!CA(l.status))throw Wo(l.status,i);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:u,suggestedLength:h}=jA({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=_A(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ka("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:DA(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class u2{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const l=new Headers(e.headers);l.append("Range",`bytes=${t}-${s-1}`);const c=i.url;fetch(c,TA(l,this._withCredentials,this._abortController)).then(u=>{const h=Su(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!CA(u.status))throw Wo(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:DA(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const pm=200,gm=206;function h2(n){const e=n.response;return typeof e!="string"?e:Vo(e).buffer}class f2{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=EA(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[l,c]of this.headers)t.setRequestHeader(l,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=gm):i.expectedStatus=pm,t.responseType="arraybuffer",Xt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const l=i.status||pm;if(!(l===pm&&s.expectedStatus===gm)&&l!==s.expectedStatus){s.onError(i.status);return}const u=h2(i);if(l===gm){const h=i.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);m?s.onDone({begin:parseInt(m[1],10),chunk:u}):(Ve('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class m2{constructor(e){this._source=e,this._manager=new f2(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p2(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new g2(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class p2{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Su(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...m]=u.split(": ");return[h,m.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=jA({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=_A(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Wo(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g2{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Su(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Wo(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const y2=/^[a-z][a-z0-9\-+.]+:/i;function x2(n){if(y2.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class b2{constructor(e){this.source=e,this.url=x2(e.url),Xt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new v2(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new w2(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class v2{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Wo(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ka("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w2{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ro=Symbol("INITIAL_DATA");class RA{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:ro}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const s=this.#e[e];if(!s||s.data===ro)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==ro}delete(e){const t=this.#e[e];return!t||t.data===ro?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==ro&&(yield[e,t])}}}const A2=1e5,sv=30;class As{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#i=null;#a=null;#l=0;#r=0;#u=null;#o=null;#h=0;#d=0;#f=Object.create(null);#m=[];#p=null;#c=[];#g=new WeakMap;#y=null;static#x=new Map;static#v=new Map;static#w=new WeakMap;static#A=null;static#E=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#o=t,this.#d=s.scale*Wn.pixelRatio,this.#h=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:l,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+l],this.#r=i,this.#l=l,As.#R(),Fi(t,s),this.#e.promise.finally(()=>{As.#E.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=fs.platform;return st(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#f,t.styles),this.#_(t.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),As.#E.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*Wn.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Fi(this.#o,{rotation:i})),s!==this.#d){t?.(),this.#d=s;const l={div:null,properties:null,ctx:As.#C(this.#i)};for(const c of this.#c)l.properties=this.#g.get(c),l.div=c,this.#S(l)}}cancel(){const e=new Ka("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#m}#_(e){if(this.#s)return;this.#a.ctx??=As.#C(this.#i);const t=this.#c,s=this.#m;for(const i of e){if(t.length>A2){Ve("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const l=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id!==null&&this.#t.setAttribute("id",`${i.id}`),l.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#T(i)}}#T(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(t);const i=Me.transform(this.#y,e.transform);let l=Math.atan2(i[1],i[0]);const c=this.#f[e.fontName];c.vertical&&(l+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=As.fontFamilyMap.get(u)||u;const h=Math.hypot(i[2],i[3]),m=h*As.#k(u,c,this.#i);let p,y;l===0?(p=i[4],y=i[5]-m):(p=i[4]+m*Math.sin(l),y=i[5]-m*Math.cos(l));const x="calc(var(--total-scale-factor) *",v=t.style;this.#t===this.#o?(v.left=`${(100*p/this.#r).toFixed(2)}%`,v.top=`${(100*y/this.#l).toFixed(2)}%`):(v.left=`${x}${p.toFixed(2)}px)`,v.top=`${x}${y.toFixed(2)}px)`),v.fontSize=`${x}${(As.#A*h).toFixed(2)}px)`,v.fontFamily=u,s.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),l!==0&&(s.angle=l*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const A=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);A!==S&&Math.max(A,S)/Math.min(A,S)>1.5&&(w=!0)}if(w&&(s.canvasWidth=c.vertical?e.height:e.width),this.#g.set(t,s),this.#a.div=t,this.#a.properties=s,this.#S(this.#a),s.hasText&&this.#t.append(t),s.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#t.append(A)}}#S(e){const{div:t,properties:s,ctx:i}=e,{style:l}=t;let c="";if(As.#A>1&&(c=`scale(${1/As.#A})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=l,{canvasWidth:h,fontSize:m}=s;As.#j(i,m*this.#d,u);const{width:p}=i.measureText(t.textContent);p>0&&(c=`scaleX(${h*this.#d/p}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(l.transform=c)}static cleanup(){if(!(this.#E.size>0)){this.#x.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#C(e=null){let t=this.#v.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#w.set(t,{size:0,family:""})}return t}static#j(e,t,s){const i=this.#w.get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)}static#R(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#k(e,t,s){const i=this.#x.get(e);if(i)return i;const l=this.#C(s);l.canvas.width=l.canvas.height=sv,this.#j(l,sv,e);const c=l.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let m=.8;return u?m=u/(u+h):(fs.platform.isFirefox&&Ve("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?m=t.ascent:t.descent&&(m=1+t.descent)),this.#x.set(e,m),m}}class To{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(l){if(!l)return;let c=null;const u=l.name;if(u==="#text")c=l.value;else if(To.shouldBuildText(u))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&t.push({str:c}),!!l.children)for(const h of l.children)i(h)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const S2=100;function N2(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Gp,{docId:t}=e,s=n.url?kD(n.url):null,i=n.data?MD(n.data):null,l=n.httpHeaders||null,c=n.withCredentials===!0,u=n.password??null,h=n.range instanceof kA?n.range:null,m=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let p=n.worker instanceof Do?n.worker:null;const y=n.verbosity,x=typeof n.docBaseUrl=="string"&&!wu(n.docBaseUrl)?n.docBaseUrl:null,v=hd(n.cMapUrl),w=n.cMapPacked!==!1,A=n.CMapReaderFactory||(Ss?FD:Vb),S=hd(n.iccUrl),N=hd(n.standardFontDataUrl),j=n.StandardFontDataFactory||(Ss?UD:$b),C=hd(n.wasmUrl),R=n.WasmFactory||(Ss?qD:Gb),D=n.stopAtErrors!==!0,O=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,B=n.isEvalSupported!==!1,F=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ss,I=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ss&&(fs.platform.isFirefox||!globalThis.chrome),ee=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,z=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ss,Z=n.fontExtraProperties===!0,W=n.enableXfa===!0,ce=n.ownerDocument||globalThis.document,me=n.disableRange===!0,L=n.disableStream===!0,V=n.disableAutoFetch===!0,$=n.pdfBug===!0,H=n.CanvasFactory||(Ss?zD:PD),T=n.FilterFactory||(Ss?HD:BD),q=n.enableHWA===!0,M=n.useWasm!==!1,G=h?h.length:n.length??NaN,de=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ss&&!z,re=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(A===Vb&&j===$b&&R===Gb&&v&&N&&C&&mo(v,document.baseURI)&&mo(N,document.baseURI)&&mo(C,document.baseURI)),xe=null;dD(y);const Ee={canvasFactory:new H({ownerDocument:ce,enableHWA:q}),filterFactory:new T({docId:t,ownerDocument:ce}),cMapReaderFactory:re?null:new A({baseUrl:v,isCompressed:w}),standardFontDataFactory:re?null:new j({baseUrl:N}),wasmFactory:re?null:new R({baseUrl:C})};p||(p=Do.create({verbosity:y,port:Yr.workerPort}),e._worker=p);const Le={docId:t,apiVersion:"5.3.93",data:i,password:u,disableAutoFetch:V,rangeChunkSize:m,length:G,docBaseUrl:x,enableXfa:W,evaluatorOptions:{maxImageSize:O,disableFontFace:z,ignoreErrors:D,isEvalSupported:B,isOffscreenCanvasSupported:F,isImageDecoderSupported:I,canvasMaxAreaInBytes:ee,fontExtraProperties:Z,useSystemFonts:de,useWasm:M,useWorkerFetch:re,cMapUrl:v,iccUrl:S,standardFontDataUrl:N,wasmUrl:C}},he={ownerDocument:ce,pdfBug:$,styleElement:xe,loadingParams:{disableAutoFetch:V,enableXfa:W}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const $e=p.messageHandler.sendWithPromise("GetDocRequest",Le,i?[i.buffer]:null);let ge;if(h)ge=new i2(h,{disableRange:me,disableStream:L});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const we=mo(s)?c2:Ss?b2:m2;ge=new we({url:s,length:G,httpHeaders:l,withCredentials:c,rangeChunkSize:m,disableRange:me,disableStream:L})}return $e.then(we=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ke=new po(t,we,p.port),te=new _2(ke,e,ge,he,Ee);e._transport=te,ke.send("Ready",null)})}).catch(e._capability.reject),e}class Gp{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Gp.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class kA{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#i=[];constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#i.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#i)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#n)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class E2{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class j2{#e=!1;constructor(e,t,s,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new Fb:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new RA,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:l=!1}={}){return new Go({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:l})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=Ga.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:m=null,printAnnotationStorage:p=null,isEditing:y=!1}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(s,i,p,y),{renderingIntent:v,cacheKey:w}=x;this.#e=!1,u||=this._transport.getOptionalContentConfig(v);let A=this._intentStates.get(w);A||(A=Object.create(null),this._intentStates.set(w,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const S=!!(v&Qs.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const N=R=>{A.renderTasks.delete(j),S&&(this.#e=!0),this.#t(),R?(j.capability.reject(R),this._abortOperatorList({intentState:A,reason:R instanceof Error?R:new Error(R)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new Vr({callback:N,params:{canvasContext:e,viewport:t,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:m});(A.renderTasks||=new Set).add(j);const C=j.task;return Promise.all([A.displayReadyCapability.promise,u]).then(([R,D])=>{if(this.destroyed){N();return}if(this._stats?.time("Rendering"),!(D.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:R,optionalContentConfig:D}),j.operatorListChanged()}).catch(N),C}getOperatorList({intent:e="display",annotationMode:t=Ga.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(e,t,s,i,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>To.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function l(){c.read().then(function({value:h,done:m}){if(m){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},i)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new Fb),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:l,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:l,modifiedIds:i},c).getReader(),m=this._intentStates.get(t);m.streamReader=h;const p=()=>{h.read().then(({value:y,done:x})=>{if(x){m.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,m),p())},y=>{if(m.streamReader=null,!this._transport.destroyed){if(m.operatorList){m.operatorList.lastChunk=!0;for(const x of m.renderTasks)x.operatorListChanged();this.#t()}if(m.displayReadyCapability)m.displayReadyCapability.reject(y);else if(m.opListReadCapability)m.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Pp){let i=S2;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Ka(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,l]of this._intentStates)if(l===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Ya,Sn,ma,Mi,cu,Li,Oi,Es,kd,MA,LA,go,Qr,Md;const _t=class _t{constructor({name:e=null,port:t=null,verbosity:s=uD()}={}){Hn(this,Es);Hn(this,Ya,Promise.withResolvers());Hn(this,Sn,null);Hn(this,ma,null);Hn(this,Mi,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(jt(_t,Oi).has(t))throw new Error("Cannot use more than one PDFWorker per port.");jt(_t,Oi).set(t,this),zn(this,Es,MA).call(this,t)}else zn(this,Es,LA).call(this)}get promise(){return jt(this,Ya).promise}get port(){return jt(this,ma)}get messageHandler(){return jt(this,Sn)}destroy(){this.destroyed=!0,jt(this,Mi)?.terminate(),ks(this,Mi,null),jt(_t,Oi).delete(jt(this,ma)),ks(this,ma,null),jt(this,Sn)?.destroy(),ks(this,Sn,null)}static create(e){const t=jt(this,Oi).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new _t(e)}static get workerSrc(){if(Yr.workerSrc)return Yr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return st(this,"_setupFakeWorkerGlobal",(async()=>jt(this,Qr,Md)?jt(this,Qr,Md):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ya=new WeakMap,Sn=new WeakMap,ma=new WeakMap,Mi=new WeakMap,cu=new WeakMap,Li=new WeakMap,Oi=new WeakMap,Es=new WeakSet,kd=function(){jt(this,Ya).resolve(),jt(this,Sn).send("configure",{verbosity:this.verbosity})},MA=function(e){ks(this,ma,e),ks(this,Sn,new po("main","worker",e)),jt(this,Sn).on("ready",()=>{}),zn(this,Es,kd).call(this)},LA=function(){if(jt(_t,Li)||jt(_t,Qr,Md)){zn(this,Es,go).call(this);return}let{workerSrc:e}=_t;try{_t._isSameOrigin(window.location,e)||(e=_t._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new po("main","worker",t),i=()=>{l.abort(),s.destroy(),t.terminate(),this.destroyed?jt(this,Ya).reject(new Error("Worker was destroyed")):zn(this,Es,go).call(this)},l=new AbortController;t.addEventListener("error",()=>{jt(this,Mi)||i()},{signal:l.signal}),s.on("test",u=>{if(l.abort(),this.destroyed||!u){i();return}ks(this,Sn,s),ks(this,ma,t),ks(this,Mi,t),zn(this,Es,kd).call(this)}),s.on("ready",u=>{if(l.abort(),this.destroyed){i();return}try{c()}catch{zn(this,Es,go).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{vu("The worker has been disabled.")}zn(this,Es,go).call(this)},go=function(){jt(_t,Li)||(Ve("Setting up fake worker."),ks(_t,Li,!0)),_t._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){jt(this,Ya).reject(new Error("Worker was destroyed"));return}const t=new ID;ks(this,ma,t);const s=`fake${ob(_t,cu)._++}`,i=new po(s+"_worker",s,t);e.setup(i,t),ks(this,Sn,new po(s,s+"_worker",t)),zn(this,Es,kd).call(this)}).catch(e=>{jt(this,Ya).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Qr=new WeakSet,Md=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Hn(_t,Qr),Hn(_t,cu,0),Hn(_t,Li,!1),Hn(_t,Oi,new WeakMap),Ss&&(ks(_t,Li,!0),Yr.workerSrc||="./pdf.worker.mjs"),_t._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},_t._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},_t.fromPort=e=>{if(SD("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _t.create(e)};let Do=_t;class _2{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#i=null;constructor(e,t,s,i,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new RA,this.fontLoader=new DD({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#a(e,t=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return st(this,"annotationStorage",new Up)}getRenderingIntent(e,t=Ga.ENABLE,s=null,i=!1,l=!1){let c=Qs.DISPLAY,u=Jm;switch(e){case"any":c=Qs.ANY;break;case"display":break;case"print":c=Qs.PRINT;break;default:Ve(`getRenderingIntent - invalid intent: ${e}`)}const h=c&Qs.PRINT&&s instanceof bA?s:this.annotationStorage;switch(t){case Ga.DISABLE:c+=Qs.ANNOTATIONS_DISABLE;break;case Ga.ENABLE:break;case Ga.ENABLE_FORMS:c+=Qs.ANNOTATIONS_FORMS;break;case Ga.ENABLE_STORAGE:c+=Qs.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Ve(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(c+=Qs.IS_EDITING),l&&(c+=Qs.OPLIST);const{ids:m,hash:p}=h.modifiedIds,y=[c,u.hash,p];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),As.cleanup(),this._networkStream?.cancelAllRequests(new Ka("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},i.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){i.close();return}Xt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{this._fullReader.cancel(l),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:l,contentLength:c}=this._fullReader;return(!i||!l)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{t.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:l,contentLength:c}}),e.on("GetRangeReader",(s,i)=>{Xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){i.close();return}i.onPull=()=>{l.read().then(function({value:c,done:u}){if(u){i.close();return}Xt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{i.error(c)})},i.onCancel=c=>{l.cancel(c),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new E2(s,this))}),e.on("DocException",s=>{t._capability.reject(Ms(s))}),e.on("PasswordRequest",s=>{this.#i=Promise.withResolvers();try{if(!t.onPassword)throw Ms(s);const i=l=>{l instanceof Error?this.#i.reject(l):this.#i.resolve({password:l})};t.onPassword(i,s.code)}catch(i){this.#i.reject(i)}return this.#i.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in l){const m=l.error;Ve(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,p)=>globalThis.FontInspector.fontAdded(m,p):null,u=new RD(l,c);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:h}=l;Xt(h,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,p]of m.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,l,c])=>{if(this.destroyed)return;const u=this.#t.get(i);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#s.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,e);const c=new j2(t,l,this,this._params.pdfBug);return this.#t.set(t,c),c});return this.#s.set(t,i),i}getPageIndex(e){return ep(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#a("GetOptionalContentConfig").then(t=>new a2(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new s2(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),As.cleanup()}}cachedPageNumber(e){if(!ep(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class C2{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Vr{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:l,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:m,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:x=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=m,this._pdfBug=y,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new C2(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Vr.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Vr.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:l,background:c}=this.params;this.gfx=new Gr(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:i,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Vr.#t.delete(this._canvas),e||=new Pp(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Vr.#t.delete(this._canvas),this.callback())))}}const OA="5.3.93",T2="cbeef3233";function nv(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function lo(n){return Math.max(0,Math.min(255,255*n))}class av{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lo(e),[e,e,e]}static G_HTML([e]){const t=nv(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(lo)}static RGB_HTML(e){return`#${e.map(nv).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[lo(1-Math.min(1,e+i)),lo(1-Math.min(1,s+i)),lo(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,l=1-t,c=1-s,u=Math.min(i,l,c);return["CMYK",i,l,c,u]}}class D2{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){xt("Abstract method `_createSVG` called.")}}class Yd extends D2{_createSVG(e){return document.createElementNS(ha,e)}}class IA{static setupStorage(e,t,s,i,l){const c=i.getValue(t,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),l==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?e.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&e.removeAttribute("checked"),l==="print")break;e.addEventListener("change",u=>{i.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),l==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,m=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(t,{value:m})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:l}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${i}`);for(const[h,m]of Object.entries(c))if(m!=null)switch(h){case"class":m.length&&e.setAttribute(h,m.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",m);break;case"style":Object.assign(e.style,m);break;case"textContent":e.textContent=m;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,m)}u&&l.addLinkAttributes(e,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(e,c.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,l=e.intent||"display",c=document.createElement(i.name);i.attributes&&this.setAttributes({html:c,element:i,intent:l,linkService:s});const u=l!=="richText",h=e.div;if(h.append(c),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=y}u&&h.setAttribute("class","xfaLayer xfaFont");const m=[];if(i.children.length===0){if(i.value){const y=document.createTextNode(i.value);c.append(y),u&&To.shouldBuildText(i.name)&&m.push(y)}return{textDivs:m}}const p=[[i,-1,c]];for(;p.length>0;){const[y,x,v]=p.at(-1);if(x+1===y.children.length){p.pop();continue}const w=y.children[++p.at(-1)[1]];if(w===null)continue;const{name:A}=w;if(A==="#text"){const N=document.createTextNode(w.value);m.push(N),v.append(N);continue}const S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,A):document.createElement(A);if(v.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:t,intent:l,linkService:s}),w.children?.length>0)p.push([w,-1,S]);else if(w.value){const N=document.createTextNode(w.value);u&&To.shouldBuildText(A)&&m.push(N),S.append(N)}}for(const y of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:m}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const R2=9,Ui=new WeakSet;class iv{static create(e){switch(e.data.annotationType){case Yt.LINK:return new PA(e);case Yt.TEXT:return new k2(e);case Yt.WIDGET:switch(e.data.fieldType){case"Tx":return new M2(e);case"Btn":return e.data.radioButton?new BA(e):e.data.checkBox?new O2(e):new I2(e);case"Ch":return new P2(e);case"Sig":return new L2(e)}return new Gi(e);case Yt.POPUP:return new sp(e);case Yt.FREETEXT:return new HA(e);case Yt.LINE:return new H2(e);case Yt.SQUARE:return new z2(e);case Yt.CIRCLE:return new F2(e);case Yt.POLYLINE:return new zA(e);case Yt.CARET:return new q2(e);case Yt.INK:return new Yp(e);case Yt.POLYGON:return new U2(e);case Yt.HIGHLIGHT:return new FA(e);case Yt.UNDERLINE:return new V2(e);case Yt.SQUIGGLY:return new $2(e);case Yt.STRIKEOUT:return new G2(e);case Yt.STAMP:return new UA(e);case Yt.FILEATTACHMENT:return new Y2(e);default:return new Ut(e)}}}class Ut{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Ut._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#n(t),this.#s?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-u)/l}%`,t.top=`${100*(c-e[3]+h)/c}%`,i===0?(t.width=`${100*(e[2]-e[0])/l}%`,t.height=`${100*(e[3]-e[1])/c}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",t.id),this instanceof Gi||(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex++,t.alternativeText&&(l.title=t.alternativeText),t.noRotate&&l.classList.add("norotate"),!t.rect||this instanceof sp){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,l),l}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(A>0||S>0){const j=`calc(${A}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;c.borderRadius=j}else if(this instanceof BA){const j=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=j}switch(t.borderStyle.style){case Br.SOLID:c.borderStyle="solid";break;case Br.DASHED:c.borderStyle="dashed";break;case Br.BEVELED:Ve("Unimplemented border style: beveled");break;case Br.INSET:Ve("Unimplemented border style: inset");break;case Br.UNDERLINE:c.borderBottomStyle="solid";break}const N=t.borderColor||null;N?(this.#t=!0,c.borderColor=Me.makeHexColor(N[0]|0,N[1]|0,N[2]|0)):c.borderWidth=0}const m=Me.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:y,pageX:x,pageY:v}=i.rawDims;c.left=`${100*(m[0]-x)/p}%`,c.top=`${100*(m[1]-v)/y}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(c.width=`${100*u/p}%`,c.height=`${100*h/y}%`):this.setRotation(w,l),l}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:l,height:c}=this;e%180!==0&&([l,c]=[c,l]),t.style.width=`${100*l/s}%`,t.style.height=`${100*c/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const l=i.detail[t],c=l[0],u=l.slice(1);i.target.style[s]=av[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:av[`${c}_rgb`](u)})};return st(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||s[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,l]of Object.entries(t)){const c=s[i];if(c){const u={detail:{[i]:l},target:e};c(u),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,l]=this.data.rect.map(A=>Math.fround(A));if(e.length===8){const[A,S,N,j]=e.subarray(2,6);if(i===A&&l===S&&t===N&&s===j)return}const{style:c}=this.container;let u;if(this.#t){const{borderColor:A,borderWidth:S}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=i-t,m=l-s,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const x=p.createElement("defs");y.append(x);const v=p.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),x.append(v);for(let A=2,S=e.length;A<S;A+=8){const N=e[A],j=e[A+1],C=e[A+2],R=e[A+3],D=p.createElement("rect"),O=(C-t)/h,B=(l-j)/m,F=(N-C)/h,I=(j-R)/m;D.setAttribute("x",O),D.setAttribute("y",B),D.setAttribute("width",F),D.setAttribute("height",I),v.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${B}" width="${F}" height="${I}"/>`)}this.#t&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:e}=this,t=this.#s=new sp({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:l,id:c,exportValues:u}of i){if(l===-1||c===t)continue;const h=typeof u=="string"?u:null,m=document.querySelector(`[data-element-id="${c}"]`);if(m&&!Ui.has(m)){Ve(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:m})}return s}for(const i of document.getElementsByName(e)){const{exportValue:l}=i,c=i.getAttribute("data-element-id");c!==t&&Ui.has(i)&&s.push({id:c,exportValue:l,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class PA extends Ut{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action),i=!0):e.attachment?(this.#t(s,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(this.#s(s,e.setOCGState),i=!0):e.dest?(this._bindLink(s,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,s=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,s),!1),this.#e()}#s(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const l=s.get(i);l&&(e[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:l,include:c}=t,u=[];if(i.length!==0||l.length!==0){const p=new Set(l);for(const y of i){const x=this._fieldObjects[y]||[];for(const{id:v}of x)p.add(v)}for(const y of Object.values(this._fieldObjects))for(const x of y)p.has(x.id)===c&&u.push(x)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,m=[];for(const p of u){const{id:y}=p;switch(m.push(y),p.type){case"text":{const v=p.defaultValue||"";h.setValue(y,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(y,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(y,{value:v});break}default:continue}const x=document.querySelector(`[data-element-id="${y}"]`);if(x){if(!Ui.has(x)){Ve(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}}),!1}}}class k2 extends Ut{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Gi extends Ut{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return fs.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,l){s.includes("mouse")?e.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(s,c=>{if(s==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:l(c)}})})}_setEventListeners(e,t,s,i){for(const[l,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,l,c,i),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Me.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||R2,l=e.style;let c;const u=2,h=m=>Math.round(10*m)/10;if(this.data.multiLine){const m=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(m/(cm*i))||1,y=m/p;c=Math.min(i,h(y/cm))}else{const m=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(i,h(m/cm))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=Me.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class M2 extends Gi{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const l=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=s),l.setValue(c.id,{[i]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let l=i.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=i.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ui.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const m=this.data.dateFormat||this.data.timeFormat;m&&(s.title=m),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",y=>{e.setValue(t,{value:y.target.value}),this.setPropertyOnSiblings(s,"value",y.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",y=>{const x=this.data.defaultFieldValue??"";s.value=h.userValue=x,h.formattedValue=null});let p=y=>{const{formattedValue:x}=h;x!=null&&(y.target.value=x),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",x=>{if(h.focused)return;const{target:v}=x;h.userValue&&(v.value=h.userValue),h.lastCommittedValue=v.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const v={value(w){h.userValue=w.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:A}=w.detail;h.formattedValue=A,A!=null&&w.target!==document.activeElement&&(w.target.value=A),e.setValue(t,{formattedValue:A})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{const{charLimit:A}=w.detail,{target:S}=w;if(A===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",A);let N=h.userValue;!N||N.length<=A||(N=N.slice(0,A),S.value=h.userValue=N,e.setValue(t,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(v,x)}),s.addEventListener("keydown",x=>{h.commitKey=1;let v=-1;if(x.key==="Escape"?v=0:x.key==="Enter"&&!this.data.multiLine?v=2:x.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:w}=x.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:v,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const y=p;p=null,s.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{value:v}=x.target;h.userValue=v,h.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),y(x)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:v,target:w}=x,{value:A,selectionStart:S,selectionEnd:N}=w;let j=S,C=N;switch(x.inputType){case"deleteWordBackward":{const R=A.substring(0,S).match(/\w*[^\w]*$/);R&&(j-=R[0].length);break}case"deleteWordForward":{const R=A.substring(S).match(/^[^\w]*\w*/);R&&(C+=R[0].length);break}case"deleteContentBackward":S===N&&(j-=1);break;case"deleteContentForward":S===N&&(C+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,change:v||"",willCommit:!1,selStart:j,selEnd:C}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(p&&s.addEventListener("blur",p),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class L2 extends Gi{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class O2 extends Gi{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Ui.add(l),l.setAttribute("data-element-id",s),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=t.fieldName,i&&l.setAttribute("checked",!0),l.setAttribute("exportValue",t.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const m of this._getElementsByName(u,s)){const p=h&&m.exportValue===t.exportValue;m.domElement&&(m.domElement.checked=p),e.setValue(m.id,{value:p})}e.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class BA extends Gi{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const c of this._getElementsByName(t.fieldName,s))e.setValue(c.id,{value:!1});const l=document.createElement("input");if(Ui.add(l),l.setAttribute("data-element-id",s),l.disabled=t.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=t.fieldName,i&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const m of this._getElementsByName(u,s))e.setValue(m.id,{value:!1});e.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:m=>{const p=c===m.detail.value;for(const y of this._getElementsByName(m.target.name)){const x=p&&y.id===s;y.domElement&&(y.domElement.checked=x),e.setValue(y.id,{value:x})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class I2 extends PA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class P2 extends Gi{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Ui.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const x of i.options)x.selected=x.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,s.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),l=!1),i.append(y)}let c=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),c=()=>{p.remove(),i.removeEventListener("input",c),c=null},i.addEventListener("input",c)}const u=p=>{const y=p?"value":"textContent",{options:x,multiple:v}=i;return v?Array.prototype.filter.call(x,w=>w.selected).map(w=>w[y]):x.selectedIndex===-1?null:x[x.selectedIndex][y]};let h=u(!1);const m=p=>{const y=p.target.options;return Array.prototype.map.call(y,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const y={value(x){c?.();const v=x.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const A of i.options)A.selected=w.has(A.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(x){i.multiple=!0},remove(x){const v=i.options,w=x.detail.remove;v[w].selected=!1,i.remove(w),v.length>0&&Array.prototype.findIndex.call(v,S=>S.selected)===-1&&(v[0].selected=!0),e.setValue(t,{value:u(!0),items:m(x)}),h=u(!1)},clear(x){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(x){const{index:v,displayValue:w,exportValue:A}=x.detail.insert,S=i.children[v],N=document.createElement("option");N.textContent=w,N.value=A,S?S.before(N):i.append(N),e.setValue(t,{value:u(!0),items:m(x)}),h=u(!1)},items(x){const{items:v}=x.detail;for(;i.length!==0;)i.remove(0);for(const w of v){const{displayValue:A,exportValue:S}=w,N=document.createElement("option");N.textContent=A,N.value=S,i.append(N)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:u(!0),items:m(x)}),h=u(!1)},indices(x){const v=new Set(x.detail.indices);for(const w of x.target.options)w.selected=v.has(w.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(y,p)}),i.addEventListener("input",p=>{const y=u(!0),x=u(!1);e.setValue(t,{value:y}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:x,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sp extends Ut{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Ut._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new B2({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${Ip}${i}`).join(",")),this.container}}class B2{#e=this.#_.bind(this);#t=this.#j.bind(this);#s=this.#C.bind(this);#n=this.#S.bind(this);#i=null;#a=null;#l=null;#r=null;#u=null;#o=null;#h=null;#d=!1;#f=null;#m=null;#p=null;#c=null;#g=null;#y=null;#x=!1;constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:l,contentsObj:c,richText:u,parent:h,rect:m,parentRect:p,open:y}){this.#a=e,this.#g=i,this.#l=c,this.#c=u,this.#o=h,this.#i=t,this.#p=m,this.#h=p,this.#u=s,this.#r=gA.toDateObject(l),this.trigger=s.flatMap(x=>x.getElementsToTriggerPopup());for(const x of this.trigger)x.addEventListener("click",this.#n),x.addEventListener("mouseenter",this.#s),x.addEventListener("mouseleave",this.#t),x.classList.add("popupTriggerArea");for(const x of s)x.container?.addEventListener("keydown",this.#e);this.#a.hidden=!0,y&&this.#S()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#i){const l=e.style.outlineColor=Me.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=this.#g,e.append(t),this.#r){const l=document.createElement("time");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#r.valueOf()})),l.dateTime=this.#r.toISOString(),t.append(l)}const i=this.#v;if(i)IA.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(this.#l);e.append(l)}this.#a.append(e)}get#v(){const e=this.#c,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#c.html||null}get#w(){return this.#v?.attributes?.style?.fontSize||0}get#A(){return this.#v?.attributes?.style?.color||null}#E(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#A,fontSize:this.#w?`calc(${this.#w}px * var(--total-scale-factor))`:""}};for(const l of e.split(`
`))t.push({name:"span",value:l,attributes:i});return s}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let l=0,c=i.length;l<c;++l){const u=i[l];s.append(document.createTextNode(u)),l<c-1&&s.append(document.createElement("br"))}return s}#_(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#S()}updateEdited({rect:e,popupContent:t}){this.#y||={contentsObj:this.#l,richText:this.#c},e&&(this.#m=null),t&&(this.#c=this.#E(t),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#c}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#m=null)}#T(){if(this.#m!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:l}}}=this.#o;let c=!!this.#h,u=c?this.#h:this.#p;for(const w of this.#u)if(!u||Me.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const h=Me.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=c?u[2]-u[0]+5:0,y=h[0]+p,x=h[1];this.#m=[100*(y-i)/t,100*(x-l)/s];const{style:v}=this.#a;v.left=`${this.#m[0]}%`,v.top=`${this.#m[1]}%`}#S(){this.#d=!this.#d,this.#d?(this.#C(),this.#a.addEventListener("click",this.#n),this.#a.addEventListener("keydown",this.#e)):(this.#j(),this.#a.removeEventListener("click",this.#n),this.#a.removeEventListener("keydown",this.#e))}#C(){this.#f||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#j(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#x=this.isVisible,this.#x&&(this.#a.hidden=!0)}maybeShow(){this.#x&&(this.#f||this.#C(),this.#x=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class HA extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=qe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class H2 extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),l=this.#e=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),l.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),l.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),l.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),l.setAttribute("stroke-width",e.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class z2 extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),l=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",t-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class F2 extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),l=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",t/2),c.setAttribute("cy",s/2),c.setAttribute("rx",t/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class zA extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:i},width:l,height:c}=this;if(!t)return this.container;const u=this.svgFactory.create(l,c,!0);let h=[];for(let p=0,y=t.length;p<y;p+=2){const x=t[p]-e[0],v=e[3]-t[p+1];h.push(`${x},${v}`)}h=h.join(" ");const m=this.#e=this.svgFactory.createElement(this.svgElementName);return m.setAttribute("points",h),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class U2 extends zA{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class q2 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Yp extends Ut{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?qe.HIGHLIGHT:qe.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:i,popupRef:l}}=this,{transform:c,width:u,height:h}=this.#s(t,e),m=this.svgFactory.create(u,h,!0),p=this.#e=this.svgFactory.createElement("svg:g");m.append(p),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let y=0,x=s.length;y<x;y++){const v=this.svgFactory.createElement(this.svgElementName);this.#t.push(v),v.setAttribute("points",s[y].join(",")),p.append(v)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:i}=e,l=this.#e;if(t>=0&&l.setAttribute("stroke-width",t||1),s)for(let c=0,u=this.#t.length;c<u;c++)this.#t[c].setAttribute("points",s[c].join(","));if(i){const{transform:c,width:u,height:h}=this.#s(this.data.rotation,i);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class FA extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=qe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class V2 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class $2 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class G2 extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class UA extends Ut{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=qe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Y2 extends Ut{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=fs.platform;return e.addEventListener("keydown",l=>{l.key==="Enter"&&(i?l.metaKey:l.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Wp{#e=null;#t=null;#s=new Map;#n=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:l,viewport:c,structTreeLayer:u}){this.div=e,this.#e=t,this.#t=s,this.#n=u||null,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#s.size>0}async#i(e,t,s){const i=e.firstChild||e,l=i.id=`${Ip}${t}`,c=await this.#n?.getAriaAttributes(l);if(c)for(const[u,h]of c)i.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,s=this.div;Fi(s,this.viewport);const i=new Map,l={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Yd,annotationStorage:e.annotationStorage||new Up,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const u=c.annotationType===Yt.POPUP;if(u){const p=i.get(c.id);if(!p)continue;l.elements=p}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const h=iv.create(l);if(!h.isRenderable)continue;if(!u&&c.popupRef){const p=i.get(c.popupRef);p?p.push(h):i.set(c.popupRef,[h])}const m=h.render();c.hidden&&(m.style.visibility="hidden"),await this.#i(m,c.id,l.elements),h._isEditable&&(this.#s.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#a()}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new Yd,parent:this};for(const i of e){i.borderStyle||=Wp._defaultBorderStyle,s.data=i;const l=iv.create(s);if(!l.isRenderable)continue;const c=l.render();await this.#i(c,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Fi(t,{rotation:e.rotation}),this.#a(),t.hidden=!1}#a(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:l}=i;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):i.append(s);const c=this.#s.get(t);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(e){return this.#s.get(e)}static get _defaultBorderStyle(){return st(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Br.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const gd=/\r\n?|\n/g;class Jt extends Oe{#e;#t="";#s=`${this.id}-editor`;#n=null;#i;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Jt.prototype,t=l=>l.isEmpty(),s=Ja.TRANSLATE_SMALL,i=Ja.TRANSLATE_BIG;return st(this,"_keyboardManager",new Yo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=qe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||Jt._defaultColor||Oe._defaultLineColor,this.#i=e.fontSize||Jt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Oe.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case at.FREETEXT_SIZE:Jt._defaultFontSize=t;break;case at.FREETEXT_COLOR:Jt._defaultColor=t;break}}updateParams(e,t){switch(e){case at.FREETEXT_SIZE:this.#a(t);break;case at.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[at.FREETEXT_SIZE,Jt._defaultFontSize],[at.FREETEXT_COLOR,Jt._defaultColor||Oe._defaultLineColor]]}get propertiesToUpdate(){return[[at.FREETEXT_SIZE,this.#i],[at.FREETEXT_COLOR,this.#e]]}#a(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#i)*this.parentScale),this.#i=i,this.#u()},s=this.#i;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=i=>{this.#e=this.editorDiv.style.color=i},s=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Jt._internalPadding*e,-(Jt._internalPadding+this.#i)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(Jt.#o(s)),t=s);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:l}=this,c=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",i.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#r().trimEnd();if(e===t)return;const s=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Jt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[m,p]=this.pageDimensions,[y,x]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=e+(c[0]-y)/m,w=t+this.height-(c[1]-x)/p;break;case 90:v=e+(c[0]-y)/m,w=t-(c[1]-x)/p,[u,h]=[h,-u];break;case 180:v=e-this.width+(c[0]-y)/m,w=t-(c[1]-x)/p,[u,h]=[-u,-h];break;case 270:v=e+(c[0]-y-this.height*p)/m,w=t+(c[1]-x-this.width*m)/p,[u,h]=[-h,u];break}this.setAt(v*i,w*l,u,h)}else this._moveAfterPaste(e,t);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(gd,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=Jt.#f(t.getData("text")||"").replaceAll(gd,`
`);if(!i)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!i.includes(`
`)){c.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=c,m=[],p=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(gd,"")),v!==this.editorDiv){let w=m;for(const A of this.editorDiv.childNodes){if(A===v){w=p;continue}w.push(Jt.#o(A))}}m.push(u.nodeValue.slice(0,h).replaceAll(gd,""))}else if(u===this.editorDiv){let v=m,w=0;for(const A of this.editorDiv.childNodes)w++===h&&(v=p),v.push(Jt.#o(A))}this.#t=`${m.join(`
`)}${i}${p.join(`
`)}`,this.#h();const y=new Range;let x=Math.sumPrecise(m.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(x<=w){y.setStart(v,x),y.setEnd(v,x);break}x-=w}l.removeAllRanges(),l.addRange(y)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll(""," ")}static#f(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,s){let i=null;if(e instanceof HA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:m,id:p,popupRef:y},textContent:x,textPosition:v,parent:{page:{pageNumber:w}}}=e;if(!x||x.length===0)return null;i=e={annotationType:qe.FREETEXT,color:Array.from(u),fontSize:c,value:x.join(`
`),position:v,pageIndex:w-1,rect:h.slice(0),rotation:m,annotationElementId:p,id:p,deleted:!1,popupRef:y}}const l=await super.deserialize(e,t,s);return l.#i=e.fontSize,l.#e=Me.makeHexColor(...e.color),l.#t=Jt.#f(e.value),l._initialData=i,l}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Jt._internalPadding*this.parentScale,s=this.getRect(t,t),i=Oe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),l={annotationType:qe.FREETEXT,color:i,fontSize:this.#i,value:this.#d(),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.isCopy=!0,l):this.annotationElementId&&!this.#m(l)?null:(l.id=this.annotationElementId,l)}#m(e){const{value:t,fontSize:s,color:i,pageIndex:l}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((c,u)=>c!==i[u])||e.pageIndex!==l}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:s}=t;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.#e,t.replaceChildren();for(const l of this.#t.split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),t.append(c)}const i=Jt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ce{static PRECISION=1e-4;toSVGPath(){xt("Abstract method `toSVGPath` must be implemented.")}get box(){xt("Abstract getter `box` must be implemented.")}serialize(e,t){xt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,l,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u]*i,c[u+1]=s+e[u+1]*l;return c}static _rescaleAndSwap(e,t,s,i,l,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u+1]*i,c[u+1]=s+e[u]*l;return c}static _translate(e,t,s,i){i||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)i[l]=t+e[l],i[l+1]=s+e[l+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,l){switch(l){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,l,c){return[(e+5*s)/6,(t+5*i)/6,(5*s+l)/6,(5*i+c)/6,(s+l)/2,(i+c)/2]}}class Ri{#e;#t=[];#s;#n;#i=[];#a=new Float32Array(18);#l;#r;#u;#o;#h;#d;#f=[];static#m=8;static#p=2;static#c=Ri.#m+Ri.#p;constructor({x:e,y:t},s,i,l,c,u=0){this.#e=s,this.#d=l*i,this.#n=c,this.#a.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=u,this.#o=Ri.#m*i,this.#u=Ri.#c*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#a[8])}#g(){const e=this.#a.subarray(4,6),t=this.#a.subarray(16,18),[s,i,l,c]=this.#e;return[(this.#l+(e[0]-t[0])/2-s)/l,(this.#r+(e[1]-t[1])/2-i)/c,(this.#l+(t[0]-e[0])/2-s)/l,(this.#r+(t[1]-e[1])/2-i)/c]}add({x:e,y:t}){this.#l=e,this.#r=t;const[s,i,l,c]=this.#e;let[u,h,m,p]=this.#a.subarray(8,12);const y=e-m,x=t-p,v=Math.hypot(y,x);if(v<this.#u)return!1;const w=v-this.#o,A=w/v,S=A*y,N=A*x;let j=u,C=h;u=m,h=p,m+=S,p+=N,this.#f?.push(e,t);const R=-N/w,D=S/w,O=R*this.#d,B=D*this.#d;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([m+O,p+B],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([m-O,p-B],16),isNaN(this.#a[6])?(this.#i.length===0&&(this.#a.set([u+O,h+B],2),this.#i.push(NaN,NaN,NaN,NaN,(u+O-s)/l,(h+B-i)/c),this.#a.set([u-O,h-B],14),this.#t.push(NaN,NaN,NaN,NaN,(u-O-s)/l,(h-B-i)/c)),this.#a.set([j,C,u,h,m,p],6),!this.isEmpty()):(this.#a.set([j,C,u,h,m,p],6),Math.abs(Math.atan2(C-h,j-u)-Math.atan2(N,S))<Math.PI/2?([u,h,m,p]=this.#a.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((u+m)/2-s)/l,((h+p)/2-i)/c),[u,h,j,C]=this.#a.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((j+u)/2-s)/l,((C+h)/2-i)/c),!0):([j,C,u,h,m,p]=this.#a.subarray(0,6),this.#i.push(((j+5*u)/6-s)/l,((C+5*h)/6-i)/c,((5*u+m)/6-s)/l,((5*h+p)/6-i)/c,((u+m)/2-s)/l,((h+p)/2-i)/c),[m,p,u,h,j,C]=this.#a.subarray(12,18),this.#t.push(((j+5*u)/6-s)/l,((C+5*h)/6-i)/c,((5*u+m)/6-s)/l,((5*h+p)/6-i)/c,((u+m)/2-s)/l,((h+p)/2-i)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#v(s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#x(s),s.join(" ")}#y(){const[e,t,s,i]=this.#e,[l,c,u,h]=this.#g();return`M${(this.#a[2]-e)/s} ${(this.#a[3]-t)/i} L${(this.#a[4]-e)/s} ${(this.#a[5]-t)/i} L${l} ${c} L${u} ${h} L${(this.#a[16]-e)/s} ${(this.#a[17]-t)/i} L${(this.#a[14]-e)/s} ${(this.#a[15]-t)/i} Z`}#x(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,s,i,l]=this.#e,c=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,m,p,y]=this.#g();e.push(`L${(c[0]-t)/i} ${(c[1]-s)/l} L${h} ${m} L${p} ${y} L${(u[0]-t)/i} ${(u[1]-s)/l}`)}newFreeDrawOutline(e,t,s,i,l,c){return new qA(e,t,s,i,l,c)}getOutlines(){const e=this.#i,t=this.#t,s=this.#a,[i,l,c,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let y=0,x=h.length-2;y<x;y+=2)h[y]=(this.#f[y]-i)/c,h[y+1]=(this.#f[y+1]-l)/u;if(h[h.length-2]=(this.#l-i)/c,h[h.length-1]=(this.#r-l)/u,isNaN(s[6])&&!this.isEmpty())return this.#w(h);const m=new Float32Array(this.#i.length+24+this.#t.length);let p=e.length;for(let y=0;y<p;y+=2){if(isNaN(e[y])){m[y]=m[y+1]=NaN;continue}m[y]=e[y],m[y+1]=e[y+1]}p=this.#E(m,p);for(let y=t.length-6;y>=6;y-=6)for(let x=0;x<6;x+=2){if(isNaN(t[y+x])){m[p]=m[p+1]=NaN,p+=2;continue}m[p]=t[y+x],m[p+1]=t[y+x+1],p+=2}return this.#A(m,p),this.newFreeDrawOutline(m,h,this.#e,this.#h,this.#s,this.#n)}#w(e){const t=this.#a,[s,i,l,c]=this.#e,[u,h,m,p]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-s)/l,(t[3]-i)/c,NaN,NaN,NaN,NaN,(t[4]-s)/l,(t[5]-i)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,(t[16]-s)/l,(t[17]-i)/c,NaN,NaN,NaN,NaN,(t[14]-s)/l,(t[15]-i)/c],0),this.newFreeDrawOutline(y,e,this.#e,this.#h,this.#s,this.#n)}#A(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#E(e,t){const s=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[l,c,u,h]=this.#e,[m,p,y,x]=this.#g();return e.set([NaN,NaN,NaN,NaN,(s[0]-l)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,m,p,NaN,NaN,NaN,NaN,y,x,NaN,NaN,NaN,NaN,(i[0]-l)/u,(i[1]-c)/h],t),t+=24}}class qA extends Ce{#e;#t=new Float32Array(4);#s;#n;#i;#a;#l;constructor(e,t,s,i,l,c){super(),this.#l=e,this.#i=t,this.#e=s,this.#a=i,this.#s=l,this.#n=c,this.lastPoint=[NaN,NaN],this.#r(c);const[u,h,m,p]=this.#t;for(let y=0,x=e.length;y<x;y+=2)e[y]=(e[y]-u)/m,e[y+1]=(e[y+1]-h)/p;for(let y=0,x=t.length;y<x;y+=2)t[y]=(t[y]-u)/m,t[y+1]=(t[y+1]-h)/p}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,s=this.#l.length;t<s;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,i],l){const c=s-e,u=i-t;let h,m;switch(l){case 0:h=Ce._rescale(this.#l,e,i,c,-u),m=Ce._rescale(this.#i,e,i,c,-u);break;case 90:h=Ce._rescaleAndSwap(this.#l,e,t,c,u),m=Ce._rescaleAndSwap(this.#i,e,t,c,u);break;case 180:h=Ce._rescale(this.#l,s,t,-c,u),m=Ce._rescale(this.#i,s,t,-c,u);break;case 270:h=Ce._rescaleAndSwap(this.#l,s,i,-c,-u),m=Ce._rescaleAndSwap(this.#i,s,i,-c,-u);break}return{outline:Array.from(h),points:[Array.from(m)]}}#r(e){const t=this.#l;let s=t[4],i=t[5];const l=[s,i,s,i];let c=s,u=i;const h=e?Math.max:Math.min;for(let p=6,y=t.length;p<y;p+=6){const x=t[p+4],v=t[p+5];if(isNaN(t[p]))Me.pointBoundingBox(x,v,l),u<v?(c=x,u=v):u===v&&(c=h(c,x));else{const w=[1/0,1/0,-1/0,-1/0];Me.bezierBoundingBox(s,i,...t.slice(p,p+6),w),Me.rectBoundingBox(...w,l),u<w[3]?(c=w[2],u=w[3]):u===w[3]&&(c=h(c,w[2]))}s=x,i=v}const m=this.#t;m[0]=l[0]-this.#s,m[1]=l[1]-this.#s,m[2]=l[2]-l[0]+2*this.#s,m[3]=l[3]-l[1]+2*this.#s,this.lastPoint=[c,u]}get box(){return this.#t}newOutliner(e,t,s,i,l,c=0){return new Ri(e,t,s,i,l,c)}getNewOutline(e,t){const[s,i,l,c]=this.#t,[u,h,m,p]=this.#e,y=l*m,x=c*p,v=s*m+u,w=i*p+h,A=this.newOutliner({x:this.#i[0]*y+v,y:this.#i[1]*x+w},this.#e,this.#a,e,this.#n,t??this.#s);for(let S=2;S<this.#i.length;S+=2)A.add({x:this.#i[S]*y+v,y:this.#i[S+1]*x+w});return A.getOutlines()}}class np{#e;#t;#s=[];#n=[];constructor(e,t=0,s=0,i=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:v,y:w,width:A,height:S}of e){const N=Math.floor((v-t)/c)*c,j=Math.ceil((v+A+t)/c)*c,C=Math.floor((w-t)/c)*c,R=Math.ceil((w+S+t)/c)*c,D=[N,C,R,!0],O=[j,C,R,!1];this.#s.push(D,O),Me.rectBoundingBox(N,C,j,R,l)}const u=l[2]-l[0]+2*s,h=l[3]-l[1]+2*s,m=l[0]-s,p=l[1]-s,y=this.#s.at(i?-1:-2),x=[y[0],y[2]];for(const v of this.#s){const[w,A,S]=v;v[0]=(w-m)/u,v[1]=(A-p)/h,v[2]=(S-p)/h}this.#e=new Float32Array([m,p,u,h]),this.#t=x}getOutlines(){this.#s.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#s)t[3]?(e.push(...this.#u(t)),this.#l(t)):(this.#r(t),e.push(...this.#u(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const c of e){const[u,h,m]=c;t.push([u,h,c],[u,m,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const h=t[c][2],m=t[c+1][2];h.push(m),m.push(h),s.add(h),s.add(m)}const i=[];let l;for(;s.size>0;){const c=s.values().next().value;let[u,h,m,p,y]=c;s.delete(c);let x=u,v=h;for(l=[u,m],i.push(l);;){let w;if(s.has(p))w=p;else if(s.has(y))w=y;else break;s.delete(w),[u,h,m,p,y]=w,x!==u&&(l.push(x,v,u,v===h?h:m),x=u),v=v===h?m:h}l.push(x,v)}return new W2(i,this.#e,this.#t)}#a(e){const t=this.#n;let s=0,i=t.length-1;for(;s<=i;){const l=s+i>>1,c=t[l][0];if(c===e)return l;c<e?s=l+1:i=l-1}return i+1}#l([,e,t]){const s=this.#a(e);this.#n.splice(s,0,[e,t])}#r([,e,t]){const s=this.#a(e);for(let i=s;i<this.#n.length;i++){const[l,c]=this.#n[i];if(l!==e)break;if(l===e&&c===t){this.#n.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[l,c]=this.#n[i];if(l!==e)break;if(l===e&&c===t){this.#n.splice(i,1);return}}}#u(e){const[t,s,i]=e,l=[[t,s,i]],c=this.#a(i);for(let u=0;u<c;u++){const[h,m]=this.#n[u];for(let p=0,y=l.length;p<y;p++){const[,x,v]=l[p];if(!(m<=x||v<=h)){if(x>=h){if(v>m)l[p][1]=m;else{if(y===1)return[];l.splice(p,1),p--,y--}continue}l[p][2]=h,v>m&&l.push([t,m,v])}}}return l}}class W2 extends Ce{#e;#t;constructor(e,t,s){super(),this.#t=e,this.#e=t,this.lastPoint=s}toSVGPath(){const e=[];for(const t of this.#t){let[s,i]=t;e.push(`M${s} ${i}`);for(let l=2;l<t.length;l+=2){const c=t[l],u=t[l+1];c===s?(e.push(`V${u}`),i=u):u===i&&(e.push(`H${c}`),s=c)}e.push("Z")}return e.join(" ")}serialize([e,t,s,i],l){const c=[],u=s-e,h=i-t;for(const m of this.#t){const p=new Array(m.length);for(let y=0;y<m.length;y+=2)p[y]=e+m[y]*u,p[y+1]=i-m[y+1]*h;c.push(p)}return c}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class ap extends Ri{newFreeDrawOutline(e,t,s,i,l,c){return new X2(e,t,s,i,l,c)}}class X2 extends qA{newOutliner(e,t,s,i,l,c=0){return new ap(e,t,s,i,l,c)}}class fn{#e=null;#t=null;#s;#n=null;#i=!1;#a=!1;#l=null;#r;#u=null;#o=null;#h;static#d=null;static get _keyboardManager(){return st(this,"_keyboardManager",new Yo([[["Escape","mac+Escape"],fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fn.prototype._moveToPrevious],[["Home","mac+Home"],fn.prototype._moveToBeginning],[["End","mac+End"],fn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#a=!1,this.#h=at.HIGHLIGHT_COLOR,this.#l=e):(this.#a=!0,this.#h=at.HIGHLIGHT_DEFAULT_COLOR),this.#o=e?._uiManager||t,this.#r=this.#o._eventBus,this.#s=e?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",fn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#l&&(e.ariaControls=`${this.#l.id}_colorpicker_dropdown`);const t=this.#o._signal;e.addEventListener("click",this.#c.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#f();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#f(){const e=document.createElement("div"),t=this.#o._signal;e.addEventListener("contextmenu",_n,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#l&&(e.id=`${this.#l.id}_colorpicker_dropdown`);for(const[s,i]of this.#o.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",i),l.title=s,l.setAttribute("data-l10n-id",fn.#d[s]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=i,l.ariaSelected=i===this.#s,l.addEventListener("click",this.#m.bind(this,i),{signal:t}),e.append(l)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#m(e,t){t.stopPropagation(),this.#r.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#c(e);return}const t=e.target.getAttribute("data-color");t&&this.#m(t,e)}_moveToNext(e){if(!this.#y){this.#c(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#c(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#y){this.#c(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#y){this.#c(e);return}this.#n.lastChild?.focus()}#p(e){fn._keyboardManager.exec(this,e)}#c(e){if(this.#y){this.hideDropdown();return}if(this.#i=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#o.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#f();this.#e.append(t)}#g(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#y(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#o.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class zt extends Oe{#e=null;#t=0;#s;#n=null;#i=null;#a=null;#l=null;#r=0;#u=null;#o=null;#h=null;#d=!1;#f=null;#m;#p=null;#c="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=qe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=zt.prototype;return st(this,"_keyboardManager",new Yo([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||zt._defaultColor,this.#g=e.thickness||zt._defaultThickness,this.#m=e.opacity||zt._defaultOpacity,this.#s=e.boxes||null,this.#y=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#T()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#r=e.focusOffset,this.#x(),this.#T(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#x(){const e=new np(this.#s,.001);this.#o=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const t=new np(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#a=t.getOutlines();const{lastPoint:s}=this.#a;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#o=e;const i=1.5;if(this.#a=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#h=t,this.#n=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:zt.#S(this.#o.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:zt.#S(this.#a.box,p),path:{d:this.#a.toSVGPath()}})}const[l,c,u,h]=e.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=u,this.height=h;break;case 90:{const[p,y]=this.parentDimensions;this.x=c,this.y=1-l,this.width=u*y/p,this.height=h*p/y;break}case 180:this.x=1-l,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-c,this.y=l,this.width=u*y/p,this.height=h*p/y;break}}const{lastPoint:m}=this.#a;this.#f=[(m[0]-l)/u,(m[1]-c)/h]}static initialize(e,t){Oe.initialize(e,t),zt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case at.HIGHLIGHT_DEFAULT_COLOR:zt._defaultColor=t;break;case at.HIGHLIGHT_THICKNESS:zt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case at.HIGHLIGHT_COLOR:this.#w(t);break;case at.HIGHLIGHT_THICKNESS:this.#A(t);break}}static get defaultPropertiesToUpdate(){return[[at.HIGHLIGHT_DEFAULT_COLOR,zt._defaultColor],[at.HIGHLIGHT_THICKNESS,zt._defaultThickness]]}get propertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,this.color||zt._defaultColor],[at.HIGHLIGHT_THICKNESS,this.#g||zt._defaultThickness],[at.HIGHLIGHT_FREE,this.#d]]}#w(e){const t=(l,c)=>{this.color=l,this.#m=c,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:l,"fill-opacity":c}}),this.#i?.updateColor(l)},s=this.color,i=this.#m;this.addCommands({cmd:t.bind(this,e,zt._defaultOpacity),undo:t.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#A(e){const t=this.#g,s=i=>{this.#g=i,this.#E(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new fn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#R())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#_():e&&(this.#T(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#E(e){if(!this.#d)return;this.#v({highlightOutlines:this.#o.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,s]=this.parentDimensions;this.setDims(this.width*t,this.height*s)}#_(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#d},path:{d:this.#o.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#S([e,t,s,i],l){switch(l){case 90:return[1-t-i,e,i,s];case 180:return[1-e-s,1-t-i,s,i];case 270:return[t,1-e-s,i,s]}return[e,t,s,i]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#d?(e=(e-this.rotation+360)%360,s=zt.#S(this.#o.box,e)):s=zt.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:zt.#S(this.#a.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#C.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n;const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),yA(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#C(e){zt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#j(!0);break;case 1:case 3:this.#j(!1);break}}#j(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#r)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#j(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#R(){return this.#d?this.rotation:0}#k(){if(this.#d)return null;const[e,t]=this.pageDimensions,[s,i]=this.pageTranslation,l=this.#s,c=new Float32Array(l.length*8);let u=0;for(const{x:h,y:m,width:p,height:y}of l){const x=h*e+s,v=(1-m)*t+i;c[u]=c[u+4]=x,c[u+1]=c[u+3]=v,c[u+2]=c[u+6]=x+p*e,c[u+5]=c[u+7]=v-y*t,u+=8}return c}#M(e){return this.#o.serialize(e,this.#R())}static startHighlighting(e,t,{target:s,x:i,y:l}){const{x:c,y:u,width:h,height:m}=s.getBoundingClientRect(),p=new AbortController,y=e.combinedSignal(p),x=v=>{p.abort(),this.#N(e,v)};window.addEventListener("blur",x,{signal:y}),window.addEventListener("pointerup",x,{signal:y}),window.addEventListener("pointerdown",Wt,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",_n,{signal:y}),s.addEventListener("pointermove",this.#z.bind(this,e),{signal:y}),this._freeHighlight=new ap({x:i,y:l},[c,u,h,m],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#z(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#N(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let i=null;if(e instanceof FA){const{data:{quadPoints:w,rect:A,rotation:S,id:N,color:j,opacity:C,popupRef:R},parent:{page:{pageNumber:D}}}=e;i=e={annotationType:qe.HIGHLIGHT,color:Array.from(j),opacity:C,quadPoints:w,boxes:null,pageIndex:D-1,rect:A.slice(0),rotation:S,annotationElementId:N,id:N,deleted:!1,popupRef:R}}else if(e instanceof Yp){const{data:{inkLists:w,rect:A,rotation:S,id:N,color:j,borderStyle:{rawWidth:C},popupRef:R},parent:{page:{pageNumber:D}}}=e;i=e={annotationType:qe.HIGHLIGHT,color:Array.from(j),thickness:C,inkLists:w,boxes:null,pageIndex:D-1,rect:A.slice(0),rotation:S,annotationElementId:N,id:N,deleted:!1,popupRef:R}}const{color:l,quadPoints:c,inkLists:u,opacity:h}=e,m=await super.deserialize(e,t,s);m.color=Me.makeHexColor(...l),m.#m=h||1,u&&(m.#g=e.thickness),m._initialData=i;const[p,y]=m.pageDimensions,[x,v]=m.pageTranslation;if(c){const w=m.#s=[];for(let A=0;A<c.length;A+=8)w.push({x:(c[A]-x)/p,y:1-(c[A+1]-v)/y,width:(c[A+2]-c[A])/p,height:(c[A+1]-c[A+5])/y});m.#x(),m.#T(),m.rotate(m.rotation)}else if(u){m.#d=!0;const w=u[0],A={x:w[0]-x,y:y-(w[1]-v)},S=new ap(A,[0,0,p,y],1,m.#g/2,!0,.001);for(let C=0,R=w.length;C<R;C+=2)A.x=w[C]-x,A.y=y-(w[C+1]-v),S.add(A);const{id:N,clipPathId:j}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);m.#v({highlightOutlines:S.getOutlines(),highlightId:N,clipPathId:j}),m.#T(),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),s=Oe._colorManager.convert(this.color),i={annotationType:qe.HIGHLIGHT,color:s,opacity:this.#m,thickness:this.#g,quadPoints:this.#k(),outlines:this.#M(t),pageIndex:this.pageIndex,rect:t,rotation:this.#R(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#b(i)?null:(i.id=this.annotationElementId,i)}#b(e){const{color:t}=this._initialData;return e.color.some((s,i)=>s!==t[i])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class VA{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){xt("Not implemented")}}class ze extends Oe{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#i=null;static#a=NaN;static#l=null;static#r=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#o(e),this.#f())}#o({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#c(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(ze._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[i,l]of Object.entries(t))s.has(i)?Object.assign(e[i],l):e[i]=l;return e}static getDefaultDrawingOptions(e){xt("Not implemented")}static get typesMap(){xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(ze.#s.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,t[i]]);return e}_updateProperty(e,t,s){const i=this._drawingOptions,l=i[t],c=u=>{i.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#c(h),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ze._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ze._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ze._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#c(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#m([e,t,s,i]){const{parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[t,1-e,s*(c/l),i*(l/c)];case 180:return[1-e,1-t,s,i];case 270:return[1-t,e,s*(c/l),i*(l/c)];default:return[e,t,s,i]}}#p(){const{x:e,y:t,width:s,height:i,parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[1-t,e,s*(l/c),i*(c/l)];case 180:return[1-e,1-t,s,i];case 270:return[t,1-e,s*(l/c),i*(c/l)];default:return[e,t,s,i]}}#c(e){if([this.x,this.y,this.width,this.height]=this.#m(e),this.div){this.fixAndSetPosition();const[t,s]=this.parentDimensions;this.setDims(this.width*t,this.height*s)}this._onResized()}#g(){const{x:e,y:t,width:s,height:i,rotation:l,parentRotation:c,parentDimensions:[u,h]}=this;switch((l*4+c)/90){case 1:return[1-t-i,e,i,s];case 2:return[1-e-s,1-t-i,s,i];case 3:return[t,1-e-s,i,s];case 4:return[e,t-s*(u/h),i*(h/u),s*(u/h)];case 5:return[1-t,e,s*(u/h),i*(h/u)];case 6:return[1-e-i*(h/u),1-t,i*(h/u),s*(u/h)];case 7:return[t-s*(u/h),1-e-i*(h/u),s*(u/h),i*(h/u)];case 8:return[e-s,t-i,s,i];case 9:return[1-t,e-s,i,s];case 10:return[1-e,1-t,s,i];case 11:return[t-i,1-e,i,s];case 12:return[e-i*(h/u),t,i*(h/u),s*(u/h)];case 13:return[1-t-s*(u/h),e-i*(h/u),s*(u/h),i*(h/u)];case 14:return[1-e,1-t-s*(u/h),i*(h/u),s*(u/h)];case 15:return[t,1-e,s*(u/h),i*(h/u)];default:return[e,t,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ze._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#c(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[l,c]=this.parentDimensions;return this.setDims(this.width*l,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,i,l){xt("Not implemented")}static startDrawing(e,t,s,i){const{target:l,offsetX:c,offsetY:u,pointerId:h,pointerType:m}=i;if(ze.#l&&ze.#l!==m)return;const{viewport:{rotation:p}}=e,{width:y,height:x}=l.getBoundingClientRect(),v=ze.#n=new AbortController,w=e.combinedSignal(v);if(ze.#a||=h,ze.#l??=m,window.addEventListener("pointerup",A=>{ze.#a===A.pointerId?this._endDraw(A):ze.#r?.delete(A.pointerId)},{signal:w}),window.addEventListener("pointercancel",A=>{ze.#a===A.pointerId?this._currentParent.endDrawingSession():ze.#r?.delete(A.pointerId)},{signal:w}),window.addEventListener("pointerdown",A=>{ze.#l===A.pointerType&&((ze.#r||=new Set).add(A.pointerId),ze.#s.isCancellable()&&(ze.#s.removeLastElement(),ze.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",_n,{signal:w}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),l.addEventListener("touchmove",A=>{A.timeStamp===ze.#u&&Wt(A)},{signal:w}),e.toggleDrawing(),t._editorUndoBar?.hide(),ze.#s){e.drawLayer.updateProperties(this._currentDrawId,ze.#s.startNew(c,u,y,x,p));return}t.updateUIForDefaultProperties(this),ze.#s=this.createDrawerInstance(c,u,y,x,p),ze.#i=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(ze.#i.toSVGProperties(),ze.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(ze.#u=-1,!ze.#s)return;const{offsetX:t,offsetY:s,pointerId:i}=e;if(ze.#a===i){if(ze.#r?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ze.#s.add(t,s)),ze.#u=e.timeStamp,Wt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ze.#s=null,ze.#i=null,ze.#l=null,ze.#u=NaN),ze.#n&&(ze.#n.abort(),ze.#n=null,ze.#a=NaN,ze.#r=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,ze.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=ze.#s,i=this._currentDrawId,l=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,s.setLastElement(l))},undo:()=>{t.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:at.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(at.DRAW_STEP),!ze.#s.isEmpty()){const{pageDimensions:[s,i],scale:l}=t,c=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ze.#s.getOutlines(s*l,i*l,l,this._INNER_MARGIN),drawingOptions:ze.#i,mustBeCommitted:!e});return this._cleanup(!0),c}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,i,l,c){xt("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:i,pageHeight:l,pageX:c,pageY:u}}=t.viewport,h=this.deserializeDraw(c,u,i,l,this._INNER_MARGIN,e),m=await super.deserialize(e,t,s);return m.createDrawingOptions(e),m.#o({drawOutlines:h}),m.#f(),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[t,s]=this.pageTranslation,[i,l]=this.pageDimensions;return this.#e.serialize([t,s,i,l],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class Q2{#e=new Float64Array(6);#t;#s;#n;#i;#a;#l="";#r=0;#u=new Xo;#o;#h;constructor(e,t,s,i,l,c){this.#o=s,this.#h=i,this.#n=l,this.#i=c,[e,t]=this.#d(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t],this.#s=[{line:u,points:this.#a}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#i=t)}#d(e,t){return Ce._normalizePoint(e,t,this.#o,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#a.length<=10}add(e,t){[e,t]=this.#d(e,t);const[s,i,l,c]=this.#e.subarray(2,6),u=e-l,h=t-c;return Math.hypot(this.#o*u,this.#h*h)<=2?null:(this.#a.push(e,t),isNaN(s)?(this.#e.set([l,c,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,l,c,e,t],0),this.#t.push(...Ce.createBezierPoints(s,i,l,c,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,l){this.#o=s,this.#h=i,this.#n=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#a=[e,t];const u=this.#s.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#s.push({line:c,points:this.#a}),this.#e.set(c,0),this.#r=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#a=e.points,this.#r=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#u.removeLastElement();this.#s.pop(),this.#l="";for(let e=0,t=this.#s.length;e<t;e++){const{line:s,points:i}=this.#s[e];this.#t=s,this.#a=i,this.#r=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const e=Ce.svgRound(this.#t[4]),t=Ce.svgRound(this.#t[5]);if(this.#a.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#a.length<=6){const i=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,i)} M ${e} ${t}`,this.#r=6}if(this.#a.length===4){const i=Ce.svgRound(this.#t[10]),l=Ce.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${i} ${l}`,this.#r=12,this.#l}const s=[];this.#r===0&&(s.push(`M ${e} ${t}`),this.#r=6);for(let i=this.#r,l=this.#t.length;i<l;i+=6){const[c,u,h,m,p,y]=this.#t.slice(i,i+6).map(Ce.svgRound);s.push(`C${c} ${u} ${h} ${m} ${p} ${y}`)}return this.#l+=s.join(" "),this.#r=this.#t.length,this.#l}getOutlines(e,t,s,i){const l=this.#s.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#u.build(this.#s,e,t,s,this.#n,this.#i,i),this.#e=null,this.#t=null,this.#s=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Xo extends Ce{#e;#t=0;#s;#n;#i;#a;#l;#r;#u;build(e,t,s,i,l,c,u){this.#i=t,this.#a=s,this.#l=i,this.#r=l,this.#u=c,this.#s=u??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Ce.svgRound(t[4])} ${Ce.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Ce.svgRound(t[10])} ${Ce.svgRound(t[11])}`);continue}for(let s=6,i=t.length;s<i;s+=6){const[l,c,u,h,m,p]=t.subarray(s,s+6).map(Ce.svgRound);e.push(`C${l} ${c} ${u} ${h} ${m} ${p}`)}}return e.join("")}serialize([e,t,s,i],l){const c=[],u=[],[h,m,p,y]=this.#h();let x,v,w,A,S,N,j,C,R;switch(this.#r){case 0:R=Ce._rescale,x=e,v=t+i,w=s,A=-i,S=e+h*s,N=t+(1-m-y)*i,j=e+(h+p)*s,C=t+(1-m)*i;break;case 90:R=Ce._rescaleAndSwap,x=e,v=t,w=s,A=i,S=e+m*s,N=t+h*i,j=e+(m+y)*s,C=t+(h+p)*i;break;case 180:R=Ce._rescale,x=e+s,v=t,w=-s,A=i,S=e+(1-h-p)*s,N=t+m*i,j=e+(1-h)*s,C=t+(m+y)*i;break;case 270:R=Ce._rescaleAndSwap,x=e+s,v=t+i,w=-s,A=-i,S=e+(1-m-y)*s,N=t+(1-h-p)*i,j=e+(1-m)*s,C=t+(1-h)*i;break}for(const{line:D,points:O}of this.#n)c.push(R(D,x,v,w,A,l?new Array(D.length):null)),u.push(R(O,x,v,w,A,l?new Array(O.length):null));return{lines:c,points:u,rect:[S,N,j,C]}}static deserialize(e,t,s,i,l,{paths:{lines:c,points:u},rotation:h,thickness:m}){const p=[];let y,x,v,w,A;switch(h){case 0:A=Ce._rescale,y=-e/s,x=t/i+1,v=1/s,w=-1/i;break;case 90:A=Ce._rescaleAndSwap,y=-t/i,x=-e/s,v=1/i,w=1/s;break;case 180:A=Ce._rescale,y=e/s+1,x=-t/i,v=-1/s,w=1/i;break;case 270:A=Ce._rescaleAndSwap,y=t/i+1,x=e/s+1,v=-1/i,w=-1/s;break}if(!c){c=[];for(const N of u){const j=N.length;if(j===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(j===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const C=new Float32Array(3*(j-2));c.push(C);let[R,D,O,B]=N.subarray(0,4);C.set([NaN,NaN,NaN,NaN,R,D],0);for(let F=4;F<j;F+=2){const I=N[F],ee=N[F+1];C.set(Ce.createBezierPoints(R,D,O,B,I,ee),(F-2)*3),[R,D,O,B]=[O,B,I,ee]}}}for(let N=0,j=c.length;N<j;N++)p.push({line:A(c[N].map(C=>C??NaN),y,x,v,w),points:A(u[N].map(C=>C??NaN),y,x,v,w)});const S=new this.prototype.constructor;return S.build(p,s,i,1,h,m,l),S}#o(e=this.#u){const t=this.#s+e/2*this.#l;return this.#r%180===0?[t/this.#i,t/this.#a]:[t/this.#a,t/this.#i]}#h(){const[e,t,s,i]=this.#e,[l,c]=this.#o(0);return[e+l,t+c,s-2*l,i-2*c]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let u=4,h=i.length;u<h;u+=6)Me.pointBoundingBox(i[u],i[u+1],e);continue}let l=i[4],c=i[5];for(let u=6,h=i.length;u<h;u+=6){const[m,p,y,x,v,w]=i.subarray(u,u+6);Me.bezierBoundingBox(l,c,m,p,y,x,v,w,e),l=v,c=w}}const[t,s]=this.#o();e[0]=Ns(e[0]-t,0,1),e[1]=Ns(e[1]-s,0,1),e[2]=Ns(e[2]+t,0,1),e[3]=Ns(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#o();this.#u=e;const[i,l]=this.#o(),[c,u]=[i-t,l-s],h=this.#e;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([e,t],s){const[i,l]=this.#o();this.#i=e,this.#a=t,this.#l=s;const[c,u]=this.#o(),h=c-i,m=u-l,p=this.#e;return p[0]-=h,p[1]-=m,p[2]+=2*h,p[3]+=2*m,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ce.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,i=0,l=0,c=0,u=0,h=0;switch(this.#t){case 90:i=t/e,l=-e/t,u=e;break;case 180:s=-1,c=-1,u=e,h=t;break;case 270:i=-t/e,l=e/t,h=t;break;default:return""}return`matrix(${s} ${i} ${l} ${c} ${Ce.svgRound(u)} ${Ce.svgRound(h)})`}getPathResizingSVGProperties([e,t,s,i]){const[l,c]=this.#o(),[u,h,m,p]=this.#e;if(Math.abs(m-l)<=Ce.PRECISION||Math.abs(p-c)<=Ce.PRECISION){const A=e+s/2-(u+m/2),S=t+i/2-(h+p/2);return{path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:`${this.rotationTransform} translate(${A} ${S})`}}}const y=(s-2*l)/(m-2*l),x=(i-2*c)/(p-2*c),v=m/s,w=p/i;return{path:{"transform-origin":`${Ce.svgRound(u)} ${Ce.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${Ce.svgRound(l)} ${Ce.svgRound(c)}) scale(${y} ${x}) translate(${Ce.svgRound(-l)} ${Ce.svgRound(-c)})`}}}getPathResizedSVGProperties([e,t,s,i]){const[l,c]=this.#o(),u=this.#e,[h,m,p,y]=u;if(u[0]=e,u[1]=t,u[2]=s,u[3]=i,Math.abs(p-l)<=Ce.PRECISION||Math.abs(y-c)<=Ce.PRECISION){const S=e+s/2-(h+p/2),N=t+i/2-(m+y/2);for(const{line:j,points:C}of this.#n)Ce._translate(j,S,N,j),Ce._translate(C,S,N,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(s-2*l)/(p-2*l),v=(i-2*c)/(y-2*c),w=-x*(h+l)+e+l,A=-v*(m+c)+t+c;if(x!==1||v!==1||w!==0||A!==0)for(const{line:S,points:N}of this.#n)Ce._rescale(S,w,A,x,v,S),Ce._rescale(N,w,A,x,v,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[i,l]=s,c=this.#e,u=e-c[0],h=t-c[1];if(this.#i===i&&this.#a===l)for(const{line:m,points:p}of this.#n)Ce._translate(m,u,h,m),Ce._translate(p,u,h,p);else{const m=this.#i/i,p=this.#a/l;this.#i=i,this.#a=l;for(const{line:y,points:x}of this.#n)Ce._rescale(y,u,h,m,p,y),Ce._rescale(x,u,h,m,p,x);c[2]*=m,c[3]*=p}return c[0]=e,c[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(e)} ${Ce.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ce.svgRound(e[0])} ${Ce.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Nu extends VA{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Oe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Nu(this._viewParameters);return e.updateAll(this),e}}class Xp extends ze{static _type="ink";static _editorType=qe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Oe.initialize(e,t),this._defaultDrawingOptions=new Nu(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return st(this,"typesMap",new Map([[at.INK_THICKNESS,"stroke-width"],[at.INK_COLOR,"stroke"],[at.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,i,l){return new Q2(e,t,s,i,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,i,l,c){return Xo.deserialize(e,t,s,i,l,c)}static async deserialize(e,t,s){let i=null;if(e instanceof Yp){const{data:{inkLists:c,rect:u,rotation:h,id:m,color:p,opacity:y,borderStyle:{rawWidth:x},popupRef:v},parent:{page:{pageNumber:w}}}=e;i=e={annotationType:qe.INK,color:Array.from(p),thickness:x,opacity:y,paths:{points:c},boxes:null,pageIndex:w-1,rect:u.slice(0),rotation:h,annotationElementId:m,id:m,deleted:!1,popupRef:v}}const l=await super.deserialize(e,t,s);return l._initialData=i,l}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=Xp.getDefaultDrawingOptions({stroke:Me.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s,rect:i}=this.serializeDraw(e),{_drawingOptions:{stroke:l,"stroke-opacity":c,"stroke-width":u}}=this,h={annotationType:qe.INK,color:Oe._colorManager.convert(l),opacity:c,thickness:u,paths:{lines:t,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!this.#e(h)?null:(h.id=this.annotationElementId,h)}#e(e){const{color:t,thickness:s,opacity:i,pageIndex:l}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,u)=>c!==t[u])||e.thickness!==s||e.opacity!==i||e.pageIndex!==l}renderAnnotationElement(e){const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class ip extends Xo{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const yd=8,oo=3;class zr{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,s,i,l,c,u){const h=this.#t(s,i,l,c);for(let m=0;m<8;m++){const p=(-m+h-u+16)%8,y=this.#s[2*p],x=this.#s[2*p+1];if(e[(s+y)*t+(i+x)]!==0)return p}return-1}static#i(e,t,s,i,l,c,u){const h=this.#t(s,i,l,c);for(let m=0;m<8;m++){const p=(m+h+u+16)%8,y=this.#s[2*p],x=this.#s[2*p+1];if(e[(s+y)*t+(i+x)]!==0)return p}return-1}static#a(e,t,s,i){const l=e.length,c=new Int32Array(l);for(let p=0;p<l;p++)c[p]=e[p]<=i?1:0;for(let p=1;p<s-1;p++)c[p*t]=c[p*t+t-1]=0;for(let p=0;p<t;p++)c[p]=c[t*s-1-p]=0;let u=1,h;const m=[];for(let p=1;p<s-1;p++){h=1;for(let y=1;y<t-1;y++){const x=p*t+y,v=c[x];if(v===0)continue;let w=p,A=y;if(v===1&&c[x-1]===0)u+=1,A-=1;else if(v>=1&&c[x+1]===0)u+=1,A+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const S=[y,p],N=A===y+1,j={isHole:N,points:S,id:u,parent:0};m.push(j);let C;for(const z of m)if(z.id===h){C=z;break}C?C.isHole?j.parent=N?C.parent:h:j.parent=N?h:C.parent:j.parent=N?h:0;const R=this.#n(c,t,p,y,w,A,0);if(R===-1){c[x]=-u,c[x]!==1&&(h=Math.abs(c[x]));continue}let D=this.#s[2*R],O=this.#s[2*R+1];const B=p+D,F=y+O;w=B,A=F;let I=p,ee=y;for(;;){const z=this.#i(c,t,I,ee,w,A,1);D=this.#s[2*z],O=this.#s[2*z+1];const Z=I+D,W=ee+O;S.push(W,Z);const ce=I*t+ee;if(c[ce+1]===0?c[ce]=-u:c[ce]===1&&(c[ce]=u),Z===p&&W===y&&I===B&&ee===F){c[x]!==1&&(h=Math.abs(c[x]));break}else w=I,A=ee,I=Z,ee=W}}}return m}static#l(e,t,s,i){if(s-t<=4){for(let B=t;B<s-2;B+=2)i.push(e[B],e[B+1]);return}const l=e[t],c=e[t+1],u=e[s-4]-l,h=e[s-3]-c,m=Math.hypot(u,h),p=u/m,y=h/m,x=p*c-y*l,v=h/u,w=1/m,A=Math.atan(v),S=Math.cos(A),N=Math.sin(A),j=w*(Math.abs(S)+Math.abs(N)),C=w*(1-j+j**2),R=Math.max(Math.atan(Math.abs(N+S)*C),Math.atan(Math.abs(N-S)*C));let D=0,O=t;for(let B=t+2;B<s-2;B+=2){const F=Math.abs(x-p*e[B+1]+y*e[B]);F>D&&(O=B,D=F)}D>(m*R)**2?(this.#l(e,t,O+2,i),this.#l(e,O,s,i)):i.push(l,c)}static#r(e){const t=[],s=e.length;return this.#l(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#u(e,t,s,i,l,c){const u=new Float32Array(c**2),h=-2*i**2,m=c>>1;for(let A=0;A<c;A++){const S=(A-m)**2;for(let N=0;N<c;N++)u[A*c+N]=Math.exp((S+(N-m)**2)/h)}const p=new Float32Array(256),y=-2*l**2;for(let A=0;A<256;A++)p[A]=Math.exp(A**2/y);const x=e.length,v=new Uint8Array(x),w=new Uint32Array(256);for(let A=0;A<s;A++)for(let S=0;S<t;S++){const N=A*t+S,j=e[N];let C=0,R=0;for(let O=0;O<c;O++){const B=A+O-m;if(!(B<0||B>=s))for(let F=0;F<c;F++){const I=S+F-m;if(I<0||I>=t)continue;const ee=e[B*t+I],z=u[O*c+F]*p[Math.abs(ee-j)];C+=ee*z,R+=z}}const D=v[N]=Math.round(C/R);w[D]++}return[v,w]}static#o(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,l=1/0;for(let u=0,h=s.length;u<h;u++){if(e[(u<<2)+3]===0){i=s[u]=255;continue}const p=s[u]=e[u<<2];p>i&&(i=p),p<l&&(l=p)}const c=255/(i-l);for(let u=0;u<t;u++)s[u]=(s[u]-l)*c;return s}static#d(e){let t,s=-1/0,i=-1/0;const l=e.findIndex(h=>h!==0);let c=l,u=l;for(t=l;t<256;t++){const h=e[t];h>s&&(t-c>i&&(i=t-c,u=t-1),s=h,c=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:i}=e,{maxDim:l}=this.#e;let c=s,u=i;if(s>l||i>l){let x=s,v=i,w=Math.log2(Math.max(s,i)/l);const A=Math.floor(w);w=w===A?A-1:A;for(let N=0;N<w;N++){c=Math.ceil(x/2),u=Math.ceil(v/2);const j=new OffscreenCanvas(c,u);j.getContext("2d").drawImage(e,0,0,x,v,0,0,c,u),x=c,v=u,e!==t&&e.close(),e=j.transferToImageBitmap()}const S=Math.min(l/c,l/u);c=Math.round(c*S),u=Math.round(u*S)}const m=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});m.filter="grayscale(1)",m.drawImage(e,0,0,e.width,e.height,0,0,c,u);const p=m.getImageData(0,0,c,u).data;return[this.#h(p),c,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},l,c,u,h){let m=new OffscreenCanvas(1,1),p=m.getContext("2d",{alpha:!1});const y=200,x=p.font=`${s} ${i} ${y}px ${t}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:A,actualBoundingBoxDescent:S,fontBoundingBoxAscent:N,fontBoundingBoxDescent:j,width:C}=p.measureText(e),R=1.5,D=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,C)*R),O=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||y,Math.abs(N)+Math.abs(j)||y)*R);m=new OffscreenCanvas(D,O),p=m.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=x,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,O),p.fillStyle="black",p.fillText(e,D*(R-1)/2,O*(3-R)/2);const B=this.#h(p.getImageData(0,0,D,O).data),F=this.#o(B),I=this.#d(F),ee=this.#a(B,D,O,I);return this.processDrawnLines({lines:{curves:ee,width:D,height:O},pageWidth:l,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,l){const[c,u,h]=this.#f(e),[m,p]=this.#u(c,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),y=this.#d(p),x=this.#a(m,u,h,y);return this.processDrawnLines({lines:{curves:x,width:u,height:h},pageWidth:t,pageHeight:s,rotation:i,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:l,mustSmooth:c,areContours:u}){i%180!==0&&([t,s]=[s,t]);const{curves:h,width:m,height:p}=e,y=e.thickness??0,x=[],v=Math.min(t/m,s/p),w=v/t,A=v/s,S=[];for(const{points:j}of h){const C=c?this.#r(j):j;if(!C)continue;S.push(C);const R=C.length,D=new Float32Array(R),O=new Float32Array(3*(R===2?2:R-2));if(x.push({line:O,points:D}),R===2){D[0]=C[0]*w,D[1]=C[1]*A,O.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[B,F,I,ee]=C;B*=w,F*=A,I*=w,ee*=A,D.set([B,F,I,ee],0),O.set([NaN,NaN,NaN,NaN,B,F],0);for(let z=4;z<R;z+=2){const Z=D[z]=C[z]*w,W=D[z+1]=C[z+1]*A;O.set(Ce.createBezierPoints(B,F,I,ee,Z,W),(z-2)*3),[B,F,I,ee]=[I,ee,Z,W]}}if(x.length===0)return null;const N=u?new ip:new Xo;return N.build(x,t,s,1,i,u?0:y,l),{outline:N,newCurves:S,areContours:u,thickness:y,width:m,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:l}){let c=1/0,u=-1/0,h=0;for(const C of e){h+=C.length;for(let R=2,D=C.length;R<D;R++){const O=C[R]-C[R-2];c=Math.min(c,O),u=Math.max(u,O)}}let m;c>=-128&&u<=127?m=Int8Array:c>=-32768&&u<=32767?m=Int16Array:m=Int32Array;const p=e.length,y=yd+oo*p,x=new Uint32Array(y);let v=0;x[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*m.BYTES_PER_ELEMENT,x[v++]=0,x[v++]=i,x[v++]=l,x[v++]=t?0:1,x[v++]=Math.max(0,Math.floor(s??0)),x[v++]=p,x[v++]=m.BYTES_PER_ELEMENT;for(const C of e)x[v++]=C.length-2,x[v++]=C[0],x[v++]=C[1];const w=new CompressionStream("deflate-raw"),A=w.writable.getWriter();await A.ready,A.write(x);const S=m.prototype.constructor;for(const C of e){const R=new S(C.length-2);for(let D=2,O=C.length;D<O;D++)R[D-2]=C[D]-C[D-2];A.write(R)}A.close();const N=await new Response(w.readable).arrayBuffer(),j=new Uint8Array(N);return pA(j)}static async decompressSignature(e){try{const t=vD(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),l=i.getWriter();await l.ready,l.write(t).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,u=0;for await(const C of s)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,u),u+=C.length;const h=new Uint32Array(c.buffer,0,c.length>>2),m=h[1];if(m!==0)throw new Error(`Invalid version: ${m}`);const p=h[2],y=h[3],x=h[4]===0,v=h[5],w=h[6],A=h[7],S=[],N=(yd+oo*w)*Uint32Array.BYTES_PER_ELEMENT;let j;switch(A){case Int8Array.BYTES_PER_ELEMENT:j=new Int8Array(c.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:j=new Int16Array(c.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:j=new Int32Array(c.buffer,N);break}u=0;for(let C=0;C<w;C++){const R=h[oo*C+yd],D=new Float32Array(R+2);S.push(D);for(let O=0;O<oo-1;O++)D[O]=h[oo*C+yd+O+1];for(let O=0;O<R;O++)D[O+2]=D[O]+j[u++]}return{areContours:x,thickness:v,outlines:S,width:p,height:y}}catch(t){return Ve(`decompressSignature: ${t}`),null}}}class Qp extends VA{constructor(){super(),super.updateProperties({fill:Oe._defaultLineColor,"stroke-width":0})}clone(){const e=new Qp;return e.updateAll(this),e}}class Zp extends Nu{constructor(e){super(e),super.updateProperties({stroke:Oe._defaultLineColor,"stroke-width":1})}clone(){const e=new Zp(this._viewParameters);return e.updateAll(this),e}}class Vn extends ze{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=qe.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Oe.initialize(e,t),this._defaultDrawingOptions=new Qp,this._defaultDrawnSignatureOptions=new Zp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return st(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:l,areContours:c,description:u,uuid:h,heightInPage:m}=this.#s,{rawDims:{pageWidth:p,pageHeight:y},rotation:x}=this.parent.viewport,v=zr.processDrawnLines({lines:i,pageWidth:p,pageHeight:y,rotation:x,innerMargin:Vn._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(v,m,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:i,height:l}=this.#s,c=Math.max(i,l),u=zr.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:i,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,i){const{x:l,y:c}=this,{outline:u}=this.#s=e;this.#e=u instanceof ip,this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let h;this.#e?h=Vn.getDefaultDrawingOptions():(h=Vn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[m,p]=this.parentDimensions,[,y]=this.pageDimensions;let x=t/y;x=x>=1?.5:x,this.width*=x/this.height,this.width>=1&&(x*=.9/this.width,this.width=.9),this.height=x,this.setDims(m*this.width,p*this.height),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return zr.process(e,t,s,i,Vn._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:l}=this.parent.viewport;return zr.extractContoursFromText(e,t,s,i,l,Vn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return zr.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:Vn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Vn.getDefaultDrawingOptions():(this._drawingOptions=Vn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s,rect:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":l}}=this,c={annotationType:qe.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:l,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(c.paths={lines:t,points:s},c.uuid=this.#n,c.isCopy=!0):c.lines=t,this.#t&&(c.accessibilityData={type:"Figure",alt:this.#t}),c}static deserializeDraw(e,t,s,i,l,c){return c.areContours?ip.deserialize(e,t,s,i,l,c):Xo.deserialize(e,t,s,i,l,c)}static async deserialize(e,t,s){const i=await super.deserialize(e,t,s);return i.#e=e.areContours,i.#t=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class Z2 extends Oe{#e=null;#t=null;#s=null;#n=null;#i=null;#a="";#l=null;#r=!1;#u=null;#o=!1;#h=!1;static _type="stamp";static _editorType=qe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#i=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Oe.initialize(e,t)}static isHandlingMimeForPasting(e){return Km.includes(e)}static paste(e,t){t.pasteEditor({mode:qe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#o=e.isSvg),e.file&&(this.#a=e.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:l,height:c}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:i,width:l,height:c,channels:i.length/(l*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#d(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Km.join(",");const t=this._uiManager._signal;this.#s=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#i||this.#t||this.#r)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#r||(this.#e?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#r=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#g()},e)}#p(){const{div:e}=this;let{width:t,height:s}=this.#e;const[i,l]=this.pageDimensions,c=.75;if(this.width)t=this.width*i,s=this.height*l;else if(t>c*i||s>c*l){const p=Math.min(c*i/t,c*l/s);t*=p,s*=p}const[u,h]=this.parentDimensions;this.setDims(t*u/i,s*h/l),this._uiManager.enableWaiting(!1);const m=this.#l=document.createElement("canvas");m.setAttribute("role","img"),this.addContainer(m),this.width=t/i,this.height=s/l,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:i,height:l}=this.#e,c=new Wn;let u=this.#e,h=i,m=l,p=null;if(t){if(i>t||l>t){const O=Math.min(t/i,t/l);h=Math.floor(i*O),m=Math.floor(l*O)}p=document.createElement("canvas");const x=p.width=Math.ceil(h*c.sx),v=p.height=Math.ceil(m*c.sy);this.#o||(u=this.#c(x,v));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let A="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(A="#8f8f9d",S="#42414d");const N=15,j=N*c.sx,C=N*c.sy,R=new OffscreenCanvas(j*2,C*2),D=R.getContext("2d");D.fillStyle=A,D.fillRect(0,0,j*2,C*2),D.fillStyle=S,D.fillRect(0,0,j,C),D.fillRect(j,C,j,C),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,x,v),w.drawImage(u,0,0,u.width,u.height,0,0,x,v)}let y=null;if(s){let x,v;if(c.symmetric&&u.width<e&&u.height<e)x=u.width,v=u.height;else if(u=this.#e,i>e||l>e){const S=Math.min(e/i,e/l);x=Math.floor(i*S),v=Math.floor(l*S),this.#o||(u=this.#c(x,v))}const A=new OffscreenCanvas(x,v).getContext("2d",{willReadFrequently:!0});A.drawImage(u,0,0,u.width,u.height,0,0,x,v),y={width:x,height:v,data:A.getImageData(0,0,x,v).data}}return{canvas:p,width:h,height:m,imageData:y}}#c(e,t){const{width:s,height:i}=this.#e;let l=s,c=i,u=this.#e;for(;l>2*e||c>2*t;){const h=l,m=c;l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(l,c);p.getContext("2d").drawImage(u,0,0,h,m,0,0,l,c),u=p.transferToImageBitmap()}return u}#g(){const[e,t]=this.parentDimensions,{width:s,height:i}=this,l=new Wn,c=Math.ceil(s*e*l.sx),u=Math.ceil(i*t*l.sy),h=this.#l;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const m=this.#o?this.#e:this.#c(c,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(m,0,0,m.width,m.height,0,0,c,u)}#y(e){if(e){if(this.#o){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#o){const[t,s]=this.pageDimensions,i=Math.round(this.width*t*Zr.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*Zr.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(i,l);return c.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,l),c.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let i=null,l=!1;if(e instanceof UA){const{data:{rect:A,rotation:S,id:N,structParent:j,popupRef:C},container:R,parent:{page:{pageNumber:D}},canvas:O}=e;let B,F;O?(delete e.canvas,{id:B,bitmap:F}=s.imageManager.getFromCanvas(R.id,O),O.remove()):(l=!0,e._hasNoCanvas=!0);const I=(await t._structTree.getAriaAttributes(`${Ip}${N}`))?.get("aria-label")||"";i=e={annotationType:qe.STAMP,bitmapId:B,bitmap:F,pageIndex:D-1,rect:A.slice(0),rotation:S,annotationElementId:N,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:j,popupRef:C}}const c=await super.deserialize(e,t,s),{rect:u,bitmap:h,bitmapUrl:m,bitmapId:p,isSvg:y,accessibilityData:x}=e;l?(s.addMissingCanvas(e.id,c),c.#r=!0):p&&s.imageManager.isValidId(p)?(c.#t=p,h&&(c.#e=h)):c.#n=m,c.#o=y;const[v,w]=c.pageDimensions;return c.width=(u[2]-u[0])/v,c.height=(u[3]-u[1])/w,x&&(c.altTextData=x),c._initialData=i,c.#h=!!i,c}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:qe.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:l}=this.serializeAltText(!1);if(!i&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#x(s);if(u.isSame)return null;u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,t===null)return s;t.stamps||=new Map;const c=this.#o?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#o){const u=t.stamps.get(this.#t);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#x(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===t,l=(e.accessibilityData?.alt||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&l,isSameAltText:l}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class fa{#e;#t=!1;#s=null;#n=null;#i=null;#a=new Map;#l=!1;#r=!1;#u=!1;#o=null;#h=null;#d=null;#f=null;#m=null;#p=-1;#c;static _initialized=!1;static#g=new Map([Jt,Xp,Z2,zt,Vn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:l,annotationLayer:c,drawLayer:u,textLayer:h,viewport:m,l10n:p}){const y=[...fa.#g.values()];if(!fa._initialized){fa._initialized=!0;for(const x of y)x.initialize(p,e)}e.registerEditorTypes(y),this.#c=e,this.pageIndex=t,this.div=s,this.#e=l,this.#s=c,this.viewport=m,this.#d=h,this.drawLayer=u,this._structTree=i,this.#c.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===qe.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#A(),e){case qe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case qe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case qe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of fa.#g.values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const e=new Set;for(const s of this.#a.values())s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#c.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!this.#s){this.#u=!1;return}const t=this.#s.getEditableAnnotations();for(const s of t){if(s.hide(),this.#c.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#u=!1}disable(){if(this.#r=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#d&&!this.#m){this.#m=new AbortController;const i=this.#c.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:h,timeStamp:m}=l,p=this.#p;if(m-p>500){this.#p=m;return}this.#p=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const x=document.elementsFromPoint(u,h);if(y.toggle("getElements",!1),!this.div.contains(x[0]))return;let v;const w=new RegExp(`^${dA}[0-9]+$`);for(const S of x)if(w.test(S.id)){v=S.id;break}if(!v)return;const A=this.#a.get(v);A?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),A.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of this.#a.values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);this.getEditableAnnotation(i.annotationElementId)?.show(),i.remove()}if(this.#s){const i=this.#s.getEditableAnnotations();for(const l of i){const{id:c}=l.data;if(this.#c.isDeletedAnnotationElement(c))continue;let u=t.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=e.get(c),u&&(this.#c.addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of fa.#g.values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#r=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#c.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#y.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#y(e){this.#c.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:s}=fs.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),zt.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#a.set(e.id,e);const{annotationElementId:t}=e;t&&this.#c.isDeletedAnnotationElement(t)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#a.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#r&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e.annotationElementId),Oe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return this.#c.getId()}get#x(){return fa.#g.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#v(e){const t=this.#x;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#x?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#w(),l=this.getNextId(),c=this.#v({parent:this,id:l,x:s,y:i,uiManager:this.#c,isCentered:!0,...t});c&&this.add(c)}async deserialize(e){return await fa.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),l=this.#v({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:t,...s});return l&&this.add(l),l}#w(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),l=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+s),h=Math.min(window.innerHeight,t+i),m=(l+u)/2-e,p=(c+h)/2-t,[y,x]=this.viewport.rotation%180===0?[m,p]:[p,m];return{offsetX:y,offsetY:x}}addNewEditor(e={}){this.createAndAddNewEditor(this.#w(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:t}=fs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#l||(this.#l=!1,this.#x?.isDrawer&&this.#x.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#c.getMode();if(s===qe.STAMP||s===qe.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===qe.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=fs.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#l=!0,this.#x?.isDrawer){this.startDrawingSession(e);return}const s=this.#c.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#o){this.#x.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#o=new AbortController;const t=this.#c.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#x.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#o?(this.#c.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#h=null,this.#x.endDrawing(e)):null}findNewParent(e,t,s){const i=this.#c.findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#x.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#a.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#a.clear(),this.#c.removeLayer(this)}#A(){for(const e of this.#a.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Fi(this.div,e);for(const t of this.#c.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#A();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Fi(this.div,{rotation:s}),t!==s)for(const i of this.#a.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#c.viewParameters.realScale}}class us{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return st(this,"_svgFactory",new Yd)}static#i(e,[t,s,i,l]){const{style:c}=e;c.top=`${100*s}%`,c.left=`${100*t}%`,c.width=`${100*i}%`,c.height=`${100*l}%`}#a(){const e=us._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){const s=us._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const l=us._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${t}`),l.classList.add("clip"),i}#r(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,t=!1,s=!1){const i=us.#n++,l=this.#a(),c=us._svgFactory.createElement("defs");l.append(c);const u=us._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,u);const m=s?this.#l(c,h):null,p=us._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(l,e),this.#t.set(i,l),{id:i,clipPathId:`url(#${m})`}}drawOutline(e,t){const s=us.#n++,i=this.#a(),l=us._svgFactory.createElement("defs");i.append(l);const c=us._svgFactory.createElement("path");l.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const y=us._svgFactory.createElement("mask");l.append(y),h=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const x=us._svgFactory.createElement("rect");y.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const v=us._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const m=us._svgFactory.createElement("use");i.append(m),m.setAttribute("href",`#${u}`),h&&m.setAttribute("mask",`url(#${h})`);const p=m.cloneNode();return i.append(p),m.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:i,rootClass:l,path:c}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(s&&this.#r(u,s),i&&us.#i(u,i),l){const{classList:h}=u;for(const[m,p]of Object.entries(l))h.toggle(m,p)}if(c){const m=u.firstChild.firstChild;this.#r(m,c)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:np};globalThis.pdfjsLib={AbortException:Ka,AnnotationEditorLayer:fa,AnnotationEditorParamsType:at,AnnotationEditorType:qe,AnnotationEditorUIManager:Ja,AnnotationLayer:Wp,AnnotationMode:Ga,AnnotationType:Yt,build:T2,ColorPicker:fn,createValidAbsoluteUrl:uA,DOMSVGFactory:Yd,DrawLayer:us,FeatureTest:fs,fetchData:$o,getDocument:N2,getFilenameFromUrl:wD,getPdfFilenameFromUrl:AD,getUuid:mA,getXfaPageViewport:ND,GlobalWorkerOptions:Yr,ImageKind:Rd,InvalidPDFException:Zm,isDataScheme:wu,isPdfFile:Bp,isValidExplicitDest:OD,MathClamp:Ns,noContextMenu:_n,normalizeUnicode:xD,OPS:$d,OutputScale:Wn,PasswordResponses:cD,PDFDataRangeTransport:kA,PDFDateString:gA,PDFWorker:Do,PermissionFlag:oD,PixelsPerInch:Zr,RenderingCancelledException:Pp,ResponseException:Gd,setLayerDimensions:Fi,shadow:st,SignatureExtractor:zr,stopEvent:Wt,SupportedImageMimeTypes:Km,TextLayer:As,TouchManager:Au,updateUrlHash:hA,Util:Me,VerbosityLevel:xu,version:OA,XfaLayer:IA};Yr.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${OA}/pdf.worker.min.js`;const K2=({employeeId:n,onClose:e})=>{const[t,s]=_.useState(null),[i,l]=_.useState(!0),[c,u]=_.useState({});_.useEffect(()=>{n&&(async()=>{try{l(!0);const[y,x]=await Promise.all([ye.get(`/employee/${n}`),ye.get(`/employee/bank/${n}`).catch(v=>{if(v.response?.status===404)return{data:null};throw v})]);s({...y.data.data,bankDetails:x.data})}catch(y){console.error("Error fetching employee details:",y),alert("Error loading employee details")}finally{l(!1)}})()},[n]);const h=p=>{try{return p.split("/").pop().split("?")[0]}catch{return"document.pdf"}},m=async(p,y,x)=>{u(v=>({...v,[x]:!0}));try{const v=await ye.get(p,{responseType:"blob"}),w=new Blob([v.data],{type:v.data.type}),A=window.URL.createObjectURL(w),S=document.createElement("a");S.href=A,S.download=y||p.split("/").pop(),document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(A)}catch(v){console.error("Download failed:",v),alert("Download failed. Please try again.")}finally{u(v=>({...v,[x]:!1}))}};return i?r.jsx("div",{className:"fixed inset-0 bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full p-6",children:r.jsx("div",{className:"flex justify-center items-center h-40",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})})})}):t?r.jsx("div",{className:"fixed inset-0 bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 rounded-t-xl flex justify-between items-center",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Employee Details - ",t.firstName," ",t.lastName]}),r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#104774]",children:"Personal Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Employee ID:"}),r.jsx("span",{className:"text-gray-700",children:t.employeeId})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Name:"}),r.jsxs("span",{className:"text-gray-700",children:[t.firstName," ",t.lastName]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Email:"}),r.jsx("span",{className:"text-gray-700",children:t.user?.email})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Phone:"}),r.jsx("span",{className:"text-gray-700",children:t.phone||"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Date of Birth:"}),r.jsx("span",{className:"text-gray-700",children:t.dob?new Date(t.dob).toLocaleDateString():"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Gender:"}),r.jsx("span",{className:"text-gray-700 capitalize",children:t.gender||"N/A"})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"font-medium w-32",children:"Address:"}),r.jsx("span",{className:"text-gray-700 flex-1",children:t.address||"N/A"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#104774]",children:"Job Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Department:"}),r.jsx("span",{className:"text-gray-700",children:t.department||"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Designation:"}),r.jsx("span",{className:"text-gray-700",children:t.designation||"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Date of Joining:"}),r.jsx("span",{className:"text-gray-700",children:t.dateOfJoining?new Date(t.dateOfJoining).toLocaleDateString():"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Employment Type:"}),r.jsx("span",{className:"text-gray-700 capitalize",children:t.employmentType?.replace("-"," ")||"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Work Mode:"}),r.jsx("span",{className:"text-gray-700 capitalize",children:t.workMode?.replace(/-/g," ")||"N/A"})]}),t.shiftTiming?.start||t.shiftTiming?.end?r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Shift Timing:"}),r.jsx("span",{className:"text-gray-700",children:t.shiftTiming.start&&t.shiftTiming.end?`${t.shiftTiming.start} - ${t.shiftTiming.end}`:"N/A"})]}):null,r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Role:"}),r.jsx("span",{className:"text-gray-700 capitalize",children:t.user?.role||"N/A"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-32",children:"Status:"}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.user?.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.user?.isActive?"Active":"Inactive"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.bankDetails&&r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#104774]",children:"Bank Details"}),r.jsxs("div",{className:"space-y-3 text-gray-700",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-36",children:"Account Holder:"}),r.jsx("span",{className:"font-semibold",children:t.bankDetails.accountHolderName})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-36",children:"Account Number:"}),r.jsx("span",{className:"font-semibold",children:t.bankDetails.accountNumber})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-36",children:"Bank Name:"}),r.jsx("span",{className:"font-semibold",children:t.bankDetails.bankName})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-36",children:"IFSC Code:"}),r.jsx("span",{className:"font-semibold",children:t.bankDetails.ifscCode})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"font-medium w-36",children:"Account Type:"}),r.jsx("span",{className:"font-semibold",children:t.bankDetails.accountType})]})]})]}),t.documents?.length>0&&r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-[#104774]",children:"Documents"}),r.jsx("div",{className:"space-y-2",children:t.documents.map((p,y)=>r.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border",children:[r.jsx("span",{className:"text-sm text-gray-700 truncate",children:p.name||h(p.url)}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx("button",{onClick:()=>m(p.url,p.name,y),disabled:c?.[y],className:"text-[#104774] hover:underline text-sm font-medium",children:c?.[y]?"Downloading...":"Download"})})]},y))})]})]})]}),r.jsx("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 rounded-b-xl text-right",children:r.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})})]})}):r.jsx("div",{className:"fixed inset-0 bg-opacity-50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full p-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-red-500",children:"Employee not found"}),r.jsx("button",{onClick:e,className:"mt-4 px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Close"})]})})})},rv=()=>{const[n,e]=_.useState(!1),[t,s]=_.useState([]),[i,l]=_.useState(null),[c,u]=_.useState(null),[h,m]=_.useState(!1),p=async()=>{try{const S=await ye.get("/employee/all-employees");s(S.data.data||[])}catch(S){console.error("Error fetching employees:",S)}};_.useEffect(()=>{p()},[]);const y=()=>{l(null),e(!0)},x=async S=>{if(!S?._id){l(S),e(!0);return}m(!0);try{const N=await ye.get(`/employee/${S._id}`),j=N.data?.data||N.data||S;l(j),e(!0)}catch(N){console.warn("Could not fetch full employee, opening with provided object:",N),l(S),e(!0)}finally{m(!1)}},v=()=>{e(!1),l(null),p()},w=S=>{u(S._id)},A=()=>{u(null)};return r.jsxs("div",{className:"p-6 bg-gray-50 min-h-[80vh]",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Manage Employees"}),r.jsx("button",{onClick:y,className:"px-6 py-3 text-white font-semibold rounded-lg hover:opacity-90 transition shadow-md hover:shadow-lg",style:{backgroundColor:"#104774"},children:"+ New Employee"})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-[#104774] text-white",children:[r.jsx("th",{className:"p-4 text-left font-semibold text-sm uppercase tracking-wider",children:"#"}),r.jsx("th",{className:"p-4 text-left font-semibold text-sm uppercase tracking-wider",children:"Employee ID"}),r.jsx("th",{className:"p-4 text-left font-semibold text-sm uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"p-4 text-left font-semibold text-sm uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"p-4 text-left font-semibold text-sm uppercase tracking-wider",children:"Designation"}),r.jsx("th",{className:"p-4 text-left font-semibold text-sm uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"p-4 text-center font-semibold text-sm uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:t.length>0?t.map((S,N)=>r.jsxs("tr",{className:"hover:bg-blue-50 transition-colors duration-150 even:bg-gray-50",children:[r.jsx("td",{className:"p-4 font-medium text-gray-700",children:N+1}),r.jsx("td",{className:"p-4 font-mono text-sm text-blue-700",children:S.employeeId||"N/A"}),r.jsxs("td",{className:"p-4 font-medium",children:[S.firstName," ",S.lastName]}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:S.department||"N/A"})}),r.jsx("td",{className:"p-4",children:S.designation||"N/A"}),r.jsx("td",{className:"p-4 text-blue-600",children:S.user?.email||"N/A"}),r.jsxs("td",{className:"p-4 flex justify-center space-x-2",children:[r.jsx("button",{onClick:()=>x(S),className:"px-4 py-2 text-sm font-medium text-white rounded-lg hover:opacity-90 transition shadow-sm",style:{backgroundColor:"#104774"},children:"Edit"}),r.jsx("button",{onClick:()=>w(S),className:"px-4 py-2 text-sm font-medium bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition shadow-sm",children:"View"})]})]},S._id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"text-center p-8 text-gray-500",children:r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsx("p",{className:"text-xl",children:"No employees found"}),r.jsx("p",{className:"mt-2",children:'Click "New Employee" to add your first employee'})]})})})})]})})}),c&&r.jsx(K2,{employeeId:c,onClose:A}),n&&r.jsx("div",{className:"fixed inset-0 bg-opacity-40 backdrop-blur-sm z-50 flex items-center justify-center p-4 shadow-xl",children:h?r.jsxs("div",{className:"bg-white rounded-xl p-8 flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#104774] mr-4"}),r.jsx("div",{children:"Loading employee details..."})]}):r.jsx(lD,{onClose:v,employee:i,isEditMode:!!i})})]})},ym=({children:n,allowedRoles:e})=>{const{user:t,loading:s}=ls();if(s)return r.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(!t)return r.jsx(pa,{to:"/login",replace:!0});if(!e.includes(t.role)){if(t.role==="admin")return r.jsx(pa,{to:"/admin",replace:!0});if(t.role==="hr")return r.jsx(pa,{to:"/hr",replace:!0});if(t.role==="employee")return r.jsx(pa,{to:"/employee",replace:!0})}return n},J2=({isOpen:n,onClose:e,onSave:t,existingData:s})=>{const[i,l]=_.useState({accountHolderName:"",accountNumber:"",bankName:"",ifscCode:"",accountType:"savings"});_.useEffect(()=>{s&&l(s)},[s]);const c=h=>{l({...i,[h.target.name]:h.target.value})},u=async h=>{h.preventDefault(),await t(i)};return n?r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:s?"Update Bank Details":"Add Bank Details"}),r.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Holder Name"}),r.jsx("input",{type:"text",name:"accountHolderName",value:i.accountHolderName,onChange:c,required:!0,className:"w-full p-2 border rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Number"}),r.jsx("input",{type:"text",name:"accountNumber",value:i.accountNumber,onChange:c,required:!0,className:"w-full p-2 border rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bank Name"}),r.jsx("input",{type:"text",name:"bankName",value:i.bankName,onChange:c,required:!0,className:"w-full p-2 border rounded"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"IFSC Code"}),r.jsx("input",{type:"text",name:"ifscCode",value:i.ifscCode,onChange:c,required:!0,className:"w-full p-2 border rounded uppercase"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Type"}),r.jsxs("select",{name:"accountType",value:i.accountType,onChange:c,className:"w-full p-2 border rounded",children:[r.jsx("option",{value:"savings",children:"Savings"}),r.jsx("option",{value:"current",children:"Current"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-3",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#104774] text-white rounded hover:bg-[#0d3a5f]",children:s?"Update":"Save"})]})]})]})}):null},xm=()=>{const[n,e]=_.useState(null),[t,s]=_.useState(null),[i,l]=_.useState(!0),[c,u]=_.useState(!1),[h,m]=_.useState(!1);_.useEffect(()=>{p(),y()},[]);const p=async()=>{try{const N=await ye.get("/employee/profile");e(N.data.data)}catch(N){console.error("Error fetching employee profile:",N)}finally{l(!1)}},y=async()=>{try{const N=await ye.get("/employee/bank/me");s(N.data||null)}catch(N){console.error("Error fetching bank details:",N)}},x=async N=>{try{await ye.post("/employee/bank",N),alert(t?"Bank details updated!":"Bank details added!"),m(!1),y()}catch(j){console.error(j),alert(j.response?.data?.message||"Failed to save bank details")}},v=async N=>{const j=N.target.files[0];if(!j)return;if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(j.type)){alert("Please select a valid image file (JPEG, PNG, GIF)");return}if(j.size>5*1024*1024){alert("Image size should be less than 5MB");return}u(!0);try{const R=new FormData;R.append("image",j);const D=await ye.patch("/employee/profile/image",R,{headers:{"Content-Type":"multipart/form-data"}});e(O=>({...O,avatarUrl:D.data.data.avatarUrl})),alert("Profile image updated successfully!")}catch(R){console.error(R),alert(R.response?.data?.message||"Failed to upload image")}finally{u(!1),N.target.value=""}},w=N=>N?`XXXX-XXXX-${N.slice(-4)}`:"N/A";function A(N){if(N===null||typeof N>"u"||N==="")return"";const j=I=>{if(!I&&I!==0)return null;if(I instanceof Date)return{hour:I.getHours(),minute:I.getMinutes()};if(typeof I=="object"){const ee=Number(I.hour??I.h??I.H??I.hours??I.hours24),z=Number(I.minute??I.m??0);return Number.isNaN(ee)?null:{hour:ee,minute:z}}if(typeof I=="number"){const ee=Math.floor(I),z=Math.round((I-ee)*60);return{hour:ee,minute:z}}if(typeof I=="string"){let ee=I.trim();(ee.startsWith('"')&&ee.endsWith('"')||ee.startsWith("'")&&ee.endsWith("'"))&&(ee=ee.slice(1,-1).trim());const z=ee.match(/\b(AM|PM)\b/i),Z=!!z;Z&&(ee=ee.replace(/\b(AM|PM)\b/i,"").trim());const W=ee.split(":").map(L=>L.trim());let ce,me;if(W.length===1){const L=W[0];if(/^\d{3,4}$/.test(L)){const V=L.padStart(4,"0");ce=parseInt(V.slice(0,2),10),me=parseInt(V.slice(2),10)}else ce=parseInt(L,10),me=0}else ce=parseInt(W[0],10),me=parseInt(W[1],10)||0;if(Number.isNaN(ce))return null;if(Z){const L=z[0].toUpperCase();L==="PM"&&ce!==12&&(ce+=12),L==="AM"&&ce===12&&(ce=0)}return{hour:ce,minute:me}}return null},C=({hour:I,minute:ee})=>{if(I===null||typeof I>"u")return"";const z=I>=12?"PM":"AM",Z=I%12===0?12:I%12,W=String(ee??0).padStart(2,"0");return`${String(Z).padStart(2,"0")}:${W} ${z}`},R=I=>{if(typeof I=="string"){const ee=I.split(/||-|\bto\b/i).map(z=>z.trim()).filter(Boolean);if(ee.length>=2)return ee.slice(0,2);try{const z=JSON.parse(I);if(Array.isArray(z))return z;if(z&&typeof z=="object")return[z.start??z.from??z.startTime,z.end??z.to??z.endTime]}catch{}return[I]}return Array.isArray(I)?I:typeof I=="object"?[I.start??I.from??I.startTime??I[0],I.end??I.to??I.endTime??I[1]]:[String(I)]},[D,O]=R(N),B=j(D),F=j(O);return B&&F?`${C(B)}  ${C(F)}`:B?C(B):typeof N=="string"?N:Array.isArray(N)?N.join("  "):typeof N=="object"?`${D??""}${O?"  "+O:""}`:String(N)}const S=N=>N?new Date(N).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A";return i?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):n?r.jsxs("div",{className:"max-w-6xl mx-auto min-h-[75vh]",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-2",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[r.jsxs("div",{className:"flex-shrink-0 relative",children:[r.jsxs("div",{className:"w-32 h-32 rounded-full bg-gray-100 flex items-center justify-center border-2 border-gray-200 relative group",children:[n.avatarUrl?r.jsx("img",{src:n.avatarUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):r.jsxs("span",{className:"text-4xl text-gray-600 font-semibold",children:[n.firstName?.charAt(0),n.lastName?.charAt(0)]}),r.jsxs("label",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:[c?r.jsx(OT,{className:"w-6 h-6 text-white animate-spin"}):r.jsx(uT,{className:"w-6 h-6 text-white"}),r.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:c})]})]}),r.jsxs("div",{className:"text-center mt-3",children:[r.jsxs("label",{className:"text-sm text-[#104774] cursor-pointer hover:underline",children:["Change Photo",r.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:c})]}),c&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Uploading..."})]})]}),r.jsxs("div",{className:"flex-1 text-center md:text-left",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[n.firstName," ",n.lastName]}),r.jsx("p",{className:"text-xl text-[#104774] font-semibold mb-3",children:n.designation||"Software Developer"}),r.jsxs("div",{className:"space-y-1 text-gray-600",children:[r.jsxs("p",{children:["Employee ID:"," ",r.jsx("span",{className:"font-medium text-gray-800",children:n.employeeId})]}),r.jsxs("p",{children:["Date of Joining:"," ",r.jsx("span",{className:"font-medium text-gray-800",children:S(n.dateOfJoining)})]})]})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:`px-4 py-2 rounded-md text-sm font-semibold ${n.user?.isActive?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:n.user?.isActive?"Active":"Inactive"})})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-100",children:"Personal Information"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Phone:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium",children:n.phone||"+91 12347 65890"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Email:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium break-all",children:n.user?.email||"anthony@gmail.com"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Date of Birth:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium",children:S(n.dob)||"28 December 1992"})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Address:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium",children:n.address||"Dehradun, Uttarakhand"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Gender:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium capitalize",children:n.gender||"Male"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-100",children:"Job Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Designation:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium",children:n.designation||"Software Developer"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Department:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium",children:n.department||"IT & Development"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Employment Type:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium capitalize",children:n.employmentType?n.employmentType.replace("-"," "):"Full Time"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Shift Timing:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium",children:A(n.shiftTiming)||"10:00 AM  07:00 PM"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2/5 text-gray-600 font-medium",children:"Work Mode:"}),r.jsx("div",{className:"w-3/5 text-gray-900 font-medium capitalize",children:n.workMode?n.workMode.replace(/-/g," "):"Work From Home"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-2 ",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 h-60 overflow-y-scroll ",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-100 pb-3",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Bank Details"}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-[#104774] text-white text-sm rounded hover:bg-[#0d3a5f]",children:[t?r.jsx(Xm,{size:16}):r.jsx(Pi,{size:16}),t?"Edit":"Add"]})]}),t?r.jsxs("div",{className:"space-y-3 text-gray-700",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Account Holder:"})," ",t.accountHolderName]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Account Number:"})," ",w(t.accountNumber)]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Bank Name:"})," ",t.bankName]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"IFSC:"})," ",t.ifscCode]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Account Type:"})," ",t.accountType]})]}):r.jsx("div",{className:"text-center py-4 text-gray-500",children:"No bank details added yet."})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 h-60 overflow-y-scroll",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-100",children:"Documents"}),n.documents&&n.documents.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-4",children:n.documents.map((N,j)=>r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[r.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-50 border border-gray-200 rounded-lg flex items-center justify-center mr-3 flex-shrink-0",children:r.jsx("span",{className:"text-gray-500 text-sm",children:""})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:N.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded:"," ",N.uploadedAt?S(N.uploadedAt):"N/A"]})]})]}),r.jsx("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",className:"ml-3 text-[#104774] hover:text-[#0d3a5f] text-sm font-medium flex-shrink-0",children:"View"})]},j))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-50 border border-gray-200 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("span",{className:"text-gray-400 text-2xl",children:""})}),r.jsx("p",{className:"text-gray-500 font-medium",children:"No documents available"})]})]})]}),r.jsx(J2,{isOpen:h,onClose:()=>m(!1),onSave:x,existingData:t})]}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-red-500",children:"Employee profile not found"})})};var Eu,Ie,$A,GA,Kr,Ti,lv,YA,WA,Wd={},XA=[],eR=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Wa(n,e){for(var t in e)n[t]=e[t];return n}function QA(n){var e=n.parentNode;e&&e.removeChild(n)}function ie(n,e,t){var s,i,l,c={};for(l in e)l=="key"?s=e[l]:l=="ref"?i=e[l]:c[l]=e[l];if(arguments.length>2&&(c.children=arguments.length>3?Eu.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(l in n.defaultProps)c[l]===void 0&&(c[l]=n.defaultProps[l]);return Ld(n,c,s,i,null)}function Ld(n,e,t,s,i){var l={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++$A};return i==null&&Ie.vnode!=null&&Ie.vnode(l),l}function xa(){return{current:null}}function Pt(n){return n.children}function tR(n,e,t,s,i){var l;for(l in t)l==="children"||l==="key"||l in e||Xd(n,l,null,t[l],s);for(l in e)i&&typeof e[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||t[l]===e[l]||Xd(n,l,e[l],t[l],s)}function ov(n,e,t){e[0]==="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||eR.test(e)?t:t+"px"}function Xd(n,e,t,s,i){var l;e:if(e==="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||ov(n.style,e,"");if(t)for(e in t)s&&t[e]===s[e]||ov(n.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")l=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in n?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+l]=t,t?s||n.addEventListener(e,l?dv:cv,l):n.removeEventListener(e,l?dv:cv,l);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?n.removeAttribute(e):n.setAttribute(e,t))}}function cv(n){Kr=!0;try{return this.l[n.type+!1](Ie.event?Ie.event(n):n)}finally{Kr=!1}}function dv(n){Kr=!0;try{return this.l[n.type+!0](Ie.event?Ie.event(n):n)}finally{Kr=!1}}function Js(n,e){this.props=n,this.context=e}function Ro(n,e){if(e==null)return n.__?Ro(n.__,n.__.__k.indexOf(n)+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Ro(n):null}function ZA(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return ZA(n)}}function sR(n){Kr?setTimeout(n):YA(n)}function rp(n){(!n.__d&&(n.__d=!0)&&Ti.push(n)&&!Qd.__r++||lv!==Ie.debounceRendering)&&((lv=Ie.debounceRendering)||sR)(Qd)}function Qd(){var n,e,t,s,i,l,c,u;for(Ti.sort(function(h,m){return h.__v.__b-m.__v.__b});n=Ti.shift();)n.__d&&(e=Ti.length,s=void 0,i=void 0,c=(l=(t=n).__v).__e,(u=t.__P)&&(s=[],(i=Wa({},l)).__v=l.__v+1,Kp(u,l,i,t.__n,u.ownerSVGElement!==void 0,l.__h!=null?[c]:null,s,c??Ro(l),l.__h),s1(s,l),l.__e!=c&&ZA(l)),Ti.length>e&&Ti.sort(function(h,m){return h.__v.__b-m.__v.__b}));Qd.__r=0}function KA(n,e,t,s,i,l,c,u,h,m){var p,y,x,v,w,A,S,N=s&&s.__k||XA,j=N.length;for(t.__k=[],p=0;p<e.length;p++)if((v=t.__k[p]=(v=e[p])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?Ld(null,v,null,null,v):Array.isArray(v)?Ld(Pt,{children:v},null,null,null):v.__b>0?Ld(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)!=null){if(v.__=t,v.__b=t.__b+1,(x=N[p])===null||x&&v.key==x.key&&v.type===x.type)N[p]=void 0;else for(y=0;y<j;y++){if((x=N[y])&&v.key==x.key&&v.type===x.type){N[y]=void 0;break}x=null}Kp(n,v,x=x||Wd,i,l,c,u,h,m),w=v.__e,(y=v.ref)&&x.ref!=y&&(S||(S=[]),x.ref&&S.push(x.ref,null,v),S.push(y,v.__c||w,v)),w!=null?(A==null&&(A=w),typeof v.type=="function"&&v.__k===x.__k?v.__d=h=JA(v,h,n):h=e1(n,v,x,N,w,h),typeof t.type=="function"&&(t.__d=h)):h&&x.__e==h&&h.parentNode!=n&&(h=Ro(x))}for(t.__e=A,p=j;p--;)N[p]!=null&&(typeof t.type=="function"&&N[p].__e!=null&&N[p].__e==t.__d&&(t.__d=t1(s).nextSibling),a1(N[p],N[p]));if(S)for(p=0;p<S.length;p++)n1(S[p],S[++p],S[++p])}function JA(n,e,t){for(var s,i=n.__k,l=0;i&&l<i.length;l++)(s=i[l])&&(s.__=n,e=typeof s.type=="function"?JA(s,e,t):e1(t,s,s,i,s.__e,e));return e}function Zd(n,e){return e=e||[],n==null||typeof n=="boolean"||(Array.isArray(n)?n.some(function(t){Zd(t,e)}):e.push(n)),e}function e1(n,e,t,s,i,l){var c,u,h;if(e.__d!==void 0)c=e.__d,e.__d=void 0;else if(t==null||i!=l||i.parentNode==null)e:if(l==null||l.parentNode!==n)n.appendChild(i),c=null;else{for(u=l,h=0;(u=u.nextSibling)&&h<s.length;h+=1)if(u==i)break e;n.insertBefore(i,l),c=l}return c!==void 0?c:i.nextSibling}function t1(n){var e,t,s;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(e=n.__k.length-1;e>=0;e--)if((t=n.__k[e])&&(s=t1(t)))return s}return null}function Kp(n,e,t,s,i,l,c,u,h){var m,p,y,x,v,w,A,S,N,j,C,R,D,O,B,F=e.type;if(e.constructor!==void 0)return null;t.__h!=null&&(h=t.__h,u=e.__e=t.__e,e.__h=null,l=[u]),(m=Ie.__b)&&m(e);try{e:if(typeof F=="function"){if(S=e.props,N=(m=F.contextType)&&s[m.__c],j=m?N?N.props.value:m.__:s,t.__c?A=(p=e.__c=t.__c).__=p.__E:("prototype"in F&&F.prototype.render?e.__c=p=new F(S,j):(e.__c=p=new Js(S,j),p.constructor=F,p.render=aR),N&&N.sub(p),p.props=S,p.state||(p.state={}),p.context=j,p.__n=s,y=p.__d=!0,p.__h=[],p._sb=[]),p.__s==null&&(p.__s=p.state),F.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Wa({},p.__s)),Wa(p.__s,F.getDerivedStateFromProps(S,p.__s))),x=p.props,v=p.state,p.__v=e,y)F.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(F.getDerivedStateFromProps==null&&S!==x&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(S,j),!p.__e&&p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(S,p.__s,j)===!1||e.__v===t.__v){for(e.__v!==t.__v&&(p.props=S,p.state=p.__s,p.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(I){I&&(I.__=e)}),C=0;C<p._sb.length;C++)p.__h.push(p._sb[C]);p._sb=[],p.__h.length&&c.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(S,p.__s,j),p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(x,v,w)})}if(p.context=j,p.props=S,p.__P=n,R=Ie.__r,D=0,"prototype"in F&&F.prototype.render){for(p.state=p.__s,p.__d=!1,R&&R(e),m=p.render(p.props,p.state,p.context),O=0;O<p._sb.length;O++)p.__h.push(p._sb[O]);p._sb=[]}else do p.__d=!1,R&&R(e),m=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++D<25);p.state=p.__s,p.getChildContext!=null&&(s=Wa(Wa({},s),p.getChildContext())),y||p.getSnapshotBeforeUpdate==null||(w=p.getSnapshotBeforeUpdate(x,v)),B=m!=null&&m.type===Pt&&m.key==null?m.props.children:m,KA(n,Array.isArray(B)?B:[B],e,t,s,i,l,c,u,h),p.base=e.__e,e.__h=null,p.__h.length&&c.push(p),A&&(p.__E=p.__=null),p.__e=!1}else l==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=nR(t.__e,e,t,s,i,l,c,h);(m=Ie.diffed)&&m(e)}catch(I){e.__v=null,(h||l!=null)&&(e.__e=u,e.__h=!!h,l[l.indexOf(u)]=null),Ie.__e(I,e,t)}}function s1(n,e){Ie.__c&&Ie.__c(e,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(s){s.call(t)})}catch(s){Ie.__e(s,t.__v)}})}function nR(n,e,t,s,i,l,c,u){var h,m,p,y=t.props,x=e.props,v=e.type,w=0;if(v==="svg"&&(i=!0),l!=null){for(;w<l.length;w++)if((h=l[w])&&"setAttribute"in h==!!v&&(v?h.localName===v:h.nodeType===3)){n=h,l[w]=null;break}}if(n==null){if(v===null)return document.createTextNode(x);n=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,x.is&&x),l=null,u=!1}if(v===null)y===x||u&&n.data===x||(n.data=x);else{if(l=l&&Eu.call(n.childNodes),m=(y=t.props||Wd).dangerouslySetInnerHTML,p=x.dangerouslySetInnerHTML,!u){if(l!=null)for(y={},w=0;w<n.attributes.length;w++)y[n.attributes[w].name]=n.attributes[w].value;(p||m)&&(p&&(m&&p.__html==m.__html||p.__html===n.innerHTML)||(n.innerHTML=p&&p.__html||""))}if(tR(n,x,y,i,u),p)e.__k=[];else if(w=e.props.children,KA(n,Array.isArray(w)?w:[w],e,t,s,i&&v!=="foreignObject",l,c,l?l[0]:t.__k&&Ro(t,0),u),l!=null)for(w=l.length;w--;)l[w]!=null&&QA(l[w]);u||("value"in x&&(w=x.value)!==void 0&&(w!==n.value||v==="progress"&&!w||v==="option"&&w!==y.value)&&Xd(n,"value",w,y.value,!1),"checked"in x&&(w=x.checked)!==void 0&&w!==n.checked&&Xd(n,"checked",w,y.checked,!1))}return n}function n1(n,e,t){try{typeof n=="function"?n(e):n.current=e}catch(s){Ie.__e(s,t)}}function a1(n,e,t){var s,i;if(Ie.unmount&&Ie.unmount(n),(s=n.ref)&&(s.current&&s.current!==n.__e||n1(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){Ie.__e(l,e)}s.base=s.__P=null,n.__c=void 0}if(s=n.__k)for(i=0;i<s.length;i++)s[i]&&a1(s[i],e,t||typeof n.type!="function");t||n.__e==null||QA(n.__e),n.__=n.__e=n.__d=void 0}function aR(n,e,t){return this.constructor(n,t)}function ko(n,e,t){var s,i,l;Ie.__&&Ie.__(n,e),i=(s=!1)?null:e.__k,l=[],Kp(e,n=e.__k=ie(Pt,null,[n]),i||Wd,Wd,e.ownerSVGElement!==void 0,i?null:e.firstChild?Eu.call(e.childNodes):null,l,i?i.__e:e.firstChild,s),s1(l,n)}function iR(n,e){var t={__c:e="__cC"+WA++,__:n,Consumer:function(s,i){return s.children(i)},Provider:function(s){var i,l;return this.getChildContext||(i=[],(l={})[e]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&i.some(function(u){u.__e=!0,rp(u)})},this.sub=function(c){i.push(c);var u=c.componentWillUnmount;c.componentWillUnmount=function(){i.splice(i.indexOf(c),1),u&&u.call(c)}}),s.children}};return t.Provider.__=t.Consumer.contextType=t}Eu=XA.slice,Ie={__e:function(n,e,t,s){for(var i,l,c;e=e.__;)if((i=e.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(n)),c=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,s||{}),c=i.__d),c)return i.__E=i}catch(u){n=u}throw n}},$A=0,GA=function(n){return n!=null&&n.constructor===void 0},Kr=!1,Js.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wa({},this.state),typeof n=="function"&&(n=n(Wa({},t),this.props)),n&&Wa(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),rp(this))},Js.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),rp(this))},Js.prototype.render=Pt,Ti=[],YA=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qd.__r=0,WA=0;var Gn,bm,uv,i1=[],vm=[],hv=Ie.__b,fv=Ie.__r,mv=Ie.diffed,pv=Ie.__c,gv=Ie.unmount;function rR(){for(var n;n=i1.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Od),n.__H.__h.forEach(lp),n.__H.__h=[]}catch(e){n.__H.__h=[],Ie.__e(e,n.__v)}}Ie.__b=function(n){Gn=null,hv&&hv(n)},Ie.__r=function(n){fv&&fv(n);var e=(Gn=n.__c).__H;e&&(bm===Gn?(e.__h=[],Gn.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=vm,t.__N=t.i=void 0})):(e.__h.forEach(Od),e.__h.forEach(lp),e.__h=[])),bm=Gn},Ie.diffed=function(n){mv&&mv(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(i1.push(e)!==1&&uv===Ie.requestAnimationFrame||((uv=Ie.requestAnimationFrame)||lR)(rR)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==vm&&(t.__=t.__V),t.i=void 0,t.__V=vm})),bm=Gn=null},Ie.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Od),t.__h=t.__h.filter(function(s){return!s.__||lp(s)})}catch(s){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Ie.__e(s,t.__v)}}),pv&&pv(n,e)},Ie.unmount=function(n){gv&&gv(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{Od(s)}catch(i){e=i}}),t.__H=void 0,e&&Ie.__e(e,t.__v))};var yv=typeof requestAnimationFrame=="function";function lR(n){var e,t=function(){clearTimeout(s),yv&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(t,100);yv&&(e=requestAnimationFrame(t))}function Od(n){var e=Gn,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Gn=e}function lp(n){var e=Gn;n.__c=n.__(),Gn=e}function oR(n,e){for(var t in e)n[t]=e[t];return n}function xv(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var s in e)if(s!=="__source"&&n[s]!==e[s])return!0;return!1}function bv(n){this.props=n}(bv.prototype=new Js).isPureReactComponent=!0,bv.prototype.shouldComponentUpdate=function(n,e){return xv(this.props,n)||xv(this.state,e)};var vv=Ie.__b;Ie.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),vv&&vv(n)};var cR=Ie.__e;Ie.__e=function(n,e,t,s){if(n.then){for(var i,l=e;l=l.__;)if((i=l.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}cR(n,e,t,s)};var wv=Ie.unmount;function r1(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),n.__c.__H=null),(n=oR({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(s){return r1(s,e,t)})),n}function l1(n,e,t){return n&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(s){return l1(s,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.insertBefore(n.__e,n.__d),n.__c.__e=!0,n.__c.__P=t)),n}function wm(){this.__u=0,this.t=null,this.__b=null}function o1(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function xd(){this.u=null,this.o=null}Ie.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&n.__h===!0&&(n.type=null),wv&&wv(n)},(wm.prototype=new Js).__c=function(n,e){var t=e.__c,s=this;s.t==null&&(s.t=[]),s.t.push(t);var i=o1(s.__v),l=!1,c=function(){l||(l=!0,t.__R=null,i?i(u):u())};t.__R=c;var u=function(){if(!--s.__u){if(s.state.__a){var m=s.state.__a;s.__v.__k[0]=l1(m,m.__c.__P,m.__c.__O)}var p;for(s.setState({__a:s.__b=null});p=s.t.pop();)p.forceUpdate()}},h=e.__h===!0;s.__u++||h||s.setState({__a:s.__b=s.__v.__k[0]}),n.then(c,c)},wm.prototype.componentWillUnmount=function(){this.t=[]},wm.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=r1(this.__b,t,s.__O=s.__P)}this.__b=null}var i=e.__a&&ie(Pt,null,n.fallback);return i&&(i.__h=null),[ie(Pt,null,e.__a?null:n.children),i]};var Av=function(n,e,t){if(++t[1]===t[0]&&n.o.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.o.size))for(t=n.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.u=t=t[2]}};function dR(n){return this.getChildContext=function(){return n.context},n.children}function uR(n){var e=this,t=n.i;e.componentWillUnmount=function(){ko(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),n.__v?(e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],appendChild:function(s){this.childNodes.push(s),e.i.appendChild(s)},insertBefore:function(s,i){this.childNodes.push(s),e.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.i.removeChild(s)}}),ko(ie(dR,{context:e.context},n.__v),e.l)):e.l&&e.componentWillUnmount()}function hR(n,e){var t=ie(uR,{__v:n,i:e});return t.containerInfo=e,t}(xd.prototype=new Js).__a=function(n){var e=this,t=o1(e.__v),s=e.o.get(n);return s[0]++,function(i){var l=function(){e.props.revealOrder?(s.push(i),Av(e,n,s)):i()};t?t(l):l()}},xd.prototype.render=function(n){this.u=null,this.o=new Map;var e=Zd(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return n.children},xd.prototype.componentDidUpdate=xd.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(e,t){Av(n,t,e)})};var fR=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,mR=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pR=typeof document<"u",gR=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(n)};Js.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Js.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var Sv=Ie.event;function yR(){}function xR(){return this.cancelBubble}function bR(){return this.defaultPrevented}Ie.event=function(n){return Sv&&(n=Sv(n)),n.persist=yR,n.isPropagationStopped=xR,n.isDefaultPrevented=bR,n.nativeEvent=n};var Nv={configurable:!0,get:function(){return this.class}},Ev=Ie.vnode;Ie.vnode=function(n){var e=n.type,t=n.props,s=t;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var l in s={},t){var c=t[l];pR&&l==="children"&&e==="noscript"||l==="value"&&"defaultValue"in t&&c==null||(l==="defaultValue"&&"value"in t&&t.value==null?l="value":l==="download"&&c===!0?c="":/ondoubleclick/i.test(l)?l="ondblclick":/^onchange(textarea|input)/i.test(l+e)&&!gR(t.type)?l="oninput":/^onfocus$/i.test(l)?l="onfocusin":/^onblur$/i.test(l)?l="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(l)?l=l.toLowerCase():i&&mR.test(l)?l=l.replace(/[A-Z0-9]/g,"-$&").toLowerCase():c===null&&(c=void 0),/^oninput$/i.test(l)&&(l=l.toLowerCase(),s[l]&&(l="oninputCapture")),s[l]=c)}e=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Zd(t.children).forEach(function(u){u.props.selected=s.value.indexOf(u.props.value)!=-1})),e=="select"&&s.defaultValue!=null&&(s.value=Zd(t.children).forEach(function(u){u.props.selected=s.multiple?s.defaultValue.indexOf(u.props.value)!=-1:s.defaultValue==u.props.value})),n.props=s,t.class!=t.className&&(Nv.enumerable="className"in t,t.className!=null&&(s.class=t.className),Object.defineProperty(s,"className",Nv))}n.$$typeof=fR,Ev&&Ev(n)};var jv=Ie.__r;Ie.__r=function(n){jv&&jv(n),n.__c};const c1=[],op=new Map;function d1(n){c1.push(n),op.forEach(e=>{h1(e,n)})}function vR(n){n.isConnected&&n.getRootNode&&u1(n.getRootNode())}function u1(n){let e=op.get(n);if(!e||!e.isConnected){if(e=n.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const t=AR();t&&(e.nonce=t);const s=n===document?document.head:n,i=n===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(e,i)}op.set(n,e),wR(e)}}function wR(n){for(const e of c1)h1(n,e)}function h1(n,e){const{sheet:t}=n,s=t.cssRules.length;e.split("}").forEach((i,l)=>{i=i.trim(),i&&t.insertRule(i+"}",s+l)})}let Am;function AR(){return Am===void 0&&(Am=SR()),Am}function SR(){const n=document.querySelector('meta[name="csp-nonce"]');if(n&&n.hasAttribute("content"))return n.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&u1(document);var NR=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';d1(NR);class Jp{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:t}=this;t[e]=(t[e]||0)+1,this.clearTimeout()}resume(e="",t){let{pauseDepths:s}=this;e in s&&(t?delete s[e]:(s[e]-=1,s[e]<=0&&delete s[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function eg(n){n.parentNode&&n.parentNode.removeChild(n)}function bs(n,e){if(n.closest)return n.closest(e);if(!document.documentElement.contains(n))return null;do{if(ER(n,e))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}function ER(n,e){return(n.matches||n.matchesSelector||n.msMatchesSelector).call(n,e)}function jR(n,e){let t=n instanceof HTMLElement?[n]:n,s=[];for(let i=0;i<t.length;i+=1){let l=t[i].querySelectorAll(e);for(let c=0;c<l.length;c+=1)s.push(l[c])}return s}const _R=/(top|left|right|bottom|width|height)$/i;function vo(n,e){for(let t in e)f1(n,t,e[t])}function f1(n,e,t){t==null?n.style[e]="":typeof t=="number"&&_R.test(e)?n.style[e]=`${t}px`:n.style[e]=t}function m1(n){var e,t;return(t=(e=n.composedPath)===null||e===void 0?void 0:e.call(n)[0])!==null&&t!==void 0?t:n.target}let _v=0;function ju(){return _v+=1,"fc-dom-"+_v}function _u(n){n.preventDefault()}function CR(n,e){return t=>{let s=bs(t.target,n);s&&e.call(s,t,s)}}function p1(n,e,t,s){let i=CR(t,s);return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}function TR(n,e,t,s){let i;return p1(n,"mouseover",e,(l,c)=>{if(c!==i){i=c,t(l,c);let u=h=>{i=null,s(h,c),c.removeEventListener("mouseleave",u)};c.addEventListener("mouseleave",u)}})}const Cv=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function DR(n,e){let t=s=>{e(s),Cv.forEach(i=>{n.removeEventListener(i,t)})};Cv.forEach(s=>{n.addEventListener(s,t)})}function g1(n){return Object.assign({onClick:n},y1(n))}function y1(n){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(n(e),e.preventDefault())}}}let Tv=0;function Yi(){return Tv+=1,String(Tv)}function tg(){document.body.classList.add("fc-not-allowed")}function sg(){document.body.classList.remove("fc-not-allowed")}function RR(n){n.style.userSelect="none",n.style.webkitUserSelect="none",n.addEventListener("selectstart",_u)}function kR(n){n.style.userSelect="",n.style.webkitUserSelect="",n.removeEventListener("selectstart",_u)}function MR(n){n.addEventListener("contextmenu",_u)}function LR(n){n.removeEventListener("contextmenu",_u)}function OR(n){let e=[],t=[],s,i;for(typeof n=="string"?t=n.split(/\s*,\s*/):typeof n=="function"?t=[n]:Array.isArray(n)&&(t=n),s=0;s<t.length;s+=1)i=t[s],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function IR(n,e,t){let s,i;for(s=0;s<t.length;s+=1)if(i=PR(n,e,t[s]),i)return i;return 0}function PR(n,e,t){return t.func?t.func(n,e):BR(n[t.field],e[t.field])*(t.order||1)}function BR(n,e){return!n&&!e?0:e==null?-1:n==null?1:typeof n=="string"||typeof e=="string"?String(n).localeCompare(String(e)):n-e}function Sm(n,e){let t=String(n);return"000".substr(0,e-t.length)+t}function wo(n,e,t){return typeof n=="function"?n(...e):typeof n=="string"?e.reduce((s,i,l)=>s.replace("$"+l,i||""),n):t}function HR(n,e){return n-e}function Nm(n){return n%1===0}function zR(n){let e=n.querySelector(".fc-scrollgrid-shrink-frame"),t=n.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!t)throw new Error("needs fc-scrollgrid-shrink-cushion className");return n.getBoundingClientRect().width-e.getBoundingClientRect().width+t.getBoundingClientRect().width}const FR=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function ct(n,e){return typeof n=="string"?UR(n):typeof n=="object"&&n?Dv(n):typeof n=="number"?Dv({[e||"milliseconds"]:n}):null}function UR(n){let e=FR.exec(n);if(e){let t=e[1]?-1:1;return{years:0,months:0,days:t*(e[2]?parseInt(e[2],10):0),milliseconds:t*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function Dv(n){let e={years:n.years||n.year||0,months:n.months||n.month||0,days:n.days||n.day||0,milliseconds:(n.hours||n.hour||0)*60*60*1e3+(n.minutes||n.minute||0)*60*1e3+(n.seconds||n.second||0)*1e3+(n.milliseconds||n.millisecond||n.ms||0)},t=n.weeks||n.week;return t&&(e.days+=t*7,e.specifiedWeeks=!0),e}function qR(n,e){return n.years===e.years&&n.months===e.months&&n.days===e.days&&n.milliseconds===e.milliseconds}function VR(n,e){return{years:n.years-e.years,months:n.months-e.months,days:n.days-e.days,milliseconds:n.milliseconds-e.milliseconds}}function $R(n){return Wr(n)/365}function GR(n){return Wr(n)/30}function Wr(n){return Mo(n)/864e5}function Mo(n){return n.years*(365*864e5)+n.months*(30*864e5)+n.days*864e5+n.milliseconds}function cp(n){let e=n.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return n.days?n.specifiedWeeks&&n.days%7===0?{unit:"week",value:n.days/7}:{unit:"day",value:n.days}:n.months?{unit:"month",value:n.months}:n.years?{unit:"year",value:n.years}:{unit:"millisecond",value:0}}function ei(n,e,t){if(n===e)return!0;let s=n.length,i;if(s!==e.length)return!1;for(i=0;i<s;i+=1)if(!(t?t(n[i],e[i]):n[i]===e[i]))return!1;return!0}const YR=["sun","mon","tue","wed","thu","fri","sat"];function Rv(n,e){let t=Xa(n);return t[2]+=e*7,Is(t)}function rs(n,e){let t=Xa(n);return t[2]+=e,Is(t)}function ti(n,e){let t=Xa(n);return t[6]+=e,Is(t)}function WR(n,e){return ll(n,e)/7}function ll(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60*24)}function XR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60*60)}function QR(n,e){return(e.valueOf()-n.valueOf())/(1e3*60)}function ZR(n,e){return(e.valueOf()-n.valueOf())/1e3}function KR(n,e){let t=Ct(n),s=Ct(e);return{years:0,months:0,days:Math.round(ll(t,s)),milliseconds:e.valueOf()-s.valueOf()-(n.valueOf()-t.valueOf())}}function JR(n,e){let t=Kd(n,e);return t!==null&&t%7===0?t/7:null}function Kd(n,e){return Qa(n)===Qa(e)?Math.round(ll(n,e)):null}function Ct(n){return Is([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()])}function ek(n){return Is([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours()])}function tk(n){return Is([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes()])}function sk(n){return Is([n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds()])}function nk(n,e,t){let s=n.getUTCFullYear(),i=Em(n,s,e,t);if(i<1)return Em(n,s-1,e,t);let l=Em(n,s+1,e,t);return l>=1?Math.min(i,l):i}function Em(n,e,t,s){let i=Is([e,0,1+ak(e,t,s)]),l=Ct(n),c=Math.round(ll(i,l));return Math.floor(c/7)+1}function ak(n,e,t){let s=7+e-t;return-((7+Is([n,0,s]).getUTCDay()-e)%7)+s-1}function kv(n){return[n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()]}function Mv(n){return new Date(n[0],n[1]||0,n[2]==null?1:n[2],n[3]||0,n[4]||0,n[5]||0)}function Xa(n){return[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]}function Is(n){return n.length===1&&(n=n.concat([0])),new Date(Date.UTC(...n))}function x1(n){return!isNaN(n.valueOf())}function Qa(n){return n.getUTCHours()*1e3*60*60+n.getUTCMinutes()*1e3*60+n.getUTCSeconds()*1e3+n.getUTCMilliseconds()}function ik(n,e,t=!1){let s=n.toISOString();return s=s.replace(".000",""),t&&(s=s.replace("T00:00:00Z","")),s.length>10&&(e==null?s=s.replace("Z",""):e!==0&&(s=s.replace("Z",ag(e,!0)))),s}function ng(n){return n.toISOString().replace(/T.*$/,"")}function rk(n){return n.toISOString().match(/^\d{4}-\d{2}/)[0]}function ag(n,e=!1){let t=n<0?"-":"+",s=Math.abs(n),i=Math.floor(s/60),l=Math.round(s%60);return e?`${t+Sm(i,2)}:${Sm(l,2)}`:`GMT${t}${i}${l?`:${Sm(l,2)}`:""}`}function lt(n,e,t){let s,i;return function(...l){if(!s)i=n.apply(this,l);else if(!ei(s,l)){let c=n.apply(this,l);(!e||!e(c,i))&&(i=c)}return s=l,i}}function Id(n,e,t){let s,i;return l=>(s?Cn(s,l)||(i=n.call(this,l)):i=n.call(this,l),s=l,i)}const jm={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Jd={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},bd=/\s*([ap])\.?m\.?/i,lk=/,/g,ok=/\s+/g,ck=/\u200e/g,dk=/UTC|GMT/;class uk{constructor(e){let t={},s={},i=9;for(let l in e)l in jm?(s[l]=e[l],jm[l]<9&&(i=Math.min(jm[l],i))):(t[l]=e[l],l in Jd&&(i=Math.min(Jd[l],i)));this.standardDateProps=t,this.extendedSettings=s,this.smallestUnitNum=i,this.buildFormattingFunc=lt(Lv)}format(e,t){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,t)(e)}formatRange(e,t,s,i){let{standardDateProps:l,extendedSettings:c}=this,u=yk(e.marker,t.marker,s.calendarSystem);if(!u)return this.format(e,s);let h=u;h>1&&(l.year==="numeric"||l.year==="2-digit")&&(l.month==="numeric"||l.month==="2-digit")&&(l.day==="numeric"||l.day==="2-digit")&&(h=1);let m=this.format(e,s),p=this.format(t,s);if(m===p)return m;let y=xk(l,h),x=Lv(y,c,s),v=x(e),w=x(t),A=bk(m,v,p,w),S=c.separator||i||s.defaultSeparator||"";return A?A.before+v+S+w+A.after:m+S+p}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function Lv(n,e,t){let s=Object.keys(n).length;return s===1&&n.timeZoneName==="short"?i=>ag(i.timeZoneOffset):s===0&&e.week?i=>gk(t.computeWeekNumber(i.marker),t.weekText,t.weekTextLong,t.locale,e.week):hk(n,e,t)}function hk(n,e,t){n=Object.assign({},n),e=Object.assign({},e),fk(n,e),n.timeZone="UTC";let s=new Intl.DateTimeFormat(t.locale.codes,n),i;if(e.omitZeroMinute){let l=Object.assign({},n);delete l.minute,i=new Intl.DateTimeFormat(t.locale.codes,l)}return l=>{let{marker:c}=l,u;i&&!c.getUTCMinutes()?u=i:u=s;let h=u.format(c);return mk(h,l,n,e,t)}}function fk(n,e){n.timeZoneName&&(n.hour||(n.hour="2-digit"),n.minute||(n.minute="2-digit")),n.timeZoneName==="long"&&(n.timeZoneName="short"),e.omitZeroMinute&&(n.second||n.millisecond)&&delete e.omitZeroMinute}function mk(n,e,t,s,i){return n=n.replace(ck,""),t.timeZoneName==="short"&&(n=pk(n,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":ag(e.timeZoneOffset))),s.omitCommas&&(n=n.replace(lk,"").trim()),s.omitZeroMinute&&(n=n.replace(":00","")),s.meridiem===!1?n=n.replace(bd,"").trim():s.meridiem==="narrow"?n=n.replace(bd,(l,c)=>c.toLocaleLowerCase()):s.meridiem==="short"?n=n.replace(bd,(l,c)=>`${c.toLocaleLowerCase()}m`):s.meridiem==="lowercase"&&(n=n.replace(bd,l=>l.toLocaleLowerCase())),n=n.replace(ok," "),n=n.trim(),n}function pk(n,e){let t=!1;return n=n.replace(dk,()=>(t=!0,e)),t||(n+=` ${e}`),n}function gk(n,e,t,s,i){let l=[];return i==="long"?l.push(t):(i==="short"||i==="narrow")&&l.push(e),(i==="long"||i==="short")&&l.push(" "),l.push(s.simpleNumberFormat.format(n)),s.options.direction==="rtl"&&l.reverse(),l.join("")}function yk(n,e,t){return t.getMarkerYear(n)!==t.getMarkerYear(e)?5:t.getMarkerMonth(n)!==t.getMarkerMonth(e)?4:t.getMarkerDay(n)!==t.getMarkerDay(e)?2:Qa(n)!==Qa(e)?1:0}function xk(n,e){let t={};for(let s in n)(!(s in Jd)||Jd[s]<=e)&&(t[s]=n[s]);return t}function bk(n,e,t,s){let i=0;for(;i<n.length;){let l=n.indexOf(e,i);if(l===-1)break;let c=n.substr(0,l);i=l+e.length;let u=n.substr(i),h=0;for(;h<t.length;){let m=t.indexOf(s,h);if(m===-1)break;let p=t.substr(0,m);h=m+s.length;let y=t.substr(h);if(c===p&&u===y)return{before:c,after:u}}}return null}function Ov(n,e){let t=e.markerToArray(n.marker);return{marker:n.marker,timeZoneOffset:n.timeZoneOffset,array:t,year:t[0],month:t[1],day:t[2],hour:t[3],minute:t[4],second:t[5],millisecond:t[6]}}function eu(n,e,t,s){let i=Ov(n,t.calendarSystem),l=e?Ov(e,t.calendarSystem):null;return{date:i,start:i,end:l,timeZone:t.timeZone,localeCodes:t.locale.codes,defaultSeparator:s||t.defaultSeparator}}class vk{constructor(e){this.cmdStr=e}format(e,t,s){return t.cmdFormatter(this.cmdStr,eu(e,null,t,s))}formatRange(e,t,s,i){return s.cmdFormatter(this.cmdStr,eu(e,t,s,i))}}class wk{constructor(e){this.func=e}format(e,t,s){return this.func(eu(e,null,t,s))}formatRange(e,t,s,i){return this.func(eu(e,t,s,i))}}function is(n){return typeof n=="object"&&n?new uk(n):typeof n=="string"?new vk(n):typeof n=="function"?new wk(n):null}const Iv={navLinkDayClick:ae,navLinkWeekClick:ae,duration:ct,bootstrapFontAwesome:ae,buttonIcons:ae,customButtons:ae,defaultAllDayEventDuration:ct,defaultTimedEventDuration:ct,nextDayThreshold:ct,scrollTime:ct,scrollTimeReset:Boolean,slotMinTime:ct,slotMaxTime:ct,dayPopoverFormat:is,slotDuration:ct,snapDuration:ct,headerToolbar:ae,footerToolbar:ae,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:is,dayHeaderClassNames:ae,dayHeaderContent:ae,dayHeaderDidMount:ae,dayHeaderWillUnmount:ae,dayCellClassNames:ae,dayCellContent:ae,dayCellDidMount:ae,dayCellWillUnmount:ae,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:ae,weekNumbers:Boolean,weekNumberClassNames:ae,weekNumberContent:ae,weekNumberDidMount:ae,weekNumberWillUnmount:ae,editable:Boolean,viewClassNames:ae,viewDidMount:ae,viewWillUnmount:ae,nowIndicator:Boolean,nowIndicatorSnap:ae,nowIndicatorClassNames:ae,nowIndicatorContent:ae,nowIndicatorDidMount:ae,nowIndicatorWillUnmount:ae,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:ae,locale:ae,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:ae,eventOrder:OR,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:ae,contentHeight:ae,direction:String,weekNumberFormat:is,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:ae,initialDate:ae,now:ae,eventDataTransform:ae,stickyHeaderDates:ae,stickyFooterScrollbar:ae,viewHeight:ae,defaultAllDay:Boolean,eventSourceFailure:ae,eventSourceSuccess:ae,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:ae,eventConstraint:ae,eventAllow:ae,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:ae,eventContent:ae,eventDidMount:ae,eventWillUnmount:ae,selectConstraint:ae,selectOverlap:ae,selectAllow:ae,droppable:Boolean,unselectCancel:String,slotLabelFormat:ae,slotLaneClassNames:ae,slotLaneContent:ae,slotLaneDidMount:ae,slotLaneWillUnmount:ae,slotLabelClassNames:ae,slotLabelContent:ae,slotLabelDidMount:ae,slotLabelWillUnmount:ae,dayMaxEvents:ae,dayMaxEventRows:ae,dayMinWidth:Number,slotLabelInterval:ct,allDayText:String,allDayClassNames:ae,allDayContent:ae,allDayDidMount:ae,allDayWillUnmount:ae,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:is,rerenderDelay:Number,moreLinkText:ae,moreLinkHint:ae,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:ae,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:ct,hiddenDays:ae,fixedWeekCount:Boolean,validRange:ae,visibleRange:ae,titleFormat:ae,eventInteractive:Boolean,noEventsText:String,viewHint:ae,navLinkHint:ae,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:ae,moreLinkClassNames:ae,moreLinkContent:ae,moreLinkDidMount:ae,moreLinkWillUnmount:ae,monthStartFormat:is,handleCustomRendering:ae,customRenderingMetaMap:ae,customRenderingReplaces:Boolean},Ao={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},Pv={datesSet:ae,eventsSet:ae,eventAdd:ae,eventChange:ae,eventRemove:ae,windowResize:ae,eventClick:ae,eventMouseEnter:ae,eventMouseLeave:ae,select:ae,unselect:ae,loading:ae,_unmount:ae,_beforeprint:ae,_afterprint:ae,_noEventDrop:ae,_noEventResize:ae,_resize:ae,_scrollRequest:ae},Bv={buttonText:ae,buttonHints:ae,views:ae,plugins:ae,initialEvents:ae,events:ae,eventSources:ae},ji={headerToolbar:_i,footerToolbar:_i,buttonText:_i,buttonHints:_i,buttonIcons:_i,dateIncrement:_i,plugins:vd,events:vd,eventSources:vd,resources:vd};function _i(n,e){return typeof n=="object"&&typeof e=="object"&&n&&e?Cn(n,e):n===e}function vd(n,e){return Array.isArray(n)&&Array.isArray(e)?ei(n,e):n===e}const Ak={type:String,component:ae,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:ae,usesMinMaxTime:Boolean,classNames:ae,content:ae,didMount:ae,willUnmount:ae};function _m(n){return rg(n,ji)}function ig(n,e){let t={},s={};for(let i in e)i in n&&(t[i]=e[i](n[i]));for(let i in n)i in e||(s[i]=n[i]);return{refined:t,extra:s}}function ae(n){return n}const{hasOwnProperty:tu}=Object.prototype;function rg(n,e){let t={};if(e){for(let s in e)if(e[s]===_i){let i=[];for(let l=n.length-1;l>=0;l-=1){let c=n[l][s];if(typeof c=="object"&&c)i.unshift(c);else if(c!==void 0){t[s]=c;break}}i.length&&(t[s]=rg(i))}}for(let s=n.length-1;s>=0;s-=1){let i=n[s];for(let l in i)l in t||(t[l]=i[l])}return t}function qi(n,e){let t={};for(let s in n)e(n[s],s)&&(t[s]=n[s]);return t}function Wi(n,e){let t={};for(let s in n)t[s]=e(n[s],s);return t}function b1(n){let e={};for(let t of n)e[t]=!0;return e}function lg(n){let e=[];for(let t in n)e.push(n[t]);return e}function Cn(n,e){if(n===e)return!0;for(let t in n)if(tu.call(n,t)&&!(t in e))return!1;for(let t in e)if(tu.call(e,t)&&n[t]!==e[t])return!1;return!0}const Sk=/^on[A-Z]/;function Nk(n,e){const t=Ek(n,e);for(let s of t)if(!Sk.test(s))return!1;return!0}function Ek(n,e){let t=[];for(let s in n)tu.call(n,s)&&(s in e||t.push(s));for(let s in e)tu.call(e,s)&&n[s]!==e[s]&&t.push(s);return t}function Cm(n,e,t={}){if(n===e)return!0;for(let s in e)if(!(s in n&&jk(n[s],e[s],t[s])))return!1;for(let s in n)if(!(s in e))return!1;return!0}function jk(n,e,t){return n===e||t===!0?!0:t?t(n,e):!1}function _k(n,e=0,t,s=1){let i=[];t==null&&(t=Object.keys(n).length);for(let l=e;l<t;l+=s){let c=n[l];c!==void 0&&i.push(c)}return i}let v1={};function Ck(n,e){v1[n]=e}function Tk(n){return new v1[n]}class Dk{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Is(e)}markerToArray(e){return Xa(e)}}Ck("gregory",Dk);const Rk=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function kk(n){let e=Rk.exec(n);if(e){let t=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(x1(t)){let s=null;return e[13]&&(s=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:t,isTimeUnspecified:!e[6],timeZoneOffset:s}}}return null}class Mk{constructor(e){let t=this.timeZone=e.timeZone,s=t!=="local"&&t!=="UTC";e.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(t)),this.canComputeOffset=!!(!s||this.namedTimeZoneImpl),this.calendarSystem=Tk(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let t=this.createMarkerMeta(e);return t===null?null:t.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Is(kv(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let t=null;return typeof e=="number"?t=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(t=this.timestampToMarker(e))):Array.isArray(e)&&(t=Is(e)),t===null||!x1(t)?null:{marker:t,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let t=kk(e);if(t===null)return null;let{marker:s}=t,i=null;return t.timeZoneOffset!==null&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-t.timeZoneOffset*60*1e3):i=t.timeZoneOffset),{marker:s,isTimeUnspecified:t.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,t){let s=this.calendarSystem.markerToArray(e);return s[0]+=t.years,s[1]+=t.months,s[2]+=t.days,s[6]+=t.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(e,t){let s=this.calendarSystem.markerToArray(e);return s[0]-=t.years,s[1]-=t.months,s[2]-=t.days,s[6]-=t.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(e,t){let s=this.calendarSystem.markerToArray(e);return s[0]+=t,this.calendarSystem.arrayToMarker(s)}addMonths(e,t){let s=this.calendarSystem.markerToArray(e);return s[1]+=t,this.calendarSystem.arrayToMarker(s)}diffWholeYears(e,t){let{calendarSystem:s}=this;return Qa(e)===Qa(t)&&s.getMarkerDay(e)===s.getMarkerDay(t)&&s.getMarkerMonth(e)===s.getMarkerMonth(t)?s.getMarkerYear(t)-s.getMarkerYear(e):null}diffWholeMonths(e,t){let{calendarSystem:s}=this;return Qa(e)===Qa(t)&&s.getMarkerDay(e)===s.getMarkerDay(t)?s.getMarkerMonth(t)-s.getMarkerMonth(e)+(s.getMarkerYear(t)-s.getMarkerYear(e))*12:null}greatestWholeUnit(e,t){let s=this.diffWholeYears(e,t);return s!==null?{unit:"year",value:s}:(s=this.diffWholeMonths(e,t),s!==null?{unit:"month",value:s}:(s=JR(e,t),s!==null?{unit:"week",value:s}:(s=Kd(e,t),s!==null?{unit:"day",value:s}:(s=XR(e,t),Nm(s)?{unit:"hour",value:s}:(s=QR(e,t),Nm(s)?{unit:"minute",value:s}:(s=ZR(e,t),Nm(s)?{unit:"second",value:s}:{unit:"millisecond",value:t.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,t,s){let i;return s.years&&(i=this.diffWholeYears(e,t),i!==null)?i/$R(s):s.months&&(i=this.diffWholeMonths(e,t),i!==null)?i/GR(s):s.days&&(i=Kd(e,t),i!==null)?i/Wr(s):(t.valueOf()-e.valueOf())/Mo(s)}startOf(e,t){return t==="year"?this.startOfYear(e):t==="month"?this.startOfMonth(e):t==="week"?this.startOfWeek(e):t==="day"?Ct(e):t==="hour"?ek(e):t==="minute"?tk(e):t==="second"?sk(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):nk(e,this.weekDow,this.weekDoy)}format(e,t,s={}){return t.format({marker:e,timeZoneOffset:s.forcedTzo!=null?s.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,t,s,i={}){return i.isEndExclusive&&(t=ti(t,-1)),s.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:t,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(t)},this,i.defaultSeparator)}formatIso(e,t={}){let s=null;return t.omitTimeZoneOffset||(t.forcedTzo!=null?s=t.forcedTzo:s=this.offsetForMarker(e)),ik(e,s,t.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Is(kv(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Is(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-Mv(Xa(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Xa(e)):null}toDate(e,t){return this.timeZone==="local"?Mv(Xa(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Xa(e))*1e3*60):new Date(e.valueOf()-(t||0))}}class Qo{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let t,s;if(typeof e=="object"&&e){t=Object.assign({},this.iconClasses);for(s in e)t[s]=this.applyIconOverridePrefix(e[s]);this.iconClasses=t}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let t=this.iconOverridePrefix;return t&&e.indexOf(t)!==0&&(e=t+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,t){let s;return t&&this.rtlIconClasses?s=this.rtlIconClasses[e]||this.iconClasses[e]:s=this.iconClasses[e],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(e){let t;return this.iconOverrideCustomButtonOption&&(t=e[this.iconOverrideCustomButtonOption],t)?`${this.baseIconClass} ${this.applyIconOverridePrefix(t)}`:""}}Qo.prototype.classes={};Qo.prototype.iconClasses={};Qo.prototype.baseIconClass="";Qo.prototype.iconOverridePrefix="";function su(n){n();let e=Ie.debounceRendering,t=[];function s(i){t.push(i)}for(Ie.debounceRendering=s,ko(ie(Lk,{}),document.createElement("div"));t.length;)t.shift()();Ie.debounceRendering=e}class Lk extends Js{render(){return ie("div",{})}componentDidMount(){this.setState({})}}function w1(n){let e=iR(n),t=e.Provider;return e.Provider=function(){let s=!this.getChildContext,i=t.apply(this,arguments);if(s){let l=[];this.shouldComponentUpdate=c=>{this.props.value!==c.value&&l.forEach(u=>{u.context=c.value,u.forceUpdate()})},this.sub=c=>{l.push(c);let u=c.componentWillUnmount;c.componentWillUnmount=()=>{l.splice(l.indexOf(c),1),u&&u.call(c)}}}return i},e}class Ok{constructor(e,t,s,i){this.execFunc=e,this.emitter=t,this.scrollTime=s,this.scrollTimeReset=i,this.handleScrollRequest=l=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},l),this.drain()},t.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Xi=w1({});function Ik(n,e,t,s,i,l,c,u,h,m,p,y,x,v){return{dateEnv:i,nowManager:l,options:t,pluginHooks:u,emitter:p,dispatch:h,getCurrentData:m,calendarApi:y,viewSpec:n,viewApi:e,dateProfileGenerator:s,theme:c,isRtl:t.direction==="rtl",addResizeHandler(w){p.on("_resize",w)},removeResizeHandler(w){p.off("_resize",w)},createScrollResponder(w){return new Ok(w,p,ct(t.scrollTime),t.scrollTimeReset)},registerInteractiveComponent:x,unregisterInteractiveComponent:v}}class Qi extends Js{shouldComponentUpdate(e,t){return!Cm(this.props,e,this.propEquality)||!Cm(this.state,t,this.stateEquality)}safeSetState(e){Cm(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Qi.addPropsEquality=Pk;Qi.addStateEquality=Bk;Qi.contextType=Xi;Qi.prototype.propEquality={};Qi.prototype.stateEquality={};class Lt extends Qi{}Lt.contextType=Xi;function Pk(n){let e=Object.create(this.prototype.propEquality);Object.assign(e,n),this.prototype.propEquality=e}function Bk(n){let e=Object.create(this.prototype.stateEquality);Object.assign(e,n),this.prototype.stateEquality=e}function Xn(n,e){typeof n=="function"?n(e):n&&(n.current=e)}class og extends Lt{constructor(){super(...arguments),this.id=Yi(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:t}=this.context,{generatorName:s}=this.props;(!t.customRenderingReplaces||!dp(s,t))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Xn(this.props.elRef,e)}}render(){const{props:e,context:t}=this,{options:s}=t,{customGenerator:i,defaultGenerator:l,renderProps:c}=e,u=A1(e,[],this.handleEl);let h=!1,m,p=[],y;if(i!=null){const x=typeof i=="function"?i(c,ie):i;if(x===!0)h=!0;else{const v=x&&typeof x=="object";v&&"html"in x?u.dangerouslySetInnerHTML={__html:x.html}:v&&"domNodes"in x?p=Array.prototype.slice.call(x.domNodes):(v?GA(x):typeof x!="function")?m=x:y=x}}else h=!dp(e.generatorName,s);return h&&l&&(m=l(c)),this.queuedDomNodes=p,this.currentGeneratorMeta=y,ie(e.elTag,u,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var t;const{props:s,context:i}=this,{handleCustomRendering:l,customRenderingMetaMap:c}=i.options;if(l){const u=(t=this.currentGeneratorMeta)!==null&&t!==void 0?t:c?.[s.generatorName];u&&l(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:u},s),{elClasses:(s.elClasses||[]).filter(Hk)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:t}=this,s=this.base;if(!ei(e,t)){t.forEach(eg);for(let i of e)s.appendChild(i);this.currentDomNodes=e}}}og.addPropsEquality({elClasses:ei,elStyle:Cn,elAttrs:Nk,renderProps:Cn});function dp(n,e){var t;return!!(e.handleCustomRendering&&n&&(!((t=e.customRenderingMetaMap)===null||t===void 0)&&t[n]))}function A1(n,e,t){const s=Object.assign(Object.assign({},n.elAttrs),{ref:t});return(n.elClasses||e)&&(s.className=(n.elClasses||[]).concat(e||[]).concat(s.className||[]).filter(Boolean).join(" ")),n.elStyle&&(s.style=n.elStyle),s}function Hk(n){return!!n}const S1=w1(0);class va extends Js{constructor(){super(...arguments),this.InnerContent=zk.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Xn(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,t=Fk(e.classNameGenerator,e.renderProps);if(e.children){const s=A1(e,t,this.handleEl),i=e.children(this.InnerContent,e.renderProps,s);return e.elTag?ie(e.elTag,s,i):i}else return ie(og,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(t),renderId:this.context}))}componentDidMount(){var e,t;this.el?(t=(e=this.props).didMount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,t;(t=(e=this.props).willUnmount)===null||t===void 0||t.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}va.contextType=S1;function zk(n,e){const t=n.props;return ie(og,Object.assign({renderProps:t.renderProps,generatorName:t.generatorName,customGenerator:t.customGenerator,defaultGenerator:t.defaultGenerator,renderId:n.context},e))}function Fk(n,e){const t=typeof n=="function"?n(e):n||[];return typeof t=="string"?[t]:t}class Hv extends Lt{render(){let{props:e,context:t}=this,{options:s}=t,i={view:t.viewApi};return ie(va,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...N1(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount},()=>e.children)}}function N1(n){return[`fc-${n.type}-view`,"fc-view"]}function Uk(n,e){let t=null,s=null;return n.start&&(t=e.createMarker(n.start)),n.end&&(s=e.createMarker(n.end)),!t&&!s||t&&s&&s<t?null:{start:t,end:s}}function zv(n,e){let t=[],{start:s}=e,i,l;for(n.sort(qk),i=0;i<n.length;i+=1)l=n[i],l.start>s&&t.push({start:s,end:l.start}),l.end>s&&(s=l.end);return s<e.end&&t.push({start:s,end:e.end}),t}function qk(n,e){return n.start.valueOf()-e.start.valueOf()}function Jr(n,e){let{start:t,end:s}=n,i=null;return e.start!==null&&(t===null?t=e.start:t=new Date(Math.max(t.valueOf(),e.start.valueOf()))),e.end!=null&&(s===null?s=e.end:s=new Date(Math.min(s.valueOf(),e.end.valueOf()))),(t===null||s===null||t<s)&&(i={start:t,end:s}),i}function Vk(n,e){return(n.start===null?null:n.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(n.end===null?null:n.end.valueOf())===(e.end===null?null:e.end.valueOf())}function cg(n,e){return(n.end===null||e.start===null||n.end>e.start)&&(n.start===null||e.end===null||n.start<e.end)}function Cu(n,e){return(n.start===null||e.start!==null&&e.start>=n.start)&&(n.end===null||e.end!==null&&e.end<=n.end)}function Za(n,e){return(n.start===null||e>=n.start)&&(n.end===null||e<n.end)}function $k(n,e){return e.start!=null&&n<e.start?e.start:e.end!=null&&n>=e.end?new Date(e.end.valueOf()-1):n}function E1(n){let e=Math.floor(ll(n.start,n.end))||1,t=Ct(n.start),s=rs(t,e);return{start:t,end:s}}function j1(n,e=ct(0)){let t=null,s=null;if(n.end){s=Ct(n.end);let i=n.end.valueOf()-s.valueOf();i&&i>=Mo(e)&&(s=rs(s,1))}return n.start&&(t=Ct(n.start),s&&s<=t&&(s=rs(t,1))),{start:t,end:s}}function $r(n,e,t,s){return s==="year"?ct(t.diffWholeYears(n,e),"year"):s==="month"?ct(t.diffWholeMonths(n,e),"month"):KR(n,e)}class _1{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,t,s){let{dateEnv:i}=this.props,l=i.subtract(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(l,-1,s)}buildNext(e,t,s){let{dateEnv:i}=this.props,l=i.add(i.startOf(t,e.currentRangeUnit),e.dateIncrement);return this.build(l,1,s)}build(e,t,s=!0){let{props:i}=this,l,c,u,h,m,p;return l=this.buildValidRange(),l=this.trimHiddenDays(l),s&&(e=$k(e,l)),c=this.buildCurrentRangeInfo(e,t),u=/^(year|month|week|day)$/.test(c.unit),h=this.buildRenderRange(this.trimHiddenDays(c.range),c.unit,u),h=this.trimHiddenDays(h),m=h,i.showNonCurrentDates||(m=Jr(m,c.range)),m=this.adjustActiveRange(m),m=Jr(m,l),p=cg(c.range,l),Za(h,e)||(e=h.start),{currentDate:e,validRange:l,currentRange:c.range,currentRangeUnit:c.unit,isRangeAllDay:u,activeRange:m,renderRange:h,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:p,dateIncrement:this.buildDateIncrement(c.duration)}}buildValidRange(){let e=this.props.validRangeInput,t=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(t)||{start:null,end:null}}buildCurrentRangeInfo(e,t){let{props:s}=this,i=null,l=null,c=null,u;return s.duration?(i=s.duration,l=s.durationUnit,c=this.buildRangeFromDuration(e,t,i,l)):(u=this.props.dayCount)?(l="day",c=this.buildRangeFromDayCount(e,t,u)):(c=this.buildCustomVisibleRange(e))?l=s.dateEnv.greatestWholeUnit(c.start,c.end).unit:(i=this.getFallbackDuration(),l=cp(i).unit,c=this.buildRangeFromDuration(e,t,i,l)),{duration:i,unit:l,range:c}}getFallbackDuration(){return ct({day:1})}adjustActiveRange(e){let{dateEnv:t,usesMinMaxTime:s,slotMinTime:i,slotMaxTime:l}=this.props,{start:c,end:u}=e;return s&&(Wr(i)<0&&(c=Ct(c),c=t.add(c,i)),Wr(l)>1&&(u=Ct(u),u=rs(u,-1),u=t.add(u,l))),{start:c,end:u}}buildRangeFromDuration(e,t,s,i){let{dateEnv:l,dateAlignment:c}=this.props,u,h,m;if(!c){let{dateIncrement:y}=this.props;y&&Mo(y)<Mo(s)?c=cp(y).unit:c=i}Wr(s)<=1&&this.isHiddenDay(u)&&(u=this.skipHiddenDays(u,t),u=Ct(u));function p(){u=l.startOf(e,c),h=l.add(u,s),m={start:u,end:h}}return p(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,t),p()),m}buildRangeFromDayCount(e,t,s){let{dateEnv:i,dateAlignment:l}=this.props,c=0,u=e,h;l&&(u=i.startOf(u,l)),u=Ct(u),u=this.skipHiddenDays(u,t),h=u;do h=rs(h,1),this.isHiddenDay(h)||(c+=1);while(c<s);return{start:u,end:h}}buildCustomVisibleRange(e){let{props:t}=this,s=t.visibleRangeInput,i=typeof s=="function"?s.call(t.calendarApi,t.dateEnv.toDate(e)):s,l=this.refineRange(i);return l&&(l.start==null||l.end==null)?null:l}buildRenderRange(e,t,s){return e}buildDateIncrement(e){let{dateIncrement:t}=this.props,s;return t||((s=this.props.dateAlignment)?ct(1,s):e||ct({days:1}))}refineRange(e){if(e){let t=Uk(e,this.props.dateEnv);return t&&(t=j1(t)),t}return null}initHiddenDays(){let e=this.props.hiddenDays||[],t=[],s=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(t[i]=e.indexOf(i)!==-1)||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=t}trimHiddenDays(e){let{start:t,end:s}=e;return t&&(t=this.skipHiddenDays(t)),s&&(s=this.skipHiddenDays(s,-1,!0)),t==null||s==null||t<s?{start:t,end:s}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,t=1,s=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(s?t:0)+7)%7];)e=rs(e,t);return e}}function dg(n,e,t,s){return{instanceId:Yi(),defId:n,range:e,forcedStartTzo:t??null,forcedEndTzo:s??null}}function Gk(n,e,t,s){for(let i=0;i<s.length;i+=1){let l=s[i].parse(n,t);if(l){let{allDay:c}=n;return c==null&&(c=e,c==null&&(c=l.allDayGuess,c==null&&(c=!1))),{allDay:c,duration:l.duration,typeData:l.typeData,typeId:i}}}return null}function Vi(n,e,t){let{dateEnv:s,pluginHooks:i,options:l}=t,{defs:c,instances:u}=n;u=qi(u,h=>!c[h.defId].recurringDef);for(let h in c){let m=c[h];if(m.recurringDef){let{duration:p}=m.recurringDef;p||(p=m.allDay?l.defaultAllDayEventDuration:l.defaultTimedEventDuration);let y=Yk(m,p,e,s,i.recurringTypes);for(let x of y){let v=dg(h,{start:x,end:s.add(x,p)});u[v.instanceId]=v}}}return{defs:c,instances:u}}function Yk(n,e,t,s,i){let c=i[n.recurringDef.typeId].expand(n.recurringDef.typeData,{start:s.subtract(t.start,e),end:t.end},s);return n.allDay&&(c=c.map(Ct)),c}const Pd={id:String,groupId:String,title:String,url:String,interactive:Boolean},C1={start:ae,end:ae,date:ae,allDay:Boolean},Wk=Object.assign(Object.assign(Object.assign({},Pd),C1),{extendedProps:ae});function T1(n,e,t,s,i=ug(t),l,c){let{refined:u,extra:h}=D1(n,t,i),m=Qk(e,t),p=Gk(u,m,t.dateEnv,t.pluginHooks.recurringTypes);if(p){let x=up(u,h,e?e.sourceId:"",p.allDay,!!p.duration,t,l);return x.recurringDef={typeId:p.typeId,typeData:p.typeData,duration:p.duration},{def:x,instance:null}}let y=Xk(u,m,t,s);if(y){let x=up(u,h,e?e.sourceId:"",y.allDay,y.hasEnd,t,l),v=dg(x.defId,y.range,y.forcedStartTzo,y.forcedEndTzo);return c&&x.publicId&&c[x.publicId]&&(v.instanceId=c[x.publicId]),{def:x,instance:v}}return null}function D1(n,e,t=ug(e)){return ig(n,t)}function ug(n){return Object.assign(Object.assign(Object.assign({},nu),Wk),n.pluginHooks.eventRefiners)}function up(n,e,t,s,i,l,c){let u={title:n.title||"",groupId:n.groupId||"",publicId:n.id||"",url:n.url||"",recurringDef:null,defId:(c&&n.id?c[n.id]:"")||Yi(),sourceId:t,allDay:s,hasEnd:i,interactive:n.interactive,ui:au(n,l),extendedProps:Object.assign(Object.assign({},n.extendedProps||{}),e)};for(let h of l.pluginHooks.eventDefMemberAdders)Object.assign(u,h(n));return Object.freeze(u.ui.classNames),Object.freeze(u.extendedProps),u}function Xk(n,e,t,s){let{allDay:i}=n,l,c=null,u=!1,h,m=null,p=n.start!=null?n.start:n.date;if(l=t.dateEnv.createMarkerMeta(p),l)c=l.marker;else if(!s)return null;return n.end!=null&&(h=t.dateEnv.createMarkerMeta(n.end)),i==null&&(e!=null?i=e:i=(!l||l.isTimeUnspecified)&&(!h||h.isTimeUnspecified)),i&&c&&(c=Ct(c)),h&&(m=h.marker,i&&(m=Ct(m)),c&&m<=c&&(m=null)),m?u=!0:s||(u=t.options.forceEventDuration||!1,m=t.dateEnv.add(c,i?t.options.defaultAllDayEventDuration:t.options.defaultTimedEventDuration)),{allDay:i,hasEnd:u,range:{start:c,end:m},forcedStartTzo:l?l.forcedTzo:null,forcedEndTzo:h?h.forcedTzo:null}}function Qk(n,e){let t=null;return n&&(t=n.defaultAllDay),t==null&&(t=e.options.defaultAllDay),t}function Lo(n,e,t,s,i,l){let c=En(),u=ug(t);for(let h of n){let m=T1(h,e,t,s,u,i,l);m&&hp(m,c)}return c}function hp(n,e=En()){return e.defs[n.def.defId]=n.def,n.instance&&(e.instances[n.instance.instanceId]=n.instance),e}function hg(n,e){let t=n.instances[e];if(t){let s=n.defs[t.defId],i=Tu(n,l=>Zk(s,l));return i.defs[s.defId]=s,i.instances[t.instanceId]=t,i}return En()}function Zk(n,e){return!!(n.groupId&&n.groupId===e.groupId)}function En(){return{defs:{},instances:{}}}function fg(n,e){return{defs:Object.assign(Object.assign({},n.defs),e.defs),instances:Object.assign(Object.assign({},n.instances),e.instances)}}function Tu(n,e){let t=qi(n.defs,e),s=qi(n.instances,i=>t[i.defId]);return{defs:t,instances:s}}function Kk(n,e){let{defs:t,instances:s}=n,i={},l={};for(let c in t)e.defs[c]||(i[c]=t[c]);for(let c in s)!e.instances[c]&&i[s[c].defId]&&(l[c]=s[c]);return{defs:i,instances:l}}function Jk(n,e){return Array.isArray(n)?Lo(n,null,e,!0):typeof n=="object"&&n?Lo([n],null,e,!0):n!=null?String(n):null}function Fv(n){return Array.isArray(n)?n:typeof n=="string"?n.split(/\s+/):[]}const nu={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:ae,overlap:ae,allow:ae,className:Fv,classNames:Fv,color:String,backgroundColor:String,borderColor:String,textColor:String},eM={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function au(n,e){let t=Jk(n.constraint,e);return{display:n.display||null,startEditable:n.startEditable!=null?n.startEditable:n.editable,durationEditable:n.durationEditable!=null?n.durationEditable:n.editable,constraints:t!=null?[t]:[],overlap:n.overlap!=null?n.overlap:null,allows:n.allow!=null?[n.allow]:[],backgroundColor:n.backgroundColor||n.color||"",borderColor:n.borderColor||n.color||"",textColor:n.textColor||"",classNames:(n.className||[]).concat(n.classNames||[])}}function tM(n){return n.reduce(sM,eM)}function sM(n,e){return{display:e.display!=null?e.display:n.display,startEditable:e.startEditable!=null?e.startEditable:n.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:n.durationEditable,constraints:n.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:n.overlap,allows:n.allows.concat(e.allows),backgroundColor:e.backgroundColor||n.backgroundColor,borderColor:e.borderColor||n.borderColor,textColor:e.textColor||n.textColor,classNames:n.classNames.concat(e.classNames)}}const nM={id:String,defaultAllDay:Boolean,url:String,format:String,events:ae,eventDataTransform:ae,success:ae,failure:ae};function R1(n,e,t=k1(e)){let s;if(typeof n=="string"?s={url:n}:typeof n=="function"||Array.isArray(n)?s={events:n}:typeof n=="object"&&n&&(s=n),s){let{refined:i,extra:l}=ig(s,t),c=aM(i,e);if(c)return{_raw:n,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:Yi(),sourceDefId:c.sourceDefId,meta:c.meta,ui:au(i,e),extendedProps:l}}return null}function k1(n){return Object.assign(Object.assign(Object.assign({},nu),nM),n.pluginHooks.eventSourceRefiners)}function aM(n,e){let t=e.pluginHooks.eventSourceDefs;for(let s=t.length-1;s>=0;s-=1){let l=t[s].parseMeta(n);if(l)return{sourceDefId:s,meta:l}}return null}function iM(n,e,t,s,i){switch(e.type){case"RECEIVE_EVENTS":return rM(n,t[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return lM(n,t[e.sourceId],e.rawEvents,s.activeRange,i);case"ADD_EVENTS":return oM(n,e.eventStore,s?s.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return fg(n,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?Vi(n,s.activeRange,i):n;case"REMOVE_EVENTS":return Kk(n,e.eventStore);case"REMOVE_EVENT_SOURCE":return L1(n,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Tu(n,l=>!l.sourceId);case"REMOVE_ALL_EVENTS":return En();default:return n}}function rM(n,e,t,s,i,l){if(e&&t===e.latestFetchId){let c=Lo(M1(i,e,l),e,l);return s&&(c=Vi(c,s,l)),fg(L1(n,e.sourceId),c)}return n}function lM(n,e,t,s,i){const{defIdMap:l,instanceIdMap:c}=dM(n);let u=Lo(M1(t,e,i),e,i,!1,l,c);return Vi(u,s,i)}function M1(n,e,t){let s=t.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(n=Uv(n,i)),s&&(n=Uv(n,s)),n}function Uv(n,e){let t;if(!e)t=n;else{t=[];for(let s of n){let i=e(s);i?t.push(i):i==null&&t.push(s)}}return t}function oM(n,e,t,s){return t&&(e=Vi(e,t,s)),fg(n,e)}function qv(n,e,t){let{defs:s}=n,i=Wi(n.instances,l=>s[l.defId].allDay?l:Object.assign(Object.assign({},l),{range:{start:t.createMarker(e.toDate(l.range.start,l.forcedStartTzo)),end:t.createMarker(e.toDate(l.range.end,l.forcedEndTzo))},forcedStartTzo:t.canComputeOffset?null:l.forcedStartTzo,forcedEndTzo:t.canComputeOffset?null:l.forcedEndTzo}));return{defs:s,instances:i}}function L1(n,e){return Tu(n,t=>t.sourceId!==e)}function cM(n,e){return{defs:n.defs,instances:qi(n.instances,t=>!e[t.instanceId])}}function dM(n){const{defs:e,instances:t}=n,s={},i={};for(let l in e){const c=e[l],{publicId:u}=c;u&&(s[u]=l)}for(let l in t){const c=t[l],u=e[c.defId],{publicId:h}=u;h&&(i[h]=l)}return{defIdMap:s,instanceIdMap:i}}class Du{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,t){uM(this.handlers,e,t)}off(e,t){hM(this.handlers,e,t)}trigger(e,...t){let s=this.handlers[e]||[],i=this.options&&this.options[e],l=[].concat(i||[],s);for(let c of l)c.apply(this.thisContext,t)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function uM(n,e,t){(n[e]||(n[e]=[])).push(t)}function hM(n,e,t){t?n[e]&&(n[e]=n[e].filter(s=>s!==t)):delete n[e]}const fM={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function mM(n,e){return Lo(pM(n),null,e)}function pM(n){let e;return n===!0?e=[{}]:Array.isArray(n)?e=n.filter(t=>t.daysOfWeek):typeof n=="object"&&n?e=[n]:e=[],e=e.map(t=>Object.assign(Object.assign({},fM),t)),e}function O1(n,e,t){t.emitter.trigger("select",Object.assign(Object.assign({},mg(n,t)),{jsEvent:e?e.origEvent:null,view:t.viewApi||t.calendarApi.view}))}function gM(n,e){e.emitter.trigger("unselect",{jsEvent:n?n.origEvent:null,view:e.viewApi||e.calendarApi.view})}function mg(n,e){let t={};for(let s of e.pluginHooks.dateSpanTransforms)Object.assign(t,s(n,e));return Object.assign(t,RM(n,e.dateEnv)),t}function Vv(n,e,t){let{dateEnv:s,options:i}=t,l=e;return n?(l=Ct(l),l=s.add(l,i.defaultAllDayEventDuration)):l=s.add(l,i.defaultTimedEventDuration),l}function pg(n,e,t,s){let i=iu(n.defs,e),l=En();for(let c in n.defs){let u=n.defs[c];l.defs[c]=yM(u,i[c],t,s)}for(let c in n.instances){let u=n.instances[c],h=l.defs[u.defId];l.instances[c]=xM(u,h,i[u.defId],t,s)}return l}function yM(n,e,t,s){let i=t.standardProps||{};i.hasEnd==null&&e.durationEditable&&(t.startDelta||t.endDelta)&&(i.hasEnd=!0);let l=Object.assign(Object.assign(Object.assign({},n),i),{ui:Object.assign(Object.assign({},n.ui),i.ui)});t.extendedProps&&(l.extendedProps=Object.assign(Object.assign({},l.extendedProps),t.extendedProps));for(let c of s.pluginHooks.eventDefMutationAppliers)c(l,t,s);return!l.hasEnd&&s.options.forceEventDuration&&(l.hasEnd=!0),l}function xM(n,e,t,s,i){let{dateEnv:l}=i,c=s.standardProps&&s.standardProps.allDay===!0,u=s.standardProps&&s.standardProps.hasEnd===!1,h=Object.assign({},n);return c&&(h.range=E1(h.range)),s.datesDelta&&t.startEditable&&(h.range={start:l.add(h.range.start,s.datesDelta),end:l.add(h.range.end,s.datesDelta)}),s.startDelta&&t.durationEditable&&(h.range={start:l.add(h.range.start,s.startDelta),end:h.range.end}),s.endDelta&&t.durationEditable&&(h.range={start:h.range.start,end:l.add(h.range.end,s.endDelta)}),u&&(h.range={start:h.range.start,end:Vv(e.allDay,h.range.start,i)}),e.allDay&&(h.range={start:Ct(h.range.start),end:Ct(h.range.end)}),h.range.end<h.range.start&&(h.range.end=Vv(e.allDay,h.range.start,i)),h}class Fr{constructor(e,t){this.context=e,this.internalEventSource=t}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Tt{constructor(e,t,s){this._context=e,this._def=t,this._instance=s||null}setProp(e,t){if(e in C1)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")t=Pd[e](t),this.mutate({standardProps:{publicId:t}});else if(e in Pd)t=Pd[e](t),this.mutate({standardProps:{[e]:t}});else if(e in nu){let s=nu[e](t);e==="color"?s={backgroundColor:t,borderColor:t}:e==="editable"?s={startEditable:t,durationEditable:t}:s={[e]:t},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,t){this.mutate({extendedProps:{[e]:t}})}setStart(e,t={}){let{dateEnv:s}=this._context,i=s.createMarker(e);if(i&&this._instance){let l=this._instance.range,c=$r(l.start,i,s,t.granularity);t.maintainDuration?this.mutate({datesDelta:c}):this.mutate({startDelta:c})}}setEnd(e,t={}){let{dateEnv:s}=this._context,i;if(!(e!=null&&(i=s.createMarker(e),!i))&&this._instance)if(i){let l=$r(this._instance.range.end,i,s,t.granularity);this.mutate({endDelta:l})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,t,s={}){let{dateEnv:i}=this._context,l={allDay:s.allDay},c=i.createMarker(e),u;if(c&&!(t!=null&&(u=i.createMarker(t),!u))&&this._instance){let h=this._instance.range;s.allDay===!0&&(h=E1(h));let m=$r(h.start,c,i,s.granularity);if(u){let p=$r(h.end,u,i,s.granularity);qR(m,p)?this.mutate({datesDelta:m,standardProps:l}):this.mutate({startDelta:m,endDelta:p,standardProps:l})}else l.hasEnd=!1,this.mutate({datesDelta:m,standardProps:l})}}moveStart(e){let t=ct(e);t&&this.mutate({startDelta:t})}moveEnd(e){let t=ct(e);t&&this.mutate({endDelta:t})}moveDates(e){let t=ct(e);t&&this.mutate({datesDelta:t})}setAllDay(e,t={}){let s={allDay:e},{maintainDuration:i}=t;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(s.hasEnd=i),this.mutate({standardProps:s})}formatRange(e){let{dateEnv:t}=this._context,s=this._instance,i=is(e);return this._def.hasEnd?t.formatRange(s.range.start,s.range.end,i,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):t.format(s.range.start,i,{forcedTzo:s.forcedStartTzo})}mutate(e){let t=this._instance;if(t){let s=this._def,i=this._context,{eventStore:l}=i.getCurrentData(),c=hg(l,t.instanceId);c=pg(c,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let h=new Tt(i,s,t);this._def=c.defs[s.defId],this._instance=c.instances[t.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:c}),i.emitter.trigger("eventChange",{oldEvent:h,event:this,relatedEvents:Bi(c,i,t),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:l})}})}}remove(){let e=this._context,t=I1(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:t}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:t})}})}get source(){let{sourceId:e}=this._def;return e?new Fr(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let t=this._def,{ui:s}=t,{startStr:i,endStr:l}=this,c={allDay:t.allDay};return t.title&&(c.title=t.title),i&&(c.start=i),l&&(c.end=l),t.publicId&&(c.id=t.publicId),t.groupId&&(c.groupId=t.groupId),t.url&&(c.url=t.url),s.display&&s.display!=="auto"&&(c.display=s.display),e.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?c.color=s.backgroundColor:(s.backgroundColor&&(c.backgroundColor=s.backgroundColor),s.borderColor&&(c.borderColor=s.borderColor)),s.textColor&&(c.textColor=s.textColor),s.classNames.length&&(c.classNames=s.classNames),Object.keys(t.extendedProps).length&&(e.collapseExtendedProps?Object.assign(c,t.extendedProps):c.extendedProps=t.extendedProps),c}toJSON(){return this.toPlainObject()}}function I1(n){let e=n._def,t=n._instance;return{defs:{[e.defId]:e},instances:t?{[t.instanceId]:t}:{}}}function Bi(n,e,t){let{defs:s,instances:i}=n,l=[],c=t?t.instanceId:"";for(let u in i){let h=i[u],m=s[h.defId];h.instanceId!==c&&l.push(new Tt(e,m,h))}return l}function $v(n,e,t,s){let i={},l={},c={},u=[],h=[],m=iu(n.defs,e);for(let p in n.defs){let y=n.defs[p];m[y.defId].display==="inverse-background"&&(y.groupId?(i[y.groupId]=[],c[y.groupId]||(c[y.groupId]=y)):l[p]=[])}for(let p in n.instances){let y=n.instances[p],x=n.defs[y.defId],v=m[x.defId],w=y.range,A=!x.allDay&&s?j1(w,s):w,S=Jr(A,t);S&&(v.display==="inverse-background"?x.groupId?i[x.groupId].push(S):l[y.defId].push(S):v.display!=="none"&&(v.display==="background"?u:h).push({def:x,ui:v,instance:y,range:S,isStart:A.start&&A.start.valueOf()===S.start.valueOf(),isEnd:A.end&&A.end.valueOf()===S.end.valueOf()}))}for(let p in i){let y=i[p],x=zv(y,t);for(let v of x){let w=c[p],A=m[w.defId];u.push({def:w,ui:A,instance:null,range:v,isStart:!1,isEnd:!1})}}for(let p in l){let y=l[p],x=zv(y,t);for(let v of x)u.push({def:n.defs[p],ui:m[p],instance:null,range:v,isStart:!1,isEnd:!1})}return{bg:u,fg:h}}function Gv(n,e){n.fcSeg=e}function el(n){return n.fcSeg||n.parentNode.fcSeg||null}function iu(n,e){return Wi(n,t=>P1(t,e))}function P1(n,e){let t=[];return e[""]&&t.push(e[""]),e[n.defId]&&t.push(e[n.defId]),t.push(n.ui),tM(t)}function bM(n,e){let t=n.map(vM);return t.sort((s,i)=>IR(s,i,e)),t.map(s=>s._seg)}function vM(n){let{eventRange:e}=n,t=e.def,s=e.instance?e.instance.range:e.range,i=s.start?s.start.valueOf():0,l=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},t.extendedProps),t),{id:t.publicId,start:i,end:l,duration:l-i,allDay:Number(t.allDay),_seg:n})}function wM(n,e){let{pluginHooks:t}=e,s=t.isDraggableTransformers,{def:i,ui:l}=n.eventRange,c=l.startEditable;for(let u of s)c=u(c,i,l,e);return c}function AM(n,e){return n.isStart&&n.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function SM(n,e){return n.isEnd&&n.eventRange.ui.durationEditable}function B1(n,e,t,s,i,l,c){let{dateEnv:u,options:h}=t,{displayEventTime:m,displayEventEnd:p}=h,y=n.eventRange.def,x=n.eventRange.instance;m==null&&(m=s!==!1),p==null&&(p=i!==!1);let v=x.range.start,w=x.range.end,A=n.start||n.eventRange.range.start,S=n.end||n.eventRange.range.end,N=Ct(v).valueOf()===Ct(A).valueOf(),j=Ct(ti(w,-1)).valueOf()===Ct(ti(S,-1)).valueOf();return m&&!y.allDay&&(N||j)?(A=N?v:A,S=j?w:S,p&&y.hasEnd?u.formatRange(A,S,e,{forcedStartTzo:x.forcedStartTzo,forcedEndTzo:x.forcedEndTzo}):u.format(A,e,{forcedTzo:x.forcedStartTzo})):""}function So(n,e,t){let s=n.eventRange.range;return{isPast:s.end<=e.start,isFuture:s.start>=e.end,isToday:e&&Za(e,s.start)}}function NM(n){let e=["fc-event"];return n.isMirror&&e.push("fc-event-mirror"),n.isDraggable&&e.push("fc-event-draggable"),(n.isStartResizable||n.isEndResizable)&&e.push("fc-event-resizable"),n.isDragging&&e.push("fc-event-dragging"),n.isResizing&&e.push("fc-event-resizing"),n.isSelected&&e.push("fc-event-selected"),n.isStart&&e.push("fc-event-start"),n.isEnd&&e.push("fc-event-end"),n.isPast&&e.push("fc-event-past"),n.isToday&&e.push("fc-event-today"),n.isFuture&&e.push("fc-event-future"),e}function EM(n){return n.instance?n.instance.instanceId:`${n.def.defId}:${n.range.start.toISOString()}`}function H1(n,e){let{def:t,instance:s}=n.eventRange,{url:i}=t;if(i)return{href:i};let{emitter:l,options:c}=e,{eventInteractive:u}=c;return u==null&&(u=t.interactive,u==null&&(u=!!l.hasHandlers("eventClick"))),u?y1(h=>{l.trigger("eventClick",{el:h.target,event:new Tt(e,t,s),jsEvent:h,view:e.viewApi})}):{}}const jM={start:ae,end:ae,allDay:Boolean};function _M(n,e,t){let s=CM(n,e),{range:i}=s;if(!i.start)return null;if(!i.end){if(t==null)return null;i.end=e.add(i.start,t)}return s}function CM(n,e){let{refined:t,extra:s}=ig(n,jM),i=t.start?e.createMarkerMeta(t.start):null,l=t.end?e.createMarkerMeta(t.end):null,{allDay:c}=t;return c==null&&(c=i&&i.isTimeUnspecified&&(!l||l.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:l?l.marker:null},allDay:c},s)}function TM(n,e){return Vk(n.range,e.range)&&n.allDay===e.allDay&&DM(n,e)}function DM(n,e){for(let t in e)if(t!=="range"&&t!=="allDay"&&n[t]!==e[t])return!1;for(let t in n)if(!(t in e))return!1;return!0}function RM(n,e){return Object.assign(Object.assign({},F1(n.range,e,n.allDay)),{allDay:n.allDay})}function z1(n,e,t){return Object.assign(Object.assign({},F1(n,e,t)),{timeZone:e.timeZone})}function F1(n,e,t){return{start:e.toDate(n.start),end:e.toDate(n.end),startStr:e.formatIso(n.start,{omitTime:t}),endStr:e.formatIso(n.end,{omitTime:t})}}function kM(n,e,t){let s=D1({editable:!1},t),i=up(s.refined,s.extra,"",n.allDay,!0,t);return{def:i,ui:P1(i,e),instance:dg(i.defId,n.range),range:n.range,isStart:!0,isEnd:!0}}function MM(n,e,t){let s=!1,i=function(u){s||(s=!0,e(u))},l=function(u){s||(s=!0,t(u))},c=n(i,l);c&&typeof c.then=="function"&&c.then(i,l)}class Yv extends Error{constructor(e,t){super(e),this.response=t}}function LM(n,e,t){n=n.toUpperCase();const s={method:n};return n==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(t):(s.body=new URLSearchParams(t),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,s).then(i=>{if(i.ok)return i.json().then(l=>[l,i],()=>{throw new Yv("Failure parsing JSON",i)});throw new Yv("Request failed",i)})}let Tm;function U1(){return Tm==null&&(Tm=OM()),Tm}function OM(){if(typeof document>"u")return!0;let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.innerHTML="<table><tr><td><div></div></td></tr></table>",n.querySelector("table").style.height="100px",n.querySelector("div").style.height="100%",document.body.appendChild(n);let t=n.querySelector("div").offsetHeight>0;return document.body.removeChild(n),t}class IM extends Lt{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{su(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{su(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:t}=e,{forPrint:s}=this.state,i=s||t.height==="auto"||t.contentHeight==="auto",l=!i&&t.height!=null?t.height:"",c=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${t.direction}`,e.theme.getClass("root")];return U1()||c.push("fc-liquid-hack"),e.children(c,l,i,s)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class ol{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function PM(n,e){return{component:n,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function gg(n){return{[n.component.uid]:n}}const fp={};class Ru extends Js{constructor(e,t){super(e,t),this.handleRefresh=()=>{let s=this.computeTiming();s.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(s.state),this.clearTimeout(),this.setTimeout(s.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:t}=this;return e.children(t.nowDate,t.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:t}=this,s=t.nowManager.getDateMarker(),{nowIndicatorSnap:i}=t.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let l,c;return i?(l=t.dateEnv.startOf(s,e.unit),c=t.dateEnv.add(l,ct(1,e.unit)).valueOf()-s.valueOf()):(l=s,c=1e3*60),c=Math.min(1e3*60*60*24,c),{state:{nowDate:l,todayRange:BM(l)},waitMs:c}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const t=this.computeTiming();this.setState(t.state,()=>{this.setTimeout(t.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Ru.contextType=Xi;function BM(n){let e=Ct(n),t=rs(e,1);return{start:e,end:t}}class HM{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,t){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:t})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,t){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[e]?s.emitter.on(e,t):console.warn(`Unknown listener name '${e}'`)}off(e,t){this.currentDataManager.emitter.off(e,t)}trigger(e,...t){this.currentDataManager.emitter.trigger(e,...t)}changeView(e,t){this.batchRendering(()=>{if(this.unselect(),t)if(t.start&&t.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:t});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:s.createMarker(t)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,t){let s=this.getCurrentData(),i;t=t||"day",i=s.viewSpecs[t]||this.getUnitViewSpec(t),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:t,toolbarConfig:s}=this.getCurrentData(),i=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]),l,c;for(let u in t)i.push(u);for(l=0;l<i.length;l+=1)if(c=t[i[l]],c&&c.singleUnit===e)return c;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let t=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.createMarker(e)})}incrementDate(e){let t=this.getCurrentData(),s=ct(e);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:t.dateEnv.add(t.currentDate,s)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,t){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(e),is(t))}formatRange(e,t,s){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(t),is(s),s)}formatIso(e,t){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(e),{omitTime:t})}select(e,t){let s;t==null?e.start!=null?s=e:s={start:e,end:null}:s={start:e,end:t};let i=this.getCurrentData(),l=_M(s,i.dateEnv,ct({days:1}));l&&(this.dispatch({type:"SELECT_DATES",selection:l}),O1(l,null,i))}unselect(e){let t=this.getCurrentData();t.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),gM(e,t))}addEvent(e,t){if(e instanceof Tt){let c=e._def,u=e._instance;return this.getCurrentData().eventStore.defs[c.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:hp({def:c,instance:u})}),this.triggerEventAdd(e)),e}let s=this.getCurrentData(),i;if(t instanceof Fr)i=t.internalEventSource;else if(typeof t=="boolean")t&&([i]=lg(s.eventSources));else if(t!=null){let c=this.getEventSourceById(t);if(!c)return console.warn(`Could not find an event source with ID "${t}"`),null;i=c.internalEventSource}let l=T1(e,i,s,!1);if(l){let c=new Tt(s,l.def,l.def.recurringDef?null:l.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:hp(l)}),this.triggerEventAdd(c),c}return null}triggerEventAdd(e){let{emitter:t}=this.getCurrentData();t.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:I1(e)})}})}getEventById(e){let t=this.getCurrentData(),{defs:s,instances:i}=t.eventStore;e=String(e);for(let l in s){let c=s[l];if(c.publicId===e){if(c.recurringDef)return new Tt(t,c,null);for(let u in i){let h=i[u];if(h.defId===c.defId)return new Tt(t,c,h)}}}return null}getEvents(){let e=this.getCurrentData();return Bi(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),t=e.eventSources,s=[];for(let i in t)s.push(new Fr(e,t[i]));return s}getEventSourceById(e){let t=this.getCurrentData(),s=t.eventSources;e=String(e);for(let i in s)if(s[i].publicId===e)return new Fr(t,s[i]);return null}addEventSource(e){let t=this.getCurrentData();if(e instanceof Fr)return t.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let s=R1(e,t);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Fr(t,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let t=ct(e);t&&this.trigger("_scrollRequest",{time:t})}}function zM(n,e){return n.left>=e.left&&n.left<e.right&&n.top>=e.top&&n.top<e.bottom}function q1(n,e){let t={left:Math.max(n.left,e.left),right:Math.min(n.right,e.right),top:Math.max(n.top,e.top),bottom:Math.min(n.bottom,e.bottom)};return t.left<t.right&&t.top<t.bottom?t:!1}function FM(n,e){return{left:Math.min(Math.max(n.left,e.left),e.right),top:Math.min(Math.max(n.top,e.top),e.bottom)}}function UM(n){return{left:(n.left+n.right)/2,top:(n.top+n.bottom)/2}}function qM(n,e){return{left:n.left-e.left,top:n.top-e.top}}function V1(n,e,t,s){return{dow:n.getUTCDay(),isDisabled:!!(s&&(!s.activeRange||!Za(s.activeRange,n))),isOther:!!(s&&!Za(s.currentRange,n)),isToday:!!(e&&Za(e,n)),isPast:!!(e&&n<e.start),isFuture:!!(e&&n>=e.end)}}function yg(n,e){let t=["fc-day",`fc-day-${YR[n.dow]}`];return n.isDisabled?t.push("fc-day-disabled"):(n.isToday&&(t.push("fc-day-today"),t.push(e.getClass("today"))),n.isPast&&t.push("fc-day-past"),n.isFuture&&t.push("fc-day-future"),n.isOther&&t.push("fc-day-other")),t}const VM=is({year:"numeric",month:"long",day:"numeric"}),$M=is({week:"long"});function mp(n,e,t="day",s=!0){const{dateEnv:i,options:l,calendarApi:c}=n;let u=i.format(e,t==="week"?$M:VM);if(l.navLinks){let h=i.toDate(e);const m=p=>{let y=t==="day"?l.navLinkDayClick:t==="week"?l.navLinkWeekClick:null;typeof y=="function"?y.call(c,i.toDate(e),p):(typeof y=="string"&&(t=y),c.zoomTo(e,t))};return Object.assign({title:wo(l.navLinkHint,[u,h],u),"data-navlink":""},s?g1(m):{onClick:m})}return{"aria-label":u}}let Dm=null;function GM(){return Dm===null&&(Dm=YM()),Dm}function YM(){let n=document.createElement("div");vo(n,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),n.innerHTML="<div></div>",document.body.appendChild(n);let t=n.firstChild.getBoundingClientRect().left>n.getBoundingClientRect().left;return eg(n),t}let Rm;function WM(){return Rm||(Rm=XM()),Rm}function XM(){let n=document.createElement("div");n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",n.style.left="-9999px",document.body.appendChild(n);let e=$1(n);return document.body.removeChild(n),e}function $1(n){return{x:n.offsetHeight-n.clientHeight,y:n.offsetWidth-n.clientWidth}}function QM(n,e=!1){let t=window.getComputedStyle(n),s=parseInt(t.borderLeftWidth,10)||0,i=parseInt(t.borderRightWidth,10)||0,l=parseInt(t.borderTopWidth,10)||0,c=parseInt(t.borderBottomWidth,10)||0,u=$1(n),h=u.y-s-i,m=u.x-l-c,p={borderLeft:s,borderRight:i,borderTop:l,borderBottom:c,scrollbarBottom:m,scrollbarLeft:0,scrollbarRight:0};return GM()&&t.direction==="rtl"?p.scrollbarLeft=h:p.scrollbarRight=h,e&&(p.paddingLeft=parseInt(t.paddingLeft,10)||0,p.paddingRight=parseInt(t.paddingRight,10)||0,p.paddingTop=parseInt(t.paddingTop,10)||0,p.paddingBottom=parseInt(t.paddingBottom,10)||0),p}function ZM(n,e=!1,t){let s=xg(n),i=QM(n,e),l={left:s.left+i.borderLeft+i.scrollbarLeft,right:s.right-i.borderRight-i.scrollbarRight,top:s.top+i.borderTop,bottom:s.bottom-i.borderBottom-i.scrollbarBottom};return e&&(l.left+=i.paddingLeft,l.right-=i.paddingRight,l.top+=i.paddingTop,l.bottom-=i.paddingBottom),l}function xg(n){let e=n.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function KM(n){let e=G1(n),t=n.getBoundingClientRect();for(let s of e){let i=q1(t,s.getBoundingClientRect());if(i)t=i;else return null}return t}function G1(n){let e=[];for(;n instanceof HTMLElement;){let t=window.getComputedStyle(n);if(t.position==="fixed")break;/(auto|scroll)/.test(t.overflow+t.overflowY+t.overflowX)&&e.push(n),n=n.parentNode}return e}class ru{constructor(e,t,s,i){this.els=t;let l=this.originClientRect=e.getBoundingClientRect();s&&this.buildElHorizontals(l.left),i&&this.buildElVerticals(l.top)}buildElHorizontals(e){let t=[],s=[];for(let i of this.els){let l=i.getBoundingClientRect();t.push(l.left-e),s.push(l.right-e)}this.lefts=t,this.rights=s}buildElVerticals(e){let t=[],s=[];for(let i of this.els){let l=i.getBoundingClientRect();t.push(l.top-e),s.push(l.bottom-e)}this.tops=t,this.bottoms=s}leftToIndex(e){let{lefts:t,rights:s}=this,i=t.length,l;for(l=0;l<i;l+=1)if(e>=t[l]&&e<s[l])return l}topToIndex(e){let{tops:t,bottoms:s}=this,i=t.length,l;for(l=0;l<i;l+=1)if(e>=t[l]&&e<s[l])return l}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return wd(this.tops||[],e.tops||[])&&wd(this.bottoms||[],e.bottoms||[])&&wd(this.lefts||[],e.lefts||[])&&wd(this.rights||[],e.rights||[])}}function wd(n,e){const t=n.length;if(t!==e.length)return!1;for(let s=0;s<t;s++)if(Math.round(n[s])!==Math.round(e[s]))return!1;return!0}class bg{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class JM extends bg{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class e4 extends bg{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Zi extends Lt{constructor(){super(...arguments),this.uid=Yi()}prepareHits(){}queryHit(e,t,s,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!bs(e,".fc-event-mirror")}isValidDateDownEl(e){return!bs(e,".fc-event:not(.fc-bg-event)")&&!bs(e,".fc-more-link")&&!bs(e,"a[data-navlink]")&&!bs(e,".fc-popover")}}class t4{constructor(e=t=>t.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let t=[];for(let s of e)this.insertEntry(s,t);return t}insertEntry(e,t){let s=this.findInsertion(e);this.isInsertionValid(s,e)?this.insertEntryAt(e,s):this.handleInvalidInsertion(s,e,t)}isInsertionValid(e,t){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(t)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,t,s){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},t),{span:Y1(t.span,e.touchingEntry.span)});s.push(i),this.splitEntry(t,e.touchingEntry,s)}else s.push(t)}splitEntry(e,t,s){let i=e.span,l=t.span;i.start<l.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:l.start}},s),i.end>l.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:l.end,end:i.end}},s)}insertEntryAt(e,t){let{entriesByLevel:s,levelCoords:i}=this;t.lateral===-1?(km(i,t.level,t.levelCoord),km(s,t.level,[e])):km(s[t.level],t.lateral,e),this.stackCnts[No(e)]=t.stackCnt}findInsertion(e){let{levelCoords:t,entriesByLevel:s,strictOrder:i,stackCnts:l}=this,c=t.length,u=0,h=-1,m=-1,p=null,y=0;for(let w=0;w<c;w+=1){const A=t[w];if(!i&&A>=u+this.getEntryThickness(e))break;let S=s[w],N,j=Xv(S,e.span.start,Wv),C=j[0]+j[1];for(;(N=S[C])&&N.span.start<e.span.end;){let R=A+this.getEntryThickness(N);R>u&&(u=R,p=N,h=w,m=C),R===u&&(y=Math.max(y,l[No(N)]+1)),C+=1}}let x=0;if(p)for(x=h+1;x<c&&t[x]<u;)x+=1;let v=-1;return x<c&&t[x]===u&&(v=Xv(s[x],e.span.end,Wv)[0]),{touchingLevel:h,touchingLateral:m,touchingEntry:p,stackCnt:y,levelCoord:u,level:x,lateral:v}}toRects(){let{entriesByLevel:e,levelCoords:t}=this,s=e.length,i=[];for(let l=0;l<s;l+=1){let c=e[l],u=t[l];for(let h of c)i.push(Object.assign(Object.assign({},h),{thickness:this.getEntryThickness(h),levelCoord:u}))}return i}}function Wv(n){return n.span.end}function No(n){return n.index+":"+n.span.start}function Y1(n,e){let t=Math.max(n.start,e.start),s=Math.min(n.end,e.end);return t<s?{start:t,end:s}:null}function km(n,e,t){n.splice(e,0,t)}function Xv(n,e,t){let s=0,i=n.length;if(!i||e<t(n[s]))return[0,0];if(e>t(n[i-1]))return[i,0];for(;s<i;){let l=Math.floor(s+(i-s)/2),c=t(n[l]);if(e<c)i=l;else if(e>c)s=l+1;else return[l,1]}return[s,0]}class s4{constructor(e,t){this.emitter=new Du}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const vg={};function n4(n,e){return!n||e>10?is({weekday:"short"}):e>1?is({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):is({weekday:"long"})}const W1="fc-col-header-cell";function X1(n){return n.text}class a4 extends Lt{render(){let{dateEnv:e,options:t,theme:s,viewApi:i}=this.context,{props:l}=this,{date:c,dateProfile:u}=l,h=V1(c,l.todayRange,null,u),m=[W1].concat(yg(h,s)),p=e.format(c,l.dayHeaderFormat),y=!h.isDisabled&&l.colCnt>1?mp(this.context,c):{},x=e.toDate(c);e.namedTimeZoneImpl&&(x=ti(x,36e5));let v=Object.assign(Object.assign(Object.assign({date:x,view:i},l.extraRenderProps),{text:p}),h);return ie(va,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:l.colSpan,"data-date":h.isDisabled?void 0:ng(c)},l.extraDataAttrs),renderProps:v,generatorName:"dayHeaderContent",customGenerator:t.dayHeaderContent,defaultGenerator:X1,classNameGenerator:t.dayHeaderClassNames,didMount:t.dayHeaderDidMount,willUnmount:t.dayHeaderWillUnmount},w=>ie("div",{className:"fc-scrollgrid-sync-inner"},!h.isDisabled&&ie(w,{elTag:"a",elAttrs:y,elClasses:["fc-col-header-cell-cushion",l.isSticky&&"fc-sticky"]})))}}const i4=is({weekday:"long"});class r4 extends Lt{render(){let{props:e}=this,{dateEnv:t,theme:s,viewApi:i,options:l}=this.context,c=rs(new Date(2592e5),e.dow),u={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},h=t.format(c,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:c},u),{view:i}),e.extraRenderProps),{text:h});return ie(va,{elTag:"th",elClasses:[W1,...yg(u,s),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:l.dayHeaderContent,defaultGenerator:X1,classNameGenerator:l.dayHeaderClassNames,didMount:l.dayHeaderDidMount,willUnmount:l.dayHeaderWillUnmount},p=>ie("div",{className:"fc-scrollgrid-sync-inner"},ie(p,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":t.format(c,i4)}})))}}class l4 extends Lt{constructor(){super(...arguments),this.createDayHeaderFormatter=lt(o4)}render(){let{context:e}=this,{dates:t,dateProfile:s,datesRepDistinctDays:i,renderIntro:l}=this.props,c=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,t.length);return ie(Ru,{unit:"day"},(u,h)=>ie("tr",{role:"row"},l&&l("day"),t.map(m=>i?ie(a4,{key:m.toISOString(),date:m,dateProfile:s,todayRange:h,colCnt:t.length,dayHeaderFormat:c}):ie(r4,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:c}))))}}function o4(n,e,t){return n||n4(e,t)}class c4{constructor(e,t){let s=e.start,{end:i}=e,l=[],c=[],u=-1;for(;s<i;)t.isHiddenDay(s)?l.push(u+.5):(u+=1,l.push(u),c.push(s)),s=rs(s,1);this.dates=c,this.indices=l,this.cnt=c.length}sliceRange(e){let t=this.getDateDayIndex(e.start),s=this.getDateDayIndex(rs(e.end,-1)),i=Math.max(0,t),l=Math.min(this.cnt-1,s);return i=Math.ceil(i),l=Math.floor(l),i<=l?{firstIndex:i,lastIndex:l,isStart:t===i,isEnd:s===l}:null}getDateDayIndex(e){let{indices:t}=this,s=Math.floor(ll(this.dates[0],e));return s<0?t[0]-1:s>=t.length?t[t.length-1]+1:t[s]}}class d4{constructor(e,t){let{dates:s}=e,i,l,c;if(t){for(l=s[0].getUTCDay(),i=1;i<s.length&&s[i].getUTCDay()!==l;i+=1);c=Math.ceil(s.length/i)}else c=1,i=s.length;this.rowCnt=c,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let t=0;t<this.rowCnt;t+=1){let s=[];for(let i=0;i<this.colCnt;i+=1)s.push(this.buildCell(t,i));e.push(s)}return e}buildCell(e,t){let s=this.daySeries.dates[e*this.colCnt+t];return{key:s.toISOString(),date:s}}buildHeaderDates(){let e=[];for(let t=0;t<this.colCnt;t+=1)e.push(this.cells[0][t].date);return e}sliceRange(e){let{colCnt:t}=this,s=this.daySeries.sliceRange(e),i=[];if(s){let{firstIndex:l,lastIndex:c}=s,u=l;for(;u<=c;){let h=Math.floor(u/t),m=Math.min((h+1)*t,c+1);i.push({row:h,firstCol:u%t,lastCol:(m-1)%t,isStart:s.isStart&&u===l,isEnd:s.isEnd&&m-1===c}),u=m}}return i}}class u4{constructor(){this.sliceBusinessHours=lt(this._sliceBusinessHours),this.sliceDateSelection=lt(this._sliceDateSpan),this.sliceEventStore=lt(this._sliceEventStore),this.sliceEventDrag=lt(this._sliceInteraction),this.sliceEventResize=lt(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,t,s,i,...l){let{eventUiBases:c}=e,u=this.sliceEventStore(e.eventStore,c,t,s,...l);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,t,s,c,i,...l),businessHourSegs:this.sliceBusinessHours(e.businessHours,t,s,i,...l),fgEventSegs:u.fg,bgEventSegs:u.bg,eventDrag:this.sliceEventDrag(e.eventDrag,c,t,s,...l),eventResize:this.sliceEventResize(e.eventResize,c,t,s,...l),eventSelection:e.eventSelection}}sliceNowDate(e,t,s,i,...l){return this._sliceDateSpan({range:{start:e,end:ti(e,1)},allDay:!1},t,s,{},i,...l)}_sliceBusinessHours(e,t,s,i,...l){return e?this._sliceEventStore(Vi(e,Ad(t,!!s),i),{},t,s,...l).bg:[]}_sliceEventStore(e,t,s,i,...l){if(e){let c=$v(e,t,Ad(s,!!i),i);return{bg:this.sliceEventRanges(c.bg,l),fg:this.sliceEventRanges(c.fg,l)}}return{bg:[],fg:[]}}_sliceInteraction(e,t,s,i,...l){if(!e)return null;let c=$v(e.mutatedEvents,t,Ad(s,!!i),i);return{segs:this.sliceEventRanges(c.fg,l),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,t,s,i,l,...c){if(!e)return[];let u=Ad(t,!!s),h=Jr(e.range,u);if(h){e=Object.assign(Object.assign({},e),{range:h});let m=kM(e,i,l),p=this.sliceRange(e.range,...c);for(let y of p)y.eventRange=m;return p}return[]}sliceEventRanges(e,t){let s=[];for(let i of e)s.push(...this.sliceEventRange(i,t));return s}sliceEventRange(e,t){let s=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(s={start:s.start,end:rs(s.start,1)});let i=this.sliceRange(s,...t);for(let l of i)l.eventRange=e,l.isStart=e.isStart&&l.isStart,l.isEnd=e.isEnd&&l.isEnd;return i}}function Ad(n,e){let t=n.activeRange;return e?t:{start:ti(t.start,n.slotMinTime.milliseconds),end:ti(t.end,n.slotMaxTime.milliseconds-864e5)}}function Q1(n,e,t){let{instances:s}=n.mutatedEvents;for(let i in s)if(!Cu(e.validRange,s[i].range))return!1;return Z1({eventDrag:n},t)}function h4(n,e,t){return Cu(e.validRange,n.range)?Z1({dateSelection:n},t):!1}function Z1(n,e){let t=e.getCurrentData(),s=Object.assign({businessHours:t.businessHours,dateSelection:"",eventStore:t.eventStore,eventUiBases:t.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},n);return(e.pluginHooks.isPropsValid||f4)(s,e)}function f4(n,e,t={},s){return!(n.eventDrag&&!m4(n,e,t,s)||n.dateSelection&&!p4(n,e,t,s))}function m4(n,e,t,s){let i=e.getCurrentData(),l=n.eventDrag,c=l.mutatedEvents,u=c.defs,h=c.instances,m=iu(u,l.isEvent?n.eventUiBases:{"":i.selectionConfig});s&&(m=Wi(m,s));let p=cM(n.eventStore,l.affectedEvents.instances),y=p.defs,x=p.instances,v=iu(y,n.eventUiBases);for(let w in h){let A=h[w],S=A.range,N=m[A.defId],j=u[A.defId];if(!K1(N.constraints,S,p,n.businessHours,e))return!1;let{eventOverlap:C}=e.options,R=typeof C=="function"?C:null;for(let O in x){let B=x[O];if(cg(S,B.range)&&(v[B.defId].overlap===!1&&l.isEvent||N.overlap===!1||R&&!R(new Tt(e,y[B.defId],B),new Tt(e,j,A))))return!1}let D=i.eventStore;for(let O of N.allows){let B=Object.assign(Object.assign({},t),{range:A.range,allDay:j.allDay}),F=D.defs[j.defId],I=D.instances[w],ee;if(F?ee=new Tt(e,F,I):ee=new Tt(e,j),!O(mg(B,e),ee))return!1}}return!0}function p4(n,e,t,s){let i=n.eventStore,l=i.defs,c=i.instances,u=n.dateSelection,h=u.range,{selectionConfig:m}=e.getCurrentData();if(s&&(m=s(m)),!K1(m.constraints,h,i,n.businessHours,e))return!1;let{selectOverlap:p}=e.options,y=typeof p=="function"?p:null;for(let x in c){let v=c[x];if(cg(h,v.range)&&(m.overlap===!1||y&&!y(new Tt(e,l[v.defId],v),null)))return!1}for(let x of m.allows){let v=Object.assign(Object.assign({},t),u);if(!x(mg(v,e),null))return!1}return!0}function K1(n,e,t,s,i){for(let l of n)if(!y4(g4(l,e,t,s,i),e))return!1;return!0}function g4(n,e,t,s,i){return n==="businessHours"?Mm(Vi(s,e,i)):typeof n=="string"?Mm(Tu(t,l=>l.groupId===n)):typeof n=="object"&&n?Mm(Vi(n,e,i)):[]}function Mm(n){let{instances:e}=n,t=[];for(let s in e)t.push(e[s].range);return t}function y4(n,e){for(let t of n)if(Cu(t,e))return!0;return!1}const Sd=/^(visible|hidden)$/;class x4 extends Lt{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Xn(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:t,liquidIsAbsolute:s}=e,i=t&&s,l=["fc-scroller"];return t&&(s?l.push("fc-scroller-liquid-absolute"):l.push("fc-scroller-liquid")),ie("div",{ref:this.handleEl,className:l.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Sd.test(this.props.overflowX))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=e;for(let i=0;i<s.length;i+=1)if(s[i].getBoundingClientRect().width>t)return!0;return!1}needsYScrolling(){if(Sd.test(this.props.overflowY))return!1;let{el:e}=this,t=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=e;for(let i=0;i<s.length;i+=1)if(s[i].getBoundingClientRect().height>t)return!0;return!1}getXScrollbarWidth(){return Sd.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Sd.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ki{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(t,s)=>{let{depths:i,currentMap:l}=this,c=!1,u=!1;t!==null?(c=s in l,l[s]=t,i[s]=(i[s]||0)+1,u=!0):(i[s]-=1,i[s]||(delete l[s],delete this.callbackMap[s],c=!0)),this.masterCallback&&(c&&this.masterCallback(null,String(s)),u&&this.masterCallback(t,String(s)))}}createRef(e){let t=this.callbackMap[e];return t||(t=this.callbackMap[e]=s=>{this.handleValue(s,String(e))}),t}collect(e,t,s){return _k(this.currentMap,e,t,s)}getAll(){return lg(this.currentMap)}}function b4(n){let e=jR(n,".fc-scrollgrid-shrink"),t=0;for(let s of e)t=Math.max(t,zR(s));return Math.ceil(t)}function J1(n,e){return n.liquid&&e.liquid}function v4(n,e){return e.maxHeight!=null||J1(n,e)}function w4(n,e,t,s){let{expandRows:i}=t;return typeof e.content=="function"?e.content(t):ie("table",{role:"presentation",className:[e.tableClassName,n.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:t.tableMinWidth,width:t.clientWidth,height:i?t.clientHeight:""}},t.tableColGroupNode,ie(s?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(t):e.rowContent))}function A4(n,e){return ei(n,e,Cn)}function S4(n,e){let t=[];for(let s of n){let i=s.span||1;for(let l=0;l<i;l+=1)t.push(ie("col",{style:{width:s.width==="shrink"?N4(e):s.width||"",minWidth:s.minWidth||""}}))}return ie("colgroup",{},...t)}function N4(n){return n??4}function E4(n){for(let e of n)if(e.width==="shrink")return!0;return!1}function j4(n,e){let t=["fc-scrollgrid",e.theme.getClass("table")];return n&&t.push("fc-scrollgrid-liquid"),t}function _4(n,e){let t=["fc-scrollgrid-section",`fc-scrollgrid-section-${n.type}`,n.className];return e&&n.liquid&&n.maxHeight==null&&t.push("fc-scrollgrid-section-liquid"),n.isSticky&&t.push("fc-scrollgrid-section-sticky"),t}function C4(n){return ie("div",{className:"fc-scrollgrid-sticky-shim",style:{width:n.clientWidth,minWidth:n.tableMinWidth}})}function Qv(n){let{stickyHeaderDates:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}function T4(n){let{stickyFooterScrollbar:e}=n;return(e==null||e==="auto")&&(e=n.height==="auto"||n.viewHeight==="auto"),e}class eS extends Lt{constructor(){super(...arguments),this.processCols=lt(e=>e,A4),this.renderMicroColGroup=lt(S4),this.scrollerRefs=new ki,this.scrollerElRefs=new ki(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:t,context:s}=this,i=e.sections||[],l=this.processCols(e.cols),c=this.renderMicroColGroup(l,t.shrinkWidth),u=j4(e.liquid,s);e.collapsibleWidth&&u.push("fc-scrollgrid-collapsible");let h=i.length,m=0,p,y=[],x=[],v=[];for(;m<h&&(p=i[m]).type==="header";)y.push(this.renderSection(p,c,!0)),m+=1;for(;m<h&&(p=i[m]).type==="body";)x.push(this.renderSection(p,c,!1)),m+=1;for(;m<h&&(p=i[m]).type==="footer";)v.push(this.renderSection(p,c,!0)),m+=1;let w=!U1();const A={role:"rowgroup"};return ie("table",{role:"grid",className:u.join(" "),style:{height:e.height}},!!(!w&&y.length)&&ie("thead",A,...y),!!(!w&&x.length)&&ie("tbody",A,...x),!!(!w&&v.length)&&ie("tfoot",A,...v),w&&ie("tbody",A,...y,...x,...v))}renderSection(e,t,s){return"outerContent"in e?ie(Pt,{key:e.key},e.outerContent):ie("tr",{key:e.key,role:"presentation",className:_4(e,this.props.liquid).join(" ")},this.renderChunkTd(e,t,e.chunk,s))}renderChunkTd(e,t,s,i){if("outerContent"in s)return s.outerContent;let{props:l}=this,{forceYScrollbars:c,scrollerClientWidths:u,scrollerClientHeights:h}=this.state,m=v4(l,e),p=J1(l,e),y=l.liquid?c?"scroll":m?"auto":"hidden":"visible",x=e.key,v=w4(e,s,{tableColGroupNode:t,tableMinWidth:"",clientWidth:!l.collapsibleWidth&&u[x]!==void 0?u[x]:null,clientHeight:h[x]!==void 0?h[x]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return ie(i?"th":"td",{ref:s.elRef,role:"presentation"},ie("div",{className:`fc-scroller-harness${p?" fc-scroller-harness-liquid":""}`},ie(x4,{ref:this.scrollerRefs.createRef(x),elRef:this.scrollerElRefs.createRef(x),overflowY:y,overflowX:l.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:p,liquidIsAbsolute:!0},v)))}_handleScrollerEl(e,t){let s=D4(this.props.sections,t);s&&Xn(s.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return E4(this.props.cols)?b4(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=WM(),{scrollerRefs:t,scrollerElRefs:s}=this,i=!1,l={},c={};for(let u in t.currentMap){let h=t.currentMap[u];if(h&&h.needsYScrolling()){i=!0;break}}for(let u of this.props.sections){let h=u.key,m=s.currentMap[h];if(m){let p=m.parentNode;l[h]=Math.floor(p.getBoundingClientRect().width-(i?e.y:0)),c[h]=Math.floor(p.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:l,scrollerClientHeights:c}}}eS.addStateEquality({scrollerClientWidths:Cn,scrollerClientHeights:Cn});function D4(n,e){for(let t of n)if(t.key===e)return t;return null}class wg extends Lt{constructor(){super(...arguments),this.buildPublicEvent=lt((e,t,s)=>new Tt(e,t,s)),this.handleEl=e=>{this.el=e,Xn(this.props.elRef,e),e&&Gv(e,this.props.seg)}}render(){const{props:e,context:t}=this,{options:s}=t,{seg:i}=e,{eventRange:l}=i,{ui:c}=l,u={event:this.buildPublicEvent(t,l.def,l.instance),view:t.viewApi,timeText:e.timeText,textColor:c.textColor,backgroundColor:c.backgroundColor,borderColor:c.borderColor,isDraggable:!e.disableDragging&&wM(i,t),isStartResizable:!e.disableResizing&&AM(i,t),isEndResizable:!e.disableResizing&&SM(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return ie(va,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...NM(u),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:u,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&Gv(this.el,this.props.seg)}}class tS extends Lt{render(){let{props:e,context:t}=this,{options:s}=t,{seg:i}=e,{ui:l}=i.eventRange,c=s.eventTimeFormat||e.defaultTimeFormat,u=B1(i,c,t,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return ie(wg,Object.assign({},e,{elTag:"a",elStyle:{borderColor:l.borderColor,backgroundColor:l.backgroundColor},elAttrs:H1(i,t),defaultGenerator:R4,timeText:u}),(h,m)=>ie(Pt,null,ie(h,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),!!m.isStartResizable&&ie("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!m.isEndResizable&&ie("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}tS.addPropsEquality({seg:Cn});function R4(n){return ie("div",{className:"fc-event-main-frame"},n.timeText&&ie("div",{className:"fc-event-time"},n.timeText),ie("div",{className:"fc-event-title-container"},ie("div",{className:"fc-event-title fc-sticky"},n.event.title||ie(Pt,null,""))))}const k4=is({day:"numeric"});class sS extends Lt{constructor(){super(...arguments),this.refineRenderProps=Id(M4)}render(){let{props:e,context:t}=this,{options:s}=t,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:t.viewApi,dateEnv:t.dateEnv,monthStartFormat:s.monthStartFormat});return ie(va,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":ng(e.date)}),elClasses:[...yg(i,t.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount},e.children)}}function nS(n){return!!(n.dayCellContent||dp("dayCellContent",n))}function M4(n){let{date:e,dateEnv:t,dateProfile:s,isMonthStart:i}=n,l=V1(e,n.todayRange,null,s),c=n.showDayNumber?t.format(e,i?n.monthStartFormat:k4):"";return Object.assign(Object.assign(Object.assign({date:t.toDate(e),view:n.viewApi},l),{isMonthStart:i,dayNumberText:c}),n.extraRenderProps)}class L4 extends Lt{render(){let{props:e}=this,{seg:t}=e;return ie(wg,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:t.eventRange.ui.backgroundColor},defaultGenerator:O4,seg:t,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function O4(n){let{title:e}=n.event;return e&&ie("div",{className:"fc-event-title"},n.event.title)}function I4(n){return ie("div",{className:`fc-${n}`})}const P4=n=>ie(Xi.Consumer,null,e=>{let{dateEnv:t,options:s}=e,{date:i}=n,l=s.weekNumberFormat||n.defaultFormat,c=t.computeWeekNumber(i),u=t.format(i,l),h={num:c,text:u,date:i};return ie(va,{elRef:n.elRef,elTag:n.elTag,elAttrs:n.elAttrs,elClasses:n.elClasses,elStyle:n.elStyle,renderProps:h,generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:B4,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount},n.children)});function B4(n){return n.text}const Lm=10;class H4 extends Lt{constructor(){super(...arguments),this.state={titleId:ju()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Xn(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const t=m1(e);this.rootEl.contains(t)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:t}=this.context,{props:s,state:i}=this,l=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return hR(ie("div",Object.assign({},s.extraAttrs,{id:s.id,className:l.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),ie("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},ie("span",{className:"fc-popover-title",id:i.titleId},s.title),ie("span",{className:"fc-popover-close "+e.getIconClass("close"),title:t.closeHint,onClick:this.handleCloseClick})),ie("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:t,alignGridTop:s}=this.props,{rootEl:i}=this,l=KM(t);if(l){let c=i.getBoundingClientRect(),u=s?bs(t,".fc-scrollgrid").getBoundingClientRect().top:l.top,h=e?l.right-c.width:l.left;u=Math.max(u,Lm),h=Math.min(h,document.documentElement.clientWidth-Lm-c.width),h=Math.max(h,Lm);let m=i.offsetParent.getBoundingClientRect();vo(i,{top:u-m.top,left:h-m.left})}}}class z4 extends Zi{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:t}=this.context,{props:s}=this,{startDate:i,todayRange:l,dateProfile:c}=s,u=t.format(i,e.dayPopoverFormat);return ie(sS,{elRef:this.handleRootEl,date:i,dateProfile:c,todayRange:l},(h,m,p)=>ie(H4,{elRef:p.ref,id:s.id,title:u,extraClassNames:["fc-more-popover"].concat(p.className||[]),extraAttrs:p,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},nS(e)&&ie(h,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(e,t,s,i){let{rootEl:l,props:c}=this;return e>=0&&e<s&&t>=0&&t<i?{dateProfile:c.dateProfile,dateSpan:Object.assign({allDay:!c.forceTimed,range:{start:c.startDate,end:c.endDate}},c.extraDateSpan),dayEl:l,rect:{left:0,top:0,right:s,bottom:i},layer:1}:null}}class F4 extends Lt{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:ju()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Xn(this.props.elRef,e)},this.handleClick=e=>{let{props:t,context:s}=this,{moreLinkClick:i}=s.options,l=Zv(t).start;function c(u){let{def:h,instance:m,range:p}=u.eventRange;return{event:new Tt(s,h,m),start:s.dateEnv.toDate(p.start),end:s.dateEnv.toDate(p.end),isStart:u.isStart,isEnd:u.isEnd}}typeof i=="function"&&(i=i({date:l,allDay:!!t.allDayDate,allSegs:t.allSegs.map(c),hiddenSegs:t.hiddenSegs.map(c),jsEvent:e,view:s.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&s.calendarApi.zoomTo(l,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:t}=this;return ie(Xi.Consumer,null,s=>{let{viewApi:i,options:l,calendarApi:c}=s,{moreLinkText:u}=l,{moreCnt:h}=e,m=Zv(e),p=typeof u=="function"?u.call(c,h):`+${h} ${u}`,y=wo(l.moreLinkHint,[h],p),x={num:h,shortText:`+${h}`,text:p,view:i};return ie(Pt,null,!!e.moreCnt&&ie(va,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),g1(this.handleClick)),{title:y,"aria-expanded":t.isPopoverOpen,"aria-controls":t.isPopoverOpen?t.popoverId:""}),renderProps:x,generatorName:"moreLinkContent",customGenerator:l.moreLinkContent,defaultGenerator:e.defaultGenerator||U4,classNameGenerator:l.moreLinkClassNames,didMount:l.moreLinkDidMount,willUnmount:l.moreLinkWillUnmount},e.children),t.isPopoverOpen&&ie(z4,{id:t.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=bs(this.linkEl,".fc-view-harness"))}}function U4(n){return n.text}function Zv(n){if(n.allDayDate)return{start:n.allDayDate,end:rs(n.allDayDate,1)};let{hiddenSegs:e}=n;return{start:q4(e),end:$4(e)}}function q4(n){return n.reduce(V4).eventRange.range.start}function V4(n,e){return n.eventRange.range.start<e.eventRange.range.start?n:e}function $4(n){return n.reduce(G4).eventRange.range.end}function G4(n,e){return n.eventRange.range.end>e.eventRange.range.end?n:e}class Y4{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let t of this.handlers)t(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class W4 extends Y4{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:t}=this;let s=!1;e.isActive?(t.set(e.id,e),s=!0):t.has(e.id)&&(t.delete(e.id),s=!0),s&&this.set(t)}}const X4=[],aS={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},iS=Object.assign(Object.assign({},aS),{buttonHints:{prev:"Previous $0",next:"Next $0",today(n,e){return e==="day"?"Today":`This ${n}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(n){return`Show ${n} more event${n===1?"":"s"}`}});function Q4(n){let e=n.length>0?n[0].code:"en",t=X4.concat(n),s={en:iS};for(let i of t)s[i.code]=i;return{map:s,defaultCode:e}}function rS(n,e){return typeof n=="object"&&!Array.isArray(n)?lS(n.code,[n.code],n):Z4(n,e)}function Z4(n,e){let t=[].concat(n||[]),s=K4(t,e)||iS;return lS(n,t,s)}function K4(n,e){for(let t=0;t<n.length;t+=1){let s=n[t].toLocaleLowerCase().split("-");for(let i=s.length;i>0;i-=1){let l=s.slice(0,i).join("-");if(e[l])return e[l]}}return null}function lS(n,e,t){let s=rg([aS,t],["buttonText"]);delete s.code;let{week:i}=s;return delete s.week,{codeArg:n,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(n),options:s}}function ni(n){return{id:Yi(),name:n.name,premiumReleaseDate:n.premiumReleaseDate?new Date(n.premiumReleaseDate):void 0,deps:n.deps||[],reducers:n.reducers||[],isLoadingFuncs:n.isLoadingFuncs||[],contextInit:[].concat(n.contextInit||[]),eventRefiners:n.eventRefiners||{},eventDefMemberAdders:n.eventDefMemberAdders||[],eventSourceRefiners:n.eventSourceRefiners||{},isDraggableTransformers:n.isDraggableTransformers||[],eventDragMutationMassagers:n.eventDragMutationMassagers||[],eventDefMutationAppliers:n.eventDefMutationAppliers||[],dateSelectionTransformers:n.dateSelectionTransformers||[],datePointTransforms:n.datePointTransforms||[],dateSpanTransforms:n.dateSpanTransforms||[],views:n.views||{},viewPropsTransformers:n.viewPropsTransformers||[],isPropsValid:n.isPropsValid||null,externalDefTransforms:n.externalDefTransforms||[],viewContainerAppends:n.viewContainerAppends||[],eventDropTransformers:n.eventDropTransformers||[],componentInteractions:n.componentInteractions||[],calendarInteractions:n.calendarInteractions||[],themeClasses:n.themeClasses||{},eventSourceDefs:n.eventSourceDefs||[],cmdFormatter:n.cmdFormatter,recurringTypes:n.recurringTypes||[],namedTimeZonedImpl:n.namedTimeZonedImpl,initialView:n.initialView||"",elementDraggingImpl:n.elementDraggingImpl,optionChangeHandlers:n.optionChangeHandlers||{},scrollGridImpl:n.scrollGridImpl||null,listenerRefiners:n.listenerRefiners||{},optionRefiners:n.optionRefiners||{},propSetHandlers:n.propSetHandlers||{}}}function J4(n,e){let t={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(l){for(let c of l){const u=c.name,h=t[u];h===void 0?(t[u]=c.id,i(c.deps),s=tL(s,c)):h!==c.id&&console.warn(`Duplicate plugin '${u}'`)}}return n&&i(n),i(e),s}function eL(){let n=[],e=[],t;return(s,i)=>((!t||!ei(s,n)||!ei(i,e))&&(t=J4(s,i)),n=s,e=i,t)}function tL(n,e){return{premiumReleaseDate:sL(n.premiumReleaseDate,e.premiumReleaseDate),reducers:n.reducers.concat(e.reducers),isLoadingFuncs:n.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:n.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},n.eventRefiners),e.eventRefiners),eventDefMemberAdders:n.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},n.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:n.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:n.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:n.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:n.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:n.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:n.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},n.views),e.views),viewPropsTransformers:n.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||n.isPropsValid,externalDefTransforms:n.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:n.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:n.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:n.calendarInteractions.concat(e.calendarInteractions),componentInteractions:n.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},n.themeClasses),e.themeClasses),eventSourceDefs:n.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||n.cmdFormatter,recurringTypes:n.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||n.namedTimeZonedImpl,initialView:n.initialView||e.initialView,elementDraggingImpl:n.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},n.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||n.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},n.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},n.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},n.propSetHandlers),e.propSetHandlers)}}function sL(n,e){return n===void 0?e:e===void 0?n:new Date(Math.max(n.valueOf(),e.valueOf()))}class ai extends Qo{}ai.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};ai.prototype.baseIconClass="fc-icon";ai.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};ai.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};ai.prototype.iconOverrideOption="buttonIcons";ai.prototype.iconOverrideCustomButtonOption="icon";ai.prototype.iconOverridePrefix="fc-icon-";function nL(n,e){let t={},s;for(s in n)pp(s,t,n,e);for(s in e)pp(s,t,n,e);return t}function pp(n,e,t,s){if(e[n])return e[n];let i=aL(n,e,t,s);return i&&(e[n]=i),i}function aL(n,e,t,s){let i=t[n],l=s[n],c=p=>i&&i[p]!==null?i[p]:l&&l[p]!==null?l[p]:null,u=c("component"),h=c("superType"),m=null;if(h){if(h===n)throw new Error("Can't have a custom view type that references itself");m=pp(h,e,t,s)}return!u&&m&&(u=m.component),u?{type:n,component:u,defaults:Object.assign(Object.assign({},m?m.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),l?l.rawOptions:{})}:null}function Kv(n){return Wi(n,iL)}function iL(n){let e=typeof n=="function"?{component:n}:n,{component:t}=e;return e.content?t=Jv(e):t&&!(t.prototype instanceof Lt)&&(t=Jv(Object.assign(Object.assign({},e),{content:t}))),{superType:e.type,component:t,rawOptions:e}}function Jv(n){return e=>ie(Xi.Consumer,null,t=>ie(va,{elTag:"div",elClasses:N1(t.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:t.options.nextDayThreshold}),generatorName:void 0,customGenerator:n.content,classNameGenerator:n.classNames,didMount:n.didMount,willUnmount:n.willUnmount}))}function rL(n,e,t,s){let i=Kv(n),l=Kv(e.views),c=nL(i,l);return Wi(c,u=>lL(u,l,e,t,s))}function lL(n,e,t,s,i){let l=n.overrides.duration||n.defaults.duration||s.duration||t.duration,c=null,u="",h="",m={};if(l&&(c=oL(l),c)){let x=cp(c);u=x.unit,x.value===1&&(h=u,m=e[u]?e[u].rawOptions:{})}let p=x=>{let v=x.buttonText||{},w=n.defaults.buttonTextKey;return w!=null&&v[w]!=null?v[w]:v[n.type]!=null?v[n.type]:v[h]!=null?v[h]:null},y=x=>{let v=x.buttonHints||{},w=n.defaults.buttonTextKey;return w!=null&&v[w]!=null?v[w]:v[n.type]!=null?v[n.type]:v[h]!=null?v[h]:null};return{type:n.type,component:n.component,duration:c,durationUnit:u,singleUnit:h,optionDefaults:n.defaults,optionOverrides:Object.assign(Object.assign({},m),n.overrides),buttonTextOverride:p(s)||p(t)||n.overrides.buttonText,buttonTextDefault:p(i)||n.defaults.buttonText||p(Ao)||n.type,buttonTitleOverride:y(s)||y(t)||n.overrides.buttonHint,buttonTitleDefault:y(i)||n.defaults.buttonHint||y(Ao)}}let ew={};function oL(n){let e=JSON.stringify(n),t=ew[e];return t===void 0&&(t=ct(n),ew[e]=t),t}function cL(n,e){switch(e.type){case"CHANGE_VIEW_TYPE":n=e.viewType}return n}function dL(n,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return n}}function uL(n,e,t){let s=n.initialDate;return s!=null?e.createMarker(s):t.getDateMarker()}function hL(n,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},n),{[e.optionName]:e.rawOptionValue});default:return n}}function fL(n,e,t,s){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return s.build(e.dateMarker||t);case"CHANGE_DATE":return s.build(e.dateMarker);case"PREV":if(i=s.buildPrev(n,t),i.isValid)return i;break;case"NEXT":if(i=s.buildNext(n,t),i.isValid)return i;break}return n}function mL(n,e,t){let s=e?e.activeRange:null;return cS({},wL(n,t),s,t)}function pL(n,e,t,s){let i=t?t.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return cS(n,e.sources,i,s);case"REMOVE_EVENT_SOURCE":return yL(n,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return t?dS(n,i,s):n;case"FETCH_EVENT_SOURCES":return Ag(n,e.sourceIds?b1(e.sourceIds):uS(n,s),i,e.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return vL(n,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return n}}function gL(n,e,t){let s=e?e.activeRange:null;return Ag(n,uS(n,t),s,!0,t)}function oS(n){for(let e in n)if(n[e].isFetching)return!0;return!1}function cS(n,e,t,s){let i={};for(let l of e)i[l.sourceId]=l;return t&&(i=dS(i,t,s)),Object.assign(Object.assign({},n),i)}function yL(n,e){return qi(n,t=>t.sourceId!==e)}function dS(n,e,t){return Ag(n,qi(n,s=>xL(s,e,t)),e,!1,t)}function xL(n,e,t){return hS(n,t)?!t.options.lazyFetching||!n.fetchRange||n.isFetching||e.start<n.fetchRange.start||e.end>n.fetchRange.end:!n.latestFetchId}function Ag(n,e,t,s,i){let l={};for(let c in n){let u=n[c];e[c]?l[c]=bL(u,t,s,i):l[c]=u}return l}function bL(n,e,t,s){let{options:i,calendarApi:l}=s,c=s.pluginHooks.eventSourceDefs[n.sourceDefId],u=Yi();return c.fetch({eventSource:n,range:e,isRefetch:t,context:s},h=>{let{rawEvents:m}=h;i.eventSourceSuccess&&(m=i.eventSourceSuccess.call(l,m,h.response)||m),n.success&&(m=n.success.call(l,m,h.response)||m),s.dispatch({type:"RECEIVE_EVENTS",sourceId:n.sourceId,fetchId:u,fetchRange:e,rawEvents:m})},h=>{let m=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(l,h),m=!0),n.failure&&(n.failure(h),m=!0),m||console.warn(h.message,h),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:n.sourceId,fetchId:u,fetchRange:e,error:h})}),Object.assign(Object.assign({},n),{isFetching:!0,latestFetchId:u})}function vL(n,e,t,s){let i=n[e];return i&&t===i.latestFetchId?Object.assign(Object.assign({},n),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:s})}):n}function uS(n,e){return qi(n,t=>hS(t,e))}function wL(n,e){let t=k1(e),s=[].concat(n.eventSources||[]),i=[];n.initialEvents&&s.unshift(n.initialEvents),n.events&&s.unshift(n.events);for(let l of s){let c=R1(l,e,t);c&&i.push(c)}return i}function hS(n,e){return!e.pluginHooks.eventSourceDefs[n.sourceDefId].ignoreRange}function AL(n,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return n}}function SL(n,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return n}}function NL(n,e){let t;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function EL(n,e){let t;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return t=e.state,{affectedEvents:t.affectedEvents,mutatedEvents:t.mutatedEvents,isEvent:t.isEvent};default:return n}}function jL(n,e,t,s,i){let l=n.headerToolbar?tw(n.headerToolbar,n,e,t,s,i):null,c=n.footerToolbar?tw(n.footerToolbar,n,e,t,s,i):null;return{header:l,footer:c}}function tw(n,e,t,s,i,l){let c={},u=[],h=!1;for(let m in n){let p=n[m],y=_L(p,e,t,s,i,l);c[m]=y.widgets,u.push(...y.viewsWithButtons),h=h||y.hasTitle}return{sectionWidgets:c,viewsWithButtons:u,hasTitle:h}}function _L(n,e,t,s,i,l){let c=e.direction==="rtl",u=e.customButtons||{},h=t.buttonText||{},m=e.buttonText||{},p=t.buttonHints||{},y=e.buttonHints||{},x=n?n.split(" "):[],v=[],w=!1;return{widgets:x.map(S=>S.split(",").map(N=>{if(N==="title")return w=!0,{buttonName:N};let j,C,R,D,O,B;if(j=u[N])R=F=>{j.click&&j.click.call(F.target,F,F.target)},(D=s.getCustomButtonIconClass(j))||(D=s.getIconClass(N,c))||(O=j.text),B=j.hint||j.text;else if(C=i[N]){v.push(N),R=()=>{l.changeView(N)},(O=C.buttonTextOverride)||(D=s.getIconClass(N,c))||(O=C.buttonTextDefault);let F=C.buttonTextOverride||C.buttonTextDefault;B=wo(C.buttonTitleOverride||C.buttonTitleDefault||e.viewHint,[F,N],F)}else if(l[N])if(R=()=>{l[N]()},(O=h[N])||(D=s.getIconClass(N,c))||(O=m[N]),N==="prevYear"||N==="nextYear"){let F=N==="prevYear"?"prev":"next";B=wo(p[F]||y[F],[m.year||"year","year"],m[N])}else B=F=>wo(p[N]||y[N],[m[F]||F,F],m[N]);return{buttonName:N,buttonClick:R,buttonIcon:D,buttonText:O,buttonHint:B}})),viewsWithButtons:v,hasTitle:w}}class CL{constructor(e,t,s){this.type=e,this.getCurrentData=t,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let TL={ignoreRange:!0,parseMeta(n){return Array.isArray(n.events)?n.events:null},fetch(n,e){e({rawEvents:n.eventSource.meta})}};const DL=ni({name:"array-event-source",eventSourceDefs:[TL]});let RL={parseMeta(n){return typeof n.events=="function"?n.events:null},fetch(n,e,t){const{dateEnv:s}=n.context,i=n.eventSource.meta;MM(i.bind(null,z1(n.range,s)),l=>e({rawEvents:l}),t)}};const kL=ni({name:"func-event-source",eventSourceDefs:[RL]}),ML={method:String,extraParams:ae,startParam:String,endParam:String,timeZoneParam:String};let LL={parseMeta(n){return n.url&&(n.format==="json"||!n.format)?{url:n.url,format:"json",method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams,startParam:n.startParam,endParam:n.endParam,timeZoneParam:n.timeZoneParam}:null},fetch(n,e,t){const{meta:s}=n.eventSource,i=IL(s,n.range,n.context);LM(s.method,s.url,i).then(([l,c])=>{e({rawEvents:l,response:c})},t)}};const OL=ni({name:"json-event-source",eventSourceRefiners:ML,eventSourceDefs:[LL]});function IL(n,e,t){let{dateEnv:s,options:i}=t,l,c,u,h,m={};return l=n.startParam,l==null&&(l=i.startParam),c=n.endParam,c==null&&(c=i.endParam),u=n.timeZoneParam,u==null&&(u=i.timeZoneParam),typeof n.extraParams=="function"?h=n.extraParams():h=n.extraParams||{},Object.assign(m,h),m[l]=s.formatIso(e.start),m[c]=s.formatIso(e.end),s.timeZone!=="local"&&(m[u]=s.timeZone),m}const PL={daysOfWeek:ae,startTime:ct,endTime:ct,duration:ct,startRecur:ae,endRecur:ae};let BL={parse(n,e){if(n.daysOfWeek||n.startTime||n.endTime||n.startRecur||n.endRecur){let t={daysOfWeek:n.daysOfWeek||null,startTime:n.startTime||null,endTime:n.endTime||null,startRecur:n.startRecur?e.createMarker(n.startRecur):null,endRecur:n.endRecur?e.createMarker(n.endRecur):null,dateEnv:e},s;return n.duration&&(s=n.duration),!s&&n.startTime&&n.endTime&&(s=VR(n.endTime,n.startTime)),{allDayGuess:!n.startTime&&!n.endTime,duration:s,typeData:t}}return null},expand(n,e,t){let s=Jr(e,{start:n.startRecur,end:n.endRecur});return s?zL(n.daysOfWeek,n.startTime,n.dateEnv,t,s):[]}};const HL=ni({name:"simple-recurring-event",recurringTypes:[BL],eventRefiners:PL});function zL(n,e,t,s,i){let l=n?b1(n):null,c=Ct(i.start),u=i.end,h=[];for(e&&(e.milliseconds<0?u=rs(u,1):e.milliseconds>=1e3*60*60*24&&(c=rs(c,-1)));c<u;){let m;(!l||l[c.getUTCDay()])&&(e?m=s.add(c,e):m=c,h.push(s.createMarker(t.toDate(m)))),c=rs(c,1)}return h}const FL=ni({name:"change-handler",optionChangeHandlers:{events(n,e){sw([n],e)},eventSources:sw}});function sw(n,e){let t=lg(e.getCurrentData().eventSources);if(t.length===1&&n.length===1&&Array.isArray(t[0]._raw)&&Array.isArray(n[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:t[0].sourceId,rawEvents:n[0]});return}let s=[];for(let i of n){let l=!1;for(let c=0;c<t.length;c+=1)if(t[c]._raw===i){t.splice(c,1),l=!0;break}l||s.push(i)}for(let i of t)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of s)e.calendarApi.addEventSource(i)}function UL(n,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},z1(n.activeRange,e.dateEnv)),{view:e.viewApi}))}function qL(n,e){let{emitter:t}=e;t.hasHandlers("eventsSet")&&t.trigger("eventsSet",Bi(n,e))}const VL=[DL,kL,OL,HL,FL,ni({name:"misc",isLoadingFuncs:[n=>oS(n.eventSources)],propSetHandlers:{dateProfile:UL,eventStore:qL}})];class $L{constructor(e,t){this.runTaskOption=e,this.drainedOption=t,this.queue=[],this.delayedRunner=new Jp(this.drain.bind(this))}request(e,t){this.queue.push(e),this.delayedRunner.request(t)}pause(e){this.delayedRunner.pause(e)}resume(e,t){this.delayedRunner.resume(e,t)}drain(){let{queue:e}=this;for(;e.length;){let t=[],s;for(;s=e.shift();)this.runTask(s),t.push(s);this.drained(t)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function GL(n,e,t){let s;return/^(year|month)$/.test(n.currentRangeUnit)?s=n.currentRange:s=n.activeRange,t.formatRange(s.start,s.end,is(e.titleFormat||YL(n)),{isEndExclusive:n.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function YL(n){let{currentRangeUnit:e}=n;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let t=Kd(n.currentRange.start,n.currentRange.end);return t!==null&&t>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class nw{constructor(){this.resetListeners=new Set}handleInput(e,t){const s=this.dateEnv;if(e!==s&&(typeof t=="function"?this.nowFn=t:s||(this.nowAnchorDate=e.toDate(t?e.createMarker(t):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,s))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class WL{constructor(e){this.computeCurrentViewData=lt(this._computeCurrentViewData),this.organizeRawLocales=lt(Q4),this.buildLocale=lt(rS),this.buildPluginHooks=eL(),this.buildDateEnv=lt(XL),this.buildTheme=lt(QL),this.parseToolbars=lt(jL),this.buildViewSpecs=lt(rL),this.buildDateProfileGenerator=Id(ZL),this.buildViewApi=lt(KL),this.buildViewUiProps=Id(tO),this.buildEventUiBySource=lt(JL,Cn),this.buildEventUiBases=lt(eO),this.parseContextBusinessHours=Id(sO),this.buildTitle=lt(GL),this.nowManager=new nw,this.emitter=new Du,this.actionRunner=new $L(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=x=>{this.actionRunner.request(x)},this.props=e,this.actionRunner.pause(),this.nowManager=new nw;let t={},s=this.computeOptionsData(e.optionOverrides,t,e.calendarApi),i=s.calendarOptions.initialView||s.pluginHooks.initialView,l=this.computeCurrentViewData(i,s,e.optionOverrides,t);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(l.options);let c={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},u=uL(s.calendarOptions,s.dateEnv,this.nowManager),h=l.dateProfileGenerator.build(u);Za(h.activeRange,u)||(u=h.currentRange.start);for(let x of s.pluginHooks.contextInit)x(c);let m=mL(s.calendarOptions,h,c),p={dynamicOptionOverrides:t,currentViewType:i,currentDate:u,dateProfile:h,businessHours:this.parseContextBusinessHours(c),eventSources:m,eventUiBases:{},eventStore:En(),renderableEventStore:En(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(c).selectionConfig},y=Object.assign(Object.assign({},c),p);for(let x of s.pluginHooks.reducers)Object.assign(p,x(null,null,y));Om(p,c)&&this.emitter.trigger("loading",!0),this.state=p,this.updateData(),this.actionRunner.resume()}resetOptions(e,t){let{props:s}=this;t===void 0?s.optionOverrides=e:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),e),this.optionsForRefining.push(...t)),(t===void 0||t.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:t,state:s,emitter:i}=this,l=hL(s.dynamicOptionOverrides,e),c=this.computeOptionsData(t.optionOverrides,l,t.calendarApi),u=cL(s.currentViewType,e),h=this.computeCurrentViewData(u,c,t.optionOverrides,l);t.calendarApi.currentDataManager=this,i.setThisContext(t.calendarApi),i.setOptions(h.options);let m={nowManager:this.nowManager,dateEnv:c.dateEnv,options:c.calendarOptions,pluginHooks:c.pluginHooks,calendarApi:t.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:p,dateProfile:y}=s;this.data&&this.data.dateProfileGenerator!==h.dateProfileGenerator&&(y=h.dateProfileGenerator.build(p)),p=dL(p,e),y=fL(y,e,p,h.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Za(y.currentRange,p))&&(p=y.currentRange.start);let x=pL(s.eventSources,e,y,m),v=iM(s.eventStore,e,x,y,m),A=oS(x)&&!h.options.progressiveEventRendering&&s.renderableEventStore||v,{eventUiSingleBase:S,selectionConfig:N}=this.buildViewUiProps(m),j=this.buildEventUiBySource(x),C=this.buildEventUiBases(A.defs,S,j),R={dynamicOptionOverrides:l,currentViewType:u,currentDate:p,dateProfile:y,eventSources:x,eventStore:v,renderableEventStore:A,selectionConfig:N,eventUiBases:C,businessHours:this.parseContextBusinessHours(m),dateSelection:AL(s.dateSelection,e),eventSelection:SL(s.eventSelection,e),eventDrag:NL(s.eventDrag,e),eventResize:EL(s.eventResize,e)},D=Object.assign(Object.assign({},m),R);for(let F of c.pluginHooks.reducers)Object.assign(R,F(s,e,D));let O=Om(s,m),B=Om(R,m);!O&&B?i.trigger("loading",!0):O&&!B&&i.trigger("loading",!1),this.state=R,t.onAction&&t.onAction(e)}updateData(){let{props:e,state:t}=this,s=this.data,i=this.computeOptionsData(e.optionOverrides,t.dynamicOptionOverrides,e.calendarApi),l=this.computeCurrentViewData(t.currentViewType,i,e.optionOverrides,t.dynamicOptionOverrides),c=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(t.dateProfile,l.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),l),t),u=i.pluginHooks.optionChangeHandlers,h=s&&s.calendarOptions,m=i.calendarOptions;if(h&&h!==m){h.timeZone!==m.timeZone&&(t.eventSources=c.eventSources=gL(c.eventSources,t.dateProfile,c),t.eventStore=c.eventStore=qv(c.eventStore,s.dateEnv,c.dateEnv),t.renderableEventStore=c.renderableEventStore=qv(c.renderableEventStore,s.dateEnv,c.dateEnv));for(let p in u)(this.optionsForHandling.indexOf(p)!==-1||h[p]!==m[p])&&u[p](m[p],c)}this.optionsForHandling=[],e.onData&&e.onData(c)}computeOptionsData(e,t,s){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&t===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:l,localeDefaults:c,availableLocaleData:u,extra:h}=this.processRawCalendarOptions(e,t);aw(h);let m=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,l,u,i.defaultRangeSeparator),p=this.buildViewSpecs(l.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,c),y=this.buildTheme(i,l),x=this.parseToolbars(i,this.stableOptionOverrides,y,p,s);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:l,dateEnv:m,viewSpecs:p,theme:y,toolbarConfig:x,localeDefaults:c,availableRawLocales:u.map}}processRawCalendarOptions(e,t){let{locales:s,locale:i}=_m([Ao,e,t]),l=this.organizeRawLocales(s),c=l.map,u=this.buildLocale(i||l.defaultCode,c).options,h=this.buildPluginHooks(e.plugins||[],VL),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Iv),Pv),Bv),h.listenerRefiners),h.optionRefiners),p={},y=_m([Ao,u,e,t]),x={},v=this.currentCalendarOptionsInput,w=this.currentCalendarOptionsRefined,A=!1;for(let S in y)this.optionsForRefining.indexOf(S)===-1&&(y[S]===v[S]||ji[S]&&S in v&&ji[S](v[S],y[S]))?x[S]=w[S]:m[S]?(x[S]=m[S](y[S]),A=!0):p[S]=v[S];return A&&(this.currentCalendarOptionsInput=y,this.currentCalendarOptionsRefined=x,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=t),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:h,availableLocaleData:l,localeDefaults:u,extra:p}}_computeCurrentViewData(e,t,s,i){let l=t.viewSpecs[e];if(!l)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:c,extra:u}=this.processRawViewOptions(l,t.pluginHooks,t.localeDefaults,s,i);aw(u),this.nowManager.handleInput(t.dateEnv,c.now);let h=this.buildDateProfileGenerator({dateProfileGeneratorClass:l.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:l.duration,durationUnit:l.durationUnit,usesMinMaxTime:l.optionDefaults.usesMinMaxTime,dateEnv:t.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:c.slotMinTime,slotMaxTime:c.slotMaxTime,showNonCurrentDates:c.showNonCurrentDates,dayCount:c.dayCount,dateAlignment:c.dateAlignment,dateIncrement:c.dateIncrement,hiddenDays:c.hiddenDays,weekends:c.weekends,validRangeInput:c.validRange,visibleRangeInput:c.visibleRange,fixedWeekCount:c.fixedWeekCount}),m=this.buildViewApi(e,this.getCurrentData,t.dateEnv);return{viewSpec:l,options:c,dateProfileGenerator:h,viewApi:m}}processRawViewOptions(e,t,s,i,l){let c=_m([Ao,e.optionDefaults,s,i,e.optionOverrides,l]),u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Iv),Pv),Bv),Ak),t.listenerRefiners),t.optionRefiners),h={},m=this.currentViewOptionsInput,p=this.currentViewOptionsRefined,y=!1,x={};for(let v in c)c[v]===m[v]||ji[v]&&ji[v](c[v],m[v])?h[v]=p[v]:(c[v]===this.currentCalendarOptionsInput[v]||ji[v]&&ji[v](c[v],this.currentCalendarOptionsInput[v])?v in this.currentCalendarOptionsRefined&&(h[v]=this.currentCalendarOptionsRefined[v]):u[v]?h[v]=u[v](c[v]):x[v]=c[v],y=!0);return y&&(this.currentViewOptionsInput=c,this.currentViewOptionsRefined=h),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:x}}}function XL(n,e,t,s,i,l,c,u){let h=rS(e||c.defaultCode,c.map);return new Mk({calendarSystem:"gregory",timeZone:n,namedTimeZoneImpl:l.namedTimeZonedImpl,locale:h,weekNumberCalculation:t,firstDay:s,weekText:i,cmdFormatter:l.cmdFormatter,defaultSeparator:u})}function QL(n,e){let t=e.themeClasses[n.themeSystem]||ai;return new t(n)}function ZL(n){let e=n.dateProfileGeneratorClass||_1;return new e(n)}function KL(n,e,t){return new CL(n,e,t)}function JL(n){return Wi(n,e=>e.ui)}function eO(n,e,t){let s={"":e};for(let i in n){let l=n[i];l.sourceId&&t[l.sourceId]&&(s[i]=t[l.sourceId])}return s}function tO(n){let{options:e}=n;return{eventUiSingleBase:au({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},n),selectionConfig:au({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},n)}}function Om(n,e){for(let t of e.pluginHooks.isLoadingFuncs)if(t(n))return!0;return!1}function sO(n){return mM(n.options.businessHours,n)}function aw(n,e){for(let t in n)console.warn(`Unknown option '${t}'`)}class nO extends Lt{render(){let e=this.props.widgetGroups.map(t=>this.renderWidgetGroup(t));return ie("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:t}=this,{theme:s}=this.context,i=[],l=!0;for(let c of e){let{buttonName:u,buttonClick:h,buttonText:m,buttonIcon:p,buttonHint:y}=c;if(u==="title")l=!1,i.push(ie("h2",{className:"fc-toolbar-title",id:t.titleId},t.title));else{let x=u===t.activeButton,v=!t.isTodayEnabled&&u==="today"||!t.isPrevEnabled&&u==="prev"||!t.isNextEnabled&&u==="next",w=[`fc-${u}-button`,s.getClass("button")];x&&w.push(s.getClass("buttonActive")),i.push(ie("button",{type:"button",title:typeof y=="function"?y(t.navUnit):y,disabled:v,"aria-pressed":x,className:w.join(" "),onClick:h},m||(p?ie("span",{className:p,role:"img"}):"")))}}if(i.length>1){let c=l&&s.getClass("buttonGroup")||"";return ie("div",{className:c},...i)}return i[0]}}class iw extends Lt{render(){let{model:e,extraClassName:t}=this.props,s=!1,i,l,c=e.sectionWidgets,u=c.center;return c.left?(s=!0,i=c.left):i=c.start,c.right?(s=!0,l=c.right):l=c.end,ie("div",{className:[t||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",u||[]),this.renderSection("end",l||[]))}renderSection(e,t){let{props:s}=this;return ie(nO,{key:e,widgetGroups:t,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}}class aO extends Lt{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Xn(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:t}=this,{aspectRatio:s}=e,i=["fc-view-harness",s||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],l="",c="";return s?t.availableWidth!==null?l=t.availableWidth/s:c=`${1/s*100}%`:l=e.height||"",ie("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:l,paddingBottom:c}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class iO extends ol{constructor(e){super(e),this.handleSegClick=(t,s)=>{let{component:i}=this,{context:l}=i,c=el(s);if(c&&i.isValidSegDownEl(t.target)){let u=bs(t.target,".fc-event-forced-url"),h=u?u.querySelector("a[href]").href:"";l.emitter.trigger("eventClick",{el:s,event:new Tt(i.context,c.eventRange.def,c.eventRange.instance),jsEvent:t,view:l.viewApi}),h&&!t.defaultPrevented&&(window.location.href=h)}},this.destroy=p1(e.el,"click",".fc-event",this.handleSegClick)}}class rO extends ol{constructor(e){super(e),this.handleEventElRemove=t=>{t===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(t,s)=>{el(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",t,s))},this.handleSegLeave=(t,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",t,s))},this.removeHoverListeners=TR(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,t,s){let{component:i}=this,{context:l}=i,c=el(s);(!t||i.isValidSegDownEl(t.target))&&l.emitter.trigger(e,{el:s,event:new Tt(l,c.eventRange.def,c.eventRange.instance),jsEvent:t,view:l.viewApi})}}class lO extends Qi{constructor(){super(...arguments),this.buildViewContext=lt(Ik),this.buildViewPropTransformers=lt(cO),this.buildToolbarProps=lt(oO),this.headerRef=xa(),this.footerRef=xa(),this.interactionsStore={},this.state={viewLabelId:ju()},this.registerInteractiveComponent=(e,t)=>{let s=PM(e,t),c=[iO,rO].concat(this.props.pluginHooks.componentInteractions).map(u=>new u(s));this.interactionsStore[e.uid]=c,fp[e.uid]=s},this.unregisterInteractiveComponent=e=>{let t=this.interactionsStore[e.uid];if(t){for(let s of t)s.destroy();delete this.interactionsStore[e.uid]}delete fp[e.uid]},this.resizeRunner=new Jp(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:t}=this.props;t.handleWindowResize&&e.target===window&&this.resizeRunner.request(t.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:t,options:s}=e,i=!1,l="",c;e.isHeightAuto||e.forPrint?l="":s.height!=null?i=!0:s.contentHeight!=null?l=s.contentHeight:c=Math.max(s.aspectRatio,.5);let u=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),h=t.header&&t.header.hasTitle?this.state.viewLabelId:void 0;return ie(Xi.Provider,{value:u},ie(Ru,{unit:"day"},m=>{let p=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,m,e.viewTitle);return ie(Pt,null,t.header&&ie(iw,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:t.header,titleId:h},p)),ie(aO,{liquid:i,height:l,aspectRatio:c,labeledById:h},this.renderView(e),this.buildAppendContent()),t.footer&&ie(iw,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:t.footer,titleId:""},p)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(s=>new s(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:t}=e.pluginHooks;for(let s in t)t[s](e[s],e)}componentDidUpdate(e){let{props:t}=this,{propSetHandlers:s}=t.pluginHooks;for(let i in s)t[i]!==e[i]&&s[i](t[i],t)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,t=e.pluginHooks.viewContainerAppends.map(s=>s(e));return ie(Pt,{},...t)}renderView(e){let{pluginHooks:t}=e,{viewSpec:s}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},l=this.buildViewPropTransformers(t.viewPropsTransformers);for(let u of l)Object.assign(i,u.transform(i,e));let c=s.component;return ie(c,Object.assign({},i))}}function oO(n,e,t,s,i,l){let c=t.build(i,void 0,!1),u=t.buildPrev(e,s,!1),h=t.buildNext(e,s,!1);return{title:l,activeButton:n.type,navUnit:n.singleUnit,isTodayEnabled:c.isValid&&!Za(e.currentRange,i),isPrevEnabled:u.isValid,isNextEnabled:h.isValid}}function cO(n){return n.map(e=>new e)}class dO extends HM{constructor(e,t={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;su(()=>{ko(ie(IM,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(i,l,c,u)=>(this.setClassNames(i),this.setHeight(l),ie(S1.Provider,{value:this.customContentRenderId},ie(lO,Object.assign({isHeightAuto:c,forPrint:u},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,ko(null,this.el),this.setClassNames([]),this.setHeight(""))},vR(e),this.el=e,this.renderRunner=new Jp(this.handleRenderRequest),new WL({optionOverrides:t,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){su(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,t){this.currentDataManager.resetOptions(e,t)}setClassNames(e){if(!ei(e,this.currentClassNames)){let{classList:t}=this.el;for(let s of this.currentClassNames)t.remove(s);for(let s of e)t.add(s);this.currentClassNames=e}}setHeight(e){f1(this.el,"height",e)}}const uO=parseInt(String(Eo.version).split(".")[0]),hO=uO<18;class fS extends _.Component{constructor(){super(...arguments),this.elRef=_.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const t of this.state.customRenderingMap.values())e.push(Eo.createElement(fO,{key:t.id,customRendering:t}));return Eo.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new W4;this.handleCustomRendering=e.handle.bind(e),this.calendar=new dO(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Fm.flushSync(()=>{})});let t;e.subscribe(s=>{const i=Date.now(),l=!t;(hO||l||this.isUpdating||this.isUnmounting||i-t<100?mS:Fm.flushSync)(()=>{this.setState({customRenderingMap:s},()=>{t=i,l?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}fS.act=mS;class fO extends _.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:t}=e,s=typeof t=="function"?t(e.renderProps):t;return Fm.createPortal(s,e.containerEl)}}function mS(n){n()}class mO extends Zi{constructor(){super(...arguments),this.headerElRef=xa()}renderSimpleLayout(e,t){let{props:s,context:i}=this,l=[],c=Qv(i.options);return e&&l.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),l.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),ie(Hv,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},ie(eS,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:l}))}renderHScrollLayout(e,t,s,i){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{props:c,context:u}=this,h=!c.forPrint&&Qv(u.options),m=!c.forPrint&&T4(u.options),p=[];return e&&p.push({type:"header",key:"header",isSticky:h,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),p.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),m&&p.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:C4}]}),ie(Hv,{elClasses:["fc-daygrid"],viewSpec:u.viewSpec},ie(l,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:c.forPrint,colGroups:[{cols:[{span:s,minWidth:i}]}],sections:p}))}}function Bd(n,e){let t=[];for(let s=0;s<e;s+=1)t[s]=[];for(let s of n)t[s.row].push(s);return t}function Nd(n,e){let t=[];for(let s=0;s<e;s+=1)t[s]=[];for(let s of n)t[s.firstCol].push(s);return t}function rw(n,e){let t=[];if(n){for(let s=0;s<e;s+=1)t[s]={affectedInstances:n.affectedInstances,isEvent:n.isEvent,segs:[]};for(let s of n.segs)t[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)t[s]=null;return t}const pS=is({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function gS(n){let{display:e}=n.eventRange.ui;return e==="list-item"||e==="auto"&&!n.eventRange.def.allDay&&n.firstCol===n.lastCol&&n.isStart&&n.isEnd}class yS extends Lt{render(){let{props:e}=this;return ie(tS,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:pS,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class xS extends Lt{render(){let{props:e,context:t}=this,{options:s}=t,{seg:i}=e,l=s.eventTimeFormat||pS,c=B1(i,l,t,!0,e.defaultDisplayEventEnd);return ie(wg,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:H1(e.seg,t),defaultGenerator:pO,timeText:c,isResizing:!1,isDateSelecting:!1}))}}function pO(n){return ie(Pt,null,ie("div",{className:"fc-daygrid-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}}),n.timeText&&ie("div",{className:"fc-event-time"},n.timeText),ie("div",{className:"fc-event-title"},n.event.title||ie(Pt,null,"")))}class gO extends Lt{constructor(){super(...arguments),this.compileSegs=lt(yO)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return ie(F4,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return ie(Pt,null,t.map(l=>{let c=l.eventRange.instance.instanceId;return ie("div",{className:"fc-daygrid-event-harness",key:c,style:{visibility:i[c]?"hidden":""}},gS(l)?ie(xS,Object.assign({seg:l,isDragging:!1,isSelected:c===e.eventSelection,defaultDisplayEventEnd:!1},So(l,e.todayRange))):ie(yS,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:c===e.eventSelection,defaultDisplayEventEnd:!1},So(l,e.todayRange))))}))}})}}function yO(n){let e=[],t=[];for(let s of n)e.push(s.seg),s.isVisible||t.push(s.seg);return{allSegs:e,invisibleSegs:t}}const xO=is({week:"narrow"});class bO extends Zi{constructor(){super(...arguments),this.rootElRef=xa(),this.state={dayNumberId:ju()},this.handleRootEl=e=>{Xn(this.rootElRef,e),Xn(this.props.elRef,e)}}render(){let{context:e,props:t,state:s,rootElRef:i}=this,{options:l,dateEnv:c}=e,{date:u,dateProfile:h}=t;const m=t.showDayNumber&&wO(u,h.currentRange,c);return ie(sS,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:vO,date:u,dateProfile:h,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:m,extraRenderProps:t.extraRenderProps},(p,y)=>ie("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&ie(P4,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:mp(e,u,"week"),date:u,defaultFormat:xO}),!y.isDisabled&&(t.showDayNumber||nS(l)||t.forceDayTop)?ie("div",{className:"fc-daygrid-day-top"},ie(p,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},mp(e,u)),{id:s.dayNumberId})})):t.showDayNumber?ie("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},ie("a",{className:"fc-daygrid-day-number"},"")):void 0,ie("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,ie("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},ie(gO,{allDayDate:u,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:i,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),ie("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function vO(n){return n.dayNumberText||ie(Pt,null,"")}function wO(n,e,t){const{start:s,end:i}=e,l=ti(i,-1),c=t.getYear(s),u=t.getMonth(s),h=t.getYear(l),m=t.getMonth(l);return!(c===h&&u===m)&&(n.valueOf()===s.valueOf()||t.getDay(n)===1&&n.valueOf()<i.valueOf())}function bS(n){return n.eventRange.instance.instanceId+":"+n.firstCol}function vS(n){return bS(n)+":"+n.lastCol}function AO(n,e,t,s,i,l,c){let u=new EO(N=>{let j=n[N.index].eventRange.instance.instanceId+":"+N.span.start+":"+(N.span.end-1);return i[j]||1});u.allowReslicing=!0,u.strictOrder=s,e===!0||t===!0?(u.maxCoord=l,u.hiddenConsumes=!0):typeof e=="number"?u.maxStackCnt=e:typeof t=="number"&&(u.maxStackCnt=t,u.hiddenConsumes=!0);let h=[],m=[];for(let N=0;N<n.length;N+=1){let j=n[N],C=vS(j);i[C]!=null?h.push({index:N,span:{start:j.firstCol,end:j.lastCol+1}}):m.push(j)}let p=u.addSegs(h),y=u.toRects(),{singleColPlacements:x,multiColPlacements:v,leftoverMargins:w}=SO(y,n,c),A=[],S=[];for(let N of m){v[N.firstCol].push({seg:N,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let j=N.firstCol;j<=N.lastCol;j+=1)x[j].push({seg:Xr(N,j,j+1,c),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let N=0;N<c.length;N+=1)A.push(0);for(let N of p){let j=n[N.index],C=N.span;v[C.start].push({seg:Xr(j,C.start,C.end,c),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=C.start;R<C.end;R+=1)A[R]+=1,x[R].push({seg:Xr(j,R,R+1,c),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let N=0;N<c.length;N+=1)S.push(w[N]);return{singleColPlacements:x,multiColPlacements:v,moreCnts:A,moreMarginTops:S}}function SO(n,e,t){let s=NO(n,t.length),i=[],l=[],c=[];for(let u=0;u<t.length;u+=1){let h=s[u],m=[],p=0,y=0;for(let v of h){let w=e[v.index];m.push({seg:Xr(w,u,u+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:v.levelCoord-p}),p=v.levelCoord+v.thickness}let x=[];p=0,y=0;for(let v of h){let w=e[v.index],A=v.span.end-v.span.start>1,S=v.span.start===u;y+=v.levelCoord-p,p=v.levelCoord+v.thickness,A?(y+=v.thickness,S&&x.push({seg:Xr(w,v.span.start,v.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:v.levelCoord,marginTop:0})):S&&(x.push({seg:Xr(w,v.span.start,v.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:v.levelCoord,marginTop:y}),y=0)}i.push(m),l.push(x),c.push(y)}return{singleColPlacements:i,multiColPlacements:l,leftoverMargins:c}}function NO(n,e){let t=[];for(let s=0;s<e;s+=1)t.push([]);for(let s of n)for(let i=s.span.start;i<s.span.end;i+=1)t[i].push(s);return t}function Xr(n,e,t,s){if(n.firstCol===e&&n.lastCol===t-1)return n;let i=n.eventRange,l=i.range,c=Jr(l,{start:s[e].date,end:rs(s[t-1].date,1)});return Object.assign(Object.assign({},n),{firstCol:e,lastCol:t-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:c},isStart:n.isStart&&c.start.valueOf()===l.start.valueOf(),isEnd:n.isEnd&&c.end.valueOf()===l.end.valueOf()})}class EO extends t4{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:s}=this,i=l=>!this.forceHidden[No(l)];for(let l=0;l<s.length;l+=1)s[l]=s[l].filter(i);return t}handleInvalidInsertion(e,t,s){const{entriesByLevel:i,forceHidden:l}=this,{touchingEntry:c,touchingLevel:u,touchingLateral:h}=e;if(this.hiddenConsumes&&c){const m=No(c);if(!l[m])if(this.allowReslicing){const p=Object.assign(Object.assign({},c),{span:Y1(c.span,t.span)}),y=No(p);l[y]=!0,i[u][h]=p,s.push(p),this.splitEntry(c,t,s)}else l[m]=!0,s.push(c)}super.handleInvalidInsertion(e,t,s)}}class wS extends Zi{constructor(){super(...arguments),this.cellElRefs=new ki,this.frameElRefs=new ki,this.fgElRefs=new ki,this.segHarnessRefs=new ki,this.rootElRef=xa(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:s}=this,{options:i}=s,l=e.cells.length,c=Nd(e.businessHourSegs,l),u=Nd(e.bgEventSegs,l),h=Nd(this.getHighlightSegs(),l),m=Nd(this.getMirrorSegs(),l),{singleColPlacements:p,multiColPlacements:y,moreCnts:x,moreMarginTops:v}=AO(bM(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,t.segHeights,t.maxContentHeight,e.cells),w=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return ie("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((A,S)=>{let N=this.renderFgSegs(S,e.forPrint?p[S]:y[S],e.todayRange,w),j=this.renderFgSegs(S,jO(m[S],y),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return ie(bO,{key:A.key,elRef:this.cellElRefs.createRef(A.key),innerElRef:this.frameElRefs.createRef(A.key),dateProfile:e.dateProfile,date:A.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&S===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:A.extraRenderProps,extraDataAttrs:A.extraDataAttrs,extraClassNames:A.extraClassNames,extraDateSpan:A.extraDateSpan,moreCnt:x[S],moreMarginTop:v[S],singlePlacements:p[S],fgContentElRef:this.fgElRefs.createRef(A.key),fgContent:ie(Pt,null,ie(Pt,null,N),ie(Pt,null,j)),bgContent:ie(Pt,null,this.renderFillSegs(h[S],"highlight"),this.renderFillSegs(c[S],"non-business"),this.renderFillSegs(u[S],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let s=this.props;this.updateSizing(!Cn(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,s,i,l,c,u){let{context:h}=this,{eventSelection:m}=this.props,{framePositions:p}=this.state,y=this.props.cells.length===1,x=l||c||u,v=[];if(p)for(let w of t){let{seg:A}=w,{instanceId:S}=A.eventRange.instance,N=w.isVisible&&!i[S],j=w.isAbsolute,C="",R="";j&&(h.isRtl?(R=0,C=p.lefts[A.lastCol]-p.lefts[A.firstCol]):(C=0,R=p.rights[A.firstCol]-p.rights[A.lastCol])),v.push(ie("div",{className:"fc-daygrid-event-harness"+(j?" fc-daygrid-event-harness-abs":""),key:bS(A),ref:x?null:this.segHarnessRefs.createRef(vS(A)),style:{visibility:N?"":"hidden",marginTop:j?"":w.marginTop,top:j?w.absoluteTop:"",left:C,right:R}},gS(A)?ie(xS,Object.assign({seg:A,isDragging:l,isSelected:S===m,defaultDisplayEventEnd:y},So(A,s))):ie(yS,Object.assign({seg:A,isDragging:l,isResizing:c,isDateSelecting:u,isSelected:S===m,defaultDisplayEventEnd:y},So(A,s)))))}return v}renderFillSegs(e,t){let{isRtl:s}=this.context,{todayRange:i}=this.props,{framePositions:l}=this.state,c=[];if(l)for(let u of e){let h=s?{right:0,left:l.lefts[u.lastCol]-l.lefts[u.firstCol]}:{left:0,right:l.rights[u.firstCol]-l.rights[u.lastCol]};c.push(ie("div",{key:EM(u.eventRange),className:"fc-daygrid-bg-harness",style:h},t==="bg-event"?ie(L4,Object.assign({seg:u},So(u,i))):I4(t)))}return ie(Pt,{},...c)}updateSizing(e){let{props:t,state:s,frameElRefs:i}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let h=t.cells.map(m=>i.currentMap[m.key]);if(h.length){let m=this.rootElRef.current,p=new ru(m,h,!0,!1);(!s.framePositions||!s.framePositions.similarTo(p))&&this.setState({framePositions:new ru(m,h,!0,!1)})}}const l=this.state.segHeights,c=this.querySegHeights(),u=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},l),c),maxContentHeight:u?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let s in e){let i=Math.round(e[s].getBoundingClientRect().height);t[s]=Math.max(t[s]||0,i)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}wS.addStateEquality({segHeights:Cn});function jO(n,e){if(!n.length)return[];let t=_O(e);return n.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:t[s.eventRange.instance.instanceId],marginTop:0}))}function _O(n){let e={};for(let t of n)for(let s of t)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class CO extends Zi{constructor(){super(...arguments),this.splitBusinessHourSegs=lt(Bd),this.splitBgEventSegs=lt(TO),this.splitFgEventSegs=lt(Bd),this.splitDateSelectionSegs=lt(Bd),this.splitEventDrag=lt(rw),this.splitEventResize=lt(rw),this.rowRefs=new ki}render(){let{props:e,context:t}=this,s=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,s),l=this.splitBgEventSegs(e.bgEventSegs,s),c=this.splitFgEventSegs(e.fgEventSegs,s),u=this.splitDateSelectionSegs(e.dateSelectionSegs,s),h=this.splitEventDrag(e.eventDrag,s),m=this.splitEventResize(e.eventResize,s),p=s>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return ie(Ru,{unit:"day"},(y,x)=>ie(Pt,null,e.cells.map((v,w)=>ie(wS,{ref:this.rowRefs.createRef(w),key:v.length?v[0].date.toISOString():w,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:x,dateProfile:e.dateProfile,cells:v,renderIntro:e.renderRowIntro,businessHourSegs:i[w],eventSelection:e.eventSelection,bgEventSegs:l[w],fgEventSegs:c[w],dateSelectionSegs:u[w],eventDrag:h[w],eventResize:m[w],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:p,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],t=e?e.closest(".fc-daygrid-body"):null;t&&(this.rootEl=t,this.context.registerInteractiveComponent(this,{el:t,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ru(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new ru(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:s,rowPositions:i}=this,l=s.leftToIndex(e),c=i.topToIndex(t);if(c!=null&&l!=null){let u=this.props.cells[c][l];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(c,l),allDay:!0},u.extraDateSpan),dayEl:this.getCellEl(c,l),rect:{left:s.lefts[l],right:s.rights[l],top:i.tops[c],bottom:i.bottoms[c]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let s=this.props.cells[e][t].date,i=rs(s,1);return{start:s,end:i}}}function TO(n,e){return Bd(n.filter(DO),e)}function DO(n){return n.eventRange.def.allDay}class RO extends Zi{constructor(){super(...arguments),this.elRef=xa(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:s,expandRows:i}=e,l=s===!0||t===!0;l&&!i&&(l=!1,t=null,s=null);let c=["fc-daygrid-body",l?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return ie("div",{ref:this.elRef,className:c.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},ie("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,ie("tbody",{role:"presentation"},ie(CO,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=kO(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),s=t.closest(".fc-scroller"),i=e.getBoundingClientRect().top-t.getBoundingClientRect().top;s.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function kO(n,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=n.querySelector(`[data-date="${rk(e.currentDate)}-01"]`)),t||(t=n.querySelector(`[data-date="${ng(e.currentDate)}"]`)),t}class MO extends u4{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class LO extends Zi{constructor(){super(...arguments),this.slicer=new MO,this.tableRef=xa()}render(){let{props:e,context:t}=this;return ie(RO,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class OO extends mO{constructor(){super(...arguments),this.buildDayTableModel=lt(IO),this.headerRef=xa(),this.tableRef=xa()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:s}=this,i=this.buildDayTableModel(s.dateProfile,t),l=e.dayHeaders&&ie(l4,{ref:this.headerRef,dateProfile:s.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),c=u=>ie(LO,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:i,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:u.tableColGroupNode,tableMinWidth:u.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:u.clientWidth,clientHeight:u.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(l,c,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(l,c)}}function IO(n,e){let t=new c4(n.renderRange,e);return new d4(t,/year|month|week/.test(n.currentRangeUnit))}class PO extends _1{buildRenderRange(e,t,s){let i=super.buildRenderRange(e,t,s),{props:l}=this;return BO({currentRange:i,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:l.fixedWeekCount,dateEnv:l.dateEnv})}}function BO(n){let{dateEnv:e,currentRange:t}=n,{start:s,end:i}=t,l;if(n.snapToWeek&&(s=e.startOfWeek(s),l=e.startOfWeek(i),l.valueOf()!==i.valueOf()&&(i=Rv(l,1))),n.fixedWeekCount){let c=e.startOfWeek(e.startOfMonth(rs(t.end,-1))),u=Math.ceil(WR(c,i));i=Rv(i,6-u)}return{start:s,end:i}}var HO=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';d1(HO);var zO=ni({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:OO,dateProfileGeneratorClass:PO},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});vg.touchMouseIgnoreWait=500;let gp=0,lu=0,yp=!1;class AS{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=t=>{if(!this.shouldIgnoreMouse()&&FO(t)&&this.tryStart(t)){let s=this.createEventFromMouse(t,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=t=>{let s=this.createEventFromMouse(t);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=t=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(t)),this.cleanup()},this.handleTouchStart=t=>{if(this.tryStart(t)){this.isTouchDragging=!0;let s=this.createEventFromTouch(t,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let i=t.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=t=>{let s=this.createEventFromTouch(t);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=t=>{if(this.isDragging){let s=t.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(t)),this.cleanup(),this.isTouchDragging=!1,UO()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=t=>{if(!this.shouldIgnoreMove){let s=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:t,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:i,deltaX:s-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new Du,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),qO()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),VO()}tryStart(e){let t=this.querySubjectEl(e),s=e.target;return t&&(!this.handleSelector||bs(s,this.handleSelector))?(this.subjectEl=t,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){yp=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?bs(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return gp||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(yp=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,t){let s=0,i=0;return t?(this.origPageX=e.pageX,this.origPageY=e.pageY):(s=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:s,deltaY:i}}createEventFromTouch(e,t){let s=e.touches,i,l,c=0,u=0;return s&&s.length?(i=s[0].pageX,l=s[0].pageY):(i=e.pageX,l=e.pageY),t?(this.origPageX=i,this.origPageY=l):(c=i-this.origPageX,u=l-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:l,deltaX:c,deltaY:u}}}function FO(n){return n.button===0&&!n.ctrlKey}function UO(){gp+=1,setTimeout(()=>{gp-=1},vg.touchMouseIgnoreWait)}function qO(){lu+=1,lu===1&&window.addEventListener("touchmove",SS,{passive:!1})}function VO(){lu-=1,lu||window.removeEventListener("touchmove",SS,{passive:!1})}function SS(n){yp&&n.preventDefault()}class $O{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,t,s){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=t-window.scrollX,this.origScreenY=s-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,t){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=t-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,t){let s=()=>{this.cleanup(),t()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(e,t){let s=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();s.style.transition="top "+t+"ms,left "+t+"ms",vo(s,{left:i.left,top:i.top}),DR(s,()=>{s.style.transition="",e()})}cleanup(){this.mirrorEl&&(eg(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&vo(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,t=this.mirrorEl;return t||(t=this.mirrorEl=this.sourceEl.cloneNode(!0),t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.classList.add("fc-event-dragging"),vo(t,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(t)),t}}class NS extends bg{constructor(e,t){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=t,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class ES extends NS{constructor(e,t){super(new JM(e),t)}getEventTarget(){return this.scrollController.el}computeClientRect(){return ZM(this.scrollController.el)}}class GO extends NS{constructor(e){super(new e4,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const lw=typeof performance=="function"?performance.now:Date.now;class YO{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let t=lw();this.handleSide(e,(t-this.msSinceRequest)/1e3),this.requestAnimation(t)}else this.isAnimating=!1}}}start(e,t,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,t))}handleMove(e,t){if(this.isEnabled){let s=e-window.scrollX,i=t-window.scrollY,l=this.pointerScreenY===null?0:i-this.pointerScreenY,c=this.pointerScreenX===null?0:s-this.pointerScreenX;l<0?this.everMovedUp=!0:l>0&&(this.everMovedDown=!0),c<0?this.everMovedLeft=!0:c>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(lw()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,t){let{scrollCache:s}=e,{edgeThreshold:i}=this,l=i-e.distance,c=l*l/(i*i)*this.maxVelocity*t,u=1;switch(e.name){case"left":u=-1;case"right":s.setScrollLeft(s.getScrollLeft()+c*u);break;case"top":u=-1;case"bottom":s.setScrollTop(s.getScrollTop()+c*u);break}}computeBestEdge(e,t){let{edgeThreshold:s}=this,i=null,l=this.scrollCaches||[];for(let c of l){let u=c.clientRect,h=e-u.left,m=u.right-e,p=t-u.top,y=u.bottom-t;h>=0&&m>=0&&p>=0&&y>=0&&(p<=s&&this.everMovedUp&&c.canScrollUp()&&(!i||i.distance>p)&&(i={scrollCache:c,name:"top",distance:p}),y<=s&&this.everMovedDown&&c.canScrollDown()&&(!i||i.distance>y)&&(i={scrollCache:c,name:"bottom",distance:y}),h<=s&&this.everMovedLeft&&c.canScrollLeft()&&(!i||i.distance>h)&&(i={scrollCache:c,name:"left",distance:h}),m<=s&&this.everMovedRight&&c.canScrollRight()&&(!i||i.distance>m)&&(i={scrollCache:c,name:"right",distance:m}))}return i}buildCaches(e){return this.queryScrollEls(e).map(t=>t===window?new GO(!1):new ES(t,!1))}queryScrollEls(e){let t=[];for(let s of this.scrollQuery)typeof s=="object"?t.push(s):t.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(s)));return t}}class Zo extends s4{constructor(e,t){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,RR(document.body),MR(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let l=this.minDistance,c,{deltaX:u,deltaY:h}=i;c=u*u+h*h,c>=l*l&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,kR(document.body),LR(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new AS(e);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),t&&(s.selector=t),this.mirror=new $O,this.autoScroller=new YO}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class WO{constructor(e){this.el=e,this.origRect=xg(e),this.scrollCaches=G1(e).map(t=>new ES(t,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let t of this.scrollCaches)e+=t.origScrollLeft-t.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let t of this.scrollCaches)e+=t.origScrollTop-t.getScrollTop();return e}isWithinClipping(e,t){let s={left:e,top:t};for(let i of this.scrollCaches)if(!XO(i.getEventTarget())&&!zM(s,i.clientRect))return!1;return!0}}function XO(n){let e=n.tagName;return e==="HTML"||e==="BODY"}class ku{constructor(e,t){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):i.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=t,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Du}processFirstCoord(e){let t={left:e.pageX,top:e.pageY},s=t,i=e.subjectEl,l;i instanceof HTMLElement&&(l=xg(i),s=FM(s,l));let c=this.initialHit=this.queryHitForOffset(s.left,s.top);if(c){if(this.useSubjectCenter&&l){let u=q1(l,c.rect);u&&(s=UM(u))}this.coordAdjust=qM(s,t)}else this.coordAdjust={left:0,top:0}}handleMove(e,t){let s=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(t||!Mu(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,e))}prepareHits(){this.offsetTrackers=Wi(this.droppableStore,e=>(e.component.prepareHits(),new WO(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let t in e)e[t].destroy();this.offsetTrackers={}}queryHitForOffset(e,t){let{droppableStore:s,offsetTrackers:i}=this,l=null;for(let c in s){let u=s[c].component,h=i[c];if(h&&h.isWithinClipping(e,t)){let m=h.computeLeft(),p=h.computeTop(),y=e-m,x=t-p,{origRect:v}=h,w=v.right-v.left,A=v.bottom-v.top;if(y>=0&&y<w&&x>=0&&x<A){let S=u.queryHit(y,x,w,A);S&&Cu(S.dateProfile.activeRange,S.dateSpan.range)&&(this.disablePointCheck||h.el.contains(h.el.getRootNode().elementFromPoint(y+m-window.scrollX,x+p-window.scrollY)))&&(!l||S.layer>l.layer)&&(S.componentId=c,S.context=u.context,S.rect.left+=m,S.rect.right+=m,S.rect.top+=p,S.rect.bottom+=p,l=S)}}}return l}}function Mu(n,e){return!n&&!e?!0:!!n!=!!e?!1:TM(n.dateSpan,e.dateSpan)}function jS(n,e){let t={};for(let s of e.pluginHooks.datePointTransforms)Object.assign(t,s(n,e));return Object.assign(t,QO(n,e.dateEnv)),t}function QO(n,e){return{date:e.toDate(n.range.start),dateStr:e.formatIso(n.range.start,{omitTime:n.allDay}),allDay:n.allDay}}class ZO extends ol{constructor(e){super(e),this.handlePointerDown=s=>{let{dragging:i}=this,l=s.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(l))},this.handleDragEnd=s=>{let{component:i}=this,{pointer:l}=this.dragging;if(!l.wasTouchScroll){let{initialHit:c,finalHit:u}=this.hitDragging;if(c&&u&&Mu(c,u)){let{context:h}=i,m=Object.assign(Object.assign({},jS(c.dateSpan,h)),{dayEl:c.dayEl,jsEvent:s.origEvent,view:h.viewApi||h.calendarApi.view});h.emitter.trigger("dateClick",m)}}},this.dragging=new Zo(e.el),this.dragging.autoScroller.isEnabled=!1;let t=this.hitDragging=new ku(this.dragging,gg(e));t.emitter.on("pointerdown",this.handlePointerDown),t.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class KO extends ol{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=c=>{let{component:u,dragging:h}=this,{options:m}=u.context,p=m.selectable&&u.isValidDateDownEl(c.origEvent.target);h.setIgnoreMove(!p),h.delay=c.isTouch?JO(u):null},this.handleDragStart=c=>{this.component.context.calendarApi.unselect(c)},this.handleHitUpdate=(c,u)=>{let{context:h}=this.component,m=null,p=!1;if(c){let y=this.hitDragging.initialHit;c.componentId===y.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(y,c)||(m=e3(y,c,h.pluginHooks.dateSelectionTransformers)),(!m||!h4(m,c.dateProfile,h))&&(p=!0,m=null)}m?h.dispatch({type:"SELECT_DATES",selection:m}):u||h.dispatch({type:"UNSELECT_DATES"}),p?tg():sg(),u||(this.dragSelection=m)},this.handlePointerUp=c=>{this.dragSelection&&(O1(this.dragSelection,c,this.component.context),this.dragSelection=null)};let{component:t}=e,{options:s}=t.context,i=this.dragging=new Zo(e.el);i.touchScrollAllowed=!1,i.minDistance=s.selectMinDistance||0,i.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new ku(this.dragging,gg(e));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function JO(n){let{options:e}=n.context,t=e.selectLongPressDelay;return t==null&&(t=e.longPressDelay),t}function e3(n,e,t){let s=n.dateSpan,i=e.dateSpan,l=[s.range.start,s.range.end,i.range.start,i.range.end];l.sort(HR);let c={};for(let u of t){let h=u(n,e);if(h===!1)return null;h&&Object.assign(c,h)}return c.range={start:l[0],end:l[3]},c.allDay=s.allDay,c}class Ko extends ol{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=c=>{let u=c.origEvent.target,{component:h,dragging:m}=this,{mirror:p}=m,{options:y}=h.context,x=h.context;this.subjectEl=c.subjectEl;let v=this.subjectSeg=el(c.subjectEl),A=(this.eventRange=v.eventRange).instance.instanceId;this.relevantEvents=hg(x.getCurrentData().eventStore,A),m.minDistance=c.isTouch?0:y.eventDragMinDistance,m.delay=c.isTouch&&A!==h.props.eventSelection?s3(h):null,y.fixedMirrorParent?p.parentNode=y.fixedMirrorParent:p.parentNode=bs(u,".fc"),p.revertDuration=y.dragRevertDuration;let S=h.isValidSegDownEl(u)&&!bs(u,".fc-event-resizer");m.setIgnoreMove(!S),this.isDragging=S&&c.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=c=>{let u=this.component.context,h=this.eventRange,m=h.instance.instanceId;c.isTouch?m!==this.component.props.eventSelection&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:m}):u.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(u.calendarApi.unselect(c),u.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Tt(u,h.def,h.instance),jsEvent:c.origEvent,view:u.viewApi}))},this.handleHitUpdate=(c,u)=>{if(!this.isDragging)return;let h=this.relevantEvents,m=this.hitDragging.initialHit,p=this.component.context,y=null,x=null,v=null,w=!1,A={affectedEvents:h,mutatedEvents:En(),isEvent:!0};if(c){y=c.context;let S=y.options;p===y||S.editable&&S.droppable?(x=t3(m,c,this.eventRange.instance.range.start,y.getCurrentData().pluginHooks.eventDragMutationMassagers),x&&(v=pg(h,y.getCurrentData().eventUiBases,x,y),A.mutatedEvents=v,Q1(A,c.dateProfile,y)||(w=!0,x=null,v=null,A.mutatedEvents=En()))):y=null}this.displayDrag(y,A),w?tg():sg(),u||(p===y&&Mu(m,c)&&(x=null),this.dragging.setMirrorNeedsRevert(!x),this.dragging.setMirrorIsVisible(!c||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=y,this.validMutation=x,this.mutatedRelevantEvents=v)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=c=>{if(this.isDragging){let u=this.component.context,h=u.viewApi,{receivingContext:m,validMutation:p}=this,y=this.eventRange.def,x=this.eventRange.instance,v=new Tt(u,y,x),w=this.relevantEvents,A=this.mutatedRelevantEvents,{finalHit:S}=this.hitDragging;if(this.clearDrag(),u.emitter.trigger("eventDragStop",{el:this.subjectEl,event:v,jsEvent:c.origEvent,view:h}),p){if(m===u){let N=new Tt(u,A.defs[y.defId],x?A.instances[x.instanceId]:null);u.dispatch({type:"MERGE_EVENTS",eventStore:A});let j={oldEvent:v,event:N,relatedEvents:Bi(A,u,x),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:w})}},C={};for(let R of u.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(C,R(p,u));u.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},j),C),{el:c.subjectEl,delta:p.datesDelta,jsEvent:c.origEvent,view:h})),u.emitter.trigger("eventChange",j)}else if(m){let N={event:v,relatedEvents:Bi(w,u,x),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:w})}};u.emitter.trigger("eventLeave",Object.assign(Object.assign({},N),{draggedEl:c.subjectEl,view:h})),u.dispatch({type:"REMOVE_EVENTS",eventStore:w}),u.emitter.trigger("eventRemove",N);let j=A.defs[y.defId],C=A.instances[x.instanceId],R=new Tt(m,j,C);m.dispatch({type:"MERGE_EVENTS",eventStore:A});let D={event:R,relatedEvents:Bi(A,m,C),revert(){m.dispatch({type:"REMOVE_EVENTS",eventStore:A})}};m.emitter.trigger("eventAdd",D),c.isTouch&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:x.instanceId}),m.emitter.trigger("drop",Object.assign(Object.assign({},jS(S.dateSpan,m)),{draggedEl:c.subjectEl,jsEvent:c.origEvent,view:S.context.viewApi})),m.emitter.trigger("eventReceive",Object.assign(Object.assign({},D),{draggedEl:c.subjectEl,view:S.context.viewApi}))}}else u.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:t}=this,{options:s}=t.context,i=this.dragging=new Zo(e.el);i.pointer.selector=Ko.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new ku(this.dragging,fp);l.useSubjectCenter=e.useEventCenter,l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,t){let s=this.component.context,i=this.receivingContext;i&&i!==e&&(i===s?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:t.affectedEvents,mutatedEvents:En(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:t})}clearDrag(){let e=this.component.context,{receivingContext:t}=this;t&&t.dispatch({type:"UNSET_EVENT_DRAG"}),e!==t&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Ko.SELECTOR=".fc-event-draggable, .fc-event-resizable";function t3(n,e,t,s){let i=n.dateSpan,l=e.dateSpan,c=i.range.start,u=l.range.start,h={};i.allDay!==l.allDay&&(h.allDay=l.allDay,h.hasEnd=e.context.options.allDayMaintainDuration,l.allDay?c=Ct(t):c=t);let m=$r(c,u,n.context.dateEnv,n.componentId===e.componentId?n.largeUnit:null);m.milliseconds&&(h.allDay=!1);let p={datesDelta:m,standardProps:h};for(let y of s)y(p,n,e);return p}function s3(n){let{options:e}=n.context,t=e.eventLongPressDelay;return t==null&&(t=e.longPressDelay),t}class n3 extends ol{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let{component:c}=this,u=this.querySegEl(l),h=el(u),m=this.eventRange=h.eventRange;this.dragging.minDistance=c.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(l.origEvent.target)||l.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=l=>{let{context:c}=this.component,u=this.eventRange;this.relevantEvents=hg(c.getCurrentData().eventStore,this.eventRange.instance.instanceId);let h=this.querySegEl(l);this.draggingSegEl=h,this.draggingSeg=el(h),c.calendarApi.unselect(),c.emitter.trigger("eventResizeStart",{el:h,event:new Tt(c,u.def,u.instance),jsEvent:l.origEvent,view:c.viewApi})},this.handleHitUpdate=(l,c,u)=>{let{context:h}=this.component,m=this.relevantEvents,p=this.hitDragging.initialHit,y=this.eventRange.instance,x=null,v=null,w=!1,A={affectedEvents:m,mutatedEvents:En(),isEvent:!0};l&&(l.componentId===p.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(p,l)||(x=a3(p,l,u.subjectEl.classList.contains("fc-event-resizer-start"),y.range))),x&&(v=pg(m,h.getCurrentData().eventUiBases,x,h),A.mutatedEvents=v,Q1(A,l.dateProfile,h)||(w=!0,x=null,v=null,A.mutatedEvents=null)),v?h.dispatch({type:"SET_EVENT_RESIZE",state:A}):h.dispatch({type:"UNSET_EVENT_RESIZE"}),w?tg():sg(),c||(x&&Mu(p,l)&&(x=null),this.validMutation=x,this.mutatedRelevantEvents=v)},this.handleDragEnd=l=>{let{context:c}=this.component,u=this.eventRange.def,h=this.eventRange.instance,m=new Tt(c,u,h),p=this.relevantEvents,y=this.mutatedRelevantEvents;if(c.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:l.origEvent,view:c.viewApi}),this.validMutation){let x=new Tt(c,y.defs[u.defId],h?y.instances[h.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:y});let v={oldEvent:m,event:x,relatedEvents:Bi(y,c,h),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:p})}};c.emitter.trigger("eventResize",Object.assign(Object.assign({},v),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||ct(0),endDelta:this.validMutation.endDelta||ct(0),jsEvent:l.origEvent,view:c.viewApi})),c.emitter.trigger("eventChange",v)}else c.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:t}=e,s=this.dragging=new Zo(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=t.context.options.dragScroll;let i=this.hitDragging=new ku(this.dragging,gg(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return bs(e.subjectEl,".fc-event")}}function a3(n,e,t,s){let i=n.context.dateEnv,l=n.dateSpan.range.start,c=e.dateSpan.range.start,u=$r(l,c,i,n.largeUnit);if(t){if(i.add(s.start,u)<s.end)return{startDelta:u}}else if(i.add(s.end,u)>s.start)return{endDelta:u};return null}class i3{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let i=this.context.options.unselectCancel,l=m1(s.origEvent);this.matchesCancel=!!bs(l,i),this.matchesEvent=!!bs(l,Ko.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:i}=this,{documentPointer:l}=this,c=i.getCurrentData();if(!l.wasTouchScroll){if(c.dateSelection&&!this.isRecentPointerDateSelect){let u=i.options.unselectAuto;u&&(!u||!this.matchesCancel)&&i.calendarApi.unselect(s)}c.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let t=this.documentPointer=new AS(document);t.shouldIgnoreMove=!0,t.shouldWatchScroll=!1,t.emitter.on("pointerdown",this.onDocumentPointerDown),t.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const r3={fixedMirrorParent:ae},l3={dateClick:ae,eventDragStart:ae,eventDragStop:ae,eventDrop:ae,eventResizeStart:ae,eventResizeStop:ae,eventResize:ae,drop:ae,eventReceive:ae,eventLeave:ae};vg.dataAttrPrefix="";var o3=ni({name:"@fullcalendar/interaction",componentInteractions:[ZO,KO,Ko,n3],calendarInteractions:[i3],elementDraggingImpl:Zo,optionRefiners:r3,listenerRefiners:l3});const Ed="/events";function Im(){const{user:n,token:e}=ls(),[t,s]=_.useState([]),[i,l]=_.useState([]),[c,u]=_.useState({}),[h,m]=_.useState(!1),[p,y]=_.useState(null),[x,v]=_.useState({title:"",description:"",startDate:"",endDate:"",category:"meeting"}),[w,A]=_.useState(new Date),[S,N]=_.useState(new Date),[j,C]=_.useState([]),[R,D]=_.useState(!1),O=_.useRef(null),B=`:root { --primary-color: #104774; --primary-hover: #0d3a61; --sunday-bg-color: #fff5f5; --sunday-text-color: #e53e3e; --holiday-bg-color: #fff5f5; --holiday-text-color: #e53e3e; }
  .fc .fc-toolbar-title{font-size:1.25rem;font-weight:600;color:#104774}
  .fc .fc-button{background-color:#104774;border-color:#104774}
  .fc .fc-button:hover{background-color:#0d3a61;border-color:#0d3a61}
  .fc .fc-daygrid-day.fc-day-today{background-color:#f0f9ff}
  .fc .fc-day-sun,.fc .fc-day-holiday{background-color:var(--holiday-bg-color)}
  .fc .fc-day-sun .fc-daygrid-day-number,.fc .fc-day-holiday .fc-daygrid-day-number{color:var(--holiday-text-color);font-weight:600}
  .fc-event{border-radius:4px;border:none;padding:2px 4px;font-size:0.8rem;cursor:pointer}
  .fc-daygrid-day-frame{cursor:pointer;max-height:150px!important}
  .fc-event-title{font-weight:500}
  .fc-event-description{font-size:0.7rem;opacity:0.8;margin-top:2px}
  `,F=te=>{const be=new Date(te),ve=be.getFullYear(),je=String(be.getMonth()+1).padStart(2,"0"),Ye=String(be.getDate()).padStart(2,"0");return`${ve}-${je}-${Ye}`},I=te=>new Date(te).getDay()===0,ee=te=>{const be=F(te);return{id:`sunday-${be}`,title:"Sunday Holiday",start:be,extendedProps:{description:"Weekly holiday",category:"holiday",isSundayHoliday:!0},color:z("holiday"),display:"auto",allDay:!0}},z=te=>{switch(te){case"meeting":return"#104774";case"deadline":return"#ef4444";case"event":return"#8b5cf6";case"leave":return"#f97316";case"holiday":return"#10b981";default:return"#6b7280"}},Z=te=>{switch(te){case"meeting":return"bg-blue-50 border-blue-200";case"deadline":return"bg-red-50 border-red-200";case"event":return"bg-purple-50 border-purple-200";case"leave":return"bg-orange-50 border-orange-200";case"holiday":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}},W=_.useCallback(te=>(te||[]).map(be=>{let ve=be.endDate;if(be.endDate&&be.endDate!==be.startDate){const je=new Date(be.endDate);je.setDate(je.getDate()+1),ve=F(je)}return{id:be._id.toString(),title:be.title,start:F(be.startDate),end:ve||void 0,extendedProps:{description:be.description,category:be.category||"meeting",originalEndDate:be.endDate||null,isSundayHoliday:!1,isHoliday:!!be.isHoliday,source:be.source||"backend",externalId:be.externalId||void 0},color:z(be.category||"meeting"),display:"auto",allDay:!0}}),[]),ce=te=>{const be=te.end.date?te.end.date:te.end.dateTime;return{id:`holiday-${te.id}`,title:te.summary,start:F(te.start.date||te.start.dateTime),end:be?F(be):void 0,extendedProps:{description:te.description||te.summary,category:"holiday",isHoliday:!0,source:"google",externalId:te.id},color:z("holiday"),display:"auto",allDay:!0}},me=()=>{const te=t||[],be=[...te];return i.forEach(ve=>{const je=ve.extendedProps?.externalId,Ye=F(ve.start),K=(ve.title||"").toLowerCase();te.some(Pe=>!!(je&&Pe.extendedProps?.externalId&&Pe.extendedProps.externalId===je||F(Pe.start)===Ye&&(Pe.title||"").toLowerCase()===K))||be.push(ve)}),be},L=_.useCallback(async()=>{D(!0);try{const te=await ye.get(Ed,{headers:{Authorization:`Bearer ${e}`}}),be=W(te.data.events||[]);s(be);const ve=[...be,...i];H(S,ve)}catch(te){console.error(te.response?.data||te.message)}finally{D(!1)}},[e,W,i,S]);_.useEffect(()=>{L(),$(w.getFullYear())},[]),_.useEffect(()=>{H(S)},[t,i,S]);const V=te=>{const be=(te.summary||"").toLowerCase(),ve=["public holiday","national holiday","gazetted holiday","bank holiday","independence day","republic day","gandhi jayanti","guru nanak jayanti","diwali","holi","eid","christmas","good friday","mahatma gandhi","republic","independence","janmashtami","dussehra","ram navami","maha shivratri"],je=["observance","observances","festival","festivals","optional holiday","restricted holiday","eve","beginning","ends","monthly","week","daylight saving","season","solstice","equinox","fasting","vrat","puja","parva"],Ye=ve.some(Ne=>be.includes(Ne)),K=je.some(Ne=>be.includes(Ne));return Ye&&!K},$=async te=>{if(c[te])return;const be="AIzaSyBG-v7rJFHD3hgzTW802GaGTa-gA_n3J3A",ve="en.indian%23holiday%40group.v.calendar.google.com",je=`${te}-01-01T00:00:00Z`,Ye=`${te}-12-31T23:59:59Z`,K=`https://www.googleapis.com/calendar/v3/calendars/${ve}/events?key=${be}&timeMin=${je}&timeMax=${Ye}&singleEvents=true`,Ne=new AbortController,Pe=setTimeout(()=>Ne.abort(),1e4);try{const Xe=await fetch(K,{signal:Ne.signal,headers:{Accept:"application/json"}});if(clearTimeout(Pe),!Xe.ok)throw new Error(`HTTP ${Xe.status} - ${Xe.statusText}`);const wt=await Xe.json(),Se=(Array.isArray(wt.items)?wt.items:[]).filter(V).map(ce);l(_e=>{const Ue=new Set(_e.map(Qt=>Qt.id)),dt=Se.filter(Qt=>!Ue.has(Qt.id));return[..._e,...dt]}),u(_e=>({..._e,[te]:!0}))}catch(Xe){Xe.name==="AbortError"?console.warn("Holiday fetch aborted"):console.error("Holiday fetch error:",Xe.message||Xe)}finally{clearTimeout(Pe)}},H=(te,be=null)=>{const ve=be||me(),je=F(te),Ye=I(te),K=ve.filter(Xe=>{const wt=F(Xe.start);if(Xe.end){const qt=F(Xe.end);return je>=wt&&je<qt}return je===wt});Ye&&(K.some(wt=>wt.extendedProps?.isSundayHoliday||wt.extendedProps?.isHoliday)||K.push(ee(te)));const Ne=new Set,Pe=[];K.forEach(Xe=>{const wt=Xe.extendedProps?.externalId||Xe.id||`${(Xe.title||"").toLowerCase()}|${F(Xe.start)}`;Ne.has(wt)||(Ne.add(wt),Pe.push(Xe))}),C(Pe)},T=te=>{const be=new Date(te.view.currentStart);A(be),$(be.getFullYear())},q=te=>{const be=new Date(te.dateStr);N(be),H(be)},M=te=>{if(n.role==="employee")return;const be=te.event;if(be.extendedProps?.isSundayHoliday||be.extendedProps?.isHoliday)return;const ve=be.extendedProps?.originalEndDate||be.endStr||be.startStr,je=be.startStr?be.startStr.slice(0,10):F(be.start),Ye=ve?ve.slice?ve.slice(0,10):F(ve):je;y({id:be.id}),v({title:be.title||"",description:be.extendedProps?.description||"",startDate:je,endDate:Ye,category:be.extendedProps?.category||"meeting"}),m(!0)},G=()=>{y(null),v({title:"",description:"",startDate:F(S),endDate:F(S),category:"meeting"}),m(!0)},de=te=>new Date(te).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),re=async()=>{D(!0);try{const te={title:x.title,description:x.description,startDate:x.startDate,endDate:x.endDate&&x.endDate!==x.startDate?x.endDate:void 0,category:x.category};if(p){const be=await ye.put(`${Ed}/${p.id}`,te,{headers:{Authorization:`Bearer ${e}`}}),ve=W([be.data.event])[0];s(je=>je.map(Ye=>Ye.id===ve.id?ve:Ye))}else{const be=await ye.post(Ed,te,{headers:{Authorization:`Bearer ${e}`}}),ve=W([be.data.event])[0];s(je=>{if(new Set(je.map(Ne=>Ne.id)).has(ve.id))return je;const K=[...je,ve];return H(S,[...K,...i]),K})}m(!1)}catch(te){console.error(te.response?.data||te.message)}finally{D(!1)}},xe=async()=>{if(p){D(!0);try{await ye.delete(`${Ed}/${p.id}`,{headers:{Authorization:`Bearer ${e}`}}),s(te=>te.filter(be=>be.id!==p.id)),m(!1)}catch(te){console.error(te.response?.data||te.message)}finally{D(!1)}}},Ee=()=>{if(O.current){const te=O.current.getApi();te.prev(),A(new Date(te.getDate()))}},Le=()=>{if(O.current){const te=O.current.getApi();te.next(),A(new Date(te.getDate()))}},he=te=>{const be=F(te);return me().some(je=>{const Ye=F(je.start);if(je.end){const K=F(je.end);return be>=Ye&&be<K&&!!je.extendedProps?.isHoliday}return be===Ye&&!!je.extendedProps?.isHoliday})},$e=te=>te.event.extendedProps?.isSundayHoliday?null:r.jsxs("div",{className:"fc-event-content",children:[r.jsx("div",{className:"fc-event-title",children:te.event.title}),te.event.extendedProps.description&&r.jsx("div",{className:"fc-event-description",children:te.event.extendedProps.description.length>20?`${te.event.extendedProps.description.substring(0,20)}...`:te.event.extendedProps.description})]}),ge=te=>{const be=new Date(te.date),ve=I(be),je=he(be);return r.jsx("div",{className:"fc-daygrid-day-frame",children:r.jsx("div",{className:"fc-daygrid-day-top",children:r.jsx("div",{className:`fc-daygrid-day-number ${ve||je?"text-red-600 font-bold":""}`,children:te.dayNumberText})})})},we=te=>{const be=new Date(te.date),ve=I(be),je=he(be);return ve||je?"fc-day-holiday":""},ke=me();return r.jsxs("div",{className:"space-y-8",children:[r.jsx("style",{children:B}),r.jsxs("div",{className:"flex items-center justify-between ",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Company Calendar"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage company events and schedules"})]}),n.role!=="employee"&&r.jsxs("button",{onClick:G,className:"flex items-center bg-[#104774] text-white px-4 py-2 rounded-xl hover:bg-[#0d3a61] transition-all duration-200",children:[r.jsx(Pi,{size:18,className:"mr-2"}),"Add Event"]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-[#104774] p-6 text-white",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:Ee,className:"p-2 hover:bg-[#0d3a61] rounded-lg transition-colors",children:r.jsx(gT,{size:24})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-semibold",children:w.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),r.jsx("p",{className:"text-blue-100 text-sm",children:"Click on any date to view events"})]}),r.jsx("button",{onClick:Le,className:"p-2 hover:bg-[#0d3a61] rounded-lg transition-colors",children:r.jsx(xT,{size:24})})]})}),r.jsx("div",{className:"",children:r.jsx(fS,{ref:O,plugins:[zO,o3],initialView:"dayGridMonth",events:ke,dateClick:q,eventClick:M,height:"auto",headerToolbar:!1,initialDate:w,datesSet:T,eventContent:$e,dayCellContent:ge,dayCellClassNames:we,dayMaxEvents:1,fixedWeekCount:!1})})]})}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ks,{size:24,className:"text-[#104774] mr-3"}),r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[de(S),(I(S)||j.some(te=>te.extendedProps?.isHoliday))&&r.jsx("span",{className:"ml-2 text-red-600 text-sm font-normal",children:"(Holiday)"})]})]}),n.role!=="employee"&&j.length>0&&r.jsx("button",{onClick:G,className:"text-[#104774] text-sm hover:text-[#0d3a61]",children:"+ Add Event"})]}),j.length>0?r.jsx("div",{className:"space-y-3",children:j.map((te,be)=>{const ve=new Date(te.start),je=te.end?new Date(te.end):null;return r.jsxs("div",{className:`p-4 rounded-xl border ${Z(te.extendedProps?.category||"meeting")} ${n.role!=="employee"&&!te.extendedProps?.isSundayHoliday&&!te.extendedProps?.isHoliday?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>{n.role!=="employee"&&!te.extendedProps?.isSundayHoliday&&!te.extendedProps?.isHoliday&&(y(te),v({title:te.title,description:te.extendedProps?.description||"",startDate:te.start,endDate:te.extendedProps?.originalEndDate||te.start,category:te.extendedProps?.category||"meeting"}),m(!0))},children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"font-semibold text-gray-800",children:[te.title,(te.extendedProps?.isSundayHoliday||te.extendedProps?.isHoliday)&&r.jsx("span",{className:"ml-2 text-green-600 text-xs font-normal"})]}),te.extendedProps?.description&&r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:te.extendedProps.description}),r.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:[ve.toLocaleDateString(),je&&je>ve&&` to ${je.toLocaleDateString()}`]})]}),r.jsx("div",{className:"w-3 h-3 rounded-full ml-2 flex-shrink-0",style:{backgroundColor:z(te.extendedProps?.category||"meeting")}})]}),n.role!=="employee"&&!te.extendedProps?.isSundayHoliday&&!te.extendedProps?.isHoliday&&r.jsx("div",{className:"text-xs text-[#104774] mt-2",children:"Click to edit"})]},be)})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ks,{size:48,className:"text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"No events scheduled"}),n.role!=="employee"&&r.jsx("button",{onClick:G,className:"text-[#104774] text-sm mt-2 hover:text-[#0d3a61]",children:"+ Add Event"})]})]})})]}),h&&r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:p?"Edit Event":"Add Event"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(qo,{size:20})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Title"}),r.jsx("input",{type:"text",placeholder:"Enter event title",value:x.title,onChange:te=>v({...x,title:te.target.value}),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{placeholder:"Enter event description",value:x.description,onChange:te=>v({...x,description:te.target.value}),rows:3,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{value:x.category,onChange:te=>v({...x,category:te.target.value}),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-[#104774] focus:border-transparent",children:[r.jsx("option",{value:"meeting",children:"Meeting"}),r.jsx("option",{value:"deadline",children:"Deadline"}),r.jsx("option",{value:"event",children:"Company Event"}),r.jsx("option",{value:"leave",children:"Leave Day"}),r.jsx("option",{value:"holiday",children:"Holiday"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),r.jsx("input",{type:"date",value:x.startDate?x.startDate.slice(0,10):"",onChange:te=>v({...x,startDate:te.target.value}),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date (optional)"}),r.jsx("input",{type:"date",value:x.endDate?x.endDate.slice(0,10):"",onChange:te=>v({...x,endDate:te.target.value}),className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-[#104774] focus:border-transparent"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t",children:[r.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),p&&r.jsx("button",{onClick:xe,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"}),r.jsx("button",{onClick:re,className:"px-4 py-2 bg-[#104774] text-white rounded-lg hover:bg-[#0d3a61]",children:p?"Update":"Save"})]})]})})]})}function c3(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}c3(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Sg=n=>typeof n=="number"&&!isNaN(n),Oo=n=>typeof n=="string",_S=n=>typeof n=="function",d3=n=>Oo(n)||Sg(n),u3=n=>_.isValidElement(n)||Oo(n)||_S(n)||Sg(n),h3=1,CS=()=>`${h3++}`,Yn=new Map,xp=[],ow=new Set,TS=()=>Yn.size>0,f3=(n,{containerId:e})=>{var t;return(t=Yn.get(e||1))==null?void 0:t.toasts.get(n)};function m3(n,e){var t;if(e)return!!((t=Yn.get(e))!=null&&t.isToastActive(n));let s=!1;return Yn.forEach(i=>{i.isToastActive(n)&&(s=!0)}),s}function p3(n){if(!TS()){xp=xp.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||d3(n))Yn.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=Yn.get(n.containerId);e?e.removeToast(n.id):Yn.forEach(t=>{t.removeToast(n.id)})}}var g3=(n={})=>{Yn.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function y3(n,e){u3(n)&&(TS()||xp.push({content:n,options:e}),Yn.forEach(t=>{t.buildToast(n,e)}))}function DS(n,e){Yn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function x3(n){return ow.add(n),()=>{ow.delete(n)}}function b3(n){return n&&(Oo(n.toastId)||Sg(n.toastId))?n.toastId:CS()}function Jo(n,e){return y3(n,e),e.toastId}function Lu(n,e){return{...e,type:e&&e.type||n,toastId:b3(e)}}function Ou(n){return(e,t)=>Jo(e,Lu(n,t))}function Ze(n,e){return Jo(n,Lu("default",e))}Ze.loading=(n,e)=>Jo(n,Lu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function v3(n,{pending:e,error:t,success:s},i){let l;e&&(l=Oo(e)?Ze.loading(e,i):Ze.loading(e.render,{...i,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(m,p,y)=>{if(p==null){Ze.dismiss(l);return}let x={type:m,...c,...i,data:y},v=Oo(p)?{render:p}:p;return l?Ze.update(l,{...x,...v}):Ze(v.render,{...x,...v}),y},h=_S(n)?n():n;return h.then(m=>u("success",s,m)).catch(m=>u("error",t,m)),h}Ze.promise=v3;Ze.success=Ou("success");Ze.info=Ou("info");Ze.error=Ou("error");Ze.warning=Ou("warning");Ze.warn=Ze.warning;Ze.dark=(n,e)=>Jo(n,Lu("default",{theme:"dark",...e}));function w3(n){p3(n)}Ze.dismiss=w3;Ze.clearWaitingQueue=g3;Ze.isActive=m3;Ze.update=(n,e={})=>{let t=f3(n,e);if(t){let{props:s,content:i}=t,l={delay:100,...s,...e,toastId:e.toastId||n,updateId:CS()};l.toastId!==n&&(l.staleId=n);let c=l.render||i;delete l.render,Jo(c,l)}};Ze.done=n=>{Ze.update(n,{progress:1})};Ze.onChange=x3;Ze.play=n=>DS(!0,n);Ze.pause=n=>DS(!1,n);function A3(){const{user:n,token:e}=ls(),[t,s]=_.useState({}),[i,l]=_.useState([]),[c,u]=_.useState([]),[h,m]=_.useState([]),[p,y]=_.useState(!0),[x,v]=_.useState(!1),[w,A]=_.useState(!1),[S,N]=_.useState(!1),[j,C]=_.useState(!1),[R,D]=_.useState(""),[O,B]=_.useState("all"),[F,I]=_.useState("all"),[ee,z]=_.useState(1),[Z]=_.useState(5),[W,ce]=_.useState({leaveType:"",fromDate:"",toDate:"",reason:""}),[me,L]=_.useState({}),[V,$]=_.useState([]),H=_.useRef(new Set),T=_.useRef(new Set),[q,M]=_.useState(!1),[G,de]=_.useState(null),re=oe=>oe.toString().padStart(2,"0"),xe=oe=>`${oe.getFullYear()}-${re(oe.getMonth()+1)}-${re(oe.getDate())}`,Ee=async oe=>{try{const dt=(await(await fetch(`https://www.googleapis.com/calendar/v3/calendars/en.indian%23holiday@group.v.calendar.google.com/events?key=AIzaSyBG-v7rJFHD3hgzTW802GaGTa-gA_n3J3A&timeMin=${oe}-01-01T00:00:00Z&timeMax=${oe}-12-31T23:59:59Z`)).json()).items||[],Qt=["republic day","independence day","gandhi","mahatma gandhi","gandhi jayanti","diwali","deepavali","dussehra","dashera","holi","christmas","new year's","new year","good friday","eid","bakrid","ramzan","guru nanak","janmashtami","mahavir","pongal","makar sankranti","dussehra","dussehra","mahatma gandhi jayanti","mahatma gandhi","mahatma"];return dt.map(Rt=>{const en=Rt.start||{};let Hs=null;if(en.date)Hs=en.date;else if(en.dateTime){const gn=new Date(en.dateTime);Hs=`${gn.getFullYear()}-${re(gn.getMonth()+1)}-${re(gn.getDate())}`}const vs=(Rt.summary||"").toString(),pn=(Rt.description||"").toString();let zs=!1;const ii=pn.toLowerCase(),ri=vs.toLowerCase();if(ii.includes("public holiday")||ii.includes("public"))zs=!0;else if(ii.includes("observance"))zs=!1;else if(ri.includes("holiday"))zs=!0;else for(const gn of Qt)if(ri.includes(gn)){zs=!0;break}return{id:Rt.id,title:vs,date:Hs,description:pn,htmlLink:Rt.htmlLink,isOfficial:zs}}).filter(Rt=>Rt.date)}catch(Se){return console.error("Error fetching holidays:",Se),[]}},Le=async(oe=[])=>{const Se=oe.filter(Ue=>!T.current.has(Ue));if(Se.length===0)return;const _e=[];for(const Ue of Se){const Qt=(await Ee(Ue)).filter(Qn=>Qn.isOfficial);_e.push(...Qt),T.current.add(Ue)}if(_e.length>0){const Ue=new Set(H.current),dt=[...V];for(const Qt of _e)Qt.date&&!Ue.has(Qt.date)&&(Ue.add(Qt.date),dt.push(Qt));H.current=Ue,$(dt)}},he=async(oe,Se)=>{if(!oe||!Se)return 0;M(!0);try{const _e=new Date(oe),Ue=new Date(Se);if(isNaN(_e)||isNaN(Ue)||_e>Ue)return 0;const dt=new Set([_e.getFullYear(),Ue.getFullYear()]);await Le(Array.from(dt));const Qt=H.current;let Qn=0;const Rt=new Date(_e);for(;Rt<=Ue;){const Hs=Rt.getDay()===0,vs=xe(Rt),pn=Qt.has(vs);!Hs&&!pn&&Qn++,Rt.setDate(Rt.getDate()+1)}return Qn}catch(_e){return console.error("Error calculating working days:",_e),0}finally{M(!1)}},$e=async()=>{if(n)try{const oe=await ye.get("/leave/balance",{headers:{Authorization:`Bearer ${e}`}});s(oe.data.balance||{})}catch(oe){console.error("Error fetching leave balance:",oe),Ze.error("Failed to fetch leave balance")}},ge=async()=>{try{const Se=((await ye.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${e}`}})).data||[]).filter(_e=>_e.isActive);m(Se),Se.length>0&&!W.leaveType&&ce(_e=>({..._e,leaveType:Se[0].name}))}catch(oe){console.error("Error fetching leave types:",oe),Ze.error("Failed to fetch leave types")}},we=async()=>{if(n)try{const oe=await ye.get("/leave/my-requests",{headers:{Authorization:`Bearer ${e}`}});l(oe.data||[]),u(oe.data||[])}catch(oe){console.error("Error fetching leave requests:",oe),Ze.error("Failed to fetch leave requests")}finally{y(!1)}};_.useEffect(()=>{if(n){$e(),ge(),we();const oe=new Date().getFullYear();Le([oe]).catch(Se=>console.error(Se))}},[n]),_.useEffect(()=>{let oe=!1;return(async()=>{if(W.fromDate&&W.toDate){M(!0);const _e=await he(W.fromDate,W.toDate);oe||de(_e),M(!1)}else de(null)})(),()=>{oe=!0}},[W.fromDate,W.toDate]),_.useEffect(()=>{let oe=i;O!=="all"&&(oe=oe.filter(Se=>Se.status===O)),F!=="all"&&(oe=oe.filter(Se=>Se.leaveType===F)),R&&(oe=oe.filter(Se=>(Se.reason||"").toLowerCase().includes(R.toLowerCase())||(Se.leaveType||"").toLowerCase().includes(R.toLowerCase())||(Se.status||"").toLowerCase().includes(R.toLowerCase()))),u(oe),z(1)},[R,O,F,i]);const ke=ee*Z,te=ke-Z,be=c.slice(te,ke),ve=Math.ceil(c.length/Z),je=oe=>{const{name:Se,value:_e}=oe.target;ce(Ue=>({...Ue,[Se]:_e})),me[Se]&&L(Ue=>({...Ue,[Se]:""}))},Ye=async()=>{const oe={},Se=new Date;Se.setHours(0,0,0,0);const _e=new Date(W.fromDate);if(_e.setHours(0,0,0,0),W.leaveType||(oe.leaveType="Leave type is required"),W.fromDate||(oe.fromDate="From date is required"),W.toDate||(oe.toDate="To date is required"),W.fromDate&&W.toDate){new Date(W.fromDate)>new Date(W.toDate)&&(oe.toDate="To date cannot be before from date"),_e<Se&&(oe.fromDate="Cannot apply for backdated leaves");const Ue=await he(W.fromDate,W.toDate),dt=t[W.leaveType]??0;dt<Ue&&(oe.leaveType=`Insufficient ${W.leaveType} leave balance! You have ${dt} days left.`)}return W.reason.trim()||(oe.reason="Reason is required"),W.reason.length>500&&(oe.reason="Reason cannot exceed 500 characters"),L(oe),Object.keys(oe).length===0},K=oe=>{const{name:Se,value:_e}=oe.target;ce(Ue=>({...Ue,[Se]:_e})),me[Se]&&L(Ue=>({...Ue,[Se]:""}))},Ne=async oe=>{if(oe.preventDefault(),!x&&await Ye()){v(!0);try{const Se=await he(W.fromDate,W.toDate),_e={...W,totalDays:Se};await ye.post("/leave/create",_e,{headers:{Authorization:`Bearer ${e}`}}),Ze.success("Leave applied successfully!"),N(!1),ce({leaveType:h[0]?.name||"",fromDate:"",toDate:"",reason:""}),$e(),we()}catch(Se){console.error("Error applying leave:",Se);const _e=Se.response?.data?.message||"Error applying leave. Please try again.";Ze.error(_e)}finally{v(!1)}}},Pe=async oe=>{if(!w){A(!0);try{await ye.put(`/leave/requests/${oe}/cancel`,{},{headers:{Authorization:`Bearer ${e}`}}),Ze.success("Leave cancelled successfully!"),we()}catch(Se){console.error("Error cancelling leave:",Se),Ze.error(Se.response?.data?.message||"Error cancelling leave")}finally{A(!1)}}},Xe=()=>{D(""),B("all"),I("all"),u(i)},wt=oe=>{switch(oe){case"sick":return r.jsx(qd,{size:16,className:"text-red-400 mr-2"});case"casual":return r.jsx(Ud,{size:16,className:"text-purple-400 mr-2"});case"paid":return r.jsx(Os,{size:16,className:"text-green-400 mr-2"});default:return r.jsx(Ks,{size:16,className:"text-blue-400 mr-2"})}},qt=oe=>oe.replace(/_/g," ").replace(/\b\w/g,Se=>Se.toUpperCase());return p?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):r.jsxs("div",{className:"p-4 md:p-6 space-y-6 bg-gray-50 min-h-[80vh",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Leave Management"}),r.jsxs("button",{onClick:()=>N(!0),className:"flex items-center bg-[#104774] text-white px-4 md:px-6 py-2 md:py-3 rounded-lg font-medium hover:bg-[#0d3a61] transition-all duration-200 w-full md:w-auto justify-center",children:[r.jsx(Pi,{size:20,className:"mr-2"}),"Apply For Leave"]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Object.entries(t).map(([oe,Se])=>r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${oe==="sick"?"bg-red-300":oe==="casual"?"bg-purple-300":"bg-green-400"}`}),r.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:qt(oe)})]}),oe==="sick"?r.jsx(qd,{size:18,className:"text-red-300"}):oe==="casual"?r.jsx(Ud,{size:18,className:"text-purple-300"}):r.jsx(Os,{size:18,className:"text-green-400"})]}),r.jsxs("div",{className:"text-2xl font-bold text-gray-800 mb-2",children:[Se," ",r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"days left"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${oe==="sick"?"bg-red-300":oe==="casual"?"bg-purple-300":"bg-green-400"}`,style:{width:`${Math.min(Se/10*100,100)}%`}})})]},oe))}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-100 flex flex-col lg:flex-row justify-between items-start lg:items-center gap-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ks,{size:24,className:"text-[#104774] mr-3"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Leave Application History"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full lg:w-auto",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(kp,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search leaves...",value:R,onChange:oe=>D(oe.target.value),className:"pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] w-full"})]}),r.jsxs("button",{onClick:()=>C(!j),className:"flex items-center px-3 py-2 border rounded-lg hover:bg-gray-50 text-sm",children:[r.jsx(rA,{size:16,className:"mr-2"}),"Filters",j?r.jsx(fo,{size:14,className:"ml-1"}):r.jsx(ho,{size:14,className:"ml-1"})]})]})]}),j&&r.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),r.jsxs("select",{value:O,onChange:oe=>B(oe.target.value),className:"w-full border rounded-lg p-2 text-sm",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Leave Type"}),r.jsxs("select",{value:F,onChange:oe=>I(oe.target.value),className:"w-full border rounded-lg p-2 text-sm",children:[r.jsx("option",{value:"all",children:"All Types"}),h.map(oe=>r.jsxs("option",{value:oe.name,children:[qt(oe.name)," (",t[oe.name]??0," left)"]},oe._id))]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:Xe,className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 text-sm",children:"Reset Filters"})})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[400px] overflow-y-auto border border-gray-200 rounded-lg shadow-md",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Date Range"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Type"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Days"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm hidden md:table-cell",children:"Reason"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Status"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm hidden lg:table-cell",children:"Applied On"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Actions"})]})}),r.jsx("tbody",{children:be.length>0?be.map((oe,Se)=>{const _e=Ue=>new Date(Ue).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"});return r.jsxs("tr",{className:`transition-colors ${Se%2===0?"bg-white hover:bg-gray-50":"bg-gray-100 hover:bg-gray-200"}`,children:[r.jsx("td",{className:"p-3 font-medium text-gray-800 text-sm",children:`${_e(oe.fromDate)}  ${_e(oe.toDate)}`}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-1",children:[wt(oe.leaveType),r.jsx("span",{className:"text-gray-700 capitalize text-sm",children:qt(oe.leaveType)})]})}),r.jsxs("td",{className:"p-3 text-sm",children:[oe.totalDays," ",oe.totalDays===1?"day":"days"]}),r.jsx("td",{className:"p-3 text-gray-600 text-sm hidden md:table-cell max-w-xs",children:r.jsxs("div",{className:"relative group w-fit",children:[r.jsx("span",{className:"truncate block max-w-[150px] cursor-help",children:oe.reason||"-"}),oe.reason&&r.jsxs("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:flex bg-gray-900 text-white text-xs px-3 py-2 rounded-lg shadow-lg whitespace-normal max-w-xs z-50",children:[r.jsx("span",{className:"leading-snug",children:oe.reason}),r.jsx("div",{className:"absolute left-3 top-full w-2 h-2 bg-gray-900 rotate-45"})]})]})}),r.jsx("td",{className:"p-3",children:r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${oe.status==="approved"?"bg-green-100 text-green-700 border border-green-200":oe.status==="pending"?"bg-yellow-100 text-yellow-700 border border-yellow-200":oe.status==="rejected"?"bg-red-100 text-red-700 border border-red-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:[oe.status==="approved"&&r.jsx(Os,{size:12,className:"mr-1"}),oe.status==="pending"&&r.jsx(mn,{size:12,className:"mr-1"}),oe.status==="rejected"&&r.jsx(Nn,{size:12,className:"mr-1"}),oe.status.charAt(0).toUpperCase()+oe.status.slice(1)]})}),r.jsx("td",{className:"p-3 text-gray-600 text-sm hidden lg:table-cell",children:_e(oe.appliedAt)}),r.jsx("td",{className:"p-3",children:oe.status==="pending"&&r.jsxs("button",{onClick:()=>Pe(oe._id),disabled:w,className:"flex items-center text-red-600 hover:text-red-800 text-xs font-medium disabled:opacity-50",children:[r.jsx(Mp,{size:12,className:"mr-1"}),w?"...":"Cancel"]})})]},Se)}):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"p-6 text-center text-gray-500 text-sm",children:i.length===0?"No leave applications found. Apply for your first leave!":"No leaves match your filters."})})})]})})}),ve>1&&r.jsxs("div",{className:"p-4 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-3",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",te+1," to"," ",Math.min(ke,c.length)," of"," ",c.length," entries"]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>z(oe=>Math.max(oe-1,1)),disabled:ee===1,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Prev"}),Array.from({length:Math.min(5,ve)},(oe,Se)=>{let _e;return ve<=5||ee<=3?_e=Se+1:ee>=ve-2?_e=ve-4+Se:_e=ee-2+Se,r.jsx("button",{onClick:()=>z(_e),className:`px-2 py-1 rounded border text-sm ${ee===_e?"bg-[#104774] text-white border-[#104774]":"border-gray-300"}`,children:_e},_e)}),r.jsx("button",{onClick:()=>z(oe=>Math.min(oe+1,ve)),disabled:ee===ve,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Next"})]})]})]}),S&&r.jsx("div",{className:"fixed inset-0 backdrop-blur-md bg-opacity-40 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl p-4 w-full max-w-md relative max-h-[90vh] overflow-y-auto",children:[r.jsx("button",{onClick:()=>N(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:r.jsx(qo,{size:20})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Apply for Leave"}),W.leaveType&&t[W.leaveType]!==void 0&&r.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:r.jsxs("p",{className:"text-blue-800 font-medium text-sm",children:["Available ",qt(W.leaveType)," leave:"," ",t[W.leaveType]," days"]})}),r.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"Leave Type"}),r.jsxs("select",{name:"leaveType",value:W.leaveType,onChange:je,className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",required:!0,children:[r.jsx("option",{value:"",children:"Select Leave Type"}),h.map(oe=>r.jsxs("option",{value:oe.name,children:[qt(oe.name)," (",t[oe.name]??0," left)"]},oe._id))]}),me.leaveType&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",me.leaveType]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"From Date"}),r.jsx("input",{type:"date",name:"fromDate",value:W.fromDate,onChange:K,min:new Date().toISOString().split("T")[0],className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",required:!0}),me.fromDate&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",me.fromDate]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"To Date"}),r.jsx("input",{type:"date",name:"toDate",value:W.toDate,onChange:K,min:W.fromDate||new Date().toISOString().split("T")[0],className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",required:!0}),me.toDate&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",me.toDate]})]}),W.fromDate&&W.toDate&&r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("p",{className:"text-gray-700 font-medium text-sm",children:q?"Calculating...":`Working Days: ${G??0}`}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"(Excludes Sundays and Indian public holidays)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"Reason"}),r.jsx("textarea",{name:"reason",value:W.reason,onChange:je,rows:3,className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",placeholder:"Please provide a reason for your leave",required:!0}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[W.reason.length,"/500 characters"]}),me.reason&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",me.reason]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 text-sm",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 rounded-lg bg-[#104774] text-white hover:bg-[#0d3a61] disabled:opacity-50 text-sm",children:x?"Submitting...":"Submit"})]})]})]})})]})}const S3=()=>{const{token:n,user:e}=ls(),[t,s]=_.useState("employeeLeaves"),[i,l]=_.useState([]),[c,u]=_.useState([]),[h,m]=_.useState([]),[p,y]=_.useState({}),[x,v]=_.useState([]),[w,A]=_.useState(null),[S,N]=_.useState(""),[j,C]=_.useState(!1),[R,D]=_.useState(!1),[O,B]=_.useState(""),[F,I]=_.useState(!1),[ee,z]=_.useState(!1),[Z,W]=_.useState(!1),[ce,me]=_.useState(""),[L,V]=_.useState("pending"),[$,H]=_.useState("all"),[T,q]=_.useState(null),[M,G]=_.useState(1),[de]=_.useState(10),[re,xe]=_.useState({key:null,direction:"ascending"}),[Ee,Le]=_.useState({}),[he,$e]=_.useState(!1),[ge,we]=_.useState(!1),[ke,te]=_.useState(null),be=_.useRef(0),[ve,je]=_.useState({leaveType:"",fromDate:"",toDate:"",reason:""}),[Ye,K]=_.useState({}),Ne=X=>(X instanceof Date||(X=new Date(X)),Number.isNaN(X.getTime())?null:X.toISOString().slice(0,10)),Pe=X=>{if(!X||!X.start)return null;const Ae=X.start,De=Ae.date||Ae.dateTime||Ae?.dateTime;if(!De)return null;const Qe=new Date(De);return Number.isNaN(Qe.getTime())?null:Ne(Qe)},Xe=async X=>{if(Ee[X])return Ee[X];try{const Ae="AIzaSyBG-v7rJFHD3hgzTW802GaGTa-gA_n3J3A",De=`${X}-01-01T00:00:00Z`,Qe=`${X}-12-31T23:59:59Z`,At=`https://www.googleapis.com/calendar/v3/calendars/en.indian%23holiday%40group.v.calendar.google.com/events?key=${Ae}&timeMin=${De}&timeMax=${Qe}&maxResults=500`,js=((await(await fetch(At)).json()).items||[]).filter(Us=>{const _s=(Us.summary||"").toLowerCase(),xn=(Us.description||"").toLowerCase(),ms=(Us.visibility||"").toLowerCase();return!!(xn.includes("public holiday")||_s.includes("holiday")||ms==="public"&&!xn.includes("observance"))}),yn=new Set;return js.forEach(Us=>{const _s=Pe(Us);_s&&yn.add(_s)}),Le(Us=>({...Us,[X]:yn})),yn}catch(Ae){return console.error("Error fetching Indian holidays for year",X,Ae),Le(De=>({...De,[X]:new Set})),new Set}},wt=async(X,Ae)=>{$e(!0);const De=++be.current;try{const Qe=new Date(X),At=new Date(Ae);if(Number.isNaN(Qe.getTime())||Number.isNaN(At.getTime())||Qe>At)return 0;const bt=new Set,Nt=Qe.getFullYear(),tn=At.getFullYear();for(let ms=Nt;ms<=tn;ms++)bt.add(ms);const js={};for(const ms of bt)js[ms]=await Xe(ms);const yn=ms=>{const bn=Ne(ms);if(!bn)return!1;const Mn=new Date(ms).getFullYear(),wa=js[Mn];return wa?wa.has(bn):!1};let Us=0;const _s=new Date(Qe);_s.setHours(0,0,0,0);const xn=new Date(At);for(xn.setHours(0,0,0,0);_s<=xn;){const bn=_s.getDay()===0,Mn=yn(_s);!bn&&!Mn&&Us++,_s.setDate(_s.getDate()+1)}return De===be.current&&te(Us),Us}catch(Qe){return console.error("Error calculating working days:",Qe),De===be.current&&te(null),0}finally{$e(!1)}},qt=async()=>{try{const Ae=(await ye.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${n}`}})).data.filter(De=>De.isActive);v(Ae),Ae.length>0&&!ve.leaveType&&je(De=>({...De,leaveType:Ae[0].name}))}catch(X){console.error("Error fetching leave types:",X),Ze.error("Failed to fetch leave types")}},oe=async()=>{I(!0);try{const Ae=(await ye.get("/leave/requests",{headers:{Authorization:`Bearer ${n}`}})).data.filter(De=>De.employee?.role==="employee");l(Ae),m(Ae)}catch(X){console.error("Error fetching employee leave requests:",X),Ze.error("Failed to fetch employee leave requests")}finally{I(!1)}},Se=async()=>{try{const X=await ye.get("/leave/my-requests",{headers:{Authorization:`Bearer ${n}`}});u(X.data)}catch(X){console.error("Error fetching my leave requests:",X),Ze.error("Failed to fetch your leave requests")}},_e=async()=>{try{const X=await ye.get("/leave/balance",{headers:{Authorization:`Bearer ${n}`}});y(X.data.balance||{})}catch(X){console.error("Error fetching leave balance:",X),Ze.error("Failed to fetch leave balance")}};_.useEffect(()=>{n&&(qt(),_e(),t==="employeeLeaves"?oe():Se(),Xe(new Date().getFullYear()).then(()=>{}))},[n,t]),_.useEffect(()=>{if(t!=="employeeLeaves")return;let X=i;if(ce){const Ae=ce.toLowerCase();X=X.filter(De=>De.employee?.email?.toLowerCase().includes(Ae)||De.leaveType?.toLowerCase().includes(Ae)||De.reason?.toLowerCase().includes(Ae))}L!=="all"&&(X=X.filter(Ae=>Ae.status===L)),$!=="all"&&(X=X.filter(Ae=>Ae.leaveType===$)),m(X),G(1)},[ce,L,$,i,t]);const Ue=X=>{let Ae="ascending";re.key===X&&re.direction==="ascending"&&(Ae="descending"),xe({key:X,direction:Ae});const De=[...h].sort((Qe,At)=>{let bt,Nt;if(X.includes(".")){const tn=X.split(".");bt=tn.reduce((js,yn)=>js&&js[yn],Qe),Nt=tn.reduce((js,yn)=>js&&js[yn],At)}else bt=Qe[X],Nt=At[X];return bt==null?1:Nt==null?-1:bt<Nt?Ae==="ascending"?-1:1:bt>Nt?Ae==="ascending"?1:-1:0});m(De)},dt=M*de,Qt=dt-de,Qn=h.slice(Qt,dt),Rt=Math.ceil(h.length/de),en=async()=>{const X={},Ae=new Date().setHours(0,0,0,0),De=new Date(ve.fromDate).setHours(0,0,0,0);if(ve.leaveType||(X.leaveType="Leave type is required"),ve.fromDate||(X.fromDate="From date is required"),ve.toDate||(X.toDate="To date is required"),ve.fromDate&&ve.toDate){new Date(ve.fromDate)>new Date(ve.toDate)&&(X.toDate="To date cannot be before from date"),De<Ae&&(X.fromDate="Cannot apply for backdated leaves");const Qe=await wt(ve.fromDate,ve.toDate),At=p[ve.leaveType]??0;At<Qe&&(X.leaveType=`Insufficient ${ve.leaveType} leave balance! You have ${At} days left.`)}return ve.reason?.trim()||(X.reason="Reason is required"),ve.reason?.length>500&&(X.reason="Reason cannot exceed 500 characters"),K(X),Object.keys(X).length===0},Hs=X=>{const{name:Ae,value:De}=X.target;je(Qe=>({...Qe,[Ae]:De})),Ye[Ae]&&K(Qe=>({...Qe,[Ae]:""}))};_.useEffect(()=>((async()=>{ve.fromDate&&ve.toDate?(te(null),await wt(ve.fromDate,ve.toDate)):te(null)})(),()=>{}),[ve.fromDate,ve.toDate]);const vs=X=>{const{name:Ae,value:De}=X.target;je(Qe=>({...Qe,[Ae]:De})),Ye[Ae]&&K(Qe=>({...Qe,[Ae]:""}))},pn=async X=>{if(X.preventDefault(),!ee&&await en()){z(!0);try{const Ae=await wt(ve.fromDate,ve.toDate),De={...ve,totalDays:Ae};await ye.post("/leave/create",De,{headers:{Authorization:`Bearer ${n}`}}),Ze.success("Leave applied successfully!"),C(!1),je({leaveType:x[0]?.name||"",fromDate:"",toDate:"",reason:""}),K({}),_e(),Se()}catch(Ae){console.error("Error applying for leave:",Ae);const De=Ae.response?.data?.message||"Error applying leave. Please try again.";Ze.error(De)}finally{z(!1)}}},zs=async(X,Ae)=>{try{await ye.post(`/leave/${X}/review`,{action:Ae,reason:S||`${Ae}ed by HR`},{headers:{Authorization:`Bearer ${n}`}}),A(null),N(""),D(!1),oe(),_e(),Ze.success(`Leave ${Ae}ed successfully!`)}catch(De){console.error("Error updating leave:",De);const Qe=De.response?.data?.message||"Error processing leave request.";Ze.error(Qe)}},ii=async X=>{if(!Z){W(!0);try{await ye.put(`/leave/requests/${X}/cancel`,{},{headers:{Authorization:`Bearer ${n}`}}),Ze.success("Leave cancelled successfully!"),Se(),_e()}catch(Ae){console.error("Error cancelling leave:",Ae),Ze.error(Ae.response?.data?.message||"Error cancelling leave")}finally{W(!1)}}},ri=()=>{me(""),V("all"),H("all"),m(i)},gn=({status:X})=>{const Ae={approved:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",icon:Os},pending:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",icon:mn},rejected:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",icon:Nn},cancelled:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-200",icon:Nn}},De=Ae[X]||Ae.pending,Qe=De.icon;return r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${De.bg} ${De.text} ${De.border}`,children:[r.jsx(Qe,{size:12,className:"mr-1"}),X]})},Ji=X=>{switch(X){case"sick":return r.jsx(qd,{size:16,className:"text-red-400 mr-2"});case"casual":return r.jsx(Ud,{size:16,className:"text-purple-400 mr-2"});case"paid":return r.jsx(Os,{size:16,className:"text-green-400 mr-2"});default:return r.jsx(Ks,{size:16,className:"text-blue-400 mr-2"})}},Fs=X=>X.replace(/_/g," ").replace(/\b\w/g,Ae=>Ae.toUpperCase()),er=({title:X,value:Ae,subtitle:De,icon:Qe,color:At})=>r.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Ae}),r.jsx("p",{className:"text-sm font-medium text-gray-600",children:X}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:De})]}),r.jsx("div",{className:`p-3 rounded-full ${At}`,children:r.jsx(Qe,{size:24,className:"text-white"})})]})}),li=(()=>{const X=new Date().getMonth(),Ae=new Date().getFullYear(),De=i.filter(Qe=>{const At=new Date(Qe.fromDate);return At.getMonth()===X&&At.getFullYear()===Ae});return{total:De.length,pending:De.filter(Qe=>Qe.status==="pending").length,approved:De.filter(Qe=>Qe.status==="approved").length,rejected:De.filter(Qe=>Qe.status==="rejected").length}})();return r.jsxs("div",{className:"p-4 md:p-6 space-y-6 bg-gray-50 min-h-[80vh]",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"HR Leave Management"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsxs("button",{className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-all duration-200 text-sm md:text-base",onClick:()=>{_e(),t==="employeeLeaves"?oe():Se()},children:[r.jsx(zi,{size:18,className:"mr-2"})," Refresh"]})})]}),r.jsx("div",{className:"bg-white rounded-xl p-1 shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex",children:[r.jsx("button",{className:`flex-1 py-3 px-4 text-center font-medium rounded-lg transition-all duration-200 text-sm md:text-base ${t==="employeeLeaves"?"bg-[#104774] text-white shadow":"text-gray-600 hover:text-[#104774]"}`,onClick:()=>s("employeeLeaves"),children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(Vd,{size:18,className:"mr-2"}),"Employee Leaves"]})}),r.jsx("button",{className:`flex-1 py-3 px-4 text-center font-medium rounded-lg transition-all duration-200 text-sm md:text-base ${t==="myLeaves"?"bg-[#104774] text-white shadow":"text-gray-600 hover:text-[#104774]"}`,onClick:()=>s("myLeaves"),children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(xo,{size:18,className:"mr-2"}),"My Leaves"]})})]})}),t==="employeeLeaves"&&r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[r.jsx(er,{title:"Total Requests",value:li.total,subtitle:"This Month",icon:Ks,color:"bg-blue-500"}),r.jsx(er,{title:"Pending",value:li.pending,subtitle:"Require Action",icon:mn,color:"bg-yellow-500"}),r.jsx(er,{title:"Approved",value:li.approved,subtitle:"This month",icon:Os,color:"bg-green-500"}),r.jsx(er,{title:"Rejected",value:li.rejected,subtitle:"Leaves",icon:Nn,color:"bg-red-500"})]}),t==="myLeaves"&&r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-4",children:Object.entries(p).map(([X,Ae])=>r.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-all duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${X==="sick"?"bg-red-300":X==="casual"?"bg-purple-300":"bg-green-400"}`}),r.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:Fs(X)})]}),X==="sick"?r.jsx(qd,{size:18,className:"text-red-300"}):X==="casual"?r.jsx(Ud,{size:18,className:"text-purple-300"}):r.jsx(Os,{size:18,className:"text-green-400"})]}),r.jsxs("div",{className:"text-2xl font-bold text-gray-800 mb-2",children:[Ae," ",r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"days left"})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:r.jsx("div",{className:`h-2 rounded-full ${X==="sick"?"bg-red-300":X==="casual"?"bg-purple-300":"bg-green-400"}`,style:{width:`${Math.min(Ae/10*100,100)}%`}})}),r.jsxs("div",{className:"text-xs text-gray-500",children:["As of ",new Date().toLocaleDateString()]})]},X))}),t==="employeeLeaves"&&r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(kp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search by employee, type, or reason...",value:ce,onChange:X=>me(X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm md:text-base"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:()=>we(!ge),className:"flex items-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 md:hidden text-sm",children:[r.jsx(rA,{size:16,className:"mr-2"}),"Filters"]}),r.jsxs("div",{className:`${ge?"flex":"hidden"} md:flex flex-col md:flex-row gap-2 w-full md:w-auto`,children:[r.jsxs("select",{value:L,onChange:X=>V(X.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm md:text-base",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("select",{value:$,onChange:X=>H(X.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm md:text-base",children:[r.jsx("option",{value:"all",children:"All Types"}),x.map(X=>r.jsx("option",{value:X.name,children:Fs(X.name)},X._id))]}),r.jsx("button",{onClick:ri,className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm md:text-base",children:"Reset"})]})]})]}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Showing ",h.length," of ",i.length," ","requests"]})]}),t==="employeeLeaves"?r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center space-x-3",children:[r.jsx(Vd,{size:24,className:"text-[#104774]"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Employee Leave Requests"})]}),F?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(zi,{className:"animate-spin mx-auto text-[#104774]",size:32}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading employee leave requests..."})]}):h.length===0?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-gray-500",children:"No employee leave requests found"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[350px] overflow-y-auto border border-gray-200 rounded-lg shadow-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase cursor-pointer select-none",onClick:()=>Ue("employee.email"),children:["Employee"," ",re.key==="employee.email"&&(re.direction==="ascending"?r.jsx(fo,{size:14,className:"inline"}):r.jsx(ho,{size:14,className:"inline"}))]}),r.jsxs("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase cursor-pointer select-none",onClick:()=>Ue("leaveType"),children:["Type"," ",re.key==="leaveType"&&(re.direction==="ascending"?r.jsx(fo,{size:14,className:"inline"}):r.jsx(ho,{size:14,className:"inline"}))]}),r.jsxs("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase cursor-pointer select-none",onClick:()=>Ue("fromDate"),children:["From"," ",re.key==="fromDate"&&(re.direction==="ascending"?r.jsx(fo,{size:14,className:"inline"}):r.jsx(ho,{size:14,className:"inline"}))]}),r.jsxs("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase cursor-pointer select-none",onClick:()=>Ue("toDate"),children:["To"," ",re.key==="toDate"&&(re.direction==="ascending"?r.jsx(fo,{size:14,className:"inline"}):r.jsx(ho,{size:14,className:"inline"}))]}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase",children:"Days"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Qn.map((X,Ae)=>{const De=X.currentRemaining?.[X.leaveType]>=X.totalDays;return r.jsxs(Eo.Fragment,{children:[r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"bg-gray-200 rounded-full p-1 mr-2",children:r.jsx(cA,{size:14,className:"text-gray-600"})}),X.employee?.email||"N/A"]})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsxs("div",{className:"flex items-center gap-1",children:[Ji(X.leaveType),r.jsx("span",{className:"capitalize",children:Fs(X.leaveType)})]})}),r.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(X.fromDate).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(X.toDate).toLocaleDateString()}),r.jsx("td",{className:"px-4 py-3 text-sm",children:X.totalDays}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(gn,{status:X.status})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("div",{className:"flex space-x-2 items-center",children:[r.jsx("button",{className:"text-[#104774] hover:text-[#0d3a61] p-1 rounded",onClick:()=>q(T===X._id?null:X._id),title:"View Details",children:r.jsx(Co,{size:16})}),X.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"text-green-600 hover:text-green-800 p-1 rounded",onClick:()=>{A(X),B("approve"),D(!0)},title:"Approve",children:r.jsx(Os,{size:16})}),r.jsx("button",{className:"text-red-600 hover:text-red-800 p-1 rounded",onClick:()=>{A(X),B("reject"),D(!0)},title:"Reject",children:r.jsx(Nn,{size:16})})]})]})})]}),T===X._id&&r.jsx("tr",{className:"bg-gray-50",children:r.jsx("td",{colSpan:7,className:"p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Request Details"}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",X.reason||"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Applied On:"})," ",new Date(X.appliedAt).toLocaleString()]}),X.processedBy&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Processed By:"})," ",X.processedBy?.email||"Admin"]}),X.processedAt&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Processed At:"})," ",new Date(X.processedAt).toLocaleString()]}),X.remarks&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Remarks:"})," ",X.remarks]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Balance Information"}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Remaining at request:"})," ",X.balanceSnapshot?.remaining?.[X.leaveType]??"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Current remaining:"})," ",X.currentRemaining?.[X.leaveType]??"-"]}),!De&&r.jsxs("p",{className:"text-red-600 font-medium mt-2 flex items-center",children:[r.jsx(as,{size:14,className:"inline mr-1"}),"Insufficient balance for this request"]})]})]})})})]},X._id)})})]})})}),Rt>1&&r.jsxs("div",{className:"p-4 border-t border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-3",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",Qt+1," to"," ",Math.min(dt,h.length)," of"," ",h.length," entries"]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>G(X=>Math.max(X-1,1)),disabled:M===1,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Prev"}),Array.from({length:Math.min(5,Rt)},(X,Ae)=>{let De;return Rt<=5||M<=3?De=Ae+1:M>=Rt-2?De=Rt-4+Ae:De=M-2+Ae,r.jsx("button",{onClick:()=>G(De),className:`px-2 py-1 rounded border text-sm ${M===De?"bg-[#104774] text-white border-[#104774]":"border-gray-300"}`,children:De},De)}),r.jsx("button",{onClick:()=>G(X=>Math.min(X+1,Rt)),disabled:M===Rt,className:"px-2 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:"Next"})]})]})]})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(xo,{size:24,className:"text-[#104774]"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"My Leave Requests"})]}),r.jsxs("button",{className:"flex items-center bg-[#104774] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#0d3a61] transition-all duration-200 text-sm md:text-base",onClick:()=>C(!0),children:[r.jsx(Pi,{size:18,className:"mr-2"})," Apply For Leave"]})]}),c.length===0?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-gray-500",children:"No leave requests found. Apply for your first leave!"})}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{className:"bg-[#104774] text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Date Range"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Type"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Days"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm hidden md:table-cell",children:"Reason"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Status"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm hidden lg:table-cell",children:"Applied On"}),r.jsx("th",{className:"p-3 text-left font-medium text-sm",children:"Actions"})]})}),r.jsx("tbody",{children:c.map(X=>{X.currentRemaining&&X.currentRemaining[X.leaveType]>=X.totalDays;const Ae=De=>De?new Date(De).toLocaleDateString("en-GB",{day:"numeric",month:"short"}):"-";return r.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"p-3 font-medium text-gray-800 text-sm",children:`${Ae(X.fromDate)} to ${Ae(X.toDate)}`}),r.jsx("td",{className:"p-3 text-sm",children:r.jsxs("div",{className:"flex items-center gap-1",children:[Ji(X.leaveType),r.jsx("span",{className:"capitalize",children:Fs(X.leaveType)})]})}),r.jsx("td",{className:"p-3 text-sm",children:X.totalDays}),r.jsxs("td",{className:"p-3 text-gray-600 text-sm hidden md:table-cell max-w-xs truncate cursor-pointer relative group",title:X.reason,children:[X.reason||"-",X.reason&&r.jsx("div",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-md px-3 py-2 w-64 z-20 -top-1 left-1/2 -translate-x-1/2 shadow-lg",children:X.reason})]}),r.jsx("td",{className:"p-3",children:r.jsx(gn,{status:X.status})}),r.jsx("td",{className:"p-3 text-gray-600 text-sm hidden lg:table-cell",children:new Date(X.appliedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),r.jsx("td",{className:"p-3",children:X.status==="pending"&&r.jsxs("button",{onClick:()=>ii(X._id),disabled:Z,className:"flex items-center text-red-600 hover:text-red-800 text-xs font-medium disabled:opacity-50",children:[r.jsx(Mp,{size:12,className:"mr-1"}),Z?"...":"Cancel"]})})]},X._id)})})]})})]}),j&&r.jsx("div",{className:"fixed inset-0  bg-opacity-40 backdrop-blur-xs flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl p-4 w-full max-w-md relative max-h-[90vh] overflow-y-auto",children:[r.jsx("button",{onClick:()=>{C(!1),K({})},className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600",children:r.jsx(qo,{size:20})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Apply for Leave"}),ve.leaveType&&p[ve.leaveType]!==void 0&&r.jsx("div",{className:"bg-blue-50 p-3 rounded-lg mb-4",children:r.jsxs("p",{className:"text-blue-800 font-medium text-sm",children:["Available ",Fs(ve.leaveType)," leave:"," ",p[ve.leaveType]," days"]})}),r.jsxs("form",{onSubmit:pn,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"Leave Type"}),r.jsxs("select",{name:"leaveType",value:ve.leaveType,onChange:Hs,className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",required:!0,children:[r.jsx("option",{value:"",children:"Select Leave Type"}),x.map(X=>r.jsx("option",{value:X.name,children:Fs(X.name)},X._id))]}),Ye.leaveType&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",Ye.leaveType]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"From Date"}),r.jsx("input",{type:"date",name:"fromDate",value:ve.fromDate,onChange:vs,min:new Date().toISOString().split("T")[0],className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",required:!0}),Ye.fromDate&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",Ye.fromDate]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"To Date"}),r.jsx("input",{type:"date",name:"toDate",value:ve.toDate,onChange:vs,min:ve.fromDate||new Date().toISOString().split("T")[0],className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",required:!0}),Ye.toDate&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",Ye.toDate]})]})]}),ve.fromDate&&ve.toDate&&r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsx("p",{className:"text-gray-700 font-medium text-sm",children:he?"Calculating...":`Working Days: ${ke??0}`}),r.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"(Excludes Sundays and Indian public holidays)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-1 font-medium text-sm",children:"Reason"}),r.jsx("textarea",{name:"reason",value:ve.reason,onChange:Hs,rows:3,className:"w-full border rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",placeholder:"Please provide a reason for your leave",required:!0}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ve.reason.length,"/500 characters"]}),Ye.reason&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"})," ",Ye.reason]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{C(!1),K({})},className:"px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 text-sm",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:ee,className:"px-3 py-2 rounded-lg bg-[#104774] text-white hover:bg-[#0d3a61] disabled:opacity-50 text-sm",children:ee?"Submitting...":"Submit"})]})]})]})}),R&&w&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl w-full max-w-md",children:[r.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[O==="approve"?"Approve":"Reject"," Leave Request"]}),r.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Employee:"})," ",w.employee?.email]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Type:"})," ",Fs(w.leaveType)]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Duration:"})," ",w.totalDays," days"]}),r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Reason:"})," ",w.reason||"-"]}),w.currentRemaining&&r.jsxs("p",{className:`text-sm mt-2 ${w.currentRemaining[w.leaveType]<w.totalDays?"text-red-600 font-medium":""}`,children:[r.jsx("strong",{children:"Remaining Balance:"})," ",w.currentRemaining[w.leaveType],"/",w.balanceSnapshot?.remaining[w.leaveType],w.currentRemaining[w.leaveType]<w.totalDays&&r.jsx("span",{className:"ml-1",children:"(Insufficient balance)"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Remarks (Optional)"}),r.jsx("textarea",{value:S,onChange:X=>N(X.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",rows:"3",placeholder:"Add remarks for this action..."})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 transition-colors text-sm",onClick:()=>{D(!1),N("")},children:"Cancel"}),r.jsx("button",{className:`px-3 py-2 rounded-lg text-white transition-colors text-sm ${O==="approve"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,onClick:()=>zs(w._id,O),children:O==="approve"?"Approve":"Reject"})]})]})})]})},RS=6048e5,N3=864e5,cw=Symbol.for("constructDateFrom");function si(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&cw in n?n[cw](e):n instanceof Date?new n.constructor(e):new Date(e)}function kn(n,e){return si(e||n,n)}let E3={};function Iu(){return E3}function Io(n,e){const t=Iu(),s=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=kn(n,e?.in),l=i.getDay(),c=(l<s?7:0)+l-s;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function ou(n,e){return Io(n,{...e,weekStartsOn:1})}function kS(n,e){const t=kn(n,e?.in),s=t.getFullYear(),i=si(t,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const l=ou(i),c=si(t,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const u=ou(c);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function dw(n){const e=kn(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function j3(n,...e){const t=si.bind(null,e.find(s=>typeof s=="object"));return e.map(t)}function uw(n,e){const t=kn(n,e?.in);return t.setHours(0,0,0,0),t}function _3(n,e,t){const[s,i]=j3(t?.in,n,e),l=uw(s),c=uw(i),u=+l-dw(l),h=+c-dw(c);return Math.round((u-h)/N3)}function C3(n,e){const t=kS(n,e),s=si(n,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),ou(s)}function T3(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function D3(n){return!(!T3(n)&&typeof n!="number"||isNaN(+kn(n)))}function R3(n,e){const t=kn(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const k3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},M3=(n,e,t)=>{let s;const i=k3[n];return typeof i=="string"?s=i:e===1?s=i.one:s=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function Pm(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const L3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},O3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P3={date:Pm({formats:L3,defaultWidth:"full"}),time:Pm({formats:O3,defaultWidth:"full"}),dateTime:Pm({formats:I3,defaultWidth:"full"})},B3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},H3=(n,e,t,s)=>B3[n];function co(n){return(e,t)=>{const s=t?.context?String(t.context):"standalone";let i;if(s==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,u=t?.width?String(t.width):c;i=n.formattingValues[u]||n.formattingValues[c]}else{const c=n.defaultWidth,u=t?.width?String(t.width):n.defaultWidth;i=n.values[u]||n.values[c]}const l=n.argumentCallback?n.argumentCallback(e):e;return i[l]}}const z3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},U3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},q3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},V3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},G3=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Y3={ordinalNumber:G3,era:co({values:z3,defaultWidth:"wide"}),quarter:co({values:F3,defaultWidth:"wide",argumentCallback:n=>n-1}),month:co({values:U3,defaultWidth:"wide"}),day:co({values:q3,defaultWidth:"wide"}),dayPeriod:co({values:V3,defaultWidth:"wide",formattingValues:$3,defaultFormattingWidth:"wide"})};function uo(n){return(e,t={})=>{const s=t.width,i=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],l=e.match(i);if(!l)return null;const c=l[0],u=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(u)?X3(u,y=>y.test(c)):W3(u,y=>y.test(c));let m;m=n.valueCallback?n.valueCallback(h):h,m=t.valueCallback?t.valueCallback(m):m;const p=e.slice(c.length);return{value:m,rest:p}}}function W3(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function X3(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Q3(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const i=s[0],l=e.match(n.parsePattern);if(!l)return null;let c=n.valueCallback?n.valueCallback(l[0]):l[0];c=t.valueCallback?t.valueCallback(c):c;const u=e.slice(i.length);return{value:c,rest:u}}}const Z3=/^(\d+)(th|st|nd|rd)?/i,K3=/\d+/i,J3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},eI={any:[/^b/i,/^(a|c)/i]},tI={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sI={any:[/1/i,/2/i,/3/i,/4/i]},nI={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aI={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iI={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rI={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lI={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oI={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},cI={ordinalNumber:Q3({matchPattern:Z3,parsePattern:K3,valueCallback:n=>parseInt(n,10)}),era:uo({matchPatterns:J3,defaultMatchWidth:"wide",parsePatterns:eI,defaultParseWidth:"any"}),quarter:uo({matchPatterns:tI,defaultMatchWidth:"wide",parsePatterns:sI,defaultParseWidth:"any",valueCallback:n=>n+1}),month:uo({matchPatterns:nI,defaultMatchWidth:"wide",parsePatterns:aI,defaultParseWidth:"any"}),day:uo({matchPatterns:iI,defaultMatchWidth:"wide",parsePatterns:rI,defaultParseWidth:"any"}),dayPeriod:uo({matchPatterns:lI,defaultMatchWidth:"any",parsePatterns:oI,defaultParseWidth:"any"})},dI={code:"en-US",formatDistance:M3,formatLong:P3,formatRelative:H3,localize:Y3,match:cI,options:{weekStartsOn:0,firstWeekContainsDate:1}};function uI(n,e){const t=kn(n,e?.in);return _3(t,R3(t))+1}function hI(n,e){const t=kn(n,e?.in),s=+ou(t)-+C3(t);return Math.round(s/RS)+1}function MS(n,e){const t=kn(n,e?.in),s=t.getFullYear(),i=Iu(),l=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=si(e?.in||n,0);c.setFullYear(s+1,0,l),c.setHours(0,0,0,0);const u=Io(c,e),h=si(e?.in||n,0);h.setFullYear(s,0,l),h.setHours(0,0,0,0);const m=Io(h,e);return+t>=+u?s+1:+t>=+m?s:s-1}function fI(n,e){const t=Iu(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=MS(n,e),l=si(e?.in||n,0);return l.setFullYear(i,0,s),l.setHours(0,0,0,0),Io(l,e)}function mI(n,e){const t=kn(n,e?.in),s=+Io(t,e)-+fI(t,e);return Math.round(s/RS)+1}function ft(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const Va={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return ft(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):ft(t+1,2)},d(n,e){return ft(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ft(n.getHours()%12||12,e.length)},H(n,e){return ft(n.getHours(),e.length)},m(n,e){return ft(n.getMinutes(),e.length)},s(n,e){return ft(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),i=Math.trunc(s*Math.pow(10,t-3));return ft(i,e.length)}},Pr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hw={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),i=s>0?s:1-s;return t.ordinalNumber(i,{unit:"year"})}return Va.y(n,e)},Y:function(n,e,t,s){const i=MS(n,s),l=i>0?i:1-i;if(e==="YY"){const c=l%100;return ft(c,2)}return e==="Yo"?t.ordinalNumber(l,{unit:"year"}):ft(l,e.length)},R:function(n,e){const t=kS(n);return ft(t,e.length)},u:function(n,e){const t=n.getFullYear();return ft(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return ft(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return ft(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return Va.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return ft(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const i=mI(n,s);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):ft(i,e.length)},I:function(n,e,t){const s=hI(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):ft(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Va.d(n,e)},D:function(n,e,t){const s=uI(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):ft(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const i=n.getDay(),l=(i-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return ft(l,2);case"eo":return t.ordinalNumber(l,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const i=n.getDay(),l=(i-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return ft(l,e.length);case"co":return t.ordinalNumber(l,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),i=s===0?7:s;switch(e){case"i":return String(i);case"ii":return ft(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let i;switch(s===12?i=Pr.noon:s===0?i=Pr.midnight:i=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let i;switch(s>=17?i=Pr.evening:s>=12?i=Pr.afternoon:s>=4?i=Pr.morning:i=Pr.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Va.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Va.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):ft(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):ft(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Va.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Va.s(n,e)},S:function(n,e){return Va.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return mw(s);case"XXXX":case"XX":return Ci(s);case"XXXXX":case"XXX":default:return Ci(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return mw(s);case"xxxx":case"xx":return Ci(s);case"xxxxx":case"xxx":default:return Ci(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+fw(s,":");case"OOOO":default:return"GMT"+Ci(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+fw(s,":");case"zzzz":default:return"GMT"+Ci(s,":")}},t:function(n,e,t){const s=Math.trunc(+n/1e3);return ft(s,e.length)},T:function(n,e,t){return ft(+n,e.length)}};function fw(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=Math.trunc(s/60),l=s%60;return l===0?t+String(i):t+String(i)+e+ft(l,2)}function mw(n,e){return n%60===0?(n>0?"-":"+")+ft(Math.abs(n)/60,2):Ci(n,e)}function Ci(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),i=ft(Math.trunc(s/60),2),l=ft(s%60,2);return t+i+e+l}const pw=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},LS=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},pI=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],i=t[2];if(!i)return pw(n,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",pw(s,e)).replace("{{time}}",LS(i,e))},gI={p:LS,P:pI},yI=/^D+$/,xI=/^Y+$/,bI=["D","DD","YY","YYYY"];function vI(n){return yI.test(n)}function wI(n){return xI.test(n)}function AI(n,e,t){const s=SI(n,e,t);if(console.warn(s),bI.includes(n))throw new RangeError(s)}function SI(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const NI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,EI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jI=/^'([^]*?)'?$/,_I=/''/g,CI=/[a-zA-Z]/;function yo(n,e,t){const s=Iu(),i=s.locale??dI,l=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,u=kn(n,t?.in);if(!D3(u))throw new RangeError("Invalid time value");let h=e.match(EI).map(p=>{const y=p[0];if(y==="p"||y==="P"){const x=gI[y];return x(p,i.formatLong)}return p}).join("").match(NI).map(p=>{if(p==="''")return{isToken:!1,value:"'"};const y=p[0];if(y==="'")return{isToken:!1,value:TI(p)};if(hw[y])return{isToken:!0,value:p};if(y.match(CI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:p}});i.localize.preprocessor&&(h=i.localize.preprocessor(u,h));const m={firstWeekContainsDate:l,weekStartsOn:c,locale:i};return h.map(p=>{if(!p.isToken)return p.value;const y=p.value;(wI(y)||vI(y))&&AI(y,e,String(n));const x=hw[y[0]];return x(u,y,i.localize,m)}).join("")}function TI(n){const e=n.match(jI);return e?e[1].replace(_I,"'"):n}const DI=()=>{const{token:n}=ls(),[e,t]=_.useState([]),[s,i]=_.useState([]),[l,c]=_.useState([]),[u,h]=_.useState([]),[m,p]=_.useState({total:0,pending:0,approved:0,rejected:0}),[y,x]=_.useState({role:"employee",year:new Date().getFullYear(),leaves:{}}),[v,w]=_.useState({name:"",isActive:!0}),[A,S]=_.useState(null),[N,j]=_.useState(null),[C,R]=_.useState(null),[D,O]=_.useState(""),[B,F]=_.useState(!1),[I,ee]=_.useState(""),[z,Z]=_.useState("pending"),[W,ce]=_.useState("all"),[me,L]=_.useState(null),[V,$]=_.useState(1),[H]=_.useState(10),[T,q]=_.useState({key:null,direction:"ascending"}),[M,G]=_.useState(!1),de=async()=>{F(!0);try{const[K,Ne,Pe]=await Promise.all([ye.get("/leave/requests",{headers:{Authorization:`Bearer ${n}`}}),ye.get("/leave/policies",{headers:{Authorization:`Bearer ${n}`}}),ye.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${n}`}})]);t(K.data),i(K.data),c(Ne.data),h(Pe.data);const Xe=new Date().getMonth(),wt=new Date().getFullYear(),qt=K.data.filter(oe=>{const Se=new Date(oe.fromDate);return Se.getMonth()===Xe&&Se.getFullYear()===wt});p({total:qt.length,pending:qt.filter(oe=>oe.status==="pending").length,approved:qt.filter(oe=>oe.status==="approved").length,rejected:qt.filter(oe=>oe.status==="rejected").length})}catch(K){console.error("Error fetching data:",K)}finally{F(!1)}};_.useEffect(()=>{n&&de()},[n]),_.useEffect(()=>{let K=e;I&&(K=K.filter(Ne=>Ne.employee?.email?.toLowerCase().includes(I.toLowerCase())||Ne.leaveType?.toLowerCase().includes(I.toLowerCase())||Ne.reason?.toLowerCase().includes(I.toLowerCase()))),z!=="all"&&(K=K.filter(Ne=>Ne.status===z)),W!=="all"&&(K=K.filter(Ne=>Ne.leaveType===W)),i(K),$(1)},[I,z,W,e]);const re=V*H,xe=re-H,Ee=s.slice(xe,re),Le=Math.ceil(s.length/H),he=async(K,Ne)=>{try{await ye.post(`/leave/${K}/review`,{action:Ne,reason:D||`${Ne}ed by admin`},{headers:{Authorization:`Bearer ${n}`}}),S(null),O(""),de(),document.getElementById("actionModal").classList.add("hidden")}catch(Pe){console.error("Error updating leave:",Pe)}},$e=async K=>{K.preventDefault();try{await ye.post("/leave/create-leave-policy",y,{headers:{Authorization:`Bearer ${n}`}}),de(),x({role:"employee",year:new Date().getFullYear(),leaves:{}}),document.getElementById("policyModal").classList.add("hidden")}catch(Ne){console.error("Error setting leave policy:",Ne)}},ge=K=>{j(K);const Ne={};K.leaves instanceof Map?K.leaves.forEach((Pe,Xe)=>{Ne[Xe]=Pe}):Object.assign(Ne,K.leaves),x({role:K.role,year:K.year,leaves:Ne}),document.getElementById("policyModal").classList.remove("hidden")},we=async K=>{K.preventDefault();try{C?await ye.put(`/leave/update-leaveType/${C._id}`,{name:v.name},{headers:{Authorization:`Bearer ${n}`}}):await ye.post("/leave/create-leaveType",{name:v.name},{headers:{Authorization:`Bearer ${n}`}}),w({name:"",isActive:!0}),R(null),de(),document.getElementById("leaveTypeModal").classList.add("hidden")}catch(Ne){console.error("Error creating/updating leave type:",Ne)}},ke=async K=>{try{await ye.delete(`/leave/delete-leaveType/${K}`,{headers:{Authorization:`Bearer ${n}`}}),de()}catch(Ne){console.error("Error deleting leave type:",Ne)}},te=async K=>{try{await ye.patch(`/leave/toggle-leaveType-status/${K}`,{},{headers:{Authorization:`Bearer ${n}`}}),de()}catch(Ne){console.error("Error toggling leave type status:",Ne)}},be=K=>{R(K),w({name:K.name,isActive:K.isActive}),document.getElementById("leaveTypeModal").classList.remove("hidden")},ve=({status:K})=>{const Ne={approved:{bg:"bg-green-100",text:"text-green-700",border:"border-green-200",icon:Os},pending:{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-200",icon:mn},rejected:{bg:"bg-red-100",text:"text-red-700",border:"border-red-200",icon:Nn},cancelled:{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-200",icon:Nn}},Pe=Ne[K]||Ne.pending,Xe=Pe.icon;return r.jsxs("span",{className:`flex items-center px-3 py-1 rounded-full text-xs font-medium ${Pe.bg} ${Pe.text} ${Pe.border}`,children:[r.jsx(Xe,{size:12,className:"mr-1"}),K]})},je=({title:K,value:Ne,subtitle:Pe,icon:Xe,color:wt})=>r.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Ne}),r.jsx("p",{className:"text-sm font-medium text-gray-600",children:K}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Pe})]}),r.jsx("div",{className:`p-3 rounded-full ${wt}`,children:r.jsx(Xe,{size:24,className:"text-white"})})]})}),Ye=u.filter(K=>K.isActive);return r.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-4 md:p-6 bg-gray-50 h-[70vh]",children:[r.jsxs("div",{className:"md:hidden flex justify-between items-center mb-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Leave Management"}),r.jsx("button",{onClick:()=>G(!M),className:"p-2 rounded-lg bg-[#104774] text-white",children:M?r.jsx(qo,{size:24}):r.jsx(oA,{size:24})})]}),r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("div",{className:"hidden md:flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Leave Management"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{className:"flex items-center bg-[#104774] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#0d3a61] transition-all duration-200",onClick:()=>{j(null),document.getElementById("policyModal").classList.remove("hidden")},children:[r.jsx(Pi,{size:18,className:"mr-2"})," Set Policy"]}),r.jsxs("button",{className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-all duration-200",onClick:de,children:[r.jsx(zi,{size:18,className:"mr-2"})," Refresh"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[r.jsx(je,{title:"Total Requests",value:m.total,subtitle:"This Month",icon:Ks,color:"bg-blue-500"}),r.jsx(je,{title:"Pending",value:m.pending,subtitle:"Require Action",icon:mn,color:"bg-yellow-500"}),r.jsx(je,{title:"Approved",value:m.approved,subtitle:"This month",icon:Os,color:"bg-green-500"}),r.jsx(je,{title:"Rejected",value:m.rejected,subtitle:"Leaves",icon:Nn,color:"bg-red-500"})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(kp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search by employee, type, or reason...",value:I,onChange:K=>ee(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774]"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("select",{value:z,onChange:K=>Z(K.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm md:text-base",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsxs("select",{value:W,onChange:K=>ce(K.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm md:text-base",children:[r.jsx("option",{value:"all",children:"All Types"}),Ye.map(K=>r.jsx("option",{value:K.name,children:K.name.replace(/_/g," ").replace(/\b\w/g,Ne=>Ne.toUpperCase())},K._id))]})]})]}),r.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Showing ",s.length," of ",e.length," requests"]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center space-x-3",children:[r.jsx(Ks,{size:24,className:"text-[#104774]"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"All Leave Requests"})]}),B?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(zi,{className:"animate-spin mx-auto text-[#104774]",size:32}),r.jsx("p",{className:"mt-2 text-gray-500",children:"Loading leave requests..."})]}):s.length===0?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-gray-500",children:"No leave requests found"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 rounded-xl shadow-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"From"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"To"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Days"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Balance"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:Ee.sort((K,Ne)=>new Date(Ne.appliedAt)-new Date(K.appliedAt)).map((K,Ne)=>{const Pe=K.currentRemaining&&K.currentRemaining[K.leaveType]>=K.totalDays;return r.jsxs(Eo.Fragment,{children:[r.jsxs("tr",{className:`${Ne%2===0?"bg-white":"bg-gray-50"} hover:bg-gray-100 transition-colors`,children:[r.jsx("td",{className:"px-6 py-3 text-sm",children:K.employee?.email||"N/A"}),r.jsx("td",{className:"px-6 py-3 text-sm capitalize",children:K.leaveType.replace(/_/g," ")}),r.jsx("td",{className:"px-6 py-3 text-sm",children:yo(new Date(K.fromDate),"dd MMM yyyy")}),r.jsx("td",{className:"px-6 py-3 text-sm",children:yo(new Date(K.toDate),"dd MMM yyyy")}),r.jsx("td",{className:"px-6 py-3 text-sm",children:K.totalDays}),r.jsx("td",{className:"px-6 py-3 text-sm",children:r.jsx("div",{className:"flex items-center",children:K.currentRemaining?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:Pe?"text-green-600 font-medium":"text-red-600 font-medium",children:[K.currentRemaining[K.leaveType],"/",K.balanceSnapshot?.remaining[K.leaveType]]}),!Pe&&r.jsx(as,{size:16,className:"text-red-500 ml-1"})]}):r.jsx("span",{className:"text-gray-400",children:"N/A"})})}),r.jsx("td",{className:"px-6 py-3",children:r.jsx(ve,{status:K.status})}),r.jsx("td",{className:"px-6 py-3",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{className:"p-1.5 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200",onClick:()=>L(me===K._id?null:K._id),title:"View Details",children:r.jsx(Co,{size:16})}),K.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-1.5 rounded-full bg-green-100 text-green-600 hover:bg-green-200",onClick:()=>{S(K),document.getElementById("actionModal").classList.remove("hidden")},title:"Approve",children:r.jsx(Os,{size:16})}),r.jsx("button",{className:"p-1.5 rounded-full bg-red-100 text-red-600 hover:bg-red-200",onClick:()=>{S(K),document.getElementById("actionModal").classList.remove("hidden")},title:"Reject",children:r.jsx(Nn,{size:16})})]})]})})]}),me===K._id&&r.jsx("tr",{children:r.jsx("td",{colSpan:"8",className:"p-6 bg-gray-50",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border",children:[r.jsx("h4",{className:"text-[#104774] font-semibold text-base mb-3",children:"Request Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Reason:"})," ",K.reason||"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Applied On:"})," ",yo(new Date(K.appliedAt),"dd MMM yyyy, hh:mm a")]}),K.processedBy&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Processed By:"})," ",K.processedBy?.email||"Admin"]}),K.processedAt&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Processed At:"})," ",yo(new Date(K.processedAt),"dd MMM yyyy, hh:mm a")]}),K.remarks&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Remarks:"})," ",K.remarks]})]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border",children:[r.jsx("h4",{className:"text-[#104774] font-semibold text-base mb-3",children:"Balance Information"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Remaining at request:"})," ",K.balanceSnapshot?.remaining?.[K.leaveType]??"-"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Current remaining:"})," ",K.currentRemaining?.[K.leaveType]??"-"]}),!Pe&&r.jsxs("p",{className:"text-red-600 font-medium flex items-center mt-2",children:[r.jsx(as,{size:16,className:"mr-1"}),"Insufficient balance for this request"]})]})]})]})})})]},K._id)})})]})})}),Le>1&&r.jsxs("div",{className:"p-4 border-t border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-4",children:[r.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",xe+1," to"," ",Math.min(re,s.length)," of"," ",s.length," entries"]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>$(K=>Math.max(K-1,1)),disabled:V===1,className:"px-3 py-1 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm hover:bg-gray-100",children:"Previous"}),Array.from({length:Math.min(5,Le)},(K,Ne)=>{let Pe;return Le<=5||V<=3?Pe=Ne+1:V>=Le-2?Pe=Le-4+Ne:Pe=V-2+Ne,r.jsx("button",{onClick:()=>$(Pe),className:`px-3 py-1 rounded-lg border text-sm transition ${V===Pe?"bg-[#104774] text-white border-[#104774]":"hover:bg-gray-100 border-gray-300"}`,children:Pe},Pe)}),r.jsx("button",{onClick:()=>$(K=>Math.min(K+1,Le)),disabled:V===Le,className:"px-3 py-1 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed text-sm hover:bg-gray-100",children:"Next"})]})]})]})]})]}),r.jsxs("div",{className:`w-full md:w-80 space-y-6 ${M?"block":"hidden"} md:block`,children:[r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Leave Policies"}),r.jsx("button",{className:"text-[#104774] hover:text-[#0d3a61]",onClick:()=>{j(null),document.getElementById("policyModal").classList.remove("hidden")},children:r.jsx(Pi,{size:20})})]}),l.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No policies set yet"}):r.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:l.map(K=>{const Ne=K.leaves instanceof Map?Object.fromEntries(K.leaves):K.leaves;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("h4",{className:"font-medium text-[#104774]",children:[K.role.charAt(0).toUpperCase()+K.role.slice(1)," -"," ",K.year]}),r.jsx("button",{onClick:()=>ge(K),className:"text-gray-500 hover:text-[#104774]",children:r.jsx(Xm,{size:16})})]}),r.jsx("div",{className:"space-y-1 text-sm",children:Object.entries(Ne).map(([Pe,Xe])=>r.jsxs("p",{className:"flex justify-between",children:[r.jsxs("span",{className:"capitalize",children:[Pe.replace(/_/g," "),":"]})," ",r.jsx("span",{className:"font-medium",children:Xe})]},Pe))})]},K._id)})})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Leave Types"}),r.jsx("button",{className:"text-[#104774] hover:text-[#0d3a61]",onClick:()=>{R(null),w({name:"",isActive:!0}),document.getElementById("leaveTypeModal").classList.remove("hidden")},children:r.jsx(Pi,{size:20})})]}),u.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No leave types set yet"}):r.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:u.map(K=>r.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:`text-sm ${K.isActive?"text-gray-800":"text-gray-400 line-through"}`,children:K.name.replace(/_/g," ").replace(/\b\w/g,Ne=>Ne.toUpperCase())}),!K.isActive&&r.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"(Inactive)"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>be(K),className:"text-gray-500 hover:text-[#104774]",children:r.jsx(Xm,{size:14})}),r.jsx("button",{onClick:()=>te(K._id),className:K.isActive?"text-yellow-500 hover:text-yellow-700":"text-green-500 hover:text-green-700",children:K.isActive?"Disable":"Enable"}),r.jsx("button",{onClick:()=>ke(K._id),className:"text-gray-500 hover:text-red-600",children:r.jsx(Mp,{size:14})})]})]},K._id))})]})]}),r.jsx("div",{id:"policyModal",className:"fixed inset-0 backdrop-blur-sm bg-opacity-40 flex items-center justify-center hidden z-50 p-4",children:r.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-md max-h-[90vh] overflow-y-auto","shadow-2xl":!0,children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:N?"Edit Leave Policy":"Create Leave Policy"}),r.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Role"}),r.jsxs("select",{value:y.role,onChange:K=>x({...y,role:K.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#104774]",children:[r.jsx("option",{value:"employee",children:"Employee"}),r.jsx("option",{value:"hr",children:"HR"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Year"}),r.jsx("input",{type:"number",min:"2000",max:"2100",value:y.year,onChange:K=>x({...y,year:parseInt(K.target.value)||new Date().getFullYear()}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#104774]"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Leave Types"}),r.jsx("div",{className:"space-y-3",children:u.filter(K=>K.isActive).map(K=>r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1 capitalize",children:[K.name.replace(/_/g," ")," Leaves"]}),r.jsx("input",{type:"number",min:"0",value:y.leaves[K.name]||0,onChange:Ne=>x({...y,leaves:{...y.leaves,[K.name]:parseInt(Ne.target.value)||0}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#104774]"})]},K._id))})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 transition-colors",onClick:()=>document.getElementById("policyModal").classList.add("hidden"),children:"Cancel"}),r.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-[#104774] text-white hover:bg-[#0d3a61] transition-colors",children:N?"Update Policy":"Save Policy"})]})]})]})}),r.jsx("div",{id:"leaveTypeModal",className:"fixed inset-0 backdrop-blur-sm bg-opacity-40 flex items-center justify-center hidden z-50 p-4",children:r.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-md border border-gray-200 shadow-2xl",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:C?"Edit Leave Type":"Add Leave Type"}),r.jsxs("form",{onSubmit:we,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Leave Type Name"}),r.jsx("input",{type:"text",value:v.name,onChange:K=>w({...v,name:K.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#104774]",placeholder:"e.g., Work From Home",required:!0}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Use underscores for spaces (e.g., "work_from_home")'})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[r.jsx("button",{type:"button",className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 transition-colors",onClick:()=>{document.getElementById("leaveTypeModal").classList.add("hidden"),R(null)},children:"Cancel"}),r.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-[#104774] text-white hover:bg-[#0d3a61] transition-colors",children:[C?"Update":"Add"," Leave Type"]})]})]})]})}),r.jsx("div",{id:"actionModal",className:"fixed inset-0 backdrop-blur-sm bg-opacity-40 flex items-center justify-center hidden z-50 p-4",children:r.jsxs("div",{className:"bg-white p-6 rounded-xl w-full max-w-md border border-gray-200 shadow-2xl",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Process Leave Request"}),A&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Employee:"})," ",A.employee?.email]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",A.leaveType]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Duration:"})," ",A.totalDays," days"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Reason:"})," ",A.reason||"-"]}),A.currentRemaining&&r.jsxs("p",{className:`mt-2 ${A.currentRemaining[A.leaveType]<A.totalDays?"text-red-600 font-medium":""}`,children:[r.jsx("strong",{children:"Remaining Balance:"})," ",A.currentRemaining[A.leaveType],"/",A.balanceSnapshot?.remaining[A.leaveType],A.currentRemaining[A.leaveType]<A.totalDays&&r.jsx("span",{className:"ml-1",children:"(Insufficient balance)"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Remarks (Optional)"}),r.jsx("textarea",{value:D,onChange:K=>O(K.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#104774]",rows:"3",placeholder:"Add remarks for this action..."})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{className:"px-4 py-2 rounded-lg bg-gray-300 hover:bg-gray-400 transition-colors",onClick:()=>{document.getElementById("actionModal").classList.add("hidden"),O("")},children:"Cancel"}),r.jsx("button",{className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors",onClick:()=>he(A._id,"reject"),children:"Reject"}),r.jsx("button",{className:"px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors",onClick:()=>he(A._id,"approve"),children:"Approve"})]})]})]})})]})},Pu=({isOpen:n,onClose:e,onSuccess:t,token:s,addNotification:i,basePath:l="/attendance"})=>{const[c,u]=_.useState(""),[h,m]=_.useState("Planned"),[p,y]=_.useState(""),[x,v]=_.useState(""),[w,A]=_.useState(!1),[S,N]=_.useState(!1),[j,C]=_.useState(!1),[R,D]=_.useState(null),[O,B]=_.useState(null);_.useEffect(()=>{n||(u(""),m("Planned"),y(""),v(""),A(!1),N(!1),D(null))},[n]),_.useEffect(()=>{n&&s&&F()},[n,s]);const F=async()=>{try{const z=await ye.get("/profile/my-profile",{headers:{Authorization:`Bearer ${s}`}});z.data?.shiftTiming&&(B(z.data.shiftTiming),I(z.data.shiftTiming))}catch(z){console.error("Error fetching shift timing:",z),i("Error fetching shift information","error")}},I=z=>{if(!z?.start)return;const Z=new Date,W=Z.getHours()*60+Z.getMinutes(),[ce,me]=z.start.split(" "),[L,V]=ce.split(":").map(Number);let $=L*60+V;me==="PM"&&L!==12&&($+=720),me==="AM"&&L===12&&($-=720),W<$?(A(!0),D(`You are logging in before your shift start time (${z.start}). Please provide a reason for early login.`)):W>$+60&&(N(!0),D(`You are logging in after 1 hour from your shift start time (${z.start}). Please provide a reason for late login.`))},ee=async z=>{if(z.preventDefault(),!c.trim()){D("Task description is required");return}if(w&&!p.trim()){D("Early login reason is required");return}if(S&&!x.trim()){D("Late login reason is required");return}C(!0),D(null);try{const Z={taskDescription:c,workProgress:h,...w&&{earlyLoginReason:p},...S&&{lateLoginReason:x}},W=await ye.post(`${l}/login`,Z,{headers:{Authorization:`Bearer ${s}`}});W.data?.message&&i(W.data.message,"success");const ce=W.data?.attendance||W.data;ce&&t(ce),e()}catch(Z){console.error("Error submitting attendance:",Z);const W=Z?.response?.data?.message||"Error submitting attendance";D(W),i(W,"error")}finally{C(!1)}};return n?r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Mark Attendance"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),O&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-md",children:r.jsxs("p",{className:"text-sm text-blue-800",children:["Your shift timing: ",r.jsxs("strong",{children:[O.start," - ",O.end]})]})}),R&&r.jsx("div",{className:`mb-4 p-3 rounded text-sm ${R.includes("Error")||R.includes("required")?"bg-red-50 text-red-800 border border-red-100":"bg-blue-50 text-blue-800 border border-blue-100"}`,children:R}),r.jsxs("form",{onSubmit:ee,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Task Description *"}),r.jsx("textarea",{value:c,onChange:z=>u(z.target.value),rows:4,required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what you'll be working on today..."})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Progress"}),r.jsxs("select",{value:h,onChange:z=>m(z.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"Planned",children:"Planned"}),r.jsx("option",{value:"In Progress",children:"In Progress"}),r.jsx("option",{value:"Completed",children:"Completed"})]})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:w,onChange:z=>{A(z.target.checked),z.target.checked&&N(!1)},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Logging in early"})]})}),w&&r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for early login *"}),r.jsx("textarea",{value:p,onChange:z=>y(z.target.value),rows:3,required:w,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please provide reason for logging in early..."})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:S,onChange:z=>{N(z.target.checked),z.target.checked&&A(!1)},className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Logging in late"})]})}),S&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for late login *"}),r.jsx("textarea",{value:x,onChange:z=>v(z.target.value),rows:3,required:S,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please provide reason for logging in late..."})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#104774"},onMouseEnter:z=>z.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:z=>z.currentTarget.style.backgroundColor="#104774",children:j?"Submitting...":"Submit Attendance"})]})]})]})}):null},Bu=({isOpen:n,onClose:e,onSuccess:t,attendanceData:s,token:i,addNotification:l,basePath:c="/attendance"})=>{const[u,h]=_.useState(""),[m,p]=_.useState(""),[y,x]=_.useState(!1),[v,w]=_.useState(!1),[A,S]=_.useState(null),N=async j=>{if(j.preventDefault(),!u.trim()){S("Logout description is required");return}if(y&&!m.trim()){S("Early logout reason is required");return}w(!0),S(null);try{if(!s||!s._id)throw new Error("Attendance record id is missing.");const C=await ye.post(`${c}/logout/${s._id}`,{logoutDescription:u,earlyLogoutReason:y?m:void 0},{headers:{Authorization:`Bearer ${i}`}});C.data?.message?(l(C.data.message,"success"),S(C.data.message)):l("Logout recorded successfully","success");const R=C.data?.attendance||C.data;R&&R._id?t(R):t({...s,checkOut:new Date().toISOString(),logoutDescription:u,earlyLogoutReason:y?m:void 0}),h(""),p(""),x(!1)}catch(C){console.error("Error recording logout:",C);const R=C?.response?.data?.message||C.message||"Error recording logout";S(R),l(R,"error")}finally{w(!1)}};return n?r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Log Out"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A&&r.jsx("div",{className:`mb-4 p-3 rounded text-sm ${A.includes("Error")||A.includes("required")?"bg-red-50 text-red-800 border border-red-100":"bg-green-50 text-green-800 border border-green-100"}`,children:A}),r.jsxs("form",{onSubmit:N,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logout Description *"}),r.jsx("textarea",{value:u,onChange:j=>h(j.target.value),rows:4,required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what you completed today..."})]}),r.jsx("div",{className:"mb-4",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:y,onChange:j=>x(j.target.checked),className:"mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Logging out early"})]})}),y&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for early logout *"}),r.jsx("textarea",{value:m,onChange:j=>p(j.target.value),rows:3,required:y,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please provide reason for early logout..."})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:v,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:v,className:"px-4 py-2 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#104774"},onMouseEnter:j=>j.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:j=>j.currentTarget.style.backgroundColor="#104774",children:v?"Logging Out...":"Confirm Logout"})]})]})]})}):null},RI=({isOpen:n,onClose:e,onSuccess:t,token:s,addNotification:i,employeeId:l})=>{const[c,u]=_.useState(""),[h,m]=_.useState(""),[p,y]=_.useState(""),[x,v]=_.useState(""),[w,A]=_.useState(!1),[S,N]=_.useState(null),j=async C=>{if(C.preventDefault(),!c||!x.trim()){N("Date and reason are required");return}A(!0),N(null);try{const R=await ye.post("/attendance/regularization",{date:c,checkIn:h||void 0,checkOut:p||void 0,reason:x},{headers:{Authorization:`Bearer ${s}`}});R.data?.message?(i(R.data.message,"success"),N(R.data.message)):i("Regularization request submitted","success"),t(),u(""),m(""),y(""),v("")}catch(R){console.error("Error submitting regularization:",R);const D=R?.response?.data?.message||"Error submitting regularization request";N(D),i(D,"error")}finally{A(!1)}};return n?r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Request Regularization"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S&&r.jsx("div",{className:`mb-4 p-3 rounded text-sm ${S.includes("Error")||S.includes("required")?"bg-red-50 text-red-800 border border-red-100":"bg-green-50 text-green-800 border border-green-100"}`,children:S}),r.jsxs("form",{onSubmit:j,children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),r.jsx("input",{type:"date",value:c,onChange:C=>u(C.target.value),required:!0,max:new Date().toISOString().split("T")[0],className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in Time"}),r.jsx("input",{type:"time",value:h,onChange:C=>m(C.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out Time"}),r.jsx("input",{type:"time",value:p,onChange:C=>y(C.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Regularization *"}),r.jsx("textarea",{value:x,onChange:C=>v(C.target.value),rows:4,required:!0,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Explain why you need regularization for this date..."})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:w,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 rounded-md text-white disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"#104774"},onMouseEnter:C=>C.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:C=>C.currentTarget.style.backgroundColor="#104774",children:w?"Submitting...":"Submit Request"})]})]})]})}):null},Ki=({notifications:n})=>{const e=s=>{switch(s){case"success":return"bg-green-50 text-green-800 border border-green-100";case"error":return"bg-red-50 text-red-800 border border-red-100";case"warning":return"bg-yellow-50 text-yellow-800 border border-yellow-100";default:return"bg-white text-gray-800 border border-gray-200"}},t=s=>{switch(s){case"success":return r.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return r.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return r.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});default:return r.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}};return r.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:n.map(s=>r.jsxs("div",{className:`max-w-sm w-full px-4 py-3 rounded-lg shadow-lg flex items-start gap-3 transform transition-all duration-300 animate-in slide-in-from-right-10 ${e(s.type)}`,children:[r.jsx("div",{className:"flex-shrink-0",children:t(s.type)}),r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"text-sm font-medium",children:s.message})})]},s.id))})},kI="#0d3a61",MI=()=>{const{token:n,user:e}=ls(),[t,s]=_.useState(null),[i,l]=_.useState(!1),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[p,y]=_.useState([]),[x,v]=_.useState([]),[w,A]=_.useState(!1);_.useEffect(()=>{n&&(N(),j())},[n]);const S=(Z,W="info",ce=4e3)=>{const me=Date.now()+Math.random();v(L=>[...L,{id:me,message:Z,type:W}]),setTimeout(()=>v(L=>L.filter(V=>V.id!==me)),ce)},N=async()=>{try{const Z=await ye.get("/attendance/today",{headers:{Authorization:`Bearer ${n}`}});s(Z.data||null)}catch(Z){console.error("Error fetching today attendance:",Z),s(null),S(Z?.response?.data?.message||"Could not fetch today attendance","error")}},j=async()=>{try{const Z=await ye.get("/attendance/history",{headers:{Authorization:`Bearer ${n}`}});y(Z.data||[])}catch(Z){console.error("Error fetching attendance history:",Z),y([]),S(Z?.response?.data?.message||"Could not fetch attendance history","error")}},C=async Z=>{try{return(await ye.get(`/attendance/check-holiday/${Z}`,{headers:{Authorization:`Bearer ${n}`}})).data.isHoliday}catch(W){return console.error("Error checking holiday:",W),!1}},R=Z=>{s(Z),l(!1),S("Attendance submitted successfully","success"),N(),j()},D=Z=>{s(Z),u(!1),S("Logout recorded successfully","success"),N(),j()},O=()=>{m(!1),S("Regularization request submitted","success"),j()},B=Z=>{if(!Z)return"-";try{return new Date(Z).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},F=Z=>{if(!Z)return"-";try{return new Date(Z).toLocaleDateString()}catch{return"-"}},I=Z=>{const W={pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${W[Z]||"bg-gray-100 text-gray-800"}`,children:Z})},ee=!t,z=t&&t.status==="accepted"&&!t.checkOut;return r.jsxs("div",{className:"min-h-[80vh] p-4",children:[r.jsx("style",{children:`
        .primary-btn:hover { background: ${kI} !important }
      `}),r.jsx(Ki,{notifications:x}),r.jsxs("header",{className:"p-4 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Attendance"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Manage your daily attendance and view history"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 flex flex-col h-[275px] w-[350px] mb-5",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("h3",{className:"font-semibold text-slate-800 text-lg",children:["Today's Attendance",r.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["(",new Date().toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),")"]})]})}),r.jsxs("div",{className:"flex-grow space-y-3 overflow-y-auto pr-1 scrollbar-hide mb-4",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Status:"," ",r.jsx("span",{className:`font-medium ${t?.status==="accepted"?"text-green-500":t?.status==="pending"?"text-yellow-400":t?.status==="rejected"?"text-red-500":"text-gray-400"}`,children:t?.status||"Not Logged In"})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Login Time:"," ",r.jsx("span",{className:"font-medium text-slate-900",children:t?.checkIn?B(t.checkIn):"-"})]}),t?.taskDescription&&r.jsxs("div",{className:"text-sm text-slate-600",children:["Task:"," ",r.jsx("span",{className:"font-medium text-slate-900",title:t.taskDescription,children:t.taskDescription})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Logout Time:"," ",r.jsx("span",{className:"font-medium text-slate-900",children:t?.checkOut?B(t.checkOut):"Pending"})]}),t?.logoutDescription&&r.jsxs("div",{className:"text-sm text-slate-600",children:["Logout Note:"," ",r.jsx("span",{className:"font-medium text-slate-900",title:t.logoutDescription,children:t.logoutDescription})]}),t?.earlyLogoutReason&&r.jsxs("div",{className:"text-sm text-red-600",children:["Early Logout:"," ",r.jsx("span",{className:"font-medium",title:t.earlyLogoutReason,children:t.earlyLogoutReason})]})]}),r.jsxs("div",{className:"flex gap-2 mt-auto",children:[ee&&r.jsx("button",{onClick:async()=>{const Z=new Date().toISOString().split("T")[0];if(await C(Z)){S("Today is a holiday. Cannot mark attendance.","warning");return}l(!0)},className:"flex-1 bg-[#104774] hover:bg-[#0d3a61] text-white py-2 rounded-xl font-medium transition-all duration-300 shadow-md hover:shadow-lg",children:"Mark Attendance"}),z&&r.jsx("button",{onClick:()=>u(!0),className:"flex-1 bg-[#104774] hover:bg-[#0d3a61] text-white py-2 rounded-xl font-medium transition-all duration-300 shadow-md hover:shadow-lg",children:"Log Out"})]})]}),r.jsxs("section",{className:"bg-white shadow rounded-lg p-6  ",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Attendance History"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Last 30 days"}),r.jsx("button",{onClick:j,className:"p-2 text-gray-500 hover:text-gray-700",title:"Refresh",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 \r
            0a8.003 8.003 0 01-15.357-2m15.357 2H15`})})})]})]}),r.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200",children:r.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Login"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Logout"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Work Progress"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Task"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:p.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"No attendance records found"})}):p.map(Z=>r.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:F(Z.date)}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:Z.checkIn?B(Z.checkIn):"-"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:Z.checkOut?B(Z.checkOut):"-"}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:I(Z.status)}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:Z.workProgress||"-"}),r.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700 relative group",children:[r.jsx("div",{className:"max-w-xs truncate cursor-pointer",children:Z.taskDescription||"-"}),Z.taskDescription&&r.jsx("div",{className:"absolute left-1/2 top-full mt-2 hidden group-hover:flex -translate-x-1/2 z-20",children:r.jsxs("div",{className:"bg-gray-800 text-white text-xs rounded-lg shadow-lg px-3 py-2 max-w-sm whitespace-normal relative animate-fadeIn",children:[Z.taskDescription,r.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-800 rotate-45"})]})})]})]},Z._id))})]})})})]}),r.jsx(Pu,{isOpen:i,onClose:()=>l(!1),onSuccess:R,token:n,addNotification:S}),r.jsx(Bu,{isOpen:c,onClose:()=>u(!1),onSuccess:D,attendanceData:t,token:n,addNotification:S}),r.jsx(RI,{isOpen:h,onClose:()=>m(!1),onSuccess:O,token:n,addNotification:S,employeeId:e?._id})]})},OS=({isOpen:n,onClose:e,onReject:t,remarks:s,setRemarks:i})=>n?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Reject Attendance"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Rejection *"}),r.jsx("textarea",{value:s,onChange:l=>i(l.target.value),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4",placeholder:"Please provide specific reason for rejecting this attendance...",required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:()=>t(s),disabled:!s.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Reject"})]})]})}):null,LI=({token:n,addNotification:e,user:t})=>{const[s,i]=_.useState(null),[l,c]=_.useState(!1),[u,h]=_.useState(!1),[m,p]=_.useState([]),[y,x]=_.useState(!1);_.useEffect(()=>{v()},[n]);const v=async()=>{try{x(!0);const[D,O]=await Promise.all([ye.get("/attendance/hr/today",{headers:{Authorization:`Bearer ${n}`}}),ye.get("/attendance/hr/history",{headers:{Authorization:`Bearer ${n}`}})]);i(D.data),p(O.data||[])}catch(D){console.error("Error fetching HR attendance data:",D),e("Error loading attendance data","error")}finally{x(!1)}},w=D=>{i(D),c(!1),e("Attendance submitted successfully","success"),v()},A=D=>{i(D),h(!1),e("Logout recorded successfully","success"),v()},S=D=>{if(!D)return"-";try{return new Date(D).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},N=D=>{if(!D)return"-";try{return new Date(D).toLocaleDateString()}catch{return"-"}},j=D=>{const O={pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${O[D]||"bg-gray-100 text-gray-800"}`,children:D})},C=!s,R=s?.status==="accepted"&&!s.checkOut;return r.jsxs("div",{children:[r.jsxs("div",{className:"h-[300px] overflow-y-auto border border-gray-200 rounded-lg shadow-sm p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"My Attendance"}),r.jsx("button",{onClick:v,className:"p-2 text-gray-500 hover:text-gray-700",title:"Refresh",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Today's Attendance"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("div",{className:"p-3 bg-white rounded-lg shadow flex flex-col",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Status"}),r.jsx("span",{className:`text-lg font-semibold mt-1 capitalize ${s?.status==="accepted"?"text-green-600":s?.status==="pending"?"text-yellow-600":"text-red-600"}`,children:s?.status||"Not Logged In"})]}),r.jsxs("div",{className:"p-3 bg-white rounded-lg shadow flex flex-col",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Login Time"}),r.jsx("span",{className:"text-lg font-semibold mt-1",children:s?.checkIn?S(s.checkIn):"-"})]}),r.jsxs("div",{className:"p-3 bg-white rounded-lg shadow flex flex-col",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Logout Time"}),r.jsx("span",{className:"text-lg font-semibold mt-1",children:s?.checkOut?S(s.checkOut):"Pending"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-3",children:[C&&r.jsx("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-[#104774] text-white rounded-md hover:bg-[#0d3a61]",children:"Mark Attendance"}),R&&r.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-[#104774] text-white rounded-md hover:bg-[#0d3a61]",children:"Log Out"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Login"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Logout"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Task"})]})}),r.jsx("tbody",{children:m.map((D,O)=>r.jsxs("tr",{className:`${O%2===0?"bg-white":"bg-gray-50"} hover:bg-gray-100 transition`,children:[r.jsx("td",{className:"px-4 py-2 text-sm text-gray-700 whitespace-nowrap",children:N(D.date)}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-700 whitespace-nowrap",children:D.checkIn?S(D.checkIn):"-"}),r.jsx("td",{className:"px-4 py-2 text-sm text-gray-700 whitespace-nowrap",children:D.checkOut?S(D.checkOut):"-"}),r.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:j(D.status)}),r.jsxs("td",{className:"px-4 py-2 text-sm text-gray-700 relative group max-w-xs truncate cursor-pointer",children:[D.taskDescription||"-",D.taskDescription&&r.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-1 w-64 bg-gray-800 text-white text-xs rounded-md p-2 shadow-lg z-[999] invisible opacity-0 group-hover:visible group-hover:opacity-100 break-words",children:D.taskDescription})]})]},D._id))})]})})]}),r.jsx(Pu,{isOpen:l,onClose:()=>c(!1),onSuccess:w,token:n,addNotification:e,basePath:"/attendance/hr"}),r.jsx(Bu,{isOpen:u,onClose:()=>h(!1),onSuccess:A,attendanceData:s,token:n,addNotification:e,basePath:"/attendance/hr"})]})},$a="#104774",OI="#0d3a61",II=()=>{const{token:n,user:e}=ls(),[t,s]=_.useState([]),[i,l]=_.useState([]),[c,u]=_.useState(null),[h,m]=_.useState(!1),[p,y]=_.useState(""),[x,v]=_.useState("pending"),[w,A]=_.useState({totalEmployees:0,present:0,absent:0,pending:0}),[S,N]=_.useState([]),[j,C]=_.useState(!1),R=new Date().toISOString().split("T")[0],[D,O]=_.useState({employee:"",date:R,status:""});_.useEffect(()=>{n&&(F(),I(),ee())},[n]);const B=(M,G="info",de=3500)=>{const re=Date.now()+Math.random();N(xe=>[...xe,{id:re,message:M,type:G}]),setTimeout(()=>N(xe=>xe.filter(Ee=>Ee.id!==re)),de)},F=async()=>{try{C(!0);const M=await ye.get("/attendance/pending",{headers:{Authorization:`Bearer ${n}`}});s(M.data||[])}catch(M){console.error("Error fetching pending attendances:",M),B(M.response?.data?.message||"Could not load pending requests","error")}finally{C(!1)}},I=async()=>{try{C(!0);const M=await ye.get("/attendance/all",{headers:{Authorization:`Bearer ${n}`}});l(M.data||[])}catch(M){console.error("Error fetching all attendances:",M),B(M.response?.data?.message||"Could not load records","error")}finally{C(!1)}},ee=async()=>{try{const M=await ye.get("/attendance/stats",{headers:{Authorization:`Bearer ${n}`}});A(M.data||{})}catch(M){console.error("Error fetching stats:",M),B("Error loading statistics","error")}},z=M=>{!M||!M._id||(l(G=>{const de=G.findIndex(xe=>xe._id===M._id);if(de===-1)return[M,...G];const re=[...G];return re[de]={...re[de],...M},re}),s(G=>G.filter(de=>de._id!==M._id)))},Z=async M=>{try{const G=await ye.patch(`/attendance/${M}/approve`,{},{headers:{Authorization:`Bearer ${n}`}}),de=G.data?.attendance||G.data;de&&de._id?z(de):(s(re=>re.filter(xe=>xe._id!==M)),I()),G.data?.stats?A(G.data.stats):ee(),B(G.data?.message||"Attendance approved","success")}catch(G){console.error("Error approving attendance:",G),B(G.response?.data?.message||"Error approving attendance","error")}},W=async M=>{if(c)try{const G=await ye.patch(`/attendance/${c}/reject`,{remarks:M},{headers:{Authorization:`Bearer ${n}`}}),de=G.data?.attendance||G.data;de&&de._id?z(de):(s(re=>re.filter(xe=>xe._id!==c)),I()),G.data?.stats?A(G.data.stats):ee(),B(G.data?.message||"Attendance rejected","success"),m(!1),y(""),u(null)}catch(G){console.error("Error rejecting attendance:",G),B(G.response?.data?.message||"Error rejecting attendance","error")}},ce=M=>{u(M),m(!0)},me=M=>{const{name:G,value:de}=M.target;O(re=>({...re,[G]:de}))},L=()=>{O({employee:"",date:"",status:""})},V=M=>{if(!M)return"-";try{return new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},$=M=>{if(!M)return"-";try{return new Date(M).toLocaleDateString()}catch{return"-"}},H=M=>{const G={pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${G[M]||"bg-gray-100 text-gray-800"}`,children:M})},T=i.filter(M=>{const G=D.employee?`${M.employee?.profileRef?.firstName} ${M.employee?.profileRef?.lastName}`.toLowerCase().includes(D.employee.toLowerCase())||M.employee?.email?.toLowerCase().includes(D.employee.toLowerCase()):!0,de=D.date?$(M.date)===$(D.date):!0,re=D.status?M.status===D.status:!0;return G&&de&&re}),q=t.filter(M=>{const G=D.employee?`${M.employee?.profileRef?.firstName} ${M.employee?.profileRef?.lastName}`.toLowerCase().includes(D.employee.toLowerCase())||M.employee?.email?.toLowerCase().includes(D.employee.toLowerCase()):!0,de=D.date?$(M.date)===$(D.date):!0;return G&&de});return r.jsxs("div",{className:"min-h-[70vh] p-4 sm:p-6",children:[r.jsx("style",{children:`
        .primary-btn:hover { background: ${OI} !important }
        .primary-border-active { border-bottom-color: ${$a} !important; color: ${$a} !important }
      `}),r.jsx(Ki,{notifications:S}),r.jsxs("header",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Attendance Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage employee attendance approvals and records"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-100 via-blue-100 to-blue-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-blue-700 font-semibold mb-2",children:"Total Employees"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:w.totalEmployees??0})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-100 via-green-100 to-green-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-green-700 font-semibold mb-2",children:"Present Today"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:w.present??0})]}),r.jsxs("div",{className:"bg-gradient-to-r from-red-100 via-red-100 to-red-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-red-700 font-semibold mb-2",children:"Absent Today"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:Math.max(0,w?.absent??0)})]}),r.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 via-yellow-100 to-yellow-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-yellow-700 font-semibold mb-2",children:"Pending Approval"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:w.pending??0})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex -mb-px overflow-auto",children:[r.jsxs("button",{onClick:()=>v("pending"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${x==="pending"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:x==="pending"?{borderBottomColor:$a,color:$a}:{},children:["Pending Approvals",t.length>0&&r.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:t.length})]}),r.jsx("button",{onClick:()=>v("all"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${x==="all"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:x==="all"?{borderBottomColor:$a,color:$a}:{},children:"All Records"}),r.jsx("button",{onClick:()=>v("hr"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${x==="hr"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:x==="hr"?{borderBottomColor:$a,color:$a}:{},children:"My Attendance"})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Employee"}),r.jsx("input",{type:"text",name:"employee",value:D.employee,onChange:me,placeholder:"Name or email",className:"w-full p-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),r.jsx("input",{type:"date",name:"date",value:D.date,onChange:me,className:"w-full p-2 border border-gray-300 rounded-md"})]}),x==="all"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{name:"status",value:D.status,onChange:me,className:"w-full p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"accepted",children:"Accepted"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Clear Filters"})})]}),x==="pending"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Pending Attendance Approvals"}),r.jsx("button",{onClick:F,className:"p-2 text-gray-500 hover:text-gray-700",title:"Refresh",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),j?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Loading pending requests..."})]}):q.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No pending approvals"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[290px] overflow-y-auto border border-gray-200 rounded-xl shadow-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Login Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Task Description"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Work Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Actions"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-200",children:[q.map((M,G)=>r.jsxs("tr",{className:`${G%2===0?"bg-white":"bg-gray-50"} hover:bg-gray-100 transition`,children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsxs("div",{className:"font-medium text-gray-800",children:[M.employee?.profileRef?.firstName," ",M.employee?.profileRef?.lastName]}),r.jsx("div",{className:"text-sm text-gray-500",children:M.employee?.email}),r.jsx("div",{className:"text-xs text-gray-400",children:M.employee?.profileRef?.employeeId})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:$(M.date)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:M.checkIn?V(M.checkIn):"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Task:"}),r.jsx("div",{className:"max-w-xs truncate cursor-pointer",children:M.taskDescription||"-"}),M.taskDescription&&r.jsx("div",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-md px-3 py-2 w-60 z-20 -top-1 left-1/2 -translate-x-1/2 shadow-lg",children:M.taskDescription})]}),M.earlyLoginReason&&r.jsxs("div",{className:"relative group mt-2 pt-2 border-t border-gray-100",children:[r.jsx("div",{className:"font-medium text-orange-600 mb-1",children:"Early Login Reason:"}),r.jsx("div",{className:"max-w-xs truncate cursor-pointer",children:M.earlyLoginReason}),r.jsx("div",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-md px-3 py-2 w-60 z-20 -top-1 left-1/2 -translate-x-1/2 shadow-lg",children:M.earlyLoginReason})]}),M.lateLoginReason&&r.jsxs("div",{className:"relative group mt-2 pt-2 border-t border-gray-100",children:[r.jsx("div",{className:"font-medium text-red-600 mb-1",children:"Late Login Reason:"}),r.jsx("div",{className:"max-w-xs truncate cursor-pointer",children:M.lateLoginReason}),r.jsx("div",{className:"absolute hidden group-hover:block bg-gray-800 text-white text-xs rounded-md px-3 py-2 w-60 z-20 -top-1 left-1/2 -translate-x-1/2 shadow-lg",children:M.lateLoginReason})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:M.workProgress||"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>Z(M._id),className:"px-3 py-1.5 rounded-md text-white bg-[#104774] hover:bg-[#0d3a61] text-sm font-medium shadow-sm transition",children:"Approve"}),r.jsx("button",{onClick:()=>ce(M._id),className:"px-3 py-1.5 rounded-md text-white bg-red-600 hover:bg-red-700 text-sm font-medium shadow-sm transition",children:"Reject"})]})})]},M._id)),q.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-sm text-gray-500",children:"No pending attendances found"})})]})]})})})]}),x==="all"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"All Attendance Records"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",T.length," of"," ",i.length," records"]}),r.jsx("button",{onClick:I,className:"p-2 text-gray-500 hover:text-gray-700",title:"Refresh",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]}),j?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Loading records..."})]}):T.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No records found"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[250px] overflow-y-auto border border-gray-200 rounded-xl shadow-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10 rounded-t-lg",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Login Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Logout Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Work Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Task"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Logout Note"})]})}),r.jsx("tbody",{children:T.map((M,G)=>r.jsxs("tr",{className:`${G%2===0?"bg-white":"bg-gray-100"} transition`,children:[r.jsxs("td",{className:"px-6 py-3 whitespace-nowrap",children:[r.jsxs("div",{className:"font-medium text-gray-800",children:[M.employee?.profileRef?.firstName," ",M.employee?.profileRef?.lastName]}),r.jsx("div",{className:"text-sm text-gray-500",children:M.employee?.email}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:M.employee?.profileRef?.employeeId})]}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:$(M.date)}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:V(M.checkIn)}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:V(M.checkOut)||"-"}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap",children:H(M.status)}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:M.workProgress||"-"}),r.jsx("td",{className:"px-6 py-3 text-sm text-gray-700 max-w-xs",children:r.jsxs("div",{className:"space-y-1",children:[M.taskDescription?r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"truncate cursor-pointer font-medium hover:text-blue-600",children:M.taskDescription}),r.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-64 bg-gray-900 text-white text-xs rounded-lg p-2 shadow-lg z-50 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 break-words",children:[M.taskDescription,r.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -mt-1 w-2 h-2 bg-gray-900 rotate-45"})]})]}):r.jsx("span",{className:"text-gray-400 italic",children:"-"}),M.earlyLoginReason&&r.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Early Login:"})," ",M.earlyLoginReason]}),M.lateLoginReason&&r.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Late Login:"})," ",M.lateLoginReason]})]})}),r.jsx("td",{className:"px-6 py-3 text-sm",children:M.logoutDescription?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-medium",children:M.logoutDescription}),M.earlyLogoutReason&&r.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Early Logout:"})," ",M.earlyLogoutReason]})]}):"-"})]},M._id))})]})})})]}),x==="hr"&&r.jsx(LI,{token:n,addNotification:B,user:e})]})]}),r.jsx(OS,{isOpen:h,onClose:()=>{m(!1),y(""),u(null)},onReject:W,remarks:p,setRemarks:y})]})},PI=({token:n,addNotification:e})=>{const[t,s]=_.useState([]),[i,l]=_.useState(!1),[c,u]=_.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),department:""}),[h,m]=_.useState([]);_.useEffect(()=>{p(),y()},[c]);const p=async()=>{try{const A=await ye.get("/attendance/departments",{headers:{Authorization:`Bearer ${n}`}});m(A.data||[])}catch(A){console.error("Error fetching departments:",A),m(["HR","IT","Finance","Operations","Sales","Marketing"])}},y=async()=>{l(!0);try{const A=new URLSearchParams;c.month&&A.append("month",c.month),c.year&&A.append("year",c.year),c.department&&A.append("department",c.department);const S=await ye.get(`/attendance/reports/monthly?${A}`,{headers:{Authorization:`Bearer ${n}`}});s(S.data||[])}catch(A){console.error("Error generating reports:",A),e(A.response?.data?.message||"Error generating reports","error"),s([])}finally{l(!1)}},x=A=>{const{name:S,value:N}=A.target;u(j=>({...j,[S]:N}))},v=new Date().getFullYear(),w=Array.from({length:5},(A,S)=>v-S);return r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsx("h2",{className:"text-xl font-semibold",children:"Monthly Attendance Reports"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Month"}),r.jsxs("select",{name:"month",value:c.month,onChange:x,className:"w-full p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"All Months"}),Array.from({length:12},(A,S)=>r.jsx("option",{value:S+1,children:new Date(2023,S).toLocaleString("default",{month:"long"})},S+1))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),r.jsxs("select",{name:"year",value:c.year,onChange:x,className:"w-full p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"All Years"}),w.map(A=>r.jsx("option",{value:A,children:A},A))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),r.jsxs("select",{name:"department",value:c.department,onChange:x,className:"w-full p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"All Departments"}),h.map(A=>r.jsx("option",{value:A,children:A},A))]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:y,className:"px-4 py-2 rounded-md text-white",style:{backgroundColor:"#104774"},onMouseEnter:A=>A.currentTarget.style.backgroundColor="#0d3a61",onMouseLeave:A=>A.currentTarget.style.backgroundColor="#104774",children:i?"Refresh...":"Refresh"})})]}),i?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Refresh..."})]}):t.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No report data available"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters and generate a report"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 rounded-xl shadow-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10 rounded-t-lg",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Department"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Present"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Absent"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Pending"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Rejected"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Total Days"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Attendance %"})]})}),r.jsx("tbody",{children:t.map((A,S)=>r.jsxs("tr",{className:`${S%2===0?"bg-white":"bg-gray-50"} transition`,children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"font-medium text-gray-800",children:A.employeeName||"N/A"}),r.jsx("div",{className:"text-sm text-gray-500",children:A.employeeEmail||"N/A"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:A.employeeId||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:A.department||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-green-600 font-semibold",children:A.present||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-red-600 font-semibold",children:A.absent||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-yellow-600 font-semibold",children:A.pending||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-red-600 font-semibold",children:A.rejected||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-semibold text-gray-700",children:A.totalDays||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${(A.attendancePercentage||0)>=90?"bg-green-100 text-green-800":(A.attendancePercentage||0)>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[A.attendancePercentage?Math.round(A.attendancePercentage):0,"%"]})})]},S))})]})})})]})},Ei="#104774",BI="#0d3a61",HI=()=>{const{token:n}=ls(),[e,t]=_.useState([]),[s,i]=_.useState([]),[l,c]=_.useState(!0),u=new Date().toISOString().split("T")[0],[h,m]=_.useState({employee:"",date:u,status:"pending",department:"",role:""}),[p,y]=_.useState({totalEmployees:0,present:0,absent:0,pending:0}),[x,v]=_.useState([]),[w,A]=_.useState(null),[S,N]=_.useState(!1),[j,C]=_.useState(""),[R,D]=_.useState("records"),[O,B]=_.useState([]);_.useEffect(()=>{n&&(I(),ee(),z())},[n]),_.useEffect(()=>{Z()},[h,e]);const F=(H,T="info",q=3500)=>{const M=Date.now()+Math.random();v(G=>[...G,{id:M,message:H,type:T}]),setTimeout(()=>v(G=>G.filter(de=>de.id!==M)),q)},I=async()=>{c(!0);try{const H=await ye.get("/attendance/all",{headers:{Authorization:`Bearer ${n}`}});t(H.data||[])}catch(H){console.error("Error fetching all attendances:",H),F(H.response?.data?.message||"Could not fetch attendance records","error"),t([])}finally{c(!1)}},ee=async()=>{try{const H=await ye.get("/attendance/stats",{headers:{Authorization:`Bearer ${n}`}});y(H.data||{})}catch(H){console.error("Error fetching stats:",H),F("Error loading statistics","error")}},z=async()=>{try{const H=await ye.get("/departments");H.data.success&&B(H.data.data)}catch(H){console.error("Error fetching departments:",H)}},Z=()=>{let H=[...e];h.employee&&(H=H.filter(T=>`${T.employee?.profileRef?.firstName||""} ${T.employee?.profileRef?.lastName||""}`.trim().toLowerCase().includes(h.employee.toLowerCase())||(T.employee?.email||"").toLowerCase().includes(h.employee.toLowerCase()))),h.date&&(H=H.filter(T=>T.date?new Date(T.date).toLocaleDateString()===new Date(h.date).toLocaleDateString():!1)),h.status&&(H=H.filter(T=>T.status===h.status)),h.department&&(H=H.filter(T=>T.employee?.profileRef?.department===h.department)),h.role&&(H=H.filter(T=>T.employee?.role===h.role)),i(H)},W=H=>{const{name:T,value:q}=H.target;m(M=>({...M,[T]:q}))},ce=()=>{m({employee:"",date:"",status:"",department:"",role:""})},me=async H=>{if(w)try{const T=await ye.patch(`/attendance/${w}/admin-reject`,{remarks:H},{headers:{Authorization:`Bearer ${n}`}});T.data?.attendance?t(q=>q.map(M=>M._id===w?T.data.attendance:M)):I(),ee(),F(T.data?.message||"Attendance rejected","success"),N(!1),C(""),A(null)}catch(T){console.error("Error rejecting attendance:",T),F(T.response?.data?.message||"Error rejecting attendance","error")}},L=H=>{if(!H)return"-";try{return new Date(H).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return"-"}},V=H=>{if(!H)return"-";try{return new Date(H).toLocaleDateString()}catch{return"-"}},$=H=>{const T={pending:"bg-yellow-100 text-yellow-800",accepted:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${T[H]||"bg-gray-100 text-gray-800"}`,children:H})};return l&&e.length===0?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:Ei,borderLeftColor:"transparent"},role:"status"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading attendance records..."})]})}):r.jsxs("div",{className:"h-[75vh] p-4",children:[r.jsx("style",{children:`
        .primary-btn:hover { background: ${BI} !important }
        .primary-border-active { border-bottom-color: ${Ei} !important; color: ${Ei} !important }
      `}),r.jsx(Ki,{notifications:x}),r.jsxs("header",{className:"p-4 mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Attendance Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage all employee and HR attendance records"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-100 via-blue-100 to-blue-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-blue-700 font-semibold mb-2",children:"Total Employees"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:p.totalEmployees??0})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-100 via-green-100 to-green-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-green-700 font-semibold mb-2",children:"Present Today"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:p.present??0})]}),r.jsxs("div",{className:"bg-gradient-to-r from-red-100 via-red-100 to-red-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-red-700 font-semibold mb-2",children:"Absent Today"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:Math.max(0,p?.absent??0)})]}),r.jsxs("div",{className:"bg-gradient-to-r from-yellow-100 via-yellow-100 to-yellow-200 rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow cursor-pointer text-center",children:[r.jsx("h3",{className:"text-sm text-yellow-700 font-semibold mb-2",children:"Pending Approval"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:p.pending??0})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex -mb-px overflow-auto",children:[r.jsx("button",{onClick:()=>D("records"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${R==="records"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:R==="records"?{borderBottomColor:Ei,color:Ei}:{},children:"Attendance Records"}),r.jsx("button",{onClick:()=>D("reports"),className:`py-4 px-6 text-center border-b-2 font-medium text-sm ${R==="reports"?"primary-border-active":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,style:R==="reports"?{borderBottomColor:Ei,color:Ei}:{},children:"Reports & Analytics"})]})}),r.jsxs("div",{className:"p-6",children:[R==="records"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee Name/Email"}),r.jsx("input",{type:"text",name:"employee",value:h.employee,onChange:W,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Search employee..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),r.jsx("input",{type:"date",name:"date",value:h.date,onChange:W,className:"w-full p-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{name:"status",value:h.status,onChange:W,className:"w-full p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"accepted",children:"Accepted"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsx("div",{className:"flex items-end gap-2",children:r.jsx("button",{onClick:ce,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Clear Filters"})})]}),r.jsxs("div",{className:"bg-white rounded-lg",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Attendance Records"}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:I,className:"p-2 text-gray-500 hover:text-gray-700 border rounded-md",title:"Refresh",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsx("div",{className:"max-h-[300px] overflow-y-auto border border-gray-200 rounded-xl shadow-sm",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-[#104774] text-white sticky top-0 z-10 rounded-t-lg",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Login Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Logout Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Work Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Task"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider",children:"Logout Note"})]})}),r.jsx("tbody",{children:s.map((H,T)=>r.jsxs("tr",{className:`${T%2===0?"bg-white":"bg-gray-100"} transition`,children:[r.jsxs("td",{className:"px-6 py-3 whitespace-nowrap",children:[r.jsxs("div",{className:"font-medium text-gray-800",children:[H.employee?.profileRef?.firstName," ",H.employee?.profileRef?.lastName]}),r.jsx("div",{className:"text-sm text-gray-500",children:H.employee?.email}),r.jsx("div",{className:"text-xs text-gray-400 mt-1",children:H.employee?.profileRef?.employeeId})]}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:V(H.date)}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:L(H.checkIn)}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:L(H.checkOut)||"-"}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap",children:$(H.status)}),r.jsx("td",{className:"px-6 py-3 whitespace-nowrap text-sm text-gray-700",children:H.workProgress||"-"}),r.jsx("td",{className:"px-6 py-3 text-sm text-gray-700 max-w-xs",children:r.jsxs("div",{className:"space-y-1",children:[H.taskDescription?r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"truncate cursor-pointer font-medium hover:text-blue-600",children:H.taskDescription}),r.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 mt-2 w-64 bg-gray-900 text-white text-xs rounded-lg p-2 shadow-lg z-50 invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 break-words",children:[H.taskDescription,r.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -mt-1 w-2 h-2 bg-gray-900 rotate-45"})]})]}):r.jsx("span",{className:"text-gray-400 italic",children:"-"}),H.earlyLoginReason&&r.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Early Login:"})," ",H.earlyLoginReason]}),H.lateLoginReason&&r.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Late Login:"})," ",H.lateLoginReason]})]})}),r.jsx("td",{className:"px-6 py-3 text-sm",children:H.logoutDescription?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-medium",children:H.logoutDescription}),H.earlyLogoutReason&&r.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[r.jsx("span",{className:"font-medium",children:"Early Logout:"})," ",H.earlyLogoutReason]})]}):"-"})]},H._id))})]})})})]})]}),R==="reports"&&r.jsx(PI,{token:n,addNotification:F,attendanceRecords:e})]})]}),r.jsx(OS,{isOpen:S,onClose:()=>{N(!1),C(""),A(null)},onReject:me,remarks:j,setRemarks:C})]})},Bm="#104774",zI="#0d3a61",FI=()=>{const{token:n,user:e}=ls(),[t,s]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(new Date().getFullYear()),[h,m]=_.useState(new Date().getMonth()+1),[p,y]=_.useState([]),[x,v]=_.useState(null),[w,A]=_.useState(!1);_.useEffect(()=>{N()},[c,h]);const S=(I,ee="info",z=3500)=>{const Z=Date.now()+Math.random();y(W=>[...W,{id:Z,message:I,type:ee}]),setTimeout(()=>y(W=>W.filter(ce=>ce.id!==Z)),z)},N=async()=>{try{l(!0);const I=await ye.get(`/payroll/employee/my-payrolls?year=${c}&month=${h}`,{headers:{Authorization:`Bearer ${n}`}});s(I.data.data||[])}catch(I){console.error("Error fetching payrolls:",I),S(I.response?.data?.message||"Could not fetch payroll records","error"),s([])}finally{l(!1)}},j=async I=>{try{const ee=await ye.get(`/payroll/payslip/${I}`,{headers:{Authorization:`Bearer ${n}`},responseType:"blob"}),z=new Blob([ee.data],{type:"application/pdf"}),Z=window.URL.createObjectURL(z),W=document.createElement("a");W.href=Z,W.download=`payslip-${I}.pdf`,document.body.appendChild(W),W.click(),document.body.removeChild(W),window.URL.revokeObjectURL(Z),S("Payslip downloaded successfully","success")}catch(ee){console.error("Error downloading payslip:",ee),ee.response?.status===404?ee.response?.data?.message==="Payslip not generated yet"?S("Payslip not ready yet. Please try again later.","error"):S("Payslip file missing. Contact HR.","error"):S(ee.response?.data?.message||"Error downloading payslip","error")}},C=I=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(I),R=I=>new Date(I).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}),D=I=>{const ee={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ee[I]||"bg-gray-100 text-gray-800"}`,children:I.replace("_"," ").toUpperCase()})},O=["January","February","March","April","May","June","July","August","September","October","November","December"],B=new Date().getFullYear(),F=Array.from({length:5},(I,ee)=>B-ee);return i?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:Bm,borderLeftColor:"transparent"},role:"status"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading payroll records..."})]})}):r.jsxs("div",{className:"min-h-[80vh] p-4",children:[r.jsx("style",{children:`
        .primary-btn:hover { background: ${zI} !important }
      `}),r.jsx(Ki,{notifications:p}),r.jsxs("header",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"My Payroll & Payslips"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View and download your salary slips"})]}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Year"}),r.jsx("select",{value:c,onChange:I=>u(parseInt(I.target.value)),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:F.map(I=>r.jsx("option",{value:I,children:I},I))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),r.jsxs("select",{value:h,onChange:I=>m(parseInt(I.target.value)),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Months"}),O.map((I,ee)=>r.jsx("option",{value:ee+1,children:I},ee+1))]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:N,className:"px-4 py-3 rounded-md text-white primary-btn",style:{backgroundColor:Bm},children:"Apply Filters"})})]})}),r.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.length===0?r.jsxs("div",{className:"text-center py-12 bg-white shadow rounded-lg",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No payroll records found"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:h?"Try selecting a different month or year":"No records available for your account"})]}):t.map(I=>r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Salary - ",O[parseInt(I.month.split("-")[1])-1]," ",I.year]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Generated on: ",R(I.approvedAt)]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:C(I.netPay)}),r.jsx("p",{className:"text-sm text-gray-500",children:"Net Salary"})]}),D(I.status)]})]}),r.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Basic Salary"}),r.jsx("p",{className:"text-lg font-semibold",children:C(I.basic)})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"HRA"}),r.jsx("p",{className:"text-lg font-semibold",children:C(I.hra)})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"}),r.jsx("p",{className:"text-lg font-semibold text-green-600",children:C(I.totalEarnings)})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Deductions"}),r.jsx("p",{className:"text-lg font-semibold text-red-600",children:C(I.totalDeductions)})]})]}),r.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>{v(I),A(!0)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"View Details"}),I.status==="approved"&&r.jsx("button",{onClick:()=>j(I._id),className:"px-4 py-2 rounded-md text-white primary-btn",style:{backgroundColor:Bm},children:"Download Payslip"}),I.status==="rejected"&&I.rejectionReason&&r.jsx("div",{className:"bg-red-50 p-3 rounded-lg mt-3",children:r.jsxs("p",{className:"text-sm text-red-800",children:[r.jsx("span",{className:"font-semibold",children:"Rejection Reason:"})," ",I.rejectionReason]})})]})]},I._id))}),w&&x&&r.jsx(UI,{payroll:x,onClose:()=>A(!1),formatCurrency:C})]})},UI=({payroll:n,onClose:e,formatCurrency:t})=>r.jsx("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-40 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-200 shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Salary Details - ",n.month]}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-4",children:"Earnings"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Basic Salary:"}),r.jsx("span",{className:"font-semibold",children:t(n.basic)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"House Rent Allowance (HRA):"}),r.jsx("span",{className:"font-semibold",children:t(n.hra)})]}),n.allowances&&n.allowances.map((s,i)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[s.title,":"]}),r.jsx("span",{className:"font-semibold",children:t(s.amount)})]},i)),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"Total Earnings:"}),r.jsx("span",{className:"text-green-600",children:t(n.totalEarnings)})]})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:"Deductions"}),r.jsxs("div",{className:"space-y-3",children:[n.absentDeduction>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Absent Days Deduction (",n.absentDays," days):"]}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",t(n.absentDeduction)]})]}),n.deductions&&n.deductions.map((s,i)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:[s.title,":"]}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",t(s.amount)]})]},i)),n.tax>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax:"}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",t(n.tax)]})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"Total Deductions:"}),r.jsxs("span",{className:"text-red-600",children:["-",t(n.totalDeductions)]})]})})]})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Net Salary"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:t(n.netPay)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.status==="approved"?"bg-green-100 text-green-800":n.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.status.replace("_"," ").toUpperCase()})]})]})}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Close"})})]})}),qI="#104774",VI=({isOpen:n,onClose:e,onCreate:t,token:s,addNotification:i})=>{const[l,c]=_.useState(!1),[u,h]=_.useState([]),[m,p]=_.useState([]),[y,x]=_.useState([]),[v,w]=_.useState(""),[A,S]=_.useState(!1),[N,j]=_.useState({employeeId:"",month:new Date().getMonth()+1,year:new Date().getFullYear(),basic:0,hra:0,allowances:[],deductions:[],tax:0,taxPercentage:0}),[C,R]=_.useState({title:"",amount:0}),[D,O]=_.useState({title:"",amount:0}),[B,F]=_.useState(null),[I,ee]=_.useState(null),[z,Z]=_.useState(null);_.useEffect(()=>{n&&(W(),j(ge=>({...ge,month:new Date().getMonth()+1,year:new Date().getFullYear()})),F(null),ee(null),Z(null),w(""),p([]),x([]))},[n]),_.useEffect(()=>{v?ce(v):(p([]),x([]))},[v]),_.useEffect(()=>{y.length>0&&me()},[N.month,N.year,y]),_.useEffect(()=>{N.employeeId?(L(N.employeeId),V(N.employeeId,N.month,N.year)):(F(null),ee(null),Z(null))},[N.employeeId,N.month,N.year]),_.useEffect(()=>{if(N.taxPercentage>0&&N.basic>0){const ge=Math.round(N.basic*N.taxPercentage/100);j(we=>({...we,tax:ge}))}else N.taxPercentage===0&&j(ge=>({...ge,tax:0}))},[N.taxPercentage,N.basic]);const W=async()=>{try{const ge=await ye.get("/departments",{headers:{Authorization:`Bearer ${s}`}});h(ge.data.data||[])}catch(ge){console.error(ge),i("Failed to fetch departments","error")}},ce=async ge=>{try{const we=await ye.get(`/departments/${ge}/employees`,{headers:{Authorization:`Bearer ${s}`}});x(we.data.data||[])}catch(we){console.error(we),i("Failed to fetch employees","error")}},me=async()=>{S(!0);try{const we=(await Promise.all(y.map(async ke=>{try{const te=await ye.get(`/payroll/employee/${ke._id}/exists?month=${N.month}&year=${N.year}`,{headers:{Authorization:`Bearer ${s}`}});return{emp:ke,hasPayroll:!!te.data.exists}}catch{return{emp:ke,hasPayroll:!1}}}))).filter(ke=>!ke.hasPayroll).map(ke=>ke.emp);p(we),N.employeeId&&!we.some(ke=>ke._id===N.employeeId)&&j(ke=>({...ke,employeeId:""}))}catch(ge){console.error(ge),p(y)}finally{S(!1)}},L=async ge=>{try{const ke=(await ye.get(`/payroll/employee/${ge}/latest`,{headers:{Authorization:`Bearer ${s}`}})).data?.data||null;if(ee(ke),ke&&typeof ke.basic=="number")j(te=>({...te,basic:ke.basic,hra:ke.hra??te.hra}));else try{const be=(await ye.get(`/profiles/${ge}`,{headers:{Authorization:`Bearer ${s}`}})).data?.data?.basicSalary??prev.basic;j(ve=>({...ve,basic:be}))}catch{}}catch(we){console.error("Error fetching latest payroll:",we)}},V=async(ge,we,ke)=>{try{const te=await ye.get(`/payroll/preview?employeeId=${ge}&month=${we}&year=${ke}&basic=${N.basic||0}&hra=${N.hra||0}&allowances=${JSON.stringify(N.allowances)}&deductions=${JSON.stringify(N.deductions)}&taxPercentage=${N.taxPercentage||0}`,{headers:{Authorization:`Bearer ${s}`}});Z(te.data)}catch(te){console.error("Error fetching payroll preview:",te),Z(null),H()}},$=ge=>Array.isArray(ge)?ge.reduce((we,ke)=>we+(Number(ke.amount)||0),0):0,H=()=>{if(!N.employeeId){i("Select employee to preview","error");return}const ge=Number(N.basic||0),we=Number(N.hra||0),ke=$(N.allowances),te=$(N.deductions),be=Number(N.tax||0),ve=ge/31;let je=0,Ye=0,K=0,Ne=0;if(z)je=z.absent||0,Ye=z.workingDays||0,K=z.approvedLeaves||0,Ne=z.absentDeduction||0;else if(B){const oe=Number(B.present||0),Se=Number(B.leave||0),_e=Number(B.holidays||0),Ue=Number(B.sundays||0);Ye=Number(B.totalWorkingDays||31-(_e+Ue)),je=Number(B.absent??Ye-(oe+Se)),je<0&&(je=0),Ne=Math.round(ve*je),K=Se}const Pe=Math.round(ge+we+ke),Xe=Math.round(te+be+Ne),wt=Math.round(Pe-Xe),qt={basic:ge,hra:we,allowancesSum:ke,deductionsSum:te,tax:be,dailyRate:+ve.toFixed(2),workingDays:Ye,presentDays:Ye-je-K,leaveDays:K,absent:je,absentDeduction:Ne,totalEarnings:Pe,totalDeductions:Xe,netPay:wt};return Z(qt),qt},T=async ge=>{if(ge.preventDefault(),!N.employeeId)return i("Please select an employee","error");c(!0);try{const we={employeeId:N.employeeId,month:N.month,year:N.year,basic:Number(N.basic||0),hra:Number(N.hra||0),allowances:N.allowances||[],deductions:N.deductions||[],taxPercentage:N.taxPercentage||0},ke=await ye.post("/payroll/monthly",we,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});i(ke.data?.message||"Payroll created","success"),j({employeeId:"",month:new Date().getMonth()+1,year:new Date().getFullYear(),basic:0,hra:0,allowances:[],deductions:[],tax:0,taxPercentage:0}),F(null),Z(null),w(""),t&&t(ke.data.data),e()}catch(we){console.error("Error creating payroll:",we),i(we.response?.data?.message||"Error creating payroll","error")}finally{c(!1)}},q=()=>{!C.title||!C.amount||(j(ge=>({...ge,allowances:[...ge.allowances,{title:C.title,amount:Number(C.amount)}]})),R({title:"",amount:0}))},M=ge=>j(we=>({...we,allowances:we.allowances.filter((ke,te)=>te!==ge)})),G=()=>{!D.title||!D.amount||(j(ge=>({...ge,deductions:[...ge.deductions,{title:D.title,amount:Number(D.amount)}]})),O({title:"",amount:0}))},de=ge=>j(we=>({...we,deductions:we.deductions.filter((ke,te)=>te!==ge)})),re=ge=>{const{name:we,value:ke}=ge.target;["basic","hra","tax","taxPercentage"].includes(we)?j(te=>({...te,[we]:Number(ke)})):j(te=>({...te,[we]:ke}))},xe=ge=>{w(ge.target.value),j(we=>({...we,employeeId:""}))};if(!n)return null;const Ee=$(N.allowances),Le=$(N.deductions)+Number(N.tax||0),he=Math.round(Number(N.basic||0)+Number(N.hra||0)+Ee);z?z.netPay:Math.round(he-Le);const $e=["January","February","March","April","May","June","July","August","September","October","November","December"];return new Date().getFullYear(),r.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-opacity-40 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Create New Payroll"}),r.jsxs("span",{className:"text-gray-600",children:[$e[N.month-1]," ",N.year]})]}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:""})]}),r.jsxs("form",{onSubmit:T,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),r.jsxs("select",{value:v,onChange:xe,required:!0,className:"w-full p-3 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"Select Department"}),u.map(ge=>r.jsx("option",{value:ge,children:ge},ge))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee *"}),r.jsxs("select",{name:"employeeId",value:N.employeeId,onChange:re,required:!0,disabled:!v||A,className:"w-full p-3 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"Select Employee"}),A?r.jsx("option",{disabled:!0,children:"Checking payroll status..."}):m.length===0&&v?r.jsx("option",{disabled:!0,children:"All employees already have payroll for this period"}):m.map(ge=>r.jsxs("option",{value:ge._id,children:[ge.firstName," ",ge.lastName," (",ge.employeeId,")"]},ge._id))]})]})]}),r.jsx("input",{type:"hidden",name:"month",value:N.month}),r.jsx("input",{type:"hidden",name:"year",value:N.year}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Basic Salary *"}),r.jsx("input",{name:"basic",type:"number",value:N.basic,onChange:re,required:!0,min:0,className:"w-full p-3 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HRA"}),r.jsx("input",{name:"hra",type:"number",value:N.hra,onChange:re,min:0,className:"w-full p-3 border border-gray-300 rounded-md"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax (%)"}),r.jsx("input",{name:"taxPercentage",type:"number",value:N.taxPercentage,onChange:re,min:0,max:100,step:.1,className:"w-full p-3 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Amount"}),r.jsx("input",{name:"tax",type:"number",value:N.tax,onChange:re,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded-md bg-gray-100"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowances"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{placeholder:"Title",value:C.title,onChange:ge=>R(we=>({...we,title:ge.target.value})),className:"flex-1 p-2 border rounded"}),r.jsx("input",{placeholder:"Amount",type:"number",value:C.amount,onChange:ge=>R(we=>({...we,amount:Number(ge.target.value)})),className:"w-28 p-2 border rounded"}),r.jsx("button",{type:"button",onClick:q,className:"px-3 py-2 bg-green-600 text-white rounded",children:"Add"})]}),N.allowances.map((ge,we)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("span",{children:[ge.title,": ",(ge.amount||0).toLocaleString()]}),r.jsx("button",{type:"button",onClick:()=>M(we),className:"text-red-600",children:"Remove"})]},we))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deductions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{placeholder:"Title",value:D.title,onChange:ge=>O(we=>({...we,title:ge.target.value})),className:"flex-1 p-2 border rounded"}),r.jsx("input",{placeholder:"Amount",type:"number",value:D.amount,onChange:ge=>O(we=>({...we,amount:Number(ge.target.value)})),className:"w-28 p-2 border rounded"}),r.jsx("button",{type:"button",onClick:G,className:"px-3 py-2 bg-green-600 text-white rounded",children:"Add"})]}),N.deductions.map((ge,we)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("span",{children:[ge.title,": ",(ge.amount||0).toLocaleString()]}),r.jsx("button",{type:"button",onClick:()=>de(we),className:"text-red-600",children:"Remove"})]},we))]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Salary Breakdown"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Basic Salary:"}),r.jsxs("span",{children:["",Number(N.basic||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"HRA:"}),r.jsxs("span",{children:["",Number(N.hra||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Allowances:"}),r.jsxs("span",{children:["",Ee.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-green-600 font-medium",children:[r.jsx("span",{children:"Total Earnings:"}),r.jsxs("span",{children:["",(Number(N.basic||0)+Number(N.hra||0)+Ee).toLocaleString()]})]}),r.jsx("hr",{className:"my-2"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Deductions:"}),r.jsxs("span",{className:"text-red-600",children:["-",$(N.deductions).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["Tax (",N.taxPercentage||0,"%):"]}),r.jsxs("span",{className:"text-red-600",children:["-",Number(N.tax||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-red-600 font-medium",children:[r.jsx("span",{children:"Total Deductions:"}),r.jsxs("span",{children:["-",($(N.deductions)+Number(N.tax||0)).toLocaleString()]})]}),r.jsx("hr",{className:"my-2"}),r.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2",children:[r.jsx("span",{children:"Net Pay:"}),r.jsxs("span",{className:"text-green-600",children:["",(Number(N.basic||0)+Number(N.hra||0)+Ee-($(N.deductions)+Number(N.tax||0))).toLocaleString()]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l||!N.employeeId,className:"px-4 py-2 rounded text-white",style:{backgroundColor:qI},children:l?"Creating...":"Create Payroll"})]})]})]})})},IS=({isOpen:n,onClose:e,payroll:t,onUpdate:s,onApproveReject:i,actionLoading:l,formatCurrency:c,isHR:u=!1})=>{const[h,m]=_.useState(!1),[p,y]=_.useState({...t}),[x,v]=_.useState(""),[w,A]=_.useState("summary"),S=ce=>{const{name:me,value:L}=ce.target;y(V=>({...V,[me]:me==="basic"||me==="hra"||me==="tax"?Number(L):L}))},N=(ce,me,L)=>{const V=[...p.allowances||[]];V[ce][me]=me==="amount"?Number(L):L,y($=>({...$,allowances:V}))},j=(ce,me,L)=>{const V=[...p.deductions||[]];V[ce][me]=me==="amount"?Number(L):L,y($=>({...$,deductions:V}))},C=()=>{y(ce=>({...ce,allowances:[...ce.allowances||[],{title:"",amount:0}]}))},R=ce=>{y(me=>({...me,allowances:(me.allowances||[]).filter((L,V)=>V!==ce)}))},D=()=>{y(ce=>({...ce,deductions:[...ce.deductions||[],{title:"",amount:0}]}))},O=ce=>{y(me=>({...me,deductions:(me.deductions||[]).filter((L,V)=>V!==ce)}))},B=ce=>(ce||[]).reduce((me,L)=>me+(L.amount||0),0),F=B(p.allowances),I=B(p.deductions)+(p.tax||0),ee=(p.basic||0)+(p.hra||0)+F,z=ee-I,Z=t.basic/(t.workingDays||22),W=t.absentDeduction/(t.absentDays||1);return n?r.jsx("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-40 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Payroll Details - ",t.employeeProfile?.firstName," ",t.employeeProfile?.lastName]}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"flex border-b border-gray-200 mb-6",children:r.jsx("button",{className:`py-2 px-4 font-medium ${w==="summary"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500"}`,onClick:()=>A("summary"),children:"Summary"})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Employee ID"}),r.jsx("p",{className:"font-semibold",children:t.employeeProfile?.employeeId})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Period"}),r.jsxs("p",{className:"font-semibold",children:[t.month," ",t.year]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.status==="approved"?"bg-green-100 text-green-800":t.status==="rejected"?"bg-red-100 text-red-800":t.status==="pending_approval"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status.replace("_"," ").toUpperCase()})]})]}),w==="summary"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-4",children:"Earnings"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Basic Salary:"}),h?r.jsx("input",{type:"number",name:"basic",value:p.basic||0,onChange:S,className:"w-32 p-2 border border-gray-300 rounded-md"}):r.jsx("span",{className:"font-semibold",children:c(t.basic||0)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"House Rent Allowance (HRA):"}),h?r.jsx("input",{type:"number",name:"hra",value:p.hra||0,onChange:S,className:"w-32 p-2 border border-gray-300 rounded-md"}):r.jsx("span",{className:"font-semibold",children:c(t.hra||0)})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Allowances:"}),h&&r.jsx("button",{onClick:C,className:"px-2 py-1 bg-green-600 text-white rounded-md text-sm",children:"+ Add"})]}),r.jsx("div",{className:"space-y-2",children:(p.allowances||[]).map((ce,me)=>r.jsx("div",{className:"flex justify-between items-center",children:h?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",value:ce.title||"",onChange:L=>N(me,"title",L.target.value),placeholder:"Allowance title",className:"flex-1 p-2 border border-gray-300 rounded-md mr-2"}),r.jsx("input",{type:"number",value:ce.amount||0,onChange:L=>N(me,"amount",L.target.value),className:"w-24 p-2 border border-gray-300 rounded-md mr-2"}),r.jsx("button",{onClick:()=>R(me),className:"text-red-600 hover:text-red-800",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{children:[ce.title||"Allowance",":"]}),r.jsx("span",{className:"font-semibold",children:c(ce.amount||0)})]})},me))})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"Total Earnings:"}),r.jsx("span",{className:"text-green-600",children:c(ee)})]})})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-4",children:"Deductions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Tax:"}),h?r.jsx("input",{type:"number",name:"tax",value:p.tax||0,onChange:S,className:"w-32 p-2 border border-gray-300 rounded-md"}):r.jsxs("span",{className:"font-semibold text-red-600",children:["-",c(t.tax||0)]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Other Deductions:"}),h&&r.jsx("button",{onClick:D,className:"px-2 py-1 bg-green-600 text-white rounded-md text-sm",children:"+ Add"})]}),r.jsx("div",{className:"space-y-2",children:(p.deductions||[]).map((ce,me)=>r.jsx("div",{className:"flex justify-between items-center",children:h?r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",value:ce.title||"",onChange:L=>j(me,"title",L.target.value),placeholder:"Deduction title",className:"flex-1 p-2 border border-gray-300 rounded-md mr-2"}),r.jsx("input",{type:"number",value:ce.amount||0,onChange:L=>j(me,"amount",L.target.value),className:"w-24 p-2 border border-gray-300 rounded-md mr-2"}),r.jsx("button",{onClick:()=>O(me),className:"text-red-600 hover:text-red-800",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{children:[ce.title||"Deduction",":"]}),r.jsxs("span",{className:"font-semibold text-red-600",children:["-",c(ce.amount||0)]})]})},me))})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between text-lg font-semibold",children:[r.jsx("span",{children:"Total Deductions:"}),r.jsxs("span",{className:"text-red-600",children:["-",c(I)]})]})})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg mb-6",children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Net Salary"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:c(z)})]})})})]}),w==="breakdown"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Attendance Calculation"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Working Days"}),r.jsx("p",{className:"text-lg font-semibold",children:t.workingDays||22}),r.jsx("p",{className:"text-xs text-gray-500",children:"Total days excluding Sundays and holidays"})]}),r.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Present Days"}),r.jsx("p",{className:"text-lg font-semibold text-green-600",children:t.presentDays||0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Days employee was marked present"})]}),r.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Leave Days"}),r.jsx("p",{className:"text-lg font-semibold text-blue-600",children:t.leaveDays||0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Approved paid leaves"})]}),r.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Absent Days"}),r.jsx("p",{className:"text-lg font-semibold text-red-600",children:t.absentDays||0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Days absent without approved leave"})]})]}),r.jsxs("div",{className:"mt-4 bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Daily Rate Calculation"}),r.jsxs("p",{className:"text-sm",children:["",t.basic?.toLocaleString(),"  ",t.workingDays||22," days = ",Z.toFixed(2)," per day"]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Basic salary divided by working days"})]}),t.absentDays>0&&r.jsxs("div",{className:"mt-4 bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Absent Deduction Calculation"}),r.jsxs("p",{className:"text-sm",children:[t.absentDays," days  ",W.toFixed(2)," = ",t.absentDeduction?.toLocaleString()]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Absent days multiplied by daily rate"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tax Calculation"}),r.jsxs("div",{className:"bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Taxable Income"}),r.jsxs("p",{className:"text-lg font-semibold",children:["",t.basic?.toLocaleString()]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Basic salary used for tax calculation"})]}),t.tax>0&&r.jsxs("div",{className:"mt-4 bg-white p-3 rounded shadow-sm",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tax Percentage"}),r.jsxs("p",{className:"text-lg font-semibold",children:[(t.tax/t.basic*100).toFixed(2),"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Applicable tax rate on basic salary"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Net Pay Calculation"}),r.jsxs("div",{className:"space-y-2 bg-white p-4 rounded shadow-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Basic Salary:"}),r.jsxs("span",{children:["+",t.basic?.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"HRA:"}),r.jsxs("span",{children:["+",t.hra?.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Total Allowances:"}),r.jsxs("span",{children:["+",F.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[r.jsx("span",{children:"Gross Earnings:"}),r.jsxs("span",{children:["",t.totalEarnings?.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-red-600",children:[r.jsx("span",{children:"Tax Deduction:"}),r.jsxs("span",{children:["-",t.tax?.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-red-600",children:[r.jsx("span",{children:"Absent Deduction:"}),r.jsxs("span",{children:["-",t.absentDeduction?.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-red-600",children:[r.jsx("span",{children:"Other Deductions:"}),r.jsxs("span",{children:["-",B(t.deductions).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between font-semibold text-red-600 border-t pt-2",children:[r.jsx("span",{children:"Total Deductions:"}),r.jsxs("span",{children:["-",t.totalDeductions?.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-green-600 text-lg border-t pt-2",children:[r.jsx("span",{children:"Net Pay:"}),r.jsxs("span",{children:["",t.netPay?.toLocaleString()]})]})]})]})]}),t.status==="rejected"&&t.rejectionReason&&r.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[r.jsx("h4",{className:"text-sm font-semibold text-red-800 mb-2",children:"Rejection Reason:"}),r.jsx("p",{className:"text-sm text-red-700",children:t.rejectionReason})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[u&&t.status==="draft"&&r.jsx(r.Fragment,{children:h?r.jsx(r.Fragment,{children:r.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"})}):r.jsx(r.Fragment,{})}),r.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Close"})]})]})}):null},gw="#104774",$I="#0d3a61",GI=()=>{const{token:n,user:e}=ls(),[t,s]=_.useState([]),[i,l]=_.useState([]),[c,u]=_.useState(!0),[h,m]=_.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""}),[p,y]=_.useState([]),[x,v]=_.useState(!1),[w,A]=_.useState(null),[S,N]=_.useState(!1),[j,C]=_.useState(null);_.useEffect(()=>{D(),O()},[h]);const R=($,H="info",T=3500)=>{const q=Date.now()+Math.random();y(M=>[...M,{id:q,message:$,type:H}]),setTimeout(()=>y(M=>M.filter(G=>G.id!==q)),T)},D=async()=>{try{u(!0);const $=new URLSearchParams;h.year&&$.append("year",h.year),h.month&&$.append("month",h.month),h.status&&$.append("status",h.status),h.employee&&$.append("employee",h.employee);const H=await ye.get(`/payroll?${$}`,{headers:{Authorization:`Bearer ${n}`}});s(H.data.data||[])}catch($){console.error("Error fetching payrolls:",$),R($.response?.data?.message||"Could not fetch payroll records","error"),s([])}finally{u(!1)}},O=async()=>{try{const $=await ye.get("/employee/all-employees",{headers:{Authorization:`Bearer ${n}`}});l($.data.data||[])}catch($){console.error("Error fetching employees:",$),R("Error fetching employees","error")}},B=async $=>{try{const H=await ye.post("/payroll/monthly",$,{headers:{Authorization:`Bearer ${n}`}});R("Payroll created successfully","success"),v(!1),D()}catch(H){console.error("Error creating payroll:",H),R(H.response?.data?.message||"Error creating payroll","error")}},F=async($,H)=>{try{C($);const T=await ye.put(`/payroll/${$}`,H,{headers:{Authorization:`Bearer ${n}`}});R("Payroll updated successfully","success"),N(!1),D()}catch(T){console.error("Error updating payroll:",T),R(T.response?.data?.message||"Error updating payroll","error")}finally{C(null)}},I=async $=>{try{C($);const H=await ye.patch(`/payroll/${$}/submit`,{},{headers:{Authorization:`Bearer ${n}`}});R("Payroll submitted for approval","success"),D()}catch(H){console.error("Error submitting payroll:",H),R(H.response?.data?.message||"Error submitting payroll","error")}finally{C(null)}},ee=$=>{const{name:H,value:T}=$.target;m(q=>({...q,[H]:T}))},z=()=>{m({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""})},Z=$=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format($),W=$=>new Date($).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),ce=$=>{const H={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};return r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${H[$]||"bg-gray-100 text-gray-800"}`,children:$.replace("_"," ").toUpperCase()})},me=["January","February","March","April","May","June","July","August","September","October","November","December"],L=new Date().getFullYear(),V=Array.from({length:3},($,H)=>L+H);return c&&t.length===0?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:gw,borderLeftColor:"transparent"},role:"status"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading payroll records..."})]})}):r.jsxs("div",{className:"min-h-[80vh] p-4",children:[r.jsx("style",{children:`
        .primary-btn:hover { background: ${$I} !important }
      `}),r.jsx(Ki,{notifications:p}),r.jsx("header",{className:"mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Payroll Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage employee payrolls"})]}),r.jsx("button",{onClick:()=>v(!0),className:"px-6 py-3 rounded-md text-white primary-btn",style:{backgroundColor:gw},children:"Create New Payroll"})]})}),r.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 mb-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"grid grid-cols-2 xl:grid-cols-4 gap-4",id:"stats-cards",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Total Payrolls"}),r.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-yellow-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Draft"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter($=>$.status==="draft").length})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Pending Approval"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.filter($=>$.status==="pending_approval").length})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Approved"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter($=>$.status==="approved").length})]})]})}),r.jsx("div",{className:"flex-1 bg-white shadow rounded-lg border-l-4 border-blue-500 flex flex-col",style:{height:"85px"},children:r.jsx("div",{className:"flex-1 p-4",children:r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-3 h-full items-center",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Year"}),r.jsx("select",{name:"year",value:h.year,onChange:ee,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:V.map($=>r.jsx("option",{value:$,children:$},$))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Month"}),r.jsxs("select",{name:"month",value:h.month,onChange:ee,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Months"}),me.map(($,H)=>r.jsx("option",{value:H+1,children:$},H+1))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),r.jsxs("select",{name:"status",value:h.status,onChange:ee,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"pending_approval",children:"Pending Approval"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Employee"}),r.jsxs("select",{name:"employee",value:h.employee,onChange:ee,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Employees"}),i.map($=>r.jsxs("option",{value:$._id,children:[$.firstName," ",$.lastName," (",$.employeeId,")"]},$._id))]})]}),r.jsx("div",{className:"flex gap-2 justify-center mt-4",children:r.jsxs("button",{onClick:z,className:"px-3 py-2 text-xs bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1 border",title:"Clear Filters",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})})]})})})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Payroll Records"})}),t.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No payroll records found"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters or create a new payroll"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map($=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:r.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:$.employee?.avatarUrl||"/default-avatar.png",alt:""})}),r.jsxs("div",{className:"ml-4",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[$.employeeProfile?.firstName," ",$.employeeProfile?.lastName]}),r.jsx("div",{className:"text-sm text-gray-500",children:$.employeeProfile?.employeeId})]})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:[me[parseInt($.month.split("-")[1])-1]," ",$.year]}),r.jsx("div",{className:"text-sm text-gray-500",children:W($.generatedAt)})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Z($.basic)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ce($.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{A($),N(!0)},className:"text-blue-600 hover:text-blue-900",children:"View"}),$.status==="draft"&&r.jsx(r.Fragment,{children:r.jsx("button",{onClick:()=>I($._id),disabled:j===$._id,className:"text-green-600 hover:text-green-900 disabled:opacity-50",children:j===$._id?"Processing...":"Submit"})}),$.status==="rejected"&&r.jsx("button",{onClick:()=>{A($),N(!0)},className:"text-yellow-600 hover:text-yellow-900",children:"Edit & Resubmit"})]})})]},$._id))})]})})]}),x&&r.jsx(VI,{isOpen:x,onClose:()=>v(!1),onCreate:B,token:n,addNotification:R}),S&&w&&r.jsx(IS,{isOpen:S,onClose:()=>N(!1),payroll:w,onUpdate:F,onSubmitForApproval:I,actionLoading:j,formatCurrency:Z,isHR:!0})]})},yw="#104774",YI="#0d3a61",WI=()=>{const{token:n}=ls(),[e,t]=_.useState([]),[s,i]=_.useState(!0),[l,c]=_.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""}),[u,h]=_.useState([]),[m,p]=_.useState([]),[y,x]=_.useState(null),[v,w]=_.useState(!1),[A,S]=_.useState(null),[N,j]=_.useState({total:0,pending:0,approved:0,rejected:0}),[C,R]=_.useState(new Set),[D,O]=_.useState(""),[B,F]=_.useState(""),[I,ee]=_.useState(!1),z=e.filter(he=>he.status!=="approved").map(he=>he._id),Z=z.length;_.useEffect(()=>{ce(),me()},[l]);const W=(he,$e="info",ge=3500)=>{const we=Date.now()+Math.random();p(ke=>[...ke,{id:we,message:he,type:$e}]),setTimeout(()=>p(ke=>ke.filter(te=>te.id!==we)),ge)},ce=async()=>{try{i(!0);const he=new URLSearchParams;l.year&&he.append("year",l.year),l.month&&he.append("month",l.month),l.status&&he.append("status",l.status),l.employee&&he.append("employee",l.employee),he.append("fullData","true");const $e=await ye.get(`/payroll?${he}`,{headers:{Authorization:`Bearer ${n}`}});t($e.data.data||[]),L($e.data.data||[])}catch(he){console.error("Error fetching payrolls:",he),W(he.response?.data?.message||"Could not fetch payroll records","error"),t([])}finally{i(!1)}},me=async()=>{try{const he=await ye.get("/employee/all-employees",{headers:{Authorization:`Bearer ${n}`}});h(he.data.data||[])}catch(he){console.error("Error fetching employees:",he),W("Error fetching employees","error")}},L=he=>{const $e={total:he.length,pending:he.filter(ge=>ge.status==="pending_approval").length,approved:he.filter(ge=>ge.status==="approved").length,rejected:he.filter(ge=>ge.status==="rejected").length};j($e)},V=async(he,$e,ge="")=>{try{S(he);const we=await ye.patch(`/payroll/${he}/approve`,{action:$e,rejectionReason:ge},{headers:{Authorization:`Bearer ${n}`}}),ke=$e==="approve"?"Payroll rolled out successfully":$e==="reject"?"Payroll rejected successfully":`Payroll ${$e}ed successfully`;W(ke,"success"),w(!1),ce()}catch(we){console.error("Error processing payroll:",we),W(we.response?.data?.message||`Error ${$e}ing payroll`,"error")}finally{S(null)}},$=async()=>{if(!D){W("Please select an action first","error");return}if(D==="reject"&&!B.trim()){W("Please provide a rejection reason","error");return}if(C.size===0){W("Please select at least one payroll","error");return}try{S("bulk");const he=Array.from(C).map(ge=>ye.patch(`/payroll/${ge}/approve`,{action:D,rejectionReason:D==="reject"?B:""},{headers:{Authorization:`Bearer ${n}`}}));await Promise.all(he);const $e=D==="approve"?"rolled out":D==="reject"?"rejected":`${D}ed`;W(`${C.size} payrolls ${$e} successfully`,"success"),R(new Set),O(""),F(""),ee(!1),ce()}catch(he){console.error("Error processing bulk action:",he),W(he.response?.data?.message||"Error processing bulk action","error")}finally{S(null)}},H=he=>{if(e.find(we=>we._id===he)?.status==="approved")return;const ge=new Set(C);ge.has(he)?ge.delete(he):ge.add(he),R(ge)},T=()=>{C.size===Z?R(new Set):R(new Set(z))},q=he=>{const{name:$e,value:ge}=he.target;c(we=>({...we,[$e]:ge}))},M=()=>{c({year:new Date().getFullYear(),month:new Date().getMonth()+1,status:"",employee:""})},G=he=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(he),de=he=>new Date(he).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),re=he=>{const $e={draft:"bg-gray-100 text-gray-800",pending_approval:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"},ge=he==="approved"?"ROLLED OUT":he==="pending_approval"?"PENDING ROLLED OUT":he.replace("_"," ").toUpperCase();return r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${$e[he]||"bg-gray-100 text-gray-800"}`,children:ge})},xe=["January","February","March","April","May","June","July","August","September","October","November","December"],Ee=new Date().getFullYear(),Le=[Ee-1,Ee,Ee+1];return s&&e.length===0?r.jsx("div",{className:"min-h-screen bg-gray-50 p-6 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 rounded-full",style:{borderColor:yw,borderLeftColor:"transparent"},role:"status"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading payroll records..."})]})}):r.jsxs("div",{className:"min-h-[80vh] p-4",children:[r.jsx("style",{children:`
        .primary-btn:hover { background: ${YI} !important }
      `}),r.jsx(Ki,{notifications:m}),r.jsx("header",{className:"mb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Payroll Approval"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and approve employee payrolls"})]}),r.jsxs("button",{onClick:ce,className:"px-4 py-2 rounded-md text-white primary-btn flex items-center gap-2",style:{backgroundColor:yw},children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}),r.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 mb-6",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"grid grid-cols-2 xl:grid-cols-4 gap-4",id:"stats-cards",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Total Payrolls"}),r.jsx("p",{className:"text-2xl font-bold",children:N.total})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-yellow-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Pending Approval"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:N.pending})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Approved"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:N.approved})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-red-500 text-center min-w-[200px]",children:[r.jsx("h3",{className:"text-sm text-gray-500",children:"Rejected"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:N.rejected})]})]})}),r.jsx("div",{className:"flex-1 bg-white shadow rounded-lg border-l-4 border-blue-500",style:{height:"",display:"flex",flexDirection:"column"},children:r.jsx("div",{className:"flex-1 p-4",children:r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-3 h-full items-center",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Year"}),r.jsx("select",{name:"year",value:l.year,onChange:q,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Le.map(he=>r.jsx("option",{value:he,children:he},he))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Month"}),r.jsxs("select",{name:"month",value:l.month,onChange:q,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Months"}),xe.map((he,$e)=>r.jsx("option",{value:$e+1,children:he},$e+1))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),r.jsxs("select",{name:"status",value:l.status,onChange:q,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Status"}),r.jsx("option",{value:"pending_approval",children:"Pending Approval"}),r.jsx("option",{value:"approved",children:"Approved"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Employee"}),r.jsxs("select",{name:"employee",value:l.employee,onChange:q,className:"w-full p-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Employees"}),u.map(he=>r.jsxs("option",{value:he._id,children:[he.firstName," ",he.lastName]},he._id))]})]}),r.jsx("div",{className:"flex gap-2 justify-center mt-4 ",children:r.jsxs("button",{onClick:M,className:"px-3 py-2 text-xs bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1 border",title:"Clear Filters",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear"]})})]})})})]}),e.length>0&&r.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Bulk Actions"}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:C.size===Z,onChange:T,className:"h-4 w-4 text-blue-600 rounded"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Select all (",C.size," selected)"]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-2 flex-1",children:[r.jsxs("select",{value:D,onChange:he=>{O(he.target.value),ee(he.target.value==="reject")},className:"p-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"",children:"Select Action"}),r.jsx("option",{value:"approve",children:"Roll Out Selected"}),r.jsx("option",{value:"reject",children:"Reject Selected"})]}),I&&r.jsx("input",{type:"text",value:B,onChange:he=>F(he.target.value),placeholder:"Reason for rejection",className:"p-2 border border-gray-300 rounded-md flex-1"}),r.jsx("button",{onClick:$,disabled:A==="bulk"||!D,className:"px-4 py-2 bg-[#104774] text-white rounded-md hover:bg-[#002442] disabled:opacity-50 flex items-center gap-2",children:A==="bulk"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):"Apply to Selected"})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-800",children:["Payroll Records (",e.length,")"]}),r.jsx("span",{className:"text-sm text-gray-500",children:l.status==="pending_approval"?"Pending Approval":l.status==="approved"?"Approved":l.status==="rejected"?"Rejected":"All Records"})]}),e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No payroll records found"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l.status==="pending_approval"?"No payrolls pending approval":"Try adjusting your filters"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsx("input",{type:"checkbox",checked:C.size===Z,onChange:T,className:"h-4 w-4 text-blue-600 rounded"})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated By"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(he=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:C.has(he._id),onChange:()=>H(he._id),className:"h-4 w-4 text-blue-600 rounded",disabled:he.status==="approved",title:he.status==="approved"?"Already Rolled Out":void 0})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:r.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:he.employee?.avatarUrl||"/default-avatar.png",alt:he.employee?.firstName})}),r.jsxs("div",{className:"ml-4",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[he.employee?.firstName," ",he.employee?.lastName]}),r.jsx("div",{className:"text-xs text-gray-400",children:he.employee?.email||""}),r.jsx("div",{className:"text-sm text-gray-500",children:he.employee?.employeeId})]})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm text-gray-900",children:[xe[parseInt(he.month.split("-")[1],10)-1]," ",he.year]}),he.generatedAt&&r.jsx("div",{className:"text-sm text-gray-500",children:de(he.generatedAt)})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-semibold text-green-600",children:G(he.basic)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:re(he.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:he.generatedBy||""}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>{x(he),w(!0)},className:"text-blue-600 hover:text-blue-900 flex items-center gap-1",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Review"]}),he.status==="pending_approval"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>V(he._id,"approve"),disabled:A===he._id,className:"text-green-600 hover:text-green-900 disabled:opacity-50 flex items-center gap-1",children:A===he._id?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-green-600"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Roll Out"]})}),r.jsxs("button",{onClick:()=>{x(he),w(!0)},className:"text-red-600 hover:text-red-900 flex items-center gap-1",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Reject"]})]})]})})]},he._id))})]})})]}),v&&y&&r.jsx(IS,{isOpen:v,onClose:()=>w(!1),payroll:y,onApproveReject:V,actionLoading:A,formatCurrency:G,isHR:!1,actionLabel:"Roll Out"})]})},XI=({isOpen:n,onClose:e,onSuccess:t,token:s,leaveBalance:i})=>{const[l,c]=_.useState([]),[u,h]=_.useState({leaveType:"",fromDate:"",toDate:"",reason:"",totalDays:0}),[m,p]=_.useState({}),[y,x]=_.useState(!1),[v,w]=_.useState(!1);_.useEffect(()=>{n&&A()},[n]),_.useEffect(()=>{n||(h({leaveType:"",fromDate:"",toDate:"",reason:"",totalDays:0}),p({}))},[n]);const A=async()=>{try{const D=((await ye.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${s}`}})).data||[]).filter(O=>O.isActive);c(D),D.length>0&&!u.leaveType&&h(O=>({...O,leaveType:D[0].name}))}catch(R){console.error("Error fetching leave types:",R)}},S=(R,D)=>{if(!R||!D)return 0;const O=new Date(R),B=new Date(D);if(O>B)return 0;let F=0;const I=new Date(O);for(;I<=B;){const ee=I.getDay();ee!==0&&ee!==6&&F++,I.setDate(I.getDate()+1)}return F};_.useEffect(()=>{if(u.fromDate&&u.toDate){w(!0);const R=S(u.fromDate,u.toDate);h(D=>({...D,totalDays:R})),w(!1)}else h(R=>({...R,totalDays:0}))},[u.fromDate,u.toDate]);const N=R=>{const{name:D,value:O}=R.target;h(B=>({...B,[D]:O})),m[D]&&p(B=>({...B,[D]:""}))},j=()=>{const R={},D=new Date;if(D.setHours(0,0,0,0),u.leaveType||(R.leaveType="Leave type is required"),u.fromDate?new Date(u.fromDate)<D&&(R.fromDate="Cannot apply for backdated leaves"):R.fromDate="From date is required",u.toDate?u.fromDate&&new Date(u.toDate)<new Date(u.fromDate)&&(R.toDate="To date cannot be before from date"):R.toDate="To date is required",u.reason.trim()?u.reason.length>500&&(R.reason="Reason cannot exceed 500 characters"):R.reason="Reason is required",u.leaveType&&u.totalDays>0){const O=i[u.leaveType]||0;O<u.totalDays&&(R.leaveType=`Insufficient ${u.leaveType} leave balance! You have ${O} days left.`)}return p(R),Object.keys(R).length===0},C=async R=>{if(R.preventDefault(),!!j()){x(!0);try{await ye.post("/leave/create",u,{headers:{Authorization:`Bearer ${s}`}}),t()}catch(D){console.error("Error applying leave:",D);const O=D.response?.data?.message||"Error applying leave. Please try again.";p({submit:O})}finally{x(!1)}}};return n?r.jsx("div",{className:"fixed inset-0  bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md relative max-h-[90vh] overflow-y-auto shadow-xl border border-gray-200",children:[r.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(qo,{size:24})}),r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Apply for Leave"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Fill in the details to apply for leave"}),m.submit&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm flex items-center",children:[r.jsx(as,{size:16,className:"mr-2"}),m.submit]}),r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"Leave Type"}),r.jsxs("select",{name:"leaveType",value:u.leaveType,onChange:N,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",children:[r.jsx("option",{value:"",children:"Select Leave Type"}),l.map(R=>r.jsxs("option",{value:R.name,children:[R.name.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase()),i[R.name]!==void 0&&` (${i[R.name]} days available)`]},R._id))]}),m.leaveType&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"}),m.leaveType]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"From Date"}),r.jsx("input",{type:"date",name:"fromDate",value:u.fromDate,onChange:N,min:new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm"}),m.fromDate&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"}),m.fromDate]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"To Date"}),r.jsx("input",{type:"date",name:"toDate",value:u.toDate,onChange:N,min:u.fromDate||new Date().toISOString().split("T")[0],className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm"}),m.toDate&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"}),m.toDate]})]})]}),u.fromDate&&u.toDate&&r.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-blue-700 font-medium",children:"Working Days:"}),r.jsx("span",{className:"text-blue-800 font-semibold",children:v?r.jsxs("span",{className:"flex items-center",children:[r.jsx(mn,{size:14,className:"mr-1 animate-pulse"}),"Calculating..."]}):`${u.totalDays} day${u.totalDays!==1?"s":""}`})]}),r.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"(Excludes weekends)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block mb-2 font-medium text-sm text-gray-700",children:"Reason"}),r.jsx("textarea",{name:"reason",value:u.reason,onChange:N,rows:4,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-[#104774] text-sm",placeholder:"Please provide a reason for your leave"}),r.jsxs("div",{className:"flex justify-between mt-1",children:[r.jsxs("div",{className:"text-xs text-gray-500",children:[u.reason.length,"/500 characters"]}),m.reason&&r.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[r.jsx(as,{size:12,className:"mr-1"}),m.reason]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm font-medium transition-colors",disabled:y,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 rounded-lg bg-[#104774] text-white hover:bg-[#0d3a61] text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:y?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Applying..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ks,{size:16,className:"mr-2"}),"Apply for Leave"]})})]})]})]})}):null},QI=()=>{const{token:n,user:e}=ls(),[t,s]=_.useState({attendance:{},leaveBalance:{},attendanceSummary:{},leaveApplications:[]}),[i,l]=_.useState(!0),[c,u]=_.useState(!1),[h,m]=_.useState(!1),[p,y]=_.useState(!1),[x,v]=_.useState(!1),[w,A]=_.useState([]),[S,N]=_.useState([]),j=al(),C=(W,ce="info",me=4e3)=>{const L=Date.now()+Math.random();N(V=>[...V,{id:L,message:W,type:ce}]),setTimeout(()=>N(V=>V.filter($=>$.id!==L)),me)},R=async()=>{try{u(!0);const ce=(await ye.get("/attendance/today",{headers:{Authorization:`Bearer ${n}`}})).data||{},L=(await ye.get("/leave/balance",{headers:{Authorization:`Bearer ${n}`}})).data?.balance||{},$=(await ye.get("/attendance/history",{headers:{Authorization:`Bearer ${n}`}})).data||[],H=new Date,T=new Date;T.setDate(H.getDate()-30);const q={present:$.filter(de=>de.status==="accepted"&&new Date(de.date)>=T).length,absent:0,leave:$.filter(de=>de.status==="on_leave"&&new Date(de.date)>=T).length,holidays:0},G=(await ye.get("/leave/my-requests",{headers:{Authorization:`Bearer ${n}`}})).data||[];s({attendance:ce,leaveBalance:L,attendanceSummary:q,leaveApplications:G})}catch(W){console.error("Error fetching dashboard data:",W)}finally{l(!1),u(!1)}},D=async()=>{try{const ce=((await ye.get("/leave/get-leaveTypes",{headers:{Authorization:`Bearer ${n}`}})).data||[]).filter(me=>me.isActive);A(ce)}catch(W){console.error("Error fetching leave types:",W)}};_.useEffect(()=>{R(),D()},[]);const O=()=>{m(!1),R()},B=()=>{y(!1),R()},F=()=>{v(!1),R()},I=W=>W?yo(new Date(W),"dd MMM yy"):"",ee=W=>W.replace(/_/g," ").replace(/\b\w/g,ce=>ce.toUpperCase());if(i)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})});const Z=Math.round(t.attendanceSummary.present/26*100);return r.jsxs("div",{className:"min-h-[80vh] p-6 bg-gray-50",children:[r.jsx(Ki,{notifications:S}),r.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Employee Dashboard"}),r.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",e?.name,"! Here's your overview for today."]})]}),r.jsxs("button",{onClick:R,disabled:c,className:"bg-[#104774] text-white px-4 py-2 rounded-lg flex items-center disabled:opacity-50",children:[r.jsx(zi,{className:`w-4 h-4 mr-2 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh Data"]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 flex flex-col h-[280px]",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Today's Attendance"})}),r.jsx("div",{className:"mb-4",children:r.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-medium ${t.attendance.status==="accepted"?"bg-green-100 text-green-700":t.attendance.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.attendance.status?t.attendance.status.charAt(0).toUpperCase()+t.attendance.status.slice(1):"Not marked"})}),r.jsxs("div",{className:"space-y-2 mb-6 flex-grow overflow-y-auto pr-1 scrollbar-hide",children:[r.jsxs("div",{className:"text-sm text-slate-600 flex items-center",children:["Log In:"," ",r.jsx("span",{className:"font-medium text-slate-900 ml-1",children:t.attendance.checkIn?new Date(t.attendance.checkIn).toLocaleTimeString():"Not logged in"})]}),r.jsxs("div",{className:"text-sm text-slate-600 flex items-center",children:["Log Out:"," ",r.jsx("span",{className:"font-medium text-slate-900 ml-1",children:t.attendance.checkOut?new Date(t.attendance.checkOut).toLocaleTimeString():"Pending"})]})]}),t.attendance.checkOut?r.jsx("div",{className:"w-full text-center py-3 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium",children:"Today's Session Ended"}):t.attendance.checkIn?r.jsx("button",{onClick:()=>y(!0),className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-3 px-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-md hover:shadow-lg mt-auto",children:"Log Out"}):r.jsx("button",{onClick:()=>m(!0),className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-3 px-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-md hover:shadow-lg mt-auto",children:"Mark Attendance"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 flex flex-col h-[280px]",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Leaves Summary"})}),r.jsxs("div",{className:"space-y-2 mb-6 flex-grow overflow-y-auto pr-1 scrollbar-hide",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Total Leaves:"," ",r.jsx("span",{className:"font-medium text-slate-900",children:(t.leaveBalance.sick||0)+(t.leaveBalance.casual||0)+(t.leaveBalance.paid||0)})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Sick:"," ",r.jsx("span",{className:"font-medium text-red-500 ml-1",children:t.leaveBalance.sick||0})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Casual:"," ",r.jsx("span",{className:"font-medium text-blue-500 ml-1",children:t.leaveBalance.casual||0})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Paid:"," ",r.jsx("span",{className:"font-medium text-green-500 ml-1",children:t.leaveBalance.paid||0})]})]}),r.jsx("button",{onClick:()=>v(!0),className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-3 px-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-md hover:shadow-lg mt-auto",children:"Apply for Leave"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 flex flex-col h-[280px]",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Recent Leaves"})}),r.jsxs("div",{className:"space-y-3 mb-6 flex-grow max-h-[200px] overflow-y-auto pr-1 scrollbar-hide",children:[t.leaveApplications.slice(0,5).map((W,ce)=>r.jsxs("div",{className:"text-sm pb-2 last:border-0",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium text-slate-800",children:ee(W.leaveType)}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${W.status==="approved"?"bg-green-100 text-green-700":W.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:W.status})]}),r.jsxs("div",{className:"text-slate-600",children:[I(W.fromDate)," - ",I(W.toDate)]})]},ce)),t.leaveApplications.length===0&&r.jsx("div",{className:"text-sm text-slate-500 text-center py-4 mt-9",children:"No leave applications yet"})]}),r.jsx("button",{onClick:()=>j("/employee/leaves"),className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-3 px-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-md hover:shadow-lg mt-auto",children:"View All Leaves"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 flex flex-col h-[280px]",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Performance"})}),r.jsxs("div",{className:"space-y-2 mb-6 flex-grow overflow-y-auto pr-1 scrollbar-hide",children:[r.jsxs("div",{className:"text-sm text-slate-600",children:["Attendance Rate:"," ",r.jsxs("span",{className:"font-medium text-slate-900",children:[Z,"%"]})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${Z}%`}})}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Present Days:"," ",r.jsx("span",{className:"font-medium text-slate-900",children:t.attendanceSummary.present||0})]}),r.jsxs("div",{className:"text-sm text-slate-600",children:["Leaves Taken:"," ",r.jsx("span",{className:"font-medium text-slate-900",children:t.attendanceSummary.leave||0})]})]}),r.jsx("button",{onClick:()=>j("/employee/attendance"),className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-3 px-4 rounded-xl font-medium transition-all duration-300 transform hover:scale-[1.02] shadow-md hover:shadow-lg mt-auto",children:"View Attendance"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-all duration-300 border border-slate-200 flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-semibold text-slate-800 flex items-center",children:[r.jsx(YT,{className:"w-5 h-5 mr-2 text-blue-500"}),"Attendance Summary"]}),r.jsx("span",{className:"text-sm text-gray-500",children:"Last 30 Days"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 flex-grow",children:[r.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-100",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:t.attendanceSummary.present||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Present days"})]}),r.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-100",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:t.attendanceSummary.leave||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"On leave days"})]}),r.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg border border-yellow-100",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600 mb-1",children:"25"}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Working days"})]}),r.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg border border-purple-100",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:t.attendanceSummary.holidays||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Holidays"})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-5 shadow-md hover:shadow-lg transition-all duration-300 border border-blue-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-5",children:[r.jsx("h3",{className:"text-xl font-semibold text-slate-800",children:"Leave Balance"}),r.jsx("span",{className:"text-sm text-gray-500",children:"Remaining"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[r.jsxs("div",{className:"text-center p-4 bg-white rounded-xl shadow-sm border border-slate-100",children:[r.jsx("div",{className:"text-2xl font-bold text-red-500 mb-1",children:t.leaveBalance.sick||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Sick Leave"})]}),r.jsxs("div",{className:"text-center p-4 bg-white rounded-xl shadow-sm border border-slate-100",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-500 mb-1",children:t.leaveBalance.casual||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Casual Leave"})]}),r.jsxs("div",{className:"text-center p-4 bg-white rounded-xl shadow-sm border border-slate-100",children:[r.jsx("div",{className:"text-2xl font-bold text-green-500 mb-1",children:t.leaveBalance.paid||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Paid Leave"})]}),r.jsxs("div",{className:"text-center p-4 bg-white rounded-xl shadow-sm border border-slate-100",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-500 mb-1",children:t.leaveBalance.other||0}),r.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Other Leave"})]})]})]})]}),r.jsx(Pu,{isOpen:h,onClose:()=>m(!1),onSuccess:O,token:n,addNotification:C}),r.jsx(Bu,{isOpen:p,onClose:()=>y(!1),onSuccess:B,attendanceData:t.attendance,token:n,addNotification:C}),r.jsx(XI,{isOpen:x,onClose:()=>v(!1),onSuccess:F,token:n,leaveBalance:t.leaveBalance,leaveTypes:w,addNotification:C})]})},ZI=()=>{const{token:n,user:e}=ls(),t=al(),[s,i]=_.useState(null),[l,c]=_.useState([]),[u,h]=_.useState(null),[m,p]=_.useState({}),[y,x]=_.useState(!0),[v,w]=_.useState(!1),[A,S]=_.useState(!1),[N,j]=_.useState(!1);_.useEffect(()=>{C(),R()},[]);const C=async()=>{try{w(!0);const[z,Z,W]=await Promise.all([ye.get("/dashboard/hr/stats"),ye.get("/dashboard/hr/attendance-log"),ye.get("/dashboard/hr/pending-approvals")]);i(z.data.data),c(Z.data.data),h(W.data.data)}catch(z){console.error("Error fetching HR dashboard data:",z),alert("Error loading dashboard data")}finally{x(!1),w(!1)}},R=async()=>{try{const z=await ye.get("/attendance/hr/today",{headers:{Authorization:`Bearer ${n}`}});p(z.data||{})}catch(z){console.error("Error fetching HR attendance:",z)}},D=z=>{p(z),S(!1)},O=z=>{p(z),j(!1)},B=async z=>{try{await ye.patch(`/dashboard/hr/approve-attendance/${z}`,{status:"approved"}),alert("Attendance approved!"),C(),R()}catch(Z){alert(Z.response?.data?.message||"Error approving attendance")}},F=async z=>{try{await ye.patch(`/dashboard/hr/approve-attendance/${z}`,{status:"rejected"}),alert("Attendance rejected!"),C(),R()}catch(Z){alert(Z.response?.data?.message||"Error rejecting attendance")}},I=()=>S(!0),ee=()=>j(!0);return y?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):r.jsxs("div",{className:"min-h-[80vh] p-6",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"HR Dashboard"}),r.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",e?.name,"! Here's your overview for today."]})]}),r.jsxs("button",{onClick:()=>{C(),R()},disabled:v,className:"bg-[#104774] text-white px-4 py-2 rounded-lg flex items-center disabled:opacity-50",children:[r.jsx(zi,{className:`w-4 h-4 mr-2 ${v?"animate-spin":""}`}),v?"Refreshing...":"Refresh Data"]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[r.jsxs("div",{onClick:()=>{m.checkIn?m.checkIn&&!m.checkOut&&ee():I()},className:"bg-gradient-to-r from-yellow-100 to-yellow-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 cursor-pointer flex flex-col h-[180px]",children:[r.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Your Attendance"}),r.jsx("span",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${m.status==="accepted"?"bg-green-100 text-green-700":m.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-700 text-yellow-200"}`,children:m.status?m.status.charAt(0).toUpperCase()+m.status.slice(1):"Not marked"})]}),r.jsxs("div",{className:"space-y-2 flex-grow overflow-y-auto pr-1 scrollbar-hide",children:[r.jsxs("div",{className:"text-sm text-slate-600 flex items-center",children:["Log In:"," ",r.jsx("span",{className:"font-medium text-slate-900 ml-1",children:m.checkIn?new Date(m.checkIn).toLocaleTimeString():"Not logged in"})]}),r.jsxs("div",{className:"text-sm text-slate-600 flex items-center",children:["Log Out:"," ",r.jsx("span",{className:"font-medium text-slate-900 ml-1",children:m.checkOut?new Date(m.checkOut).toLocaleTimeString():"Pending"})]})]}),r.jsx("div",{className:"text-center text-sm text-slate-700",children:m.checkOut?"Today's Session Ended":m.checkIn?"Click to Log Out":"Click to Mark Attendance"})]}),r.jsxs("div",{onClick:()=>t("/manage-employees"),className:"bg-gradient-to-r from-blue-100 to-blue-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 cursor-pointer",children:[r.jsx("div",{className:"mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Total Employees"})}),r.jsx("div",{className:"text-3xl font-bold text-slate-800 mb-2",children:s?.totalEmployees||0}),r.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Active"})]}),r.jsxs("div",{onClick:()=>t("/hr/leaves"),className:"bg-gradient-to-r from-orange-100 to-orange-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 cursor-pointer",children:[r.jsx("div",{className:"mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Pending Approvals"})}),r.jsxs("div",{className:"flex items-baseline mb-2",children:[r.jsx("span",{className:"text-3xl font-bold text-slate-800 mr-2",children:u?.leaveRequests||0}),r.jsx("span",{className:"text-lg text-slate-600",children:"Leave Requests"})]}),r.jsxs("div",{className:"flex items-baseline",children:[r.jsx("span",{className:"text-3xl font-bold text-slate-800 mr-2",children:u?.attendance||0}),r.jsx("span",{className:"text-lg text-slate-600",children:"Attendance"})]})]}),r.jsxs("div",{onClick:()=>t("/hr/payroll"),className:"bg-gradient-to-r from-green-100 to-green-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 cursor-pointer",children:[r.jsx("div",{className:"mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Payroll Processed"})}),r.jsxs("div",{className:"text-3xl font-bold text-slate-800 mb-2",children:[s?.processedPayroll||0,"/",s?.totalEmployees||0]}),r.jsx("p",{className:"text-sm text-slate-600",children:"This Month"})]}),r.jsxs("div",{className:"bg-gradient-to-r from-purple-100 to-purple-200 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 cursor-pointer",children:[r.jsx("div",{className:"mb-4",children:r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"New Joiners"})}),r.jsx("div",{className:"text-3xl font-bold text-slate-800 mb-2",children:s?.newJoiners||0}),r.jsx("p",{className:"text-sm text-slate-600",children:"This Week"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Log in/Out"}),r.jsx(mn,{className:"w-5 h-5 text-slate-400"})]}),r.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 shadow-sm",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{className:"bg-[#104774] text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Team"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Log in"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Log out"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Task"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Notes"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase tracking-wide",children:"Action"})]})}),r.jsx("tbody",{children:l.map((z,Z)=>r.jsxs("tr",{className:`${Z%2===0?"bg-white":"bg-slate-50"} hover:bg-slate-100 transition-colors`,children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:z.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.team}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.checkIn?new Date(z.checkIn).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.checkOut?new Date(z.checkOut).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.task||"-"}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.notes||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z.status==="Logged in"?"bg-green-100 text-green-700":z.status==="Pending"?"bg-yellow-100 text-yellow-700":z.status==="Rejected"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:z.status})}),r.jsx("td",{className:"px-4 py-3 flex gap-2",children:z.status==="Pending"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>B(z._id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-1 transition-colors",children:[r.jsx(Os,{className:"w-4 h-4"}),"Approve"]}),r.jsxs("button",{onClick:()=>F(z._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-1 transition-colors",children:[r.jsx(Nn,{className:"w-4 h-4"}),"Reject"]})]})})]},z._id||Z))})]})})]}),A&&r.jsx(Pu,{isOpen:A,onClose:()=>S(!1),onSuccess:D,token:n,addNotification:z=>alert(z),basePath:"/attendance/hr"}),N&&r.jsx(Bu,{isOpen:N,onClose:()=>j(!1),onSuccess:O,attendanceData:m,token:n,addNotification:z=>alert(z),basePath:"/attendance/hr"})]})},KI=()=>{const[n,e]=_.useState(null),[t,s]=_.useState([]),[i,l]=_.useState(!0),[c,u]=_.useState(!1),h=al();_.useEffect(()=>{m()},[]);const m=async()=>{try{u(!0);const[S,N]=await Promise.all([ye.get("/dashboard/admin/stats"),ye.get("/dashboard/admin/attendance-log")]);e(S.data.data),s(N.data.data)}catch(S){console.error("Error fetching admin dashboard data:",S),alert("Error loading dashboard data")}finally{l(!1),u(!1)}},p=async S=>{try{await ye.patch(`/dashboard/admin/approve-attendance/${S}`),m()}catch{alert("Error approving attendance")}},y=async S=>{try{await ye.patch(`/dashboard/admin/reject-attendance/${S}`),m()}catch{alert("Error rejecting attendance")}},x=()=>h("/admin/attendance"),v=()=>h("/admin/leaves"),w=()=>h("/admin/payroll-approval"),A=S=>S?new Date(S).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-";return i?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#104774]"})}):r.jsxs("div",{className:"min-h-[80vh] p-6",children:[r.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"System overview and management"})]}),r.jsxs("button",{onClick:m,disabled:c,className:"bg-[#104774] text-white px-4 py-2 rounded-lg flex items-center disabled:opacity-50",children:[r.jsx(zi,{className:`w-4 h-4 mr-2 ${c?"animate-spin":""}`}),c?"Refreshing...":"Refresh Data"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-100 to-blue-200 rounded-xl flex items-center justify-center mr-4",children:r.jsx(mn,{className:"w-6 h-6 text-blue-600"})}),r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Today's Attendance"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Present Today:"}),r.jsx("span",{className:"font-bold text-green-600",children:n?.attendance?.present||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Absent Today:"}),r.jsx("span",{className:"font-bold text-red-600",children:n?.attendance?.absent||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"On Leave:"}),r.jsx("span",{className:"font-bold text-orange-600",children:n?.attendance?.onLeave||0})]})]}),r.jsxs("button",{onClick:x,className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-2 px-4 rounded-xl font-medium flex items-center justify-center transition-all duration-300",children:["Go to Attendance",r.jsx(im,{className:"w-4 h-4 ml-2"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-100 to-green-200 rounded-xl flex items-center justify-center mr-4",children:r.jsx(Ks,{className:"w-6 h-6 text-green-600"})}),r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Leaves Summary"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Pending Leaves:"}),r.jsx("span",{className:"font-bold text-yellow-600",children:n?.leaves?.pending||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Approved:"}),r.jsx("span",{className:"font-bold text-green-600",children:n?.leaves?.approved||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Rejected:"}),r.jsx("span",{className:"font-bold text-red-600",children:n?.leaves?.rejected||0})]})]}),r.jsxs("button",{onClick:v,className:"w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-2 px-4 rounded-xl font-medium flex items-center justify-center transition-all duration-300",children:["Go to Leaves",r.jsx(im,{className:"w-4 h-4 ml-2"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-slate-200 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-100 to-purple-200 rounded-xl flex items-center justify-center mr-4",children:r.jsx(CT,{className:"w-6 h-6 text-purple-600"})}),r.jsx("h3",{className:"font-semibold text-slate-800 text-lg",children:"Payroll Summary"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Employees:"}),r.jsx("span",{className:"font-bold text-slate-800",children:n?.payroll?.employees||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Status:"}),r.jsx("span",{className:"font-bold text-blue-600",children:n?.payroll?.status||"Not available"})]})]}),r.jsxs("button",{onClick:w,className:"mt-auto w-full bg-[#104774] hover:bg-[#0d3a61] text-white py-2 px-4 rounded-xl font-medium flex items-center justify-center transition-all duration-300",children:["Go to Payroll",r.jsx(im,{className:"w-4 h-4 ml-2"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-slate-200 mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Log in/Out"}),r.jsx(mn,{className:"w-5 h-5 text-slate-400"})]}),r.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 shadow-sm",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{className:"bg-[#104774] text-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Name"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Team"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Login"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Logout"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Task"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Work Progress"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Logout Notes"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold uppercase",children:"Action"})]})}),r.jsx("tbody",{children:t.map((S,N)=>r.jsxs("tr",{className:`${N%2===0?"bg-white":"bg-slate-50"} hover:bg-slate-100`,children:[r.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:S.name}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:S.team}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:A(S.checkIn)}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:A(S.checkOut)}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:S.task||"-"}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:S.workProgress||"-"}),r.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:S.notes||"-"}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.status==="Logged in"?"bg-green-100 text-green-700":S.status==="Pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:S.status})}),r.jsx("td",{className:"px-4 py-3 flex gap-2",children:S.action==="Approve"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>p(S._id),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-1",children:[r.jsx(Os,{className:"w-4 h-4"})," Approve"]}),r.jsxs("button",{onClick:()=>y(S._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-md text-sm font-medium flex items-center gap-1",children:[r.jsx(Nn,{className:"w-4 h-4"})," Reject"]})]})})]},N))})]})})]})]})},JI=()=>{const[n,e]=_.useState(""),[t,s]=_.useState(""),[i,l]=_.useState(""),[c,u]=_.useState(""),[h,m]=_.useState(!1),[p,y]=_.useState(!1),[x,v]=_.useState(!1),[w,A]=_.useState(""),[S,N]=_.useState(""),[j,C]=_.useState(1),{requestPasswordReset:R,verifyOtp:D,resetPassword:O}=ls(),B=async z=>{if(z.preventDefault(),A(""),N(""),v(!0),!n){A("Please enter your email address"),v(!1);return}if(!n.includes("@")){A("Please enter a valid email address"),v(!1);return}try{await R(n),N("OTP has been sent to your email"),C(2)}catch(Z){A(Z.response?.data?.message||"Failed to send OTP")}finally{v(!1)}},F=async z=>{if(z.preventDefault(),A(""),N(""),v(!0),!t||t.length!==6){A("Please enter a valid 6-digit OTP"),v(!1);return}try{await D(n,t),N("OTP verified successfully"),C(3)}catch(Z){A(Z.response?.data?.message||"Invalid OTP")}finally{v(!1)}},I=async z=>{if(z.preventDefault(),A(""),N(""),v(!0),!i||!c){A("Please fill in all fields"),v(!1);return}if(i!==c){A("Passwords do not match"),v(!1);return}if(i.length<6){A("Password must be at least 6 characters long"),v(!1);return}try{await O(n,t,i),N("Password has been reset successfully"),setTimeout(()=>{window.location.href="/login"},2e3)}catch(Z){A(Z.response?.data?.message||"Failed to reset password")}finally{v(!1)}},ee=()=>{j===1?window.location.href="/login":(C(j-1),A(""),N(""))};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50 flex items-center justify-center px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 bg-[#104774] rounded-full flex items-center justify-center mb-4",children:r.jsx(Ur,{className:"h-8 w-8 text-white"})}),r.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:[j===1&&"Reset Your Password",j===2&&"Enter OTP",j===3&&"Create New Password"]}),r.jsxs("p",{className:"text-gray-600",children:[j===1&&"Enter your email to receive a verification code",j===2&&"Enter the 6-digit code sent to your email",j===3&&"Enter your new password"]})]}),r.jsxs("button",{onClick:ee,className:"flex items-center text-sm text-[#104774] hover:text-[#0d385d] font-medium transition-colors duration-200",children:[r.jsx(oT,{className:"h-4 w-4 mr-1"}),"Back"]}),r.jsx("div",{className:"bg-white py-8 px-6 shadow-xl rounded-xl border border-gray-100",children:r.jsxs("form",{onSubmit:j===1?B:j===2?F:I,className:"space-y-6",children:[w&&r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx(as,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-red-700",children:w})]}),S&&r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx(Os,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-green-700",children:S})]}),j===1&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(lA,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] focus:border-[#104774] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Enter your email",value:n,onChange:z=>e(z.target.value),disabled:x})]})]}),j===2&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Verification Code"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ur,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"otp",name:"otp",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"6",autoComplete:"one-time-code",required:!0,className:"appearance-none relative block w-full pl-10 pr-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] focus:border-[#104774] focus:z-10 sm:text-sm transition-colors duration-200 tracking-widest",placeholder:"Enter 6-digit code",value:t,onChange:z=>{const Z=z.target.value.replace(/\D/g,"");s(Z.slice(0,6))},disabled:x})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Enter the 6-digit code sent to ",n]})]}),j===3&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ur,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:h?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full pl-10 pr-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] focus:border-[#104774] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Enter new password",value:i,onChange:z=>l(z.target.value),disabled:x}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),disabled:x,children:h?r.jsx(Wm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):r.jsx(Co,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ur,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",autoComplete:"new-password",required:!0,className:"appearance-none relative block w-full pl-10 pr-10 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#104774] focus:border-[#104774] focus:z-10 sm:text-sm transition-colors duration-200",placeholder:"Confirm new password",value:c,onChange:z=>u(z.target.value),disabled:x}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!p),disabled:x,children:p?r.jsx(Wm,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):r.jsx(Co,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:x,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-[#104774] hover:bg-[#0d385d] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#104774] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 active:scale-95",children:x?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:j===1?"Sending OTP...":j===2?"Verifying...":"Resetting..."})]}):r.jsxs(r.Fragment,{children:[j===1&&"Send OTP",j===2&&"Verify OTP",j===3&&"Reset Password"]})})})]})}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",r.jsx("a",{href:"/login",className:"font-medium text-[#104774] hover:text-[#0d385d] transition-colors duration-200",children:"Sign in"})]})})]})})};function eP(){const{user:n,loading:e}=ls();return r.jsx(p_,{children:r.jsxs(Gj,{children:[r.jsx(yt,{path:"/login",element:r.jsx(ZT,{})}),r.jsx(yt,{path:"/forgot-password",element:r.jsx(JI,{})}),r.jsxs(yt,{path:"/admin",element:r.jsx(ym,{allowedRoles:["admin"],children:r.jsx(JT,{})}),children:[r.jsx(yt,{index:!0,element:r.jsx(r.Fragment,{children:r.jsx(KI,{})})}),r.jsx(yt,{path:"manage-employees",element:r.jsx(rv,{})}),r.jsx(yt,{path:"profile",element:r.jsx(xm,{})}),r.jsx(yt,{path:"calendar",element:r.jsx(Im,{})}),r.jsx(yt,{path:"leaves",element:r.jsx(DI,{})}),r.jsx(yt,{path:"attendance",element:r.jsx(HI,{})}),r.jsx(yt,{path:"payroll-approval",element:r.jsx(WI,{})})]}),r.jsxs(yt,{path:"/hr",element:r.jsx(ym,{allowedRoles:["hr"],children:r.jsx(eD,{})}),children:[r.jsx(yt,{index:!0,element:r.jsx(r.Fragment,{children:r.jsx(ZI,{})})}),r.jsx(yt,{path:"manage-employees",element:r.jsx(rv,{})}),r.jsx(yt,{path:"profile",element:r.jsx(xm,{})}),r.jsx(yt,{path:"calendar",element:r.jsx(Im,{})}),r.jsx(yt,{path:"leaves",element:r.jsx(S3,{})}),r.jsx(yt,{path:"attendance",element:r.jsx(II,{})}),r.jsx(yt,{path:"payroll",element:r.jsx(GI,{})})]}),r.jsxs(yt,{path:"/employee",element:r.jsx(ym,{allowedRoles:["employee"],children:r.jsx(tD,{})}),children:[r.jsx(yt,{index:!0,element:r.jsx(r.Fragment,{children:r.jsx(QI,{})})}),r.jsx(yt,{path:"profile",element:r.jsx(xm,{})}),r.jsx(yt,{path:"calendar",element:r.jsx(Im,{})}),r.jsx(yt,{path:"leaves",element:r.jsx(A3,{})}),r.jsx(yt,{path:"attendance",element:r.jsx(MI,{})}),r.jsx(yt,{path:"payslip",element:r.jsx(FI,{})})]}),r.jsx(yt,{path:"/",element:n===null&&e?r.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."}):n?n.role==="admin"?r.jsx(pa,{to:"/admin",replace:!0}):n.role==="hr"?r.jsx(pa,{to:"/hr",replace:!0}):r.jsx(pa,{to:"/employee",replace:!0}):r.jsx(pa,{to:"/login",replace:!0})}),r.jsx(yt,{path:"*",element:r.jsx(pa,{to:"/"})})]})})}ej.createRoot(document.getElementById("root")).render(r.jsx(_.StrictMode,{children:r.jsx(tT,{children:r.jsx(eP,{})})}));
